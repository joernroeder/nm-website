/**
 * almond 0.0.3 Copyright (c) 2011, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/almond for details
 */
/*jslint strict: false, plusplus: false */
/*global setTimeout: false */

var requirejs, require, define;
(function (undef) {

    var defined = {},
        waiting = {},
        aps = [].slice,
        main, req;

    if (typeof define === "function") {
        //If a define is already in play via another AMD loader,
        //do not overwrite.
        return;
    }

    /**
     * Given a relative module name, like ./something, normalize it to
     * a real name that can be mapped to a path.
     * @param {String} name the relative name
     * @param {String} baseName a real name that the name arg is relative
     * to.
     * @returns {String} normalized name
     */
    function normalize(name, baseName) {
        //Adjust any relative paths.
        if (name && name.charAt(0) === ".") {
            //If have a base name, try to normalize against it,
            //otherwise, assume it is a top-level require that will
            //be relative to baseUrl in the end.
            if (baseName) {
                //Convert baseName to array, and lop off the last part,
                //so that . matches that "directory" and not name of the baseName's
                //module. For instance, baseName of "one/two/three", maps to
                //"one/two/three.js", but we want the directory, "one/two" for
                //this normalization.
                baseName = baseName.split("/");
                baseName = baseName.slice(0, baseName.length - 1);

                name = baseName.concat(name.split("/"));

                //start trimDots
                var i, part;
                for (i = 0; (part = name[i]); i++) {
                    if (part === ".") {
                        name.splice(i, 1);
                        i -= 1;
                    } else if (part === "..") {
                        if (i === 1 && (name[2] === '..' || name[0] === '..')) {
                            //End of the line. Keep at least one non-dot
                            //path segment at the front so it can be mapped
                            //correctly to disk. Otherwise, there is likely
                            //no path mapping for a path starting with '..'.
                            //This can still fail, but catches the most reasonable
                            //uses of ..
                            break;
                        } else if (i > 0) {
                            name.splice(i - 1, 2);
                            i -= 2;
                        }
                    }
                }
                //end trimDots

                name = name.join("/");
            }
        }
        return name;
    }

    function makeRequire(relName, forceSync) {
        return function () {
            //A version of a require function that passes a moduleName
            //value for items that may need to
            //look up paths relative to the moduleName
            return req.apply(undef, aps.call(arguments, 0).concat([relName, forceSync]));
        };
    }

    function makeNormalize(relName) {
        return function (name) {
            return normalize(name, relName);
        };
    }

    function makeLoad(depName) {
        return function (value) {
            defined[depName] = value;
        };
    }

    function callDep(name) {
        if (waiting.hasOwnProperty(name)) {
            var args = waiting[name];
            delete waiting[name];
            main.apply(undef, args);
        }
        return defined[name];
    }

    /**
     * Makes a name map, normalizing the name, and using a plugin
     * for normalization if necessary. Grabs a ref to plugin
     * too, as an optimization.
     */
    function makeMap(name, relName) {
        var prefix, plugin,
            index = name.indexOf('!');

        if (index !== -1) {
            prefix = normalize(name.slice(0, index), relName);
            name = name.slice(index + 1);
            plugin = callDep(prefix);

            //Normalize according
            if (plugin && plugin.normalize) {
                name = plugin.normalize(name, makeNormalize(relName));
            } else {
                name = normalize(name, relName);
            }
        } else {
            name = normalize(name, relName);
        }

        //Using ridiculous property names for space reasons
        return {
            f: prefix ? prefix + '!' + name : name, //fullName
            n: name,
            p: plugin
        };
    }

    main = function (name, deps, callback, relName) {
        var args = [],
            usingExports,
            cjsModule, depName, i, ret, map;

        //Use name if no relName
        if (!relName) {
            relName = name;
        }

        //Call the callback to define the module, if necessary.
        if (typeof callback === 'function') {

            //Default to require, exports, module if no deps if
            //the factory arg has any arguments specified.
            if (!deps.length && callback.length) {
                deps = ['require', 'exports', 'module'];
            }

            //Pull out the defined dependencies and pass the ordered
            //values to the callback.
            for (i = 0; i < deps.length; i++) {
                map = makeMap(deps[i], relName);
                depName = map.f;

                //Fast path CommonJS standard dependencies.
                if (depName === "require") {
                    args[i] = makeRequire(name);
                } else if (depName === "exports") {
                    //CommonJS module spec 1.1
                    args[i] = defined[name] = {};
                    usingExports = true;
                } else if (depName === "module") {
                    //CommonJS module spec 1.1
                    cjsModule = args[i] = {
                        id: name,
                        uri: '',
                        exports: defined[name]
                    };
                } else if (defined.hasOwnProperty(depName) || waiting.hasOwnProperty(depName)) {
                    args[i] = callDep(depName);
                } else if (map.p) {
                    map.p.load(map.n, makeRequire(relName, true), makeLoad(depName), {});
                    args[i] = defined[depName];
                } else {
                    throw name + ' missing ' + depName;
                }
            }

            ret = callback.apply(defined[name], args);

            if (name) {
                //If setting exports via "module" is in play,
                //favor that over return value and exports. After that,
                //favor a non-undefined return value over exports use.
                if (cjsModule && cjsModule.exports !== undef) {
                    defined[name] = cjsModule.exports;
                } else if (!usingExports) {
                    //Use the return value from the function.
                    defined[name] = ret;
                }
            }
        } else if (name) {
            //May just be an object definition for the module. Only
            //worry about defining if have a module name.
            defined[name] = callback;
        }
    };

    requirejs = req = function (deps, callback, relName, forceSync) {
        if (typeof deps === "string") {

            //Just return the module wanted. In this scenario, the
            //deps arg is the module name, and second arg (if passed)
            //is just the relName.
            //Normalize module name, if it contains . or ..
            return callDep(makeMap(deps, callback).f);
        } else if (!deps.splice) {
            //deps is a config object, not an array.
            //Drop the config stuff on the ground.
            if (callback.splice) {
                //callback is an array, which means it is a dependency list.
                //Adjust args if there are dependencies
                deps = callback;
                callback = arguments[2];
            } else {
                deps = [];
            }
        }

        //Simulate async callback;
        if (forceSync) {
            main(undef, deps, callback, relName);
        } else {
            setTimeout(function () {
                main(undef, deps, callback, relName);
            }, 15);
        }

        return req;
    };

    /**
     * Just drops the config on the floor, but returns req in case
     * the config return value is used.
     */
    req.config = function () {
        return req;
    };

    /**
     * Export require as a global, but only if it does not already exist.
     */
    if (!require) {
        require = req;
    }

    define = function (name, deps, callback) {

        //This module may not have dependencies
        if (!deps.splice) {
            //deps is not an array, so probably means
            //an object literal or factory function for
            //the value. Adjust args.
            callback = deps;
            deps = [];
        }

        if (define.unordered) {
            waiting[name] = [name, deps, callback];
        } else {
            main(name, deps, callback);
        }
    };

    define.amd = {
        jQuery: true
    };
}());

/*!
 * jQuery JavaScript Library v1.10.2
 * http://jquery.com/
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 *
 * Copyright 2005, 2013 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2013-07-03T13:48Z
 */

/*!
 * Sizzle CSS Selector Engine v1.10.2
 * http://sizzlejs.com/
 *
 * Copyright 2013 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2013-07-03
 */

//     Underscore.js 1.5.0
//     http://underscorejs.org
//     (c) 2009-2011 Jeremy Ashkenas, DocumentCloud Inc.
//     (c) 2011-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
//     Underscore may be freely distributed under the MIT license.

//     (c) 2010-2013 Jeremy Ashkenas, DocumentCloud Inc.
//     Backbone may be freely distributed under the MIT license.
//     For all details and documentation:
//     http://backbonejs.org

/*

Copyright (C) 2011 by Yehuda Katz

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.

*/

/*!
 * backbone.layoutmanager.js v0.8.8
 * Copyright 2013, Tim Branyen (@tbranyen)
 * backbone.layoutmanager.js may be freely distributed under the MIT license.
 */

/*! matchMedia() polyfill - Test a CSS media type/query in JS. Authors & copyright (c) 2012: Scott Jehl, Paul Irish, Nicholas Zakas. Dual MIT/BSD license */

/*! Picturefill - Responsive Images that work today. (and mimic the proposed Picture element with divs). Author: Scott Jehl, Filament Group, 2012 | License: MIT/GPLv2 */

/*!
 * jQuery UI Core 1.10.3
 * http://jqueryui.com
 *
 * Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/category/ui-core/
 */

/*!
 * jQuery UI Widget 1.10.3
 * http://jqueryui.com
 *
 * Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/jQuery.widget/
 */

/*!
 * jQuery UI Autocomplete 1.10.3
 * http://jqueryui.com
 *
 * Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/autocomplete/
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.widget.js
 *	jquery.ui.position.js
 *	jquery.ui.menu.js
 */

/*!
 * jQuery UI Menu 1.10.3
 * http://jqueryui.com
 *
 * Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/menu/
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.widget.js
 *	jquery.ui.position.js
 */

/** @license VisualSearch.js 0.4.0
 *  (c) 2011 Samuel Clay, @samuelclay, DocumentCloud Inc.
 *  VisualSearch.js may be freely distributed under the MIT license.
 *  For all details and documentation:
 *  http://documentcloud.github.com/visualsearch
 */

/**
 * jQuery list plug-in 1.2.4
 * Copyright 2012, Digital Fusion
 * Licensed under the MIT license.
 * http://teamdf.com/jquery-plugins/license/
 *
 * @author Sam Sehnert, Phil Taylor
 */

/*
 *	Tabby jQuery plugin version 0.12
 *
 *	Ted Devito - http://teddevito.com/demos/textarea.html
 *
 *	Copyright (c) 2009 Ted Devito
 *	 
 *	Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following 
 *	conditions are met:
 *	
 *		1. Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
 *		2. Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer  
 *			in the documentation and/or other materials provided with the distribution.
 *		3. The name of the author may not be used to endorse or promote products derived from this software without specific prior written 
 *			permission. 
 *	 
 *	THIS SOFTWARE IS PROVIDED BY THE AUTHOR ``AS IS'' AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE 
 *	IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE AUTHOR BE 
 *	LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, 
 *	PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY 
 *	THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT 
 *	OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 */

/**
 * marked - a markdown parser
 * Copyright (c) 2011-2013, Christopher Jeffrey. (MIT Licensed)
 * https://github.com/chjj/marked
 */

/*
 * qTip2 - Pretty powerful tooltips - v2.0.1-101
 * http://qtip2.com
 *
 * Copyright (c) 2013 Craig Michael Thompson
 * Released under the MIT, GPL licenses
 * http://jquery.org/license
 *
 * Date: Thu Jun 20 2013 12:59 GMT+0200+0200
 * Plugins: viewport
 * Styles: basic css3
 */

/*!
 * jQuery imagesLoaded plugin v2.1.1
 * http://github.com/desandro/imagesloaded
 *
 * MIT License. by Paul Irish et al.
 */

/**
 *  Zebra_DatePicker
 *
 *  Zebra_DatePicker is a small, compact and highly configurable date picker plugin for jQuery
 *
 *  Visit {@link http://stefangabos.ro/jquery/zebra-datepicker/} for more information.
 *
 *  For more resources visit {@link http://stefangabos.ro/}
 *
 *  @author     Stefan Gabos <contact@stefangabos.ro>
 *  @version    1.7.7 (last revision: May 26, 2013)
 *  @copyright  (c) 2011 - 2013 Stefan Gabos
 *  @license    http://www.gnu.org/licenses/lgpl-3.0.txt GNU LESSER GENERAL PUBLIC LICENSE
 *  @package    Zebra_DatePicker
 */

/*!
 * getStyleProperty by kangax
 * http://perfectionkills.com/feature-testing-css-properties/
 */

/*!
 * classie - class helper functions
 * from bonzo https://github.com/ded/bonzo
 * 
 * classie.has( elem, 'my-class' ) -> true/false
 * classie.add( elem, 'my-new-class' )
 * classie.remove( elem, 'my-unwanted-class' )
 * classie.toggle( elem, 'my-class' )
 */

/*!
 * eventie v1.0.3
 * event binding helper
 *   eventie.bind( elem, 'click', myFn )
 *   eventie.unbind( elem, 'click', myFn )
 */

/*!
 * docReady
 * Cross browser DOMContentLoaded event emitter
 */

/*!
 * EventEmitter v4.2.4 - git.io/ee
 * Oliver Caldwell
 * MIT license
 * @preserve
 */

/*!
 * Outlayer v1.1.8
 * the brains and guts of a layout library
 */

/*!
 * Packery v1.1.1
 * bin-packing layout library
 * http://packery.metafizzy.co
 *
 * Commercial use requires one-time purchase of a commercial license
 * http://packery.metafizzy.co/license.html
 *
 * Non-commercial use is licensed under the GPL v3 License
 *
 * Copyright 2013 Metafizzy
 */

(function(e,t){function H(e){var t=e.length,n=w.type(e);return w.isWindow(e)?!1:e.nodeType===1&&t?!0:n==="array"||n!=="function"&&(t===0||typeof t=="number"&&t>0&&t-1 in e)}function j(e){var t=B[e]={};return w.each(e.match(S)||[],function(e,n){t[n]=!0}),t}function q(e,n,r,i){if(!w.acceptData(e))return;var s,o,u=w.expando,a=e.nodeType,f=a?w.cache:e,l=a?e[u]:e[u]&&u;if((!l||!f[l]||!i&&!f[l].data)&&r===t&&typeof n=="string")return;l||(a?l=e[u]=c.pop()||w.guid++:l=u),f[l]||(f[l]=a?{}:{toJSON:w.noop});if(typeof n=="object"||typeof n=="function")i?f[l]=w.extend(f[l],n):f[l].data=w.extend(f[l].data,n);return o=f[l],i||(o.data||(o.data={}),o=o.data),r!==t&&(o[w.camelCase(n)]=r),typeof n=="string"?(s=o[n],s==null&&(s=o[w.camelCase(n)])):s=o,s}function R(e,t,n){if(!w.acceptData(e))return;var r,i,s=e.nodeType,o=s?w.cache:e,u=s?e[w.expando]:w.expando;if(!o[u])return;if(t){r=n?o[u]:o[u].data;if(r){w.isArray(t)?t=t.concat(w.map(t,w.camelCase)):t in r?t=[t]:(t=w.camelCase(t),t in r?t=[t]:t=t.split(" ")),i=t.length;while(i--)delete r[t[i]];if(n?!z(r):!w.isEmptyObject(r))return}}if(!n){delete o[u].data;if(!z(o[u]))return}s?w.cleanData([e],!0):w.support.deleteExpando||o!=o.window?delete o[u]:o[u]=null}function U(e,n,r){if(r===t&&e.nodeType===1){var i="data-"+n.replace(I,"-$1").toLowerCase();r=e.getAttribute(i);if(typeof r=="string"){try{r=r==="true"?!0:r==="false"?!1:r==="null"?null:+r+""===r?+r:F.test(r)?w.parseJSON(r):r}catch(s){}w.data(e,n,r)}else r=t}return r}function z(e){var t;for(t in e){if(t==="data"&&w.isEmptyObject(e[t]))continue;if(t!=="toJSON")return!1}return!0}function it(){return!0}function st(){return!1}function ot(){try{return o.activeElement}catch(e){}}function ct(e,t){do e=e[t];while(e&&e.nodeType!==1);return e}function ht(e,t,n){if(w.isFunction(t))return w.grep(e,function(e,r){return!!t.call(e,r,e)!==n});if(t.nodeType)return w.grep(e,function(e){return e===t!==n});if(typeof t=="string"){if(ut.test(t))return w.filter(t,e,n);t=w.filter(t,e)}return w.grep(e,function(e){return w.inArray(e,t)>=0!==n})}function pt(e){var t=dt.split("|"),n=e.createDocumentFragment();if(n.createElement)while(t.length)n.createElement(t.pop());return n}function Mt(e,t){return w.nodeName(e,"table")&&w.nodeName(t.nodeType===1?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function _t(e){return e.type=(w.find.attr(e,"type")!==null)+"/"+e.type,e}function Dt(e){var t=Ct.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function Pt(e,t){var n,r=0;for(;(n=e[r])!=null;r++)w._data(n,"globalEval",!t||w._data(t[r],"globalEval"))}function Ht(e,t){if(t.nodeType!==1||!w.hasData(e))return;var n,r,i,s=w._data(e),o=w._data(t,s),u=s.events;if(u){delete o.handle,o.events={};for(n in u)for(r=0,i=u[n].length;r<i;r++)w.event.add(t,n,u[n][r])}o.data&&(o.data=w.extend({},o.data))}function Bt(e,t){var n,r,i;if(t.nodeType!==1)return;n=t.nodeName.toLowerCase();if(!w.support.noCloneEvent&&t[w.expando]){i=w._data(t);for(r in i.events)w.removeEvent(t,r,i.handle);t.removeAttribute(w.expando)}if(n==="script"&&t.text!==e.text)_t(t).text=e.text,Dt(t);else if(n==="object")t.parentNode&&(t.outerHTML=e.outerHTML),w.support.html5Clone&&e.innerHTML&&!w.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML);else if(n==="input"&&xt.test(e.type))t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value);else if(n==="option")t.defaultSelected=t.selected=e.defaultSelected;else if(n==="input"||n==="textarea")t.defaultValue=e.defaultValue}function jt(e,n){var r,s,o=0,u=typeof e.getElementsByTagName!==i?e.getElementsByTagName(n||"*"):typeof e.querySelectorAll!==i?e.querySelectorAll(n||"*"):t;if(!u)for(u=[],r=e.childNodes||e;(s=r[o])!=null;o++)!n||w.nodeName(s,n)?u.push(s):w.merge(u,jt(s,n));return n===t||n&&w.nodeName(e,n)?w.merge([e],u):u}function Ft(e){xt.test(e.type)&&(e.defaultChecked=e.checked)}function tn(e,t){if(t in e)return t;var n=t.charAt(0).toUpperCase()+t.slice(1),r=t,i=en.length;while(i--){t=en[i]+n;if(t in e)return t}return r}function nn(e,t){return e=t||e,w.css(e,"display")==="none"||!w.contains(e.ownerDocument,e)}function rn(e,t){var n,r,i,s=[],o=0,u=e.length;for(;o<u;o++){r=e[o];if(!r.style)continue;s[o]=w._data(r,"olddisplay"),n=r.style.display,t?(!s[o]&&n==="none"&&(r.style.display=""),r.style.display===""&&nn(r)&&(s[o]=w._data(r,"olddisplay",an(r.nodeName)))):s[o]||(i=nn(r),(n&&n!=="none"||!i)&&w._data(r,"olddisplay",i?n:w.css(r,"display")))}for(o=0;o<u;o++){r=e[o];if(!r.style)continue;if(!t||r.style.display==="none"||r.style.display==="")r.style.display=t?s[o]||"":"none"}return e}function sn(e,t,n){var r=$t.exec(t);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):t}function on(e,t,n,r,i){var s=n===(r?"border":"content")?4:t==="width"?1:0,o=0;for(;s<4;s+=2)n==="margin"&&(o+=w.css(e,n+Zt[s],!0,i)),r?(n==="content"&&(o-=w.css(e,"padding"+Zt[s],!0,i)),n!=="margin"&&(o-=w.css(e,"border"+Zt[s]+"Width",!0,i))):(o+=w.css(e,"padding"+Zt[s],!0,i),n!=="padding"&&(o+=w.css(e,"border"+Zt[s]+"Width",!0,i)));return o}function un(e,t,n){var r=!0,i=t==="width"?e.offsetWidth:e.offsetHeight,s=qt(e),o=w.support.boxSizing&&w.css(e,"boxSizing",!1,s)==="border-box";if(i<=0||i==null){i=Rt(e,t,s);if(i<0||i==null)i=e.style[t];if(Jt.test(i))return i;r=o&&(w.support.boxSizingReliable||i===e.style[t]),i=parseFloat(i)||0}return i+on(e,t,n||(o?"border":"content"),r,s)+"px"}function an(e){var t=o,n=Qt[e];if(!n){n=fn(e,t);if(n==="none"||!n)It=(It||w("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(t.documentElement),t=(It[0].contentWindow||It[0].contentDocument).document,t.write("<!doctype html><html><body>"),t.close(),n=fn(e,t),It.detach();Qt[e]=n}return n}function fn(e,t){var n=w(t.createElement(e)).appendTo(t.body),r=w.css(n[0],"display");return n.remove(),r}function vn(e,t,n,r){var i;if(w.isArray(t))w.each(t,function(t,i){n||cn.test(e)?r(e,i):vn(e+"["+(typeof i=="object"?t:"")+"]",i,n,r)});else if(!n&&w.type(t)==="object")for(i in t)vn(e+"["+i+"]",t[i],n,r);else r(e,t)}function _n(e){return function(t,n){typeof t!="string"&&(n=t,t="*");var r,i=0,s=t.toLowerCase().match(S)||[];if(w.isFunction(n))while(r=s[i++])r[0]==="+"?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function Dn(e,t,n,r){function o(u){var a;return i[u]=!0,w.each(e[u]||[],function(e,u){var f=u(t,n,r);if(typeof f=="string"&&!s&&!i[f])return t.dataTypes.unshift(f),o(f),!1;if(s)return!(a=f)}),a}var i={},s=e===An;return o(t.dataTypes[0])||!i["*"]&&o("*")}function Pn(e,n){var r,i,s=w.ajaxSettings.flatOptions||{};for(i in n)n[i]!==t&&((s[i]?e:r||(r={}))[i]=n[i]);return r&&w.extend(!0,e,r),e}function Hn(e,n,r){var i,s,o,u,a=e.contents,f=e.dataTypes;while(f[0]==="*")f.shift(),s===t&&(s=e.mimeType||n.getResponseHeader("Content-Type"));if(s)for(u in a)if(a[u]&&a[u].test(s)){f.unshift(u);break}if(f[0]in r)o=f[0];else{for(u in r){if(!f[0]||e.converters[u+" "+f[0]]){o=u;break}i||(i=u)}o=o||i}if(o)return o!==f[0]&&f.unshift(o),r[o]}function Bn(e,t,n,r){var i,s,o,u,a,f={},l=e.dataTypes.slice();if(l[1])for(o in e.converters)f[o.toLowerCase()]=e.converters[o];s=l.shift();while(s){e.responseFields[s]&&(n[e.responseFields[s]]=t),!a&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),a=s,s=l.shift();if(s)if(s==="*")s=a;else if(a!=="*"&&a!==s){o=f[a+" "+s]||f["* "+s];if(!o)for(i in f){u=i.split(" ");if(u[1]===s){o=f[a+" "+u[0]]||f["* "+u[0]];if(o){o===!0?o=f[i]:f[i]!==!0&&(s=u[0],l.unshift(u[1]));break}}}if(o!==!0)if(o&&e["throws"])t=o(t);else try{t=o(t)}catch(c){return{state:"parsererror",error:o?c:"No conversion from "+a+" to "+s}}}}return{state:"success",data:t}}function zn(){try{return new e.XMLHttpRequest}catch(t){}}function Wn(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function Yn(){return setTimeout(function(){Xn=t}),Xn=w.now()}function Zn(e,t,n){var r,i=(Gn[t]||[]).concat(Gn["*"]),s=0,o=i.length;for(;s<o;s++)if(r=i[s].call(n,t,e))return r}function er(e,t,n){var r,i,s=0,o=Qn.length,u=w.Deferred().always(function(){delete a.elem}),a=function(){if(i)return!1;var t=Xn||Yn(),n=Math.max(0,f.startTime+f.duration-t),r=n/f.duration||0,s=1-r,o=0,a=f.tweens.length;for(;o<a;o++)f.tweens[o].run(s);return u.notifyWith(e,[f,s,n]),s<1&&a?n:(u.resolveWith(e,[f]),!1)},f=u.promise({elem:e,props:w.extend({},t),opts:w.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:Xn||Yn(),duration:n.duration,tweens:[],createTween:function(t,n){var r=w.Tween(e,f.opts,t,n,f.opts.specialEasing[t]||f.opts.easing);return f.tweens.push(r),r},stop:function(t){var n=0,r=t?f.tweens.length:0;if(i)return this;i=!0;for(;n<r;n++)f.tweens[n].run(1);return t?u.resolveWith(e,[f,t]):u.rejectWith(e,[f,t]),this}}),l=f.props;tr(l,f.opts.specialEasing);for(;s<o;s++){r=Qn[s].call(f,e,l,f.opts);if(r)return r}return w.map(l,Zn,f),w.isFunction(f.opts.start)&&f.opts.start.call(e,f),w.fx.timer(w.extend(a,{elem:e,anim:f,queue:f.opts.queue})),f.progress(f.opts.progress).done(f.opts.done,f.opts.complete).fail(f.opts.fail).always(f.opts.always)}function tr(e,t){var n,r,i,s,o;for(n in e){r=w.camelCase(n),i=t[r],s=e[n],w.isArray(s)&&(i=s[1],s=e[n]=s[0]),n!==r&&(e[r]=s,delete e[n]),o=w.cssHooks[r];if(o&&"expand"in o){s=o.expand(s),delete e[r];for(n in s)n in e||(e[n]=s[n],t[n]=i)}else t[r]=i}}function nr(e,t,n){var r,i,s,o,u,a,f=this,l={},c=e.style,h=e.nodeType&&nn(e),p=w._data(e,"fxshow");n.queue||(u=w._queueHooks(e,"fx"),u.unqueued==null&&(u.unqueued=0,a=u.empty.fire,u.empty.fire=function(){u.unqueued||a()}),u.unqueued++,f.always(function(){f.always(function(){u.unqueued--,w.queue(e,"fx").length||u.empty.fire()})})),e.nodeType===1&&("height"in t||"width"in t)&&(n.overflow=[c.overflow,c.overflowX,c.overflowY],w.css(e,"display")==="inline"&&w.css(e,"float")==="none"&&(!w.support.inlineBlockNeedsLayout||an(e.nodeName)==="inline"?c.display="inline-block":c.zoom=1)),n.overflow&&(c.overflow="hidden",w.support.shrinkWrapBlocks||f.always(function(){c.overflow=n.overflow[0],c.overflowX=n.overflow[1],c.overflowY=n.overflow[2]}));for(r in t){i=t[r];if($n.exec(i)){delete t[r],s=s||i==="toggle";if(i===(h?"hide":"show"))continue;l[r]=p&&p[r]||w.style(e,r)}}if(!w.isEmptyObject(l)){p?"hidden"in p&&(h=p.hidden):p=w._data(e,"fxshow",{}),s&&(p.hidden=!h),h?w(e).show():f.done(function(){w(e).hide()}),f.done(function(){var t;w._removeData(e,"fxshow");for(t in l)w.style(e,t,l[t])});for(r in l)o=Zn(h?p[r]:0,r,f),r in p||(p[r]=o.start,h&&(o.end=o.start,o.start=r==="width"||r==="height"?1:0))}}function rr(e,t,n,r,i){return new rr.prototype.init(e,t,n,r,i)}function ir(e,t){var n,r={height:e},i=0;t=t?1:0;for(;i<4;i+=2-t)n=Zt[i],r["margin"+n]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}function sr(e){return w.isWindow(e)?e:e.nodeType===9?e.defaultView||e.parentWindow:!1}var n,r,i=typeof t,s=e.location,o=e.document,u=o.documentElement,a=e.jQuery,f=e.$,l={},c=[],h="1.10.2",p=c.concat,d=c.push,v=c.slice,m=c.indexOf,g=l.toString,y=l.hasOwnProperty,b=h.trim,w=function(e,t){return new w.fn.init(e,t,r)},E=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,S=/\S+/g,x=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,T=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,N=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,C=/^[\],:{}\s]*$/,k=/(?:^|:|,)(?:\s*\[)+/g,L=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,A=/"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g,O=/^-ms-/,M=/-([\da-z])/gi,_=function(e,t){return t.toUpperCase()},D=function(e){if(o.addEventListener||e.type==="load"||o.readyState==="complete")P(),w.ready()},P=function(){o.addEventListener?(o.removeEventListener("DOMContentLoaded",D,!1),e.removeEventListener("load",D,!1)):(o.detachEvent("onreadystatechange",D),e.detachEvent("onload",D))};w.fn=w.prototype={jquery:h,constructor:w,init:function(e,n,r){var i,s;if(!e)return this;if(typeof e=="string"){e.charAt(0)==="<"&&e.charAt(e.length-1)===">"&&e.length>=3?i=[null,e,null]:i=T.exec(e);if(i&&(i[1]||!n)){if(i[1]){n=n instanceof w?n[0]:n,w.merge(this,w.parseHTML(i[1],n&&n.nodeType?n.ownerDocument||n:o,!0));if(N.test(i[1])&&w.isPlainObject(n))for(i in n)w.isFunction(this[i])?this[i](n[i]):this.attr(i,n[i]);return this}s=o.getElementById(i[2]);if(s&&s.parentNode){if(s.id!==i[2])return r.find(e);this.length=1,this[0]=s}return this.context=o,this.selector=e,this}return!n||n.jquery?(n||r).find(e):this.constructor(n).find(e)}return e.nodeType?(this.context=this[0]=e,this.length=1,this):w.isFunction(e)?r.ready(e):(e.selector!==t&&(this.selector=e.selector,this.context=e.context),w.makeArray(e,this))},selector:"",length:0,toArray:function(){return v.call(this)},get:function(e){return e==null?this.toArray():e<0?this[this.length+e]:this[e]},pushStack:function(e){var t=w.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return w.each(this,e,t)},ready:function(e){return w.ready.promise().done(e),this},slice:function(){return this.pushStack(v.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},map:function(e){return this.pushStack(w.map(this,function(t,n){return e.call(t,n,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:d,sort:[].sort,splice:[].splice},w.fn.init.prototype=w.fn,w.extend=w.fn.extend=function(){var e,n,r,i,s,o,u=arguments[0]||{},a=1,f=arguments.length,l=!1;typeof u=="boolean"&&(l=u,u=arguments[1]||{},a=2),typeof u!="object"&&!w.isFunction(u)&&(u={}),f===a&&(u=this,--a);for(;a<f;a++)if((s=arguments[a])!=null)for(i in s){e=u[i],r=s[i];if(u===r)continue;l&&r&&(w.isPlainObject(r)||(n=w.isArray(r)))?(n?(n=!1,o=e&&w.isArray(e)?e:[]):o=e&&w.isPlainObject(e)?e:{},u[i]=w.extend(l,o,r)):r!==t&&(u[i]=r)}return u},w.extend({expando:"jQuery"+(h+Math.random()).replace(/\D/g,""),noConflict:function(t){return e.$===w&&(e.$=f),t&&e.jQuery===w&&(e.jQuery=a),w},isReady:!1,readyWait:1,holdReady:function(e){e?w.readyWait++:w.ready(!0)},ready:function(e){if(e===!0?--w.readyWait:w.isReady)return;if(!o.body)return setTimeout(w.ready);w.isReady=!0;if(e!==!0&&--w.readyWait>0)return;n.resolveWith(o,[w]),w.fn.trigger&&w(o).trigger("ready").off("ready")},isFunction:function(e){return w.type(e)==="function"},isArray:Array.isArray||function(e){return w.type(e)==="array"},isWindow:function(e){return e!=null&&e==e.window},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return e==null?String(e):typeof e=="object"||typeof e=="function"?l[g.call(e)]||"object":typeof e},isPlainObject:function(e){var n;if(!e||w.type(e)!=="object"||e.nodeType||w.isWindow(e))return!1;try{if(e.constructor&&!y.call(e,"constructor")&&!y.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(r){return!1}if(w.support.ownLast)for(n in e)return y.call(e,n);for(n in e);return n===t||y.call(e,n)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},error:function(e){throw new Error(e)},parseHTML:function(e,t,n){if(!e||typeof e!="string")return null;typeof t=="boolean"&&(n=t,t=!1),t=t||o;var r=N.exec(e),i=!n&&[];return r?[t.createElement(r[1])]:(r=w.buildFragment([e],t,i),i&&w(i).remove(),w.merge([],r.childNodes))},parseJSON:function(t){if(e.JSON&&e.JSON.parse)return e.JSON.parse(t);if(t===null)return t;if(typeof t=="string"){t=w.trim(t);if(t&&C.test(t.replace(L,"@").replace(A,"]").replace(k,"")))return(new Function("return "+t))()}w.error("Invalid JSON: "+t)},parseXML:function(n){var r,i;if(!n||typeof n!="string")return null;try{e.DOMParser?(i=new DOMParser,r=i.parseFromString(n,"text/xml")):(r=new ActiveXObject("Microsoft.XMLDOM"),r.async="false",r.loadXML(n))}catch(s){r=t}return(!r||!r.documentElement||r.getElementsByTagName("parsererror").length)&&w.error("Invalid XML: "+n),r},noop:function(){},globalEval:function(t){t&&w.trim(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(O,"ms-").replace(M,_)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,n){var r,i=0,s=e.length,o=H(e);if(n)if(o)for(;i<s;i++){r=t.apply(e[i],n);if(r===!1)break}else for(i in e){r=t.apply(e[i],n);if(r===!1)break}else if(o)for(;i<s;i++){r=t.call(e[i],i,e[i]);if(r===!1)break}else for(i in e){r=t.call(e[i],i,e[i]);if(r===!1)break}return e},trim:b&&!b.call("﻿ ")?function(e){return e==null?"":b.call(e)}:function(e){return e==null?"":(e+"").replace(x,"")},makeArray:function(e,t){var n=t||[];return e!=null&&(H(Object(e))?w.merge(n,typeof e=="string"?[e]:e):d.call(n,e)),n},inArray:function(e,t,n){var r;if(t){if(m)return m.call(t,e,n);r=t.length,n=n?n<0?Math.max(0,r+n):n:0;for(;n<r;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,n){var r=n.length,i=e.length,s=0;if(typeof r=="number")for(;s<r;s++)e[i++]=n[s];else while(n[s]!==t)e[i++]=n[s++];return e.length=i,e},grep:function(e,t,n){var r,i=[],s=0,o=e.length;n=!!n;for(;s<o;s++)r=!!t(e[s],s),n!==r&&i.push(e[s]);return i},map:function(e,t,n){var r,i=0,s=e.length,o=H(e),u=[];if(o)for(;i<s;i++)r=t(e[i],i,n),r!=null&&(u[u.length]=r);else for(i in e)r=t(e[i],i,n),r!=null&&(u[u.length]=r);return p.apply([],u)},guid:1,proxy:function(e,n){var r,i,s;return typeof n=="string"&&(s=e[n],n=e,e=s),w.isFunction(e)?(r=v.call(arguments,2),i=function(){return e.apply(n||this,r.concat(v.call(arguments)))},i.guid=e.guid=e.guid||w.guid++,i):t},access:function(e,n,r,i,s,o,u){var a=0,f=e.length,l=r==null;if(w.type(r)==="object"){s=!0;for(a in r)w.access(e,n,a,r[a],!0,o,u)}else if(i!==t){s=!0,w.isFunction(i)||(u=!0),l&&(u?(n.call(e,i),n=null):(l=n,n=function(e,t,n){return l.call(w(e),n)}));if(n)for(;a<f;a++)n(e[a],r,u?i:i.call(e[a],a,n(e[a],r)))}return s?e:l?n.call(e):f?n(e[0],r):o},now:function(){return(new Date).getTime()},swap:function(e,t,n,r){var i,s,o={};for(s in t)o[s]=e.style[s],e.style[s]=t[s];i=n.apply(e,r||[]);for(s in t)e.style[s]=o[s];return i}}),w.ready.promise=function(t){if(!n){n=w.Deferred();if(o.readyState==="complete")setTimeout(w.ready);else if(o.addEventListener)o.addEventListener("DOMContentLoaded",D,!1),e.addEventListener("load",D,!1);else{o.attachEvent("onreadystatechange",D),e.attachEvent("onload",D);var r=!1;try{r=e.frameElement==null&&o.documentElement}catch(i){}r&&r.doScroll&&function s(){if(!w.isReady){try{r.doScroll("left")}catch(e){return setTimeout(s,50)}P(),w.ready()}}()}}return n.promise(t)},w.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){l["[object "+t+"]"]=t.toLowerCase()}),r=w(o),function(e,t){function ot(e,t,n,i){var s,o,u,a,f,l,p,m,g,w;(t?t.ownerDocument||t:E)!==h&&c(t),t=t||h,n=n||[];if(!e||typeof e!="string")return n;if((a=t.nodeType)!==1&&a!==9)return[];if(d&&!i){if(s=Z.exec(e))if(u=s[1]){if(a===9){o=t.getElementById(u);if(!o||!o.parentNode)return n;if(o.id===u)return n.push(o),n}else if(t.ownerDocument&&(o=t.ownerDocument.getElementById(u))&&y(t,o)&&o.id===u)return n.push(o),n}else{if(s[2])return H.apply(n,t.getElementsByTagName(e)),n;if((u=s[3])&&r.getElementsByClassName&&t.getElementsByClassName)return H.apply(n,t.getElementsByClassName(u)),n}if(r.qsa&&(!v||!v.test(e))){m=p=b,g=t,w=a===9&&e;if(a===1&&t.nodeName.toLowerCase()!=="object"){l=mt(e),(p=t.getAttribute("id"))?m=p.replace(nt,"\\$&"):t.setAttribute("id",m),m="[id='"+m+"'] ",f=l.length;while(f--)l[f]=m+gt(l[f]);g=$.test(e)&&t.parentNode||t,w=l.join(",")}if(w)try{return H.apply(n,g.querySelectorAll(w)),n}catch(S){}finally{p||t.removeAttribute("id")}}}return Nt(e.replace(W,"$1"),t,n,i)}function ut(){function t(n,r){return e.push(n+=" ")>s.cacheLength&&delete t[e.shift()],t[n]=r}var e=[];return t}function at(e){return e[b]=!0,e}function ft(e){var t=h.createElement("div");try{return!!e(t)}catch(n){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function lt(e,t){var n=e.split("|"),r=e.length;while(r--)s.attrHandle[n[r]]=t}function ct(e,t){var n=t&&e,r=n&&e.nodeType===1&&t.nodeType===1&&(~t.sourceIndex||O)-(~e.sourceIndex||O);if(r)return r;if(n)while(n=n.nextSibling)if(n===t)return-1;return e?1:-1}function ht(e){return function(t){var n=t.nodeName.toLowerCase();return n==="input"&&t.type===e}}function pt(e){return function(t){var n=t.nodeName.toLowerCase();return(n==="input"||n==="button")&&t.type===e}}function dt(e){return at(function(t){return t=+t,at(function(n,r){var i,s=e([],n.length,t),o=s.length;while(o--)n[i=s[o]]&&(n[i]=!(r[i]=n[i]))})})}function vt(){}function mt(e,t){var n,r,i,o,u,a,f,l=N[e+" "];if(l)return t?0:l.slice(0);u=e,a=[],f=s.preFilter;while(u){if(!n||(r=X.exec(u)))r&&(u=u.slice(r[0].length)||u),a.push(i=[]);n=!1;if(r=V.exec(u))n=r.shift(),i.push({value:n,type:r[0].replace(W," ")}),u=u.slice(n.length);for(o in s.filter)(r=G[o].exec(u))&&(!f[o]||(r=f[o](r)))&&(n=r.shift(),i.push({value:n,type:o,matches:r}),u=u.slice(n.length));if(!n)break}return t?u.length:u?ot.error(e):N(e,a).slice(0)}function gt(e){var t=0,n=e.length,r="";for(;t<n;t++)r+=e[t].value;return r}function yt(e,t,n){var r=t.dir,s=n&&r==="parentNode",o=x++;return t.first?function(t,n,i){while(t=t[r])if(t.nodeType===1||s)return e(t,n,i)}:function(t,n,u){var a,f,l,c=S+" "+o;if(u){while(t=t[r])if(t.nodeType===1||s)if(e(t,n,u))return!0}else while(t=t[r])if(t.nodeType===1||s){l=t[b]||(t[b]={});if((f=l[r])&&f[0]===c){if((a=f[1])===!0||a===i)return a===!0}else{f=l[r]=[c],f[1]=e(t,n,u)||i;if(f[1]===!0)return!0}}}}function bt(e){return e.length>1?function(t,n,r){var i=e.length;while(i--)if(!e[i](t,n,r))return!1;return!0}:e[0]}function wt(e,t,n,r,i){var s,o=[],u=0,a=e.length,f=t!=null;for(;u<a;u++)if(s=e[u])if(!n||n(s,r,i))o.push(s),f&&t.push(u);return o}function Et(e,t,n,r,i,s){return r&&!r[b]&&(r=Et(r)),i&&!i[b]&&(i=Et(i,s)),at(function(s,o,u,a){var f,l,c,h=[],p=[],d=o.length,v=s||Tt(t||"*",u.nodeType?[u]:u,[]),m=e&&(s||!t)?wt(v,h,e,u,a):v,g=n?i||(s?e:d||r)?[]:o:m;n&&n(m,g,u,a);if(r){f=wt(g,p),r(f,[],u,a),l=f.length;while(l--)if(c=f[l])g[p[l]]=!(m[p[l]]=c)}if(s){if(i||e){if(i){f=[],l=g.length;while(l--)(c=g[l])&&f.push(m[l]=c);i(null,g=[],f,a)}l=g.length;while(l--)(c=g[l])&&(f=i?j.call(s,c):h[l])>-1&&(s[f]=!(o[f]=c))}}else g=wt(g===o?g.splice(d,g.length):g),i?i(null,o,g,a):H.apply(o,g)})}function St(e){var t,n,r,i=e.length,o=s.relative[e[0].type],u=o||s.relative[" "],a=o?1:0,l=yt(function(e){return e===t},u,!0),c=yt(function(e){return j.call(t,e)>-1},u,!0),h=[function(e,n,r){return!o&&(r||n!==f)||((t=n).nodeType?l(e,n,r):c(e,n,r))}];for(;a<i;a++)if(n=s.relative[e[a].type])h=[yt(bt(h),n)];else{n=s.filter[e[a].type].apply(null,e[a].matches);if(n[b]){r=++a;for(;r<i;r++)if(s.relative[e[r].type])break;return Et(a>1&&bt(h),a>1&&gt(e.slice(0,a-1).concat({value:e[a-2].type===" "?"*":""})).replace(W,"$1"),n,a<r&&St(e.slice(a,r)),r<i&&St(e=e.slice(r)),r<i&&gt(e))}h.push(n)}return bt(h)}function xt(e,t){var n=0,r=t.length>0,o=e.length>0,u=function(u,a,l,c,p){var d,v,m,g=[],y=0,b="0",w=u&&[],E=p!=null,x=f,T=u||o&&s.find.TAG("*",p&&a.parentNode||a),N=S+=x==null?1:Math.random()||.1;E&&(f=a!==h&&a,i=n);for(;(d=T[b])!=null;b++){if(o&&d){v=0;while(m=e[v++])if(m(d,a,l)){c.push(d);break}E&&(S=N,i=++n)}r&&((d=!m&&d)&&y--,u&&w.push(d))}y+=b;if(r&&b!==y){v=0;while(m=t[v++])m(w,g,a,l);if(u){if(y>0)while(b--)!w[b]&&!g[b]&&(g[b]=D.call(c));g=wt(g)}H.apply(c,g),E&&!u&&g.length>0&&y+t.length>1&&ot.uniqueSort(c)}return E&&(S=N,f=x),w};return r?at(u):u}function Tt(e,t,n){var r=0,i=t.length;for(;r<i;r++)ot(e,t[r],n);return n}function Nt(e,t,n,i){var o,u,f,l,c,h=mt(e);if(!i&&h.length===1){u=h[0]=h[0].slice(0);if(u.length>2&&(f=u[0]).type==="ID"&&r.getById&&t.nodeType===9&&d&&s.relative[u[1].type]){t=(s.find.ID(f.matches[0].replace(rt,it),t)||[])[0];if(!t)return n;e=e.slice(u.shift().value.length)}o=G.needsContext.test(e)?0:u.length;while(o--){f=u[o];if(s.relative[l=f.type])break;if(c=s.find[l])if(i=c(f.matches[0].replace(rt,it),$.test(u[0].type)&&t.parentNode||t)){u.splice(o,1),e=i.length&&gt(u);if(!e)return H.apply(n,i),n;break}}}return a(e,h)(i,t,!d,n,$.test(e)),n}var n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b="sizzle"+ -(new Date),E=e.document,S=0,x=0,T=ut(),N=ut(),C=ut(),k=!1,L=function(e,t){return e===t?(k=!0,0):0},A=typeof t,O=1<<31,M={}.hasOwnProperty,_=[],D=_.pop,P=_.push,H=_.push,B=_.slice,j=_.indexOf||function(e){var t=0,n=this.length;for(;t<n;t++)if(this[t]===e)return t;return-1},F="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",I="[\\x20\\t\\r\\n\\f]",q="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",R=q.replace("w","w#"),U="\\["+I+"*("+q+")"+I+"*(?:([*^$|!~]?=)"+I+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+R+")|)|)"+I+"*\\]",z=":("+q+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+U.replace(3,8)+")*)|.*)\\)|)",W=new RegExp("^"+I+"+|((?:^|[^\\\\])(?:\\\\.)*)"+I+"+$","g"),X=new RegExp("^"+I+"*,"+I+"*"),V=new RegExp("^"+I+"*([>+~]|"+I+")"+I+"*"),$=new RegExp(I+"*[+~]"),J=new RegExp("="+I+"*([^\\]'\"]*)"+I+"*\\]","g"),K=new RegExp(z),Q=new RegExp("^"+R+"$"),G={ID:new RegExp("^#("+q+")"),CLASS:new RegExp("^\\.("+q+")"),TAG:new RegExp("^("+q.replace("w","w*")+")"),ATTR:new RegExp("^"+U),PSEUDO:new RegExp("^"+z),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+I+"*(even|odd|(([+-]|)(\\d*)n|)"+I+"*(?:([+-]|)"+I+"*(\\d+)|))"+I+"*\\)|)","i"),bool:new RegExp("^(?:"+F+")$","i"),needsContext:new RegExp("^"+I+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+I+"*((?:-\\d)?\\d*)"+I+"*\\)|)(?=[^-]|$)","i")},Y=/^[^{]+\{\s*\[native \w/,Z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,et=/^(?:input|select|textarea|button)$/i,tt=/^h\d$/i,nt=/'|\\/g,rt=new RegExp("\\\\([\\da-f]{1,6}"+I+"?|("+I+")|.)","ig"),it=function(e,t,n){var r="0x"+t-65536;return r!==r||n?t:r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,r&1023|56320)};try{H.apply(_=B.call(E.childNodes),E.childNodes),_[E.childNodes.length].nodeType}catch(st){H={apply:_.length?function(e,t){P.apply(e,B.call(t))}:function(e,t){var n=e.length,r=0;while(e[n++]=t[r++]);e.length=n-1}}}u=ot.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?t.nodeName!=="HTML":!1},r=ot.support={},c=ot.setDocument=function(e){var t=e?e.ownerDocument||e:E,n=t.defaultView;if(t===h||t.nodeType!==9||!t.documentElement)return h;h=t,p=t.documentElement,d=!u(t),n&&n.attachEvent&&n!==n.top&&n.attachEvent("onbeforeunload",function(){c()}),r.attributes=ft(function(e){return e.className="i",!e.getAttribute("className")}),r.getElementsByTagName=ft(function(e){return e.appendChild(t.createComment("")),!e.getElementsByTagName("*").length}),r.getElementsByClassName=ft(function(e){return e.innerHTML="<div class='a'></div><div class='a i'></div>",e.firstChild.className="i",e.getElementsByClassName("i").length===2}),r.getById=ft(function(e){return p.appendChild(e).id=b,!t.getElementsByName||!t.getElementsByName(b).length}),r.getById?(s.find.ID=function(e,t){if(typeof t.getElementById!==A&&d){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},s.filter.ID=function(e){var t=e.replace(rt,it);return function(e){return e.getAttribute("id")===t}}):(delete s.find.ID,s.filter.ID=function(e){var t=e.replace(rt,it);return function(e){var n=typeof e.getAttributeNode!==A&&e.getAttributeNode("id");return n&&n.value===t}}),s.find.TAG=r.getElementsByTagName?function(e,t){if(typeof t.getElementsByTagName!==A)return t.getElementsByTagName(e)}:function(e,t){var n,r=[],i=0,s=t.getElementsByTagName(e);if(e==="*"){while(n=s[i++])n.nodeType===1&&r.push(n);return r}return s},s.find.CLASS=r.getElementsByClassName&&function(e,t){if(typeof t.getElementsByClassName!==A&&d)return t.getElementsByClassName(e)},m=[],v=[];if(r.qsa=Y.test(t.querySelectorAll))ft(function(e){e.innerHTML="<select><option selected=''></option></select>",e.querySelectorAll("[selected]").length||v.push("\\["+I+"*(?:value|"+F+")"),e.querySelectorAll(":checked").length||v.push(":checked")}),ft(function(e){var n=t.createElement("input");n.setAttribute("type","hidden"),e.appendChild(n).setAttribute("t",""),e.querySelectorAll("[t^='']").length&&v.push("[*^$]="+I+"*(?:''|\"\")"),e.querySelectorAll(":enabled").length||v.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),v.push(",.*:")});return(r.matchesSelector=Y.test(g=p.webkitMatchesSelector||p.mozMatchesSelector||p.oMatchesSelector||p.msMatchesSelector))&&ft(function(e){r.disconnectedMatch=g.call(e,"div"),g.call(e,"[s!='']:x"),m.push("!=",z)}),v=v.length&&new RegExp(v.join("|")),m=m.length&&new RegExp(m.join("|")),y=Y.test(p.contains)||p.compareDocumentPosition?function(e,t){var n=e.nodeType===9?e.documentElement:e,r=t&&t.parentNode;return e===r||!!r&&r.nodeType===1&&!!(n.contains?n.contains(r):e.compareDocumentPosition&&e.compareDocumentPosition(r)&16)}:function(e,t){if(t)while(t=t.parentNode)if(t===e)return!0;return!1},L=p.compareDocumentPosition?function(e,n){if(e===n)return k=!0,0;var i=n.compareDocumentPosition&&e.compareDocumentPosition&&e.compareDocumentPosition(n);if(i)return i&1||!r.sortDetached&&n.compareDocumentPosition(e)===i?e===t||y(E,e)?-1:n===t||y(E,n)?1:l?j.call(l,e)-j.call(l,n):0:i&4?-1:1;return e.compareDocumentPosition?-1:1}:function(e,n){var r,i=0,s=e.parentNode,o=n.parentNode,u=[e],a=[n];if(e===n)return k=!0,0;if(!s||!o)return e===t?-1:n===t?1:s?-1:o?1:l?j.call(l,e)-j.call(l,n):0;if(s===o)return ct(e,n);r=e;while(r=r.parentNode)u.unshift(r);r=n;while(r=r.parentNode)a.unshift(r);while(u[i]===a[i])i++;return i?ct(u[i],a[i]):u[i]===E?-1:a[i]===E?1:0},t},ot.matches=function(e,t){return ot(e,null,null,t)},ot.matchesSelector=function(e,t){(e.ownerDocument||e)!==h&&c(e),t=t.replace(J,"='$1']");if(r.matchesSelector&&d&&(!m||!m.test(t))&&(!v||!v.test(t)))try{var n=g.call(e,t);if(n||r.disconnectedMatch||e.document&&e.document.nodeType!==11)return n}catch(i){}return ot(t,h,null,[e]).length>0},ot.contains=function(e,t){return(e.ownerDocument||e)!==h&&c(e),y(e,t)},ot.attr=function(e,n){(e.ownerDocument||e)!==h&&c(e);var i=s.attrHandle[n.toLowerCase()],o=i&&M.call(s.attrHandle,n.toLowerCase())?i(e,n,!d):t;return o===t?r.attributes||!d?e.getAttribute(n):(o=e.getAttributeNode(n))&&o.specified?o.value:null:o},ot.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},ot.uniqueSort=function(e){var t,n=[],i=0,s=0;k=!r.detectDuplicates,l=!r.sortStable&&e.slice(0),e.sort(L);if(k){while(t=e[s++])t===e[s]&&(i=n.push(s));while(i--)e.splice(n[i],1)}return e},o=ot.getText=function(e){var t,n="",r=0,i=e.nodeType;if(!i)for(;t=e[r];r++)n+=o(t);else if(i===1||i===9||i===11){if(typeof e.textContent=="string")return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=o(e)}else if(i===3||i===4)return e.nodeValue;return n},s=ot.selectors={cacheLength:50,createPseudo:at,match:G,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(rt,it),e[3]=(e[4]||e[5]||"").replace(rt,it),e[2]==="~="&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),e[1].slice(0,3)==="nth"?(e[3]||ot.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*(e[3]==="even"||e[3]==="odd")),e[5]=+(e[7]+e[8]||e[3]==="odd")):e[3]&&ot.error(e[0]),e},PSEUDO:function(e){var n,r=!e[5]&&e[2];return G.CHILD.test(e[0])?null:(e[3]&&e[4]!==t?e[2]=e[4]:r&&K.test(r)&&(n=mt(r,!0))&&(n=r.indexOf(")",r.length-n)-r.length)&&(e[0]=e[0].slice(0,n),e[2]=r.slice(0,n)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(rt,it).toLowerCase();return e==="*"?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=T[e+" "];return t||(t=new RegExp("(^|"+I+")"+e+"("+I+"|$)"))&&T(e,function(e){return t.test(typeof e.className=="string"&&e.className||typeof e.getAttribute!==A&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(r){var i=ot.attr(r,e);return i==null?t==="!=":t?(i+="",t==="="?i===n:t==="!="?i!==n:t==="^="?n&&i.indexOf(n)===0:t==="*="?n&&i.indexOf(n)>-1:t==="$="?n&&i.slice(-n.length)===n:t==="~="?(" "+i+" ").indexOf(n)>-1:t==="|="?i===n||i.slice(0,n.length+1)===n+"-":!1):!0}},CHILD:function(e,t,n,r,i){var s=e.slice(0,3)!=="nth",o=e.slice(-4)!=="last",u=t==="of-type";return r===1&&i===0?function(e){return!!e.parentNode}:function(t,n,a){var f,l,c,h,p,d,v=s!==o?"nextSibling":"previousSibling",m=t.parentNode,g=u&&t.nodeName.toLowerCase(),y=!a&&!u;if(m){if(s){while(v){c=t;while(c=c[v])if(u?c.nodeName.toLowerCase()===g:c.nodeType===1)return!1;d=v=e==="only"&&!d&&"nextSibling"}return!0}d=[o?m.firstChild:m.lastChild];if(o&&y){l=m[b]||(m[b]={}),f=l[e]||[],p=f[0]===S&&f[1],h=f[0]===S&&f[2],c=p&&m.childNodes[p];while(c=++p&&c&&c[v]||(h=p=0)||d.pop())if(c.nodeType===1&&++h&&c===t){l[e]=[S,p,h];break}}else if(y&&(f=(t[b]||(t[b]={}))[e])&&f[0]===S)h=f[1];else while(c=++p&&c&&c[v]||(h=p=0)||d.pop())if((u?c.nodeName.toLowerCase()===g:c.nodeType===1)&&++h){y&&((c[b]||(c[b]={}))[e]=[S,h]);if(c===t)break}return h-=i,h===r||h%r===0&&h/r>=0}}},PSEUDO:function(e,t){var n,r=s.pseudos[e]||s.setFilters[e.toLowerCase()]||ot.error("unsupported pseudo: "+e);return r[b]?r(t):r.length>1?(n=[e,e,"",t],s.setFilters.hasOwnProperty(e.toLowerCase())?at(function(e,n){var i,s=r(e,t),o=s.length;while(o--)i=j.call(e,s[o]),e[i]=!(n[i]=s[o])}):function(e){return r(e,0,n)}):r}},pseudos:{not:at(function(e){var t=[],n=[],r=a(e.replace(W,"$1"));return r[b]?at(function(e,t,n,i){var s,o=r(e,null,i,[]),u=e.length;while(u--)if(s=o[u])e[u]=!(t[u]=s)}):function(e,i,s){return t[0]=e,r(t,null,s,n),!n.pop()}}),has:at(function(e){return function(t){return ot(e,t).length>0}}),contains:at(function(e){return function(t){return(t.textContent||t.innerText||o(t)).indexOf(e)>-1}}),lang:at(function(e){return Q.test(e||"")||ot.error("unsupported lang: "+e),e=e.replace(rt,it).toLowerCase(),function(t){var n;do if(n=d?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return n=n.toLowerCase(),n===e||n.indexOf(e+"-")===0;while((t=t.parentNode)&&t.nodeType===1);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===p},focus:function(e){return e===h.activeElement&&(!h.hasFocus||h.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return t==="input"&&!!e.checked||t==="option"&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeName>"@"||e.nodeType===3||e.nodeType===4)return!1;return!0},parent:function(e){return!s.pseudos.empty(e)},header:function(e){return tt.test(e.nodeName)},input:function(e){return et.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return t==="input"&&e.type==="button"||t==="button"},text:function(e){var t;return e.nodeName.toLowerCase()==="input"&&e.type==="text"&&((t=e.getAttribute("type"))==null||t.toLowerCase()===e.type)},first:dt(function(){return[0]}),last:dt(function(e,t){return[t-1]}),eq:dt(function(e,t,n){return[n<0?n+t:n]}),even:dt(function(e,t){var n=0;for(;n<t;n+=2)e.push(n);return e}),odd:dt(function(e,t){var n=1;for(;n<t;n+=2)e.push(n);return e}),lt:dt(function(e,t,n){var r=n<0?n+t:n;for(;--r>=0;)e.push(r);return e}),gt:dt(function(e,t,n){var r=n<0?n+t:n;for(;++r<t;)e.push(r);return e})}},s.pseudos.nth=s.pseudos.eq;for(n in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})s.pseudos[n]=ht(n);for(n in{submit:!0,reset:!0})s.pseudos[n]=pt(n);vt.prototype=s.filters=s.pseudos,s.setFilters=new vt,a=ot.compile=function(e,t){var n,r=[],i=[],s=C[e+" "];if(!s){t||(t=mt(e)),n=t.length;while(n--)s=St(t[n]),s[b]?r.push(s):i.push(s);s=C(e,xt(i,r))}return s},r.sortStable=b.split("").sort(L).join("")===b,r.detectDuplicates=k,c(),r.sortDetached=ft(function(e){return e.compareDocumentPosition(h.createElement("div"))&1}),ft(function(e){return e.innerHTML="<a href='#'></a>",e.firstChild.getAttribute("href")==="#"})||lt("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,t.toLowerCase()==="type"?1:2)}),(!r.attributes||!ft(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),e.firstChild.getAttribute("value")===""}))&&lt("value",function(e,t,n){if(!n&&e.nodeName.toLowerCase()==="input")return e.defaultValue}),ft(function(e){return e.getAttribute("disabled")==null})||lt(F,function(e,t,n){var r;if(!n)return(r=e.getAttributeNode(t))&&r.specified?r.value:e[t]===!0?t.toLowerCase():null}),w.find=ot,w.expr=ot.selectors,w.expr[":"]=w.expr.pseudos,w.unique=ot.uniqueSort,w.text=ot.getText,w.isXMLDoc=ot.isXML,w.contains=ot.contains}(e);var B={};w.Callbacks=function(e){e=typeof e=="string"?B[e]||j(e):w.extend({},e);var n,r,i,s,o,u,a=[],f=!e.once&&[],l=function(t){r=e.memory&&t,i=!0,o=u||0,u=0,s=a.length,n=!0;for(;a&&o<s;o++)if(a[o].apply(t[0],t[1])===!1&&e.stopOnFalse){r=!1;break}n=!1,a&&(f?f.length&&l(f.shift()):r?a=[]:c.disable())},c={add:function(){if(a){var t=a.length;(function i(t){w.each(t,function(t,n){var r=w.type(n);r==="function"?(!e.unique||!c.has(n))&&a.push(n):n&&n.length&&r!=="string"&&i(n)})})(arguments),n?s=a.length:r&&(u=t,l(r))}return this},remove:function(){return a&&w.each(arguments,function(e,t){var r;while((r=w.inArray(t,a,r))>-1)a.splice(r,1),n&&(r<=s&&s--,r<=o&&o--)}),this},has:function(e){return e?w.inArray(e,a)>-1:!!a&&!!a.length},empty:function(){return a=[],s=0,this},disable:function(){return a=f=r=t,this},disabled:function(){return!a},lock:function(){return f=t,r||c.disable(),this},locked:function(){return!f},fireWith:function(e,t){return a&&(!i||f)&&(t=t||[],t=[e,t.slice?t.slice():t],n?f.push(t):l(t)),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!i}};return c},w.extend({Deferred:function(e){var t=[["resolve","done",w.Callbacks("once memory"),"resolved"],["reject","fail",w.Callbacks("once memory"),"rejected"],["notify","progress",w.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var e=arguments;return w.Deferred(function(n){w.each(t,function(t,s){var o=s[0],u=w.isFunction(e[t])&&e[t];i[s[1]](function(){var e=u&&u.apply(this,arguments);e&&w.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[o+"With"](this===r?n.promise():this,u?[e]:arguments)})}),e=null}).promise()},promise:function(e){return e!=null?w.extend(e,r):r}},i={};return r.pipe=r.then,w.each(t,function(e,s){var o=s[2],u=s[3];r[s[1]]=o.add,u&&o.add(function(){n=u},t[e^1][2].disable,t[2][2].lock),i[s[0]]=function(){return i[s[0]+"With"](this===i?r:this,arguments),this},i[s[0]+"With"]=o.fireWith}),r.promise(i),e&&e.call(i,i),i},when:function(e){var t=0,n=v.call(arguments),r=n.length,i=r!==1||e&&w.isFunction(e.promise)?r:0,s=i===1?e:w.Deferred(),o=function(e,t,n){return function(r){t[e]=this,n[e]=arguments.length>1?v.call(arguments):r,n===u?s.notifyWith(t,n):--i||s.resolveWith(t,n)}},u,a,f;if(r>1){u=new Array(r),a=new Array(r),f=new Array(r);for(;t<r;t++)n[t]&&w.isFunction(n[t].promise)?n[t].promise().done(o(t,f,n)).fail(s.reject).progress(o(t,a,u)):--i}return i||s.resolveWith(f,n),s.promise()}}),w.support=function(t){var n,r,s,u,a,f,l,c,h,p=o.createElement("div");p.setAttribute("className","t"),p.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",n=p.getElementsByTagName("*")||[],r=p.getElementsByTagName("a")[0];if(!r||!r.style||!n.length)return t;u=o.createElement("select"),f=u.appendChild(o.createElement("option")),s=p.getElementsByTagName("input")[0],r.style.cssText="top:1px;float:left;opacity:.5",t.getSetAttribute=p.className!=="t",t.leadingWhitespace=p.firstChild.nodeType===3,t.tbody=!p.getElementsByTagName("tbody").length,t.htmlSerialize=!!p.getElementsByTagName("link").length,t.style=/top/.test(r.getAttribute("style")),t.hrefNormalized=r.getAttribute("href")==="/a",t.opacity=/^0.5/.test(r.style.opacity),t.cssFloat=!!r.style.cssFloat,t.checkOn=!!s.value,t.optSelected=f.selected,t.enctype=!!o.createElement("form").enctype,t.html5Clone=o.createElement("nav").cloneNode(!0).outerHTML!=="<:nav></:nav>",t.inlineBlockNeedsLayout=!1,t.shrinkWrapBlocks=!1,t.pixelPosition=!1,t.deleteExpando=!0,t.noCloneEvent=!0,t.reliableMarginRight=!0,t.boxSizingReliable=!0,s.checked=!0,t.noCloneChecked=s.cloneNode(!0).checked,u.disabled=!0,t.optDisabled=!f.disabled;try{delete p.test}catch(d){t.deleteExpando=!1}s=o.createElement("input"),s.setAttribute("value",""),t.input=s.getAttribute("value")==="",s.value="t",s.setAttribute("type","radio"),t.radioValue=s.value==="t",s.setAttribute("checked","t"),s.setAttribute("name","t"),a=o.createDocumentFragment(),a.appendChild(s),t.appendChecked=s.checked,t.checkClone=a.cloneNode(!0).cloneNode(!0).lastChild.checked,p.attachEvent&&(p.attachEvent("onclick",function(){t.noCloneEvent=!1}),p.cloneNode(!0).click());for(h in{submit:!0,change:!0,focusin:!0})p.setAttribute(l="on"+h,"t"),t[h+"Bubbles"]=l in e||p.attributes[l].expando===!1;p.style.backgroundClip="content-box",p.cloneNode(!0).style.backgroundClip="",t.clearCloneStyle=p.style.backgroundClip==="content-box";for(h in w(t))break;return t.ownLast=h!=="0",w(function(){var n,r,s,u="padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;",a=o.getElementsByTagName("body")[0];if(!a)return;n=o.createElement("div"),n.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",a.appendChild(n).appendChild(p),p.innerHTML="<table><tr><td></td><td>t</td></tr></table>",s=p.getElementsByTagName("td"),s[0].style.cssText="padding:0;margin:0;border:0;display:none",c=s[0].offsetHeight===0,s[0].style.display="",s[1].style.display="none",t.reliableHiddenOffsets=c&&s[0].offsetHeight===0,p.innerHTML="",p.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",w.swap(a,a.style.zoom!=null?{zoom:1}:{},function(){t.boxSizing=p.offsetWidth===4}),e.getComputedStyle&&(t.pixelPosition=(e.getComputedStyle(p,null)||{}).top!=="1%",t.boxSizingReliable=(e.getComputedStyle(p,null)||{width:"4px"}).width==="4px",r=p.appendChild(o.createElement("div")),r.style.cssText=p.style.cssText=u,r.style.marginRight=r.style.width="0",p.style.width="1px",t.reliableMarginRight=!parseFloat((e.getComputedStyle(r,null)||{}).marginRight)),typeof p.style.zoom!==i&&(p.innerHTML="",p.style.cssText=u+"width:1px;padding:1px;display:inline;zoom:1",t.inlineBlockNeedsLayout=p.offsetWidth===3,p.style.display="block",p.innerHTML="<div></div>",p.firstChild.style.width="5px",t.shrinkWrapBlocks=p.offsetWidth!==3,t.inlineBlockNeedsLayout&&(a.style.zoom=1)),a.removeChild(n),n=p=s=r=null}),n=u=a=f=r=s=null,t}({});var F=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,I=/([A-Z])/g;w.extend({cache:{},noData:{applet:!0,embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(e){return e=e.nodeType?w.cache[e[w.expando]]:e[w.expando],!!e&&!z(e)},data:function(e,t,n){return q(e,t,n)},removeData:function(e,t){return R(e,t)},_data:function(e,t,n){return q(e,t,n,!0)},_removeData:function(e,t){return R(e,t,!0)},acceptData:function(e){if(e.nodeType&&e.nodeType!==1&&e.nodeType!==9)return!1;var t=e.nodeName&&w.noData[e.nodeName.toLowerCase()];return!t||t!==!0&&e.getAttribute("classid")===t}}),w.fn.extend({data:function(e,n){var r,i,s=null,o=0,u=this[0];if(e===t){if(this.length){s=w.data(u);if(u.nodeType===1&&!w._data(u,"parsedAttrs")){r=u.attributes;for(;o<r.length;o++)i=r[o].name,i.indexOf("data-")===0&&(i=w.camelCase(i.slice(5)),U(u,i,s[i]));w._data(u,"parsedAttrs",!0)}}return s}return typeof e=="object"?this.each(function(){w.data(this,e)}):arguments.length>1?this.each(function(){w.data(this,e,n)}):u?U(u,e,w.data(u,e)):null},removeData:function(e){return this.each(function(){w.removeData(this,e)})}}),w.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=w._data(e,t),n&&(!r||w.isArray(n)?r=w._data(e,t,w.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=w.queue(e,t),r=n.length,i=n.shift(),s=w._queueHooks(e,t),o=function(){w.dequeue(e,t)};i==="inprogress"&&(i=n.shift(),r--),i&&(t==="fx"&&n.unshift("inprogress"),delete s.stop,i.call(e,o,s)),!r&&s&&s.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return w._data(e,n)||w._data(e,n,{empty:w.Callbacks("once memory").add(function(){w._removeData(e,t+"queue"),w._removeData(e,n)})})}}),w.fn.extend({queue:function(e,n){var r=2;return typeof e!="string"&&(n=e,e="fx",r--),arguments.length<r?w.queue(this[0],e):n===t?this:this.each(function(){var t=w.queue(this,e,n);w._queueHooks(this,e),e==="fx"&&t[0]!=="inprogress"&&w.dequeue(this,e)})},dequeue:function(e){return this.each(function(){w.dequeue(this,e)})},delay:function(e,t){return e=w.fx?w.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,n){var r,i=1,s=w.Deferred(),o=this,u=this.length,a=function(){--i||s.resolveWith(o,[o])};typeof e!="string"&&(n=e,e=t),e=e||"fx";while(u--)r=w._data(o[u],e+"queueHooks"),r&&r.empty&&(i++,r.empty.add(a));return a(),s.promise(n)}});var W,X,V=/[\t\r\n\f]/g,$=/\r/g,J=/^(?:input|select|textarea|button|object)$/i,K=/^(?:a|area)$/i,Q=/^(?:checked|selected)$/i,G=w.support.getSetAttribute,Y=w.support.input;w.fn.extend({attr:function(e,t){return w.access(this,w.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){w.removeAttr(this,e)})},prop:function(e,t){return w.access(this,w.prop,e,t,arguments.length>1)},removeProp:function(e){return e=w.propFix[e]||e,this.each(function(){try{this[e]=t,delete this[e]}catch(n){}})},addClass:function(e){var t,n,r,i,s,o=0,u=this.length,a=typeof e=="string"&&e;if(w.isFunction(e))return this.each(function(t){w(this).addClass(e.call(this,t,this.className))});if(a){t=(e||"").match(S)||[];for(;o<u;o++){n=this[o],r=n.nodeType===1&&(n.className?(" "+n.className+" ").replace(V," "):" ");if(r){s=0;while(i=t[s++])r.indexOf(" "+i+" ")<0&&(r+=i+" ");n.className=w.trim(r)}}}return this},removeClass:function(e){var t,n,r,i,s,o=0,u=this.length,a=arguments.length===0||typeof e=="string"&&e;if(w.isFunction(e))return this.each(function(t){w(this).removeClass(e.call(this,t,this.className))});if(a){t=(e||"").match(S)||[];for(;o<u;o++){n=this[o],r=n.nodeType===1&&(n.className?(" "+n.className+" ").replace(V," "):"");if(r){s=0;while(i=t[s++])while(r.indexOf(" "+i+" ")>=0)r=r.replace(" "+i+" "," ");n.className=e?w.trim(r):""}}}return this},toggleClass:function(e,t){var n=typeof e;return typeof t=="boolean"&&n==="string"?t?this.addClass(e):this.removeClass(e):w.isFunction(e)?this.each(function(n){w(this).toggleClass(e.call(this,n,this.className,t),t)}):this.each(function(){if(n==="string"){var t,r=0,s=w(this),o=e.match(S)||[];while(t=o[r++])s.hasClass(t)?s.removeClass(t):s.addClass(t)}else if(n===i||n==="boolean")this.className&&w._data(this,"__className__",this.className),this.className=this.className||e===!1?"":w._data(this,"__className__")||""})},hasClass:function(e){var t=" "+e+" ",n=0,r=this.length;for(;n<r;n++)if(this[n].nodeType===1&&(" "+this[n].className+" ").replace(V," ").indexOf(t)>=0)return!0;return!1},val:function(e){var n,r,i,s=this[0];if(!arguments.length){if(s)return r=w.valHooks[s.type]||w.valHooks[s.nodeName.toLowerCase()],r&&"get"in r&&(n=r.get(s,"value"))!==t?n:(n=s.value,typeof n=="string"?n.replace($,""):n==null?"":n);return}return i=w.isFunction(e),this.each(function(n){var s;if(this.nodeType!==1)return;i?s=e.call(this,n,w(this).val()):s=e,s==null?s="":typeof s=="number"?s+="":w.isArray(s)&&(s=w.map(s,function(e){return e==null?"":e+""})),r=w.valHooks[this.type]||w.valHooks[this.nodeName.toLowerCase()];if(!r||!("set"in r)||r.set(this,s,"value")===t)this.value=s})}}),w.extend({valHooks:{option:{get:function(e){var t=w.find.attr(e,"value");return t!=null?t:e.text}},select:{get:function(e){var t,n,r=e.options,i=e.selectedIndex,s=e.type==="select-one"||i<0,o=s?null:[],u=s?i+1:r.length,a=i<0?u:s?i:0;for(;a<u;a++){n=r[a];if((n.selected||a===i)&&(w.support.optDisabled?!n.disabled:n.getAttribute("disabled")===null)&&(!n.parentNode.disabled||!w.nodeName(n.parentNode,"optgroup"))){t=w(n).val();if(s)return t;o.push(t)}}return o},set:function(e,t){var n,r,i=e.options,s=w.makeArray(t),o=i.length;while(o--){r=i[o];if(r.selected=w.inArray(w(r).val(),s)>=0)n=!0}return n||(e.selectedIndex=-1),s}}},attr:function(e,n,r){var s,o,u=e.nodeType;if(!e||u===3||u===8||u===2)return;if(typeof e.getAttribute===i)return w.prop(e,n,r);if(u!==1||!w.isXMLDoc(e))n=n.toLowerCase(),s=w.attrHooks[n]||(w.expr.match.bool.test(n)?X:W);if(r===t)return s&&"get"in s&&(o=s.get(e,n))!==null?o:(o=w.find.attr(e,n),o==null?t:o);if(r!==null)return s&&"set"in s&&(o=s.set(e,r,n))!==t?o:(e.setAttribute(n,r+""),r);w.removeAttr(e,n)},removeAttr:function(e,t){var n,r,i=0,s=t&&t.match(S);if(s&&e.nodeType===1)while(n=s[i++])r=w.propFix[n]||n,w.expr.match.bool.test(n)?Y&&G||!Q.test(n)?e[r]=!1:e[w.camelCase("default-"+n)]=e[r]=!1:w.attr(e,n,""),e.removeAttribute(G?n:r)},attrHooks:{type:{set:function(e,t){if(!w.support.radioValue&&t==="radio"&&w.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},propFix:{"for":"htmlFor","class":"className"},prop:function(e,n,r){var i,s,o,u=e.nodeType;if(!e||u===3||u===8||u===2)return;return o=u!==1||!w.isXMLDoc(e),o&&(n=w.propFix[n]||n,s=w.propHooks[n]),r!==t?s&&"set"in s&&(i=s.set(e,r,n))!==t?i:e[n]=r:s&&"get"in s&&(i=s.get(e,n))!==null?i:e[n]},propHooks:{tabIndex:{get:function(e){var t=w.find.attr(e,"tabindex");return t?parseInt(t,10):J.test(e.nodeName)||K.test(e.nodeName)&&e.href?0:-1}}}}),X={set:function(e,t,n){return t===!1?w.removeAttr(e,n):Y&&G||!Q.test(n)?e.setAttribute(!G&&w.propFix[n]||n,n):e[w.camelCase("default-"+n)]=e[n]=!0,n}},w.each(w.expr.match.bool.source.match(/\w+/g),function(e,n){var r=w.expr.attrHandle[n]||w.find.attr;w.expr.attrHandle[n]=Y&&G||!Q.test(n)?function(e,n,i){var s=w.expr.attrHandle[n],o=i?t:(w.expr.attrHandle[n]=t)!=r(e,n,i)?n.toLowerCase():null;return w.expr.attrHandle[n]=s,o}:function(e,n,r){return r?t:e[w.camelCase("default-"+n)]?n.toLowerCase():null}});if(!Y||!G)w.attrHooks.value={set:function(e,t,n){if(!w.nodeName(e,"input"))return W&&W.set(e,t,n);e.defaultValue=t}};G||(W={set:function(e,n,r){var i=e.getAttributeNode(r);return i||e.setAttributeNode(i=e.ownerDocument.createAttribute(r)),i.value=n+="",r==="value"||n===e.getAttribute(r)?n:t}},w.expr.attrHandle.id=w.expr.attrHandle.name=w.expr.attrHandle.coords=function(e,n,r){var i;return r?t:(i=e.getAttributeNode(n))&&i.value!==""?i.value:null},w.valHooks.button={get:function(e,n){var r=e.getAttributeNode(n);return r&&r.specified?r.value:t},set:W.set},w.attrHooks.contenteditable={set:function(e,t,n){W.set(e,t===""?!1:t,n)}},w.each(["width","height"],function(e,t){w.attrHooks[t]={set:function(e,n){if(n==="")return e.setAttribute(t,"auto"),n}}})),w.support.hrefNormalized||w.each(["href","src"],function(e,t){w.propHooks[t]={get:function(e){return e.getAttribute(t,4)}}}),w.support.style||(w.attrHooks.style={get:function(e){return e.style.cssText||t},set:function(e,t){return e.style.cssText=t+""}}),w.support.optSelected||(w.propHooks.selected={get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}}),w.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){w.propFix[this.toLowerCase()]=this}),w.support.enctype||(w.propFix.enctype="encoding"),w.each(["radio","checkbox"],function(){w.valHooks[this]={set:function(e,t){if(w.isArray(t))return e.checked=w.inArray(w(e).val(),t)>=0}},w.support.checkOn||(w.valHooks[this].get=function(e){return e.getAttribute("value")===null?"on":e.value})});var Z=/^(?:input|select|textarea)$/i,et=/^key/,tt=/^(?:mouse|contextmenu)|click/,nt=/^(?:focusinfocus|focusoutblur)$/,rt=/^([^.]*)(?:\.(.+)|)$/;w.event={global:{},add:function(e,n,r,s,o){var u,a,f,l,c,h,p,d,v,m,g,y=w._data(e);if(!y)return;r.handler&&(l=r,r=l.handler,o=l.selector),r.guid||(r.guid=w.guid++),(a=y.events)||(a=y.events={}),(h=y.handle)||(h=y.handle=function(e){return typeof w===i||!!e&&w.event.triggered===e.type?t:w.event.dispatch.apply(h.elem,arguments)},h.elem=e),n=(n||"").match(S)||[""],f=n.length;while(f--){u=rt.exec(n[f])||[],v=g=u[1],m=(u[2]||"").split(".").sort();if(!v)continue;c=w.event.special[v]||{},v=(o?c.delegateType:c.bindType)||v,c=w.event.special[v]||{},p=w.extend({type:v,origType:g,data:s,handler:r,guid:r.guid,selector:o,needsContext:o&&w.expr.match.needsContext.test(o),namespace:m.join(".")},l);if(!(d=a[v])){d=a[v]=[],d.delegateCount=0;if(!c.setup||c.setup.call(e,s,m,h)===!1)e.addEventListener?e.addEventListener(v,h,!1):e.attachEvent&&e.attachEvent("on"+v,h)}c.add&&(c.add.call(e,p),p.handler.guid||(p.handler.guid=r.guid)),o?d.splice(d.delegateCount++,0,p):d.push(p),w.event.global[v]=!0}e=null},remove:function(e,t,n,r,i){var s,o,u,a,f,l,c,h,p,d,v,m=w.hasData(e)&&w._data(e);if(!m||!(l=m.events))return;t=(t||"").match(S)||[""],f=t.length;while(f--){u=rt.exec(t[f])||[],p=v=u[1],d=(u[2]||"").split(".").sort();if(!p){for(p in l)w.event.remove(e,p+t[f],n,r,!0);continue}c=w.event.special[p]||{},p=(r?c.delegateType:c.bindType)||p,h=l[p]||[],u=u[2]&&new RegExp("(^|\\.)"+d.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=s=h.length;while(s--)o=h[s],(i||v===o.origType)&&(!n||n.guid===o.guid)&&(!u||u.test(o.namespace))&&(!r||r===o.selector||r==="**"&&o.selector)&&(h.splice(s,1),o.selector&&h.delegateCount--,c.remove&&c.remove.call(e,o));a&&!h.length&&((!c.teardown||c.teardown.call(e,d,m.handle)===!1)&&w.removeEvent(e,p,m.handle),delete l[p])}w.isEmptyObject(l)&&(delete m.handle,w._removeData(e,"events"))},trigger:function(n,r,i,s){var u,a,f,l,c,h,p,d=[i||o],v=y.call(n,"type")?n.type:n,m=y.call(n,"namespace")?n.namespace.split("."):[];f=h=i=i||o;if(i.nodeType===3||i.nodeType===8)return;if(nt.test(v+w.event.triggered))return;v.indexOf(".")>=0&&(m=v.split("."),v=m.shift(),m.sort()),a=v.indexOf(":")<0&&"on"+v,n=n[w.expando]?n:new w.Event(v,typeof n=="object"&&n),n.isTrigger=s?2:3,n.namespace=m.join("."),n.namespace_re=n.namespace?new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,n.result=t,n.target||(n.target=i),r=r==null?[n]:w.makeArray(r,[n]),c=w.event.special[v]||{};if(!s&&c.trigger&&c.trigger.apply(i,r)===!1)return;if(!s&&!c.noBubble&&!w.isWindow(i)){l=c.delegateType||v,nt.test(l+v)||(f=f.parentNode);for(;f;f=f.parentNode)d.push(f),h=f;h===(i.ownerDocument||o)&&d.push(h.defaultView||h.parentWindow||e)}p=0;while((f=d[p++])&&!n.isPropagationStopped())n.type=p>1?l:c.bindType||v,u=(w._data(f,"events")||{})[n.type]&&w._data(f,"handle"),u&&u.apply(f,r),u=a&&f[a],u&&w.acceptData(f)&&u.apply&&u.apply(f,r)===!1&&n.preventDefault();n.type=v;if(!s&&!n.isDefaultPrevented()&&(!c._default||c._default.apply(d.pop(),r)===!1)&&w.acceptData(i)&&a&&i[v]&&!w.isWindow(i)){h=i[a],h&&(i[a]=null),w.event.triggered=v;try{i[v]()}catch(g){}w.event.triggered=t,h&&(i[a]=h)}return n.result},dispatch:function(e){e=w.event.fix(e);var n,r,i,s,o,u=[],a=v.call(arguments),f=(w._data(this,"events")||{})[e.type]||[],l=w.event.special[e.type]||{};a[0]=e,e.delegateTarget=this;if(l.preDispatch&&l.preDispatch.call(this,e)===!1)return;u=w.event.handlers.call(this,e,f),n=0;while((s=u[n++])&&!e.isPropagationStopped()){e.currentTarget=s.elem,o=0;while((i=s.handlers[o++])&&!e.isImmediatePropagationStopped())if(!e.namespace_re||e.namespace_re.test(i.namespace))e.handleObj=i,e.data=i.data,r=((w.event.special[i.origType]||{}).handle||i.handler).apply(s.elem,a),r!==t&&(e.result=r)===!1&&(e.preventDefault(),e.stopPropagation())}return l.postDispatch&&l.postDispatch.call(this,e),e.result},handlers:function(e,n){var r,i,s,o,u=[],a=n.delegateCount,f=e.target;if(a&&f.nodeType&&(!e.button||e.type!=="click"))for(;f!=this;f=f.parentNode||this)if(f.nodeType===1&&(f.disabled!==!0||e.type!=="click")){s=[];for(o=0;o<a;o++)i=n[o],r=i.selector+" ",s[r]===t&&(s[r]=i.needsContext?w(r,this).index(f)>=0:w.find(r,this,null,[f]).length),s[r]&&s.push(i);s.length&&u.push({elem:f,handlers:s})}return a<n.length&&u.push({elem:this,handlers:n.slice(a)}),u},fix:function(e){if(e[w.expando])return e;var t,n,r,i=e.type,s=e,u=this.fixHooks[i];u||(this.fixHooks[i]=u=tt.test(i)?this.mouseHooks:et.test(i)?this.keyHooks:{}),r=u.props?this.props.concat(u.props):this.props,e=new w.Event(s),t=r.length;while(t--)n=r[t],e[n]=s[n];return e.target||(e.target=s.srcElement||o),e.target.nodeType===3&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,u.filter?u.filter(e,s):e},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return e.which==null&&(e.which=t.charCode!=null?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,n){var r,i,s,u=n.button,a=n.fromElement;return e.pageX==null&&n.clientX!=null&&(i=e.target.ownerDocument||o,s=i.documentElement,r=i.body,e.pageX=n.clientX+(s&&s.scrollLeft||r&&r.scrollLeft||0)-(s&&s.clientLeft||r&&r.clientLeft||0),e.pageY=n.clientY+(s&&s.scrollTop||r&&r.scrollTop||0)-(s&&s.clientTop||r&&r.clientTop||0)),!e.relatedTarget&&a&&(e.relatedTarget=a===e.target?n.toElement:a),!e.which&&u!==t&&(e.which=u&1?1:u&2?3:u&4?2:0),e}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==ot()&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:"focusin"},blur:{trigger:function(){if(this===ot()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if(w.nodeName(this,"input")&&this.type==="checkbox"&&this.click)return this.click(),!1},_default:function(e){return w.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){e.result!==t&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,r){var i=w.extend(new w.Event,n,{type:e,isSimulated:!0,originalEvent:{}});r?w.event.trigger(i,null,t):w.event.dispatch.call(t,i),i.isDefaultPrevented()&&n.preventDefault()}},w.removeEvent=o.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){var r="on"+t;e.detachEvent&&(typeof e[r]===i&&(e[r]=null),e.detachEvent(r,n))},w.Event=function(e,t){if(!(this instanceof w.Event))return new w.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.returnValue===!1||e.getPreventDefault&&e.getPreventDefault()?it:st):this.type=e,t&&w.extend(this,t),this.timeStamp=e&&e.timeStamp||w.now(),this[w.expando]=!0},w.Event.prototype={isDefaultPrevented:st,isPropagationStopped:st,isImmediatePropagationStopped:st,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=it;if(!e)return;e.preventDefault?e.preventDefault():e.returnValue=!1},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=it;if(!e)return;e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=it,this.stopPropagation()}},w.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){w.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,s=e.handleObj;if(!i||i!==r&&!w.contains(r,i))e.type=s.origType,n=s.handler.apply(this,arguments),e.type=t;return n}}}),w.support.submitBubbles||(w.event.special.submit={setup:function(){if(w.nodeName(this,"form"))return!1;w.event.add(this,"click._submit keypress._submit",function(e){var n=e.target,r=w.nodeName(n,"input")||w.nodeName(n,"button")?n.form:t;r&&!w._data(r,"submitBubbles")&&(w.event.add(r,"submit._submit",function(e){e._submit_bubble=!0}),w._data(r,"submitBubbles",!0))})},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&w.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){if(w.nodeName(this,"form"))return!1;w.event.remove(this,"._submit")}}),w.support.changeBubbles||(w.event.special.change={setup:function(){if(Z.test(this.nodeName)){if(this.type==="checkbox"||this.type==="radio")w.event.add(this,"propertychange._change",function(e){e.originalEvent.propertyName==="checked"&&(this._just_changed=!0)}),w.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),w.event.simulate("change",this,e,!0)});return!1}w.event.add(this,"beforeactivate._change",function(e){var t=e.target;Z.test(t.nodeName)&&!w._data(t,"changeBubbles")&&(w.event.add(t,"change._change",function(e){this.parentNode&&!e.isSimulated&&!e.isTrigger&&w.event.simulate("change",this.parentNode,e,!0)}),w._data(t,"changeBubbles",!0))})},handle:function(e){var t=e.target;if(this!==t||e.isSimulated||e.isTrigger||t.type!=="radio"&&t.type!=="checkbox")return e.handleObj.handler.apply(this,arguments)},teardown:function(){return w.event.remove(this,"._change"),!Z.test(this.nodeName)}}),w.support.focusinBubbles||w.each({focus:"focusin",blur:"focusout"},function(e,t){var n=0,r=function(e){w.event.simulate(t,e.target,w.event.fix(e),!0)};w.event.special[t]={setup:function(){n++===0&&o.addEventListener(e,r,!0)},teardown:function(){--n===0&&o.removeEventListener(e,r,!0)}}}),w.fn.extend({on:function(e,n,r,i,s){var o,u;if(typeof e=="object"){typeof n!="string"&&(r=r||n,n=t);for(o in e)this.on(o,n,r,e[o],s);return this}r==null&&i==null?(i=n,r=n=t):i==null&&(typeof n=="string"?(i=r,r=t):(i=r,r=n,n=t));if(i===!1)i=st;else if(!i)return this;return s===1&&(u=i,i=function(e){return w().off(e),u.apply(this,arguments)},i.guid=u.guid||(u.guid=w.guid++)),this.each(function(){w.event.add(this,e,i,r,n)})},one:function(e,t,n,r){return this.on(e,t,n,r,1)},off:function(e,n,r){var i,s;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,w(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if(typeof e=="object"){for(s in e)this.off(s,n,e[s]);return this}if(n===!1||typeof n=="function")r=n,n=t;return r===!1&&(r=st),this.each(function(){w.event.remove(this,e,r,n)})},trigger:function(e,t){return this.each(function(){w.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return w.event.trigger(e,t,n,!0)}});var ut=/^.[^:#\[\.,]*$/,at=/^(?:parents|prev(?:Until|All))/,ft=w.expr.match.needsContext,lt={children:!0,contents:!0,next:!0,prev:!0};w.fn.extend({find:function(e){var t,n=[],r=this,i=r.length;if(typeof e!="string")return this.pushStack(w(e).filter(function(){for(t=0;t<i;t++)if(w.contains(r[t],this))return!0}));for(t=0;t<i;t++)w.find(e,r[t],n);return n=this.pushStack(i>1?w.unique(n):n),n.selector=this.selector?this.selector+" "+e:e,n},has:function(e){var t,n=w(e,this),r=n.length;return this.filter(function(){for(t=0;t<r;t++)if(w.contains(this,n[t]))return!0})},not:function(e){return this.pushStack(ht(this,e||[],!0))},filter:function(e){return this.pushStack(ht(this,e||[],!1))},is:function(e){return!!ht(this,typeof e=="string"&&ft.test(e)?w(e):e||[],!1).length},closest:function(e,t){var n,r=0,i=this.length,s=[],o=ft.test(e)||typeof e!="string"?w(e,t||this.context):0;for(;r<i;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(o?o.index(n)>-1:n.nodeType===1&&w.find.matchesSelector(n,e))){n=s.push(n);break}return this.pushStack(s.length>1?w.unique(s):s)},index:function(e){return e?typeof e=="string"?w.inArray(this[0],w(e)):w.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){var n=typeof e=="string"?w(e,t):w.makeArray(e&&e.nodeType?[e]:e),r=w.merge(this.get(),n);return this.pushStack(w.unique(r))},addBack:function(e){return this.add(e==null?this.prevObject:this.prevObject.filter(e))}}),w.each({parent:function(e){var t=e.parentNode;return t&&t.nodeType!==11?t:null},parents:function(e){return w.dir(e,"parentNode")},parentsUntil:function(e,t,n){return w.dir(e,"parentNode",n)},next:function(e){return ct(e,"nextSibling")},prev:function(e){return ct(e,"previousSibling")},nextAll:function(e){return w.dir(e,"nextSibling")},prevAll:function(e){return w.dir(e,"previousSibling")},nextUntil:function(e,t,n){return w.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return w.dir(e,"previousSibling",n)},siblings:function(e){return w.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return w.sibling(e.firstChild)},contents:function(e){return w.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:w.merge([],e.childNodes)}},function(e,t){w.fn[e]=function(n,r){var i=w.map(this,t,n);return e.slice(-5)!=="Until"&&(r=n),r&&typeof r=="string"&&(i=w.filter(r,i)),this.length>1&&(lt[e]||(i=w.unique(i)),at.test(e)&&(i=i.reverse())),this.pushStack(i)}}),w.extend({filter:function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),t.length===1&&r.nodeType===1?w.find.matchesSelector(r,e)?[r]:[]:w.find.matches(e,w.grep(t,function(e){return e.nodeType===1}))},dir:function(e,n,r){var i=[],s=e[n];while(s&&s.nodeType!==9&&(r===t||s.nodeType!==1||!w(s).is(r)))s.nodeType===1&&i.push(s),s=s[n];return i},sibling:function(e,t){var n=[];for(;e;e=e.nextSibling)e.nodeType===1&&e!==t&&n.push(e);return n}});var dt="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",vt=/ jQuery\d+="(?:null|\d+)"/g,mt=new RegExp("<(?:"+dt+")[\\s/>]","i"),gt=/^\s+/,yt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,bt=/<([\w:]+)/,wt=/<tbody/i,Et=/<|&#?\w+;/,St=/<(?:script|style|link)/i,xt=/^(?:checkbox|radio)$/i,Tt=/checked\s*(?:[^=]|=\s*.checked.)/i,Nt=/^$|\/(?:java|ecma)script/i,Ct=/^true\/(.*)/,kt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Lt={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:w.support.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},At=pt(o),Ot=At.appendChild(o.createElement("div"));Lt.optgroup=Lt.option,Lt.tbody=Lt.tfoot=Lt.colgroup=Lt.caption=Lt.thead,Lt.th=Lt.td,w.fn.extend({text:function(e){return w.access(this,function(e){return e===t?w.text(this):this.empty().append((this[0]&&this[0].ownerDocument||o).createTextNode(e))},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var t=Mt(this,e);t.appendChild(e)}})},prepend:function(){return this.domManip(arguments,function(e){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var t=Mt(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){var n,r=e?w.filter(e,this):this,i=0;for(;(n=r[i])!=null;i++)!t&&n.nodeType===1&&w.cleanData(jt(n)),n.parentNode&&(t&&w.contains(n.ownerDocument,n)&&Pt(jt(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){var e,t=0;for(;(e=this[t])!=null;t++){e.nodeType===1&&w.cleanData(jt(e,!1));while(e.firstChild)e.removeChild(e.firstChild);e.options&&w.nodeName(e,"select")&&(e.options.length=0)}return this},clone:function(e,t){return e=e==null?!1:e,t=t==null?e:t,this.map(function(){return w.clone(this,e,t)})},html:function(e){return w.access(this,function(e){var n=this[0]||{},r=0,i=this.length;if(e===t)return n.nodeType===1?n.innerHTML.replace(vt,""):t;if(typeof e=="string"&&!St.test(e)&&(w.support.htmlSerialize||!mt.test(e))&&(w.support.leadingWhitespace||!gt.test(e))&&!Lt[(bt.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(yt,"<$1></$2>");try{for(;r<i;r++)n=this[r]||{},n.nodeType===1&&(w.cleanData(jt(n,!1)),n.innerHTML=e);n=0}catch(s){}}n&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=w.map(this,function(e){return[e.nextSibling,e.parentNode]}),t=0;return this.domManip(arguments,function(n){var r=e[t++],i=e[t++];i&&(r&&r.parentNode!==i&&(r=this.nextSibling),w(this).remove(),i.insertBefore(n,r))},!0),t?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(e,t,n){e=p.apply([],e);var r,i,s,o,u,a,f=0,l=this.length,c=this,h=l-1,d=e[0],v=w.isFunction(d);if(v||!(l<=1||typeof d!="string"||w.support.checkClone||!Tt.test(d)))return this.each(function(r){var i=c.eq(r);v&&(e[0]=d.call(this,r,i.html())),i.domManip(e,t,n)});if(l){a=w.buildFragment(e,this[0].ownerDocument,!1,!n&&this),r=a.firstChild,a.childNodes.length===1&&(a=r);if(r){o=w.map(jt(a,"script"),_t),s=o.length;for(;f<l;f++)i=a,f!==h&&(i=w.clone(i,!0,!0),s&&w.merge(o,jt(i,"script"))),t.call(this[f],i,f);if(s){u=o[o.length-1].ownerDocument,w.map(o,Dt);for(f=0;f<s;f++)i=o[f],Nt.test(i.type||"")&&!w._data(i,"globalEval")&&w.contains(u,i)&&(i.src?w._evalUrl(i.src):w.globalEval((i.text||i.textContent||i.innerHTML||"").replace(kt,"")))}a=r=null}}return this}}),w.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){w.fn[e]=function(e){var n,r=0,i=[],s=w(e),o=s.length-1;for(;r<=o;r++)n=r===o?this:this.clone(!0),w(s[r])[t](n),d.apply(i,n.get());return this.pushStack(i)}}),w.extend({clone:function(e,t,n){var r,i,s,o,u,a=w.contains(e.ownerDocument,e);w.support.html5Clone||w.isXMLDoc(e)||!mt.test("<"+e.nodeName+">")?s=e.cloneNode(!0):(Ot.innerHTML=e.outerHTML,Ot.removeChild(s=Ot.firstChild));if((!w.support.noCloneEvent||!w.support.noCloneChecked)&&(e.nodeType===1||e.nodeType===11)&&!w.isXMLDoc(e)){r=jt(s),u=jt(e);for(o=0;(i=u[o])!=null;++o)r[o]&&Bt(i,r[o])}if(t)if(n){u=u||jt(e),r=r||jt(s);for(o=0;(i=u[o])!=null;o++)Ht(i,r[o])}else Ht(e,s);return r=jt(s,"script"),r.length>0&&Pt(r,!a&&jt(e,"script")),r=u=i=null,s},buildFragment:function(e,t,n,r){var i,s,o,u,a,f,l,c=e.length,h=pt(t),p=[],d=0;for(;d<c;d++){s=e[d];if(s||s===0)if(w.type(s)==="object")w.merge(p,s.nodeType?[s]:s);else if(!Et.test(s))p.push(t.createTextNode(s));else{u=u||h.appendChild(t.createElement("div")),a=(bt.exec(s)||["",""])[1].toLowerCase(),l=Lt[a]||Lt._default,u.innerHTML=l[1]+s.replace(yt,"<$1></$2>")+l[2],i=l[0];while(i--)u=u.lastChild;!w.support.leadingWhitespace&&gt.test(s)&&p.push(t.createTextNode(gt.exec(s)[0]));if(!w.support.tbody){s=a==="table"&&!wt.test(s)?u.firstChild:l[1]==="<table>"&&!wt.test(s)?u:0,i=s&&s.childNodes.length;while(i--)w.nodeName(f=s.childNodes[i],"tbody")&&!f.childNodes.length&&s.removeChild(f)}w.merge(p,u.childNodes),u.textContent="";while(u.firstChild)u.removeChild(u.firstChild);u=h.lastChild}}u&&h.removeChild(u),w.support.appendChecked||w.grep(jt(p,"input"),Ft),d=0;while(s=p[d++]){if(r&&w.inArray(s,r)!==-1)continue;o=w.contains(s.ownerDocument,s),u=jt(h.appendChild(s),"script"),o&&Pt(u);if(n){i=0;while(s=u[i++])Nt.test(s.type||"")&&n.push(s)}}return u=null,h},cleanData:function(e,t){var n,r,s,o,u=0,a=w.expando,f=w.cache,l=w.support.deleteExpando,h=w.event.special;for(;(n=e[u])!=null;u++)if(t||w.acceptData(n)){s=n[a],o=s&&f[s];if(o){if(o.events)for(r in o.events)h[r]?w.event.remove(n,r):w.removeEvent(n,r,o.handle);f[s]&&(delete f[s],l?delete n[a]:typeof n.removeAttribute!==i?n.removeAttribute(a):n[a]=null,c.push(s))}}},_evalUrl:function(e){return w.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})}}),w.fn.extend({wrapAll:function(e){if(w.isFunction(e))return this.each(function(t){w(this).wrapAll(e.call(this,t))});if(this[0]){var t=w(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstChild&&e.firstChild.nodeType===1)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return w.isFunction(e)?this.each(function(t){w(this).wrapInner(e.call(this,t))}):this.each(function(){var t=w(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=w.isFunction(e);return this.each(function(n){w(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){w.nodeName(this,"body")||w(this).replaceWith(this.childNodes)}).end()}});var It,qt,Rt,Ut=/alpha\([^)]*\)/i,zt=/opacity\s*=\s*([^)]*)/,Wt=/^(top|right|bottom|left)$/,Xt=/^(none|table(?!-c[ea]).+)/,Vt=/^margin/,$t=new RegExp("^("+E+")(.*)$","i"),Jt=new RegExp("^("+E+")(?!px)[a-z%]+$","i"),Kt=new RegExp("^([+-])=("+E+")","i"),Qt={BODY:"block"},Gt={position:"absolute",visibility:"hidden",display:"block"},Yt={letterSpacing:0,fontWeight:400},Zt=["Top","Right","Bottom","Left"],en=["Webkit","O","Moz","ms"];w.fn.extend({css:function(e,n){return w.access(this,function(e,n,r){var i,s,o={},u=0;if(w.isArray(n)){s=qt(e),i=n.length;for(;u<i;u++)o[n[u]]=w.css(e,n[u],!1,s);return o}return r!==t?w.style(e,n,r):w.css(e,n)},e,n,arguments.length>1)},show:function(){return rn(this,!0)},hide:function(){return rn(this)},toggle:function(e){return typeof e=="boolean"?e?this.show():this.hide():this.each(function(){nn(this)?w(this).show():w(this).hide()})}}),w.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Rt(e,"opacity");return n===""?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":w.support.cssFloat?"cssFloat":"styleFloat"},style:function(e,n,r,i){if(!e||e.nodeType===3||e.nodeType===8||!e.style)return;var s,o,u,a=w.camelCase(n),f=e.style;n=w.cssProps[a]||(w.cssProps[a]=tn(f,a)),u=w.cssHooks[n]||w.cssHooks[a];if(r===t)return u&&"get"in u&&(s=u.get(e,!1,i))!==t?s:f[n];o=typeof r,o==="string"&&(s=Kt.exec(r))&&(r=(s[1]+1)*s[2]+parseFloat(w.css(e,n)),o="number");if(r==null||o==="number"&&isNaN(r))return;o==="number"&&!w.cssNumber[a]&&(r+="px"),!w.support.clearCloneStyle&&r===""&&n.indexOf("background")===0&&(f[n]="inherit");if(!u||!("set"in u)||(r=u.set(e,r,i))!==t)try{f[n]=r}catch(l){}},css:function(e,n,r,i){var s,o,u,a=w.camelCase(n);return n=w.cssProps[a]||(w.cssProps[a]=tn(e.style,a)),u=w.cssHooks[n]||w.cssHooks[a],u&&"get"in u&&(o=u.get(e,!0,r)),o===t&&(o=Rt(e,n,i)),o==="normal"&&n in Yt&&(o=Yt[n]),r===""||r?(s=parseFloat(o),r===!0||w.isNumeric(s)?s||0:o):o}}),e.getComputedStyle?(qt=function(t){return e.getComputedStyle(t,null)},Rt=function(e,n,r){var i,s,o,u=r||qt(e),a=u?u.getPropertyValue(n)||u[n]:t,f=e.style;return u&&(a===""&&!w.contains(e.ownerDocument,e)&&(a=w.style(e,n)),Jt.test(a)&&Vt.test(n)&&(i=f.width,s=f.minWidth,o=f.maxWidth,f.minWidth=f.maxWidth=f.width=a,a=u.width,f.width=i,f.minWidth=s,f.maxWidth=o)),a}):o.documentElement.currentStyle&&(qt=function(e){return e.currentStyle},Rt=function(e,n,r){var i,s,o,u=r||qt(e),a=u?u[n]:t,f=e.style;return a==null&&f&&f[n]&&(a=f[n]),Jt.test(a)&&!Wt.test(n)&&(i=f.left,s=e.runtimeStyle,o=s&&s.left,o&&(s.left=e.currentStyle.left),f.left=n==="fontSize"?"1em":a,a=f.pixelLeft+"px",f.left=i,o&&(s.left=o)),a===""?"auto":a}),w.each(["height","width"],function(e,t){w.cssHooks[t]={get:function(e,n,r){if(n)return e.offsetWidth===0&&Xt.test(w.css(e,"display"))?w.swap(e,Gt,function(){return un(e,t,r)}):un(e,t,r)},set:function(e,n,r){var i=r&&qt(e);return sn(e,n,r?on(e,t,r,w.support.boxSizing&&w.css(e,"boxSizing",!1,i)==="border-box",i):0)}}}),w.support.opacity||(w.cssHooks.opacity={get:function(e,t){return zt.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var n=e.style,r=e.currentStyle,i=w.isNumeric(t)?"alpha(opacity="+t*100+")":"",s=r&&r.filter||n.filter||"";n.zoom=1;if((t>=1||t==="")&&w.trim(s.replace(Ut,""))===""&&n.removeAttribute){n.removeAttribute("filter");if(t===""||r&&!r.filter)return}n.filter=Ut.test(s)?s.replace(Ut,i):s+" "+i}}),w(function(){w.support.reliableMarginRight||(w.cssHooks.marginRight={get:function(e,t){if(t)return w.swap(e,{display:"inline-block"},Rt,[e,"marginRight"])}}),!w.support.pixelPosition&&w.fn.position&&w.each(["top","left"],function(e,t){w.cssHooks[t]={get:function(e,n){if(n)return n=Rt(e,t),Jt.test(n)?w(e).position()[t]+"px":n}}})}),w.expr&&w.expr.filters&&(w.expr.filters.hidden=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0||!w.support.reliableHiddenOffsets&&(e.style&&e.style.display||w.css(e,"display"))==="none"},w.expr.filters.visible=function(e){return!w.expr.filters.hidden(e)}),w.each({margin:"",padding:"",border:"Width"},function(e,t){w.cssHooks[e+t]={expand:function(n){var r=0,i={},s=typeof n=="string"?n.split(" "):[n];for(;r<4;r++)i[e+Zt[r]+t]=s[r]||s[r-2]||s[0];return i}},Vt.test(e)||(w.cssHooks[e+t].set=sn)});var ln=/%20/g,cn=/\[\]$/,hn=/\r?\n/g,pn=/^(?:submit|button|image|reset|file)$/i,dn=/^(?:input|select|textarea|keygen)/i;w.fn.extend({serialize:function(){return w.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=w.prop(this,"elements");return e?w.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!w(this).is(":disabled")&&dn.test(this.nodeName)&&!pn.test(e)&&(this.checked||!xt.test(e))}).map(function(e,t){var n=w(this).val();return n==null?null:w.isArray(n)?w.map(n,function(e){return{name:t.name,value:e.replace(hn,"\r\n")}}):{name:t.name,value:n.replace(hn,"\r\n")}}).get()}}),w.param=function(e,n){var r,i=[],s=function(e,t){t=w.isFunction(t)?t():t==null?"":t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};n===t&&(n=w.ajaxSettings&&w.ajaxSettings.traditional);if(w.isArray(e)||e.jquery&&!w.isPlainObject(e))w.each(e,function(){s(this.name,this.value)});else for(r in e)vn(r,e[r],n,s);return i.join("&").replace(ln,"+")},w.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){w.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),w.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return arguments.length===1?this.off(e,"**"):this.off(t,e||"**",n)}});var mn,gn,yn=w.now(),bn=/\?/,wn=/#.*$/,En=/([?&])_=[^&]*/,Sn=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,xn=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Tn=/^(?:GET|HEAD)$/,Nn=/^\/\//,Cn=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,kn=w.fn.load,Ln={},An={},On="*/".concat("*");try{gn=s.href}catch(Mn){gn=o.createElement("a"),gn.href="",gn=gn.href}mn=Cn.exec(gn.toLowerCase())||[],w.fn.load=function(e,n,r){if(typeof e!="string"&&kn)return kn.apply(this,arguments);var i,s,o,u=this,a=e.indexOf(" ");return a>=0&&(i=e.slice(a,e.length),e=e.slice(0,a)),w.isFunction(n)?(r=n,n=t):n&&typeof n=="object"&&(o="POST"),u.length>0&&w.ajax({url:e,type:o,dataType:"html",data:n}).done(function(e){s=arguments,u.html(i?w("<div>").append(w.parseHTML(e)).find(i):e)}).complete(r&&function(e,t){u.each(r,s||[e.responseText,t,e])}),this},w.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){w.fn[t]=function(e){return this.on(t,e)}}),w.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:gn,type:"GET",isLocal:xn.test(mn[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":On,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":w.parseJSON,"text xml":w.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Pn(Pn(e,w.ajaxSettings),t):Pn(w.ajaxSettings,e)},ajaxPrefilter:_n(Ln),ajaxTransport:_n(An),ajax:function(e,n){function N(e,n,r,i){var l,g,y,E,S,T=n;if(b===2)return;b=2,u&&clearTimeout(u),f=t,o=i||"",x.readyState=e>0?4:0,l=e>=200&&e<300||e===304,r&&(E=Hn(c,x,r)),E=Bn(c,E,x,l);if(l)c.ifModified&&(S=x.getResponseHeader("Last-Modified"),S&&(w.lastModified[s]=S),S=x.getResponseHeader("etag"),S&&(w.etag[s]=S)),e===204||c.type==="HEAD"?T="nocontent":e===304?T="notmodified":(T=E.state,g=E.data,y=E.error,l=!y);else{y=T;if(e||!T)T="error",e<0&&(e=0)}x.status=e,x.statusText=(n||T)+"",l?d.resolveWith(h,[g,T,x]):d.rejectWith(h,[x,T,y]),x.statusCode(m),m=t,a&&p.trigger(l?"ajaxSuccess":"ajaxError",[x,c,l?g:y]),v.fireWith(h,[x,T]),a&&(p.trigger("ajaxComplete",[x,c]),--w.active||w.event.trigger("ajaxStop"))}typeof e=="object"&&(n=e,e=t),n=n||{};var r,i,s,o,u,a,f,l,c=w.ajaxSetup({},n),h=c.context||c,p=c.context&&(h.nodeType||h.jquery)?w(h):w.event,d=w.Deferred(),v=w.Callbacks("once memory"),m=c.statusCode||{},g={},y={},b=0,E="canceled",x={readyState:0,getResponseHeader:function(e){var t;if(b===2){if(!l){l={};while(t=Sn.exec(o))l[t[1].toLowerCase()]=t[2]}t=l[e.toLowerCase()]}return t==null?null:t},getAllResponseHeaders:function(){return b===2?o:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return b||(e=y[n]=y[n]||e,g[e]=t),this},overrideMimeType:function(e){return b||(c.mimeType=e),this},statusCode:function(e){var t;if(e)if(b<2)for(t in e)m[t]=[m[t],e[t]];else x.always(e[x.status]);return this},abort:function(e){var t=e||E;return f&&f.abort(t),N(0,t),this}};d.promise(x).complete=v.add,x.success=x.done,x.error=x.fail,c.url=((e||c.url||gn)+"").replace(wn,"").replace(Nn,mn[1]+"//"),c.type=n.method||n.type||c.method||c.type,c.dataTypes=w.trim(c.dataType||"*").toLowerCase().match(S)||[""],c.crossDomain==null&&(r=Cn.exec(c.url.toLowerCase()),c.crossDomain=!(!r||r[1]===mn[1]&&r[2]===mn[2]&&(r[3]||(r[1]==="http:"?"80":"443"))===(mn[3]||(mn[1]==="http:"?"80":"443")))),c.data&&c.processData&&typeof c.data!="string"&&(c.data=w.param(c.data,c.traditional)),Dn(Ln,c,n,x);if(b===2)return x;a=c.global,a&&w.active++===0&&w.event.trigger("ajaxStart"),c.type=c.type.toUpperCase(),c.hasContent=!Tn.test(c.type),s=c.url,c.hasContent||(c.data&&(s=c.url+=(bn.test(s)?"&":"?")+c.data,delete c.data),c.cache===!1&&(c.url=En.test(s)?s.replace(En,"$1_="+yn++):s+(bn.test(s)?"&":"?")+"_="+yn++)),c.ifModified&&(w.lastModified[s]&&x.setRequestHeader("If-Modified-Since",w.lastModified[s]),w.etag[s]&&x.setRequestHeader("If-None-Match",w.etag[s])),(c.data&&c.hasContent&&c.contentType!==!1||n.contentType)&&x.setRequestHeader("Content-Type",c.contentType),x.setRequestHeader("Accept",c.dataTypes[0]&&c.accepts[c.dataTypes[0]]?c.accepts[c.dataTypes[0]]+(c.dataTypes[0]!=="*"?", "+On+"; q=0.01":""):c.accepts["*"]);for(i in c.headers)x.setRequestHeader(i,c.headers[i]);if(!c.beforeSend||c.beforeSend.call(h,x,c)!==!1&&b!==2){E="abort";for(i in{success:1,error:1,complete:1})x[i](c[i]);f=Dn(An,c,n,x);if(!f)N(-1,"No Transport");else{x.readyState=1,a&&p.trigger("ajaxSend",[x,c]),c.async&&c.timeout>0&&(u=setTimeout(function(){x.abort("timeout")},c.timeout));try{b=1,f.send(g,N)}catch(T){if(!(b<2))throw T;N(-1,T)}}return x}return x.abort()},getJSON:function(e,t,n){return w.get(e,t,n,"json")},getScript:function(e,n){return w.get(e,t,n,"script")}}),w.each(["get","post"],function(e,n){w[n]=function(e,r,i,s){return w.isFunction(r)&&(s=s||i,i=r,r=t),w.ajax({url:e,type:n,dataType:s,data:r,success:i})}}),w.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return w.globalEval(e),e}}}),w.ajaxPrefilter("script",function(e){e.cache===t&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),w.ajaxTransport("script",function(e){if(e.crossDomain){var n,r=o.head||w("head")[0]||o.documentElement;return{send:function(t,i){n=o.createElement("script"),n.async=!0,e.scriptCharset&&(n.charset=e.scriptCharset),n.src=e.url,n.onload=n.onreadystatechange=function(e,t){if(t||!n.readyState||/loaded|complete/.test(n.readyState))n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),n=null,t||i(200,"success")},r.insertBefore(n,r.firstChild)},abort:function(){n&&n.onload(t,!0)}}}});var jn=[],Fn=/(=)\?(?=&|$)|\?\?/;w.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=jn.pop()||w.expando+"_"+yn++;return this[e]=!0,e}}),w.ajaxPrefilter("json jsonp",function(n,r,i){var s,o,u,a=n.jsonp!==!1&&(Fn.test(n.url)?"url":typeof n.data=="string"&&!(n.contentType||"").indexOf("application/x-www-form-urlencoded")&&Fn.test(n.data)&&"data");if(a||n.dataTypes[0]==="jsonp")return s=n.jsonpCallback=w.isFunction(n.jsonpCallback)?n.jsonpCallback():n.jsonpCallback,a?n[a]=n[a].replace(Fn,"$1"+s):n.jsonp!==!1&&(n.url+=(bn.test(n.url)?"&":"?")+n.jsonp+"="+s),n.converters["script json"]=function(){return u||w.error(s+" was not called"),u[0]},n.dataTypes[0]="json",o=e[s],e[s]=function(){u=arguments},i.always(function(){e[s]=o,n[s]&&(n.jsonpCallback=r.jsonpCallback,jn.push(s)),u&&w.isFunction(o)&&o(u[0]),u=o=t}),"script"});var In,qn,Rn=0,Un=e.ActiveXObject&&function(){var e;for(e in In)In[e](t,!0)};w.ajaxSettings.xhr=e.ActiveXObject?function(){return!this.isLocal&&zn()||Wn()}:zn,qn=w.ajaxSettings.xhr(),w.support.cors=!!qn&&"withCredentials"in qn,qn=w.support.ajax=!!qn,qn&&w.ajaxTransport(function(n){if(!n.crossDomain||w.support.cors){var r;return{send:function(i,s){var o,u,a=n.xhr();n.username?a.open(n.type,n.url,n.async,n.username,n.password):a.open(n.type,n.url,n.async);if(n.xhrFields)for(u in n.xhrFields)a[u]=n.xhrFields[u];n.mimeType&&a.overrideMimeType&&a.overrideMimeType(n.mimeType),!n.crossDomain&&!i["X-Requested-With"]&&(i["X-Requested-With"]="XMLHttpRequest");try{for(u in i)a.setRequestHeader(u,i[u])}catch(f){}a.send(n.hasContent&&n.data||null),r=function(e,i){var u,f,l,c;try{if(r&&(i||a.readyState===4)){r=t,o&&(a.onreadystatechange=w.noop,Un&&delete In[o]);if(i)a.readyState!==4&&a.abort();else{c={},u=a.status,f=a.getAllResponseHeaders(),typeof a.responseText=="string"&&(c.text=a.responseText);try{l=a.statusText}catch(h){l=""}!u&&n.isLocal&&!n.crossDomain?u=c.text?200:404:u===1223&&(u=204)}}}catch(p){i||s(-1,p)}c&&s(u,l,c,f)},n.async?a.readyState===4?setTimeout(r):(o=++Rn,Un&&(In||(In={},w(e).unload(Un)),In[o]=r),a.onreadystatechange=r):r()},abort:function(){r&&r(t,!0)}}}});var Xn,Vn,$n=/^(?:toggle|show|hide)$/,Jn=new RegExp("^(?:([+-])=|)("+E+")([a-z%]*)$","i"),Kn=/queueHooks$/,Qn=[nr],Gn={"*":[function(e,t){var n=this.createTween(e,t),r=n.cur(),i=Jn.exec(t),s=i&&i[3]||(w.cssNumber[e]?"":"px"),o=(w.cssNumber[e]||s!=="px"&&+r)&&Jn.exec(w.css(n.elem,e)),u=1,a=20;if(o&&o[3]!==s){s=s||o[3],i=i||[],o=+r||1;do u=u||".5",o/=u,w.style(n.elem,e,o+s);while(u!==(u=n.cur()/r)&&u!==1&&--a)}return i&&(o=n.start=+o||+r||0,n.unit=s,n.end=i[1]?o+(i[1]+1)*i[2]:+i[2]),n}]};w.Animation=w.extend(er,{tweener:function(e,t){w.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");var n,r=0,i=e.length;for(;r<i;r++)n=e[r],Gn[n]=Gn[n]||[],Gn[n].unshift(t)},prefilter:function(e,t){t?Qn.unshift(e):Qn.push(e)}}),w.Tween=rr,rr.prototype={constructor:rr,init:function(e,t,n,r,i,s){this.elem=e,this.prop=n,this.easing=i||"swing",this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=s||(w.cssNumber[n]?"":"px")},cur:function(){var e=rr.propHooks[this.prop];return e&&e.get?e.get(this):rr.propHooks._default.get(this)},run:function(e){var t,n=rr.propHooks[this.prop];return this.options.duration?this.pos=t=w.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):rr.propHooks._default.set(this),this}},rr.prototype.init.prototype=rr.prototype,rr.propHooks={_default:{get:function(e){var t;return e.elem[e.prop]==null||!!e.elem.style&&e.elem.style[e.prop]!=null?(t=w.css(e.elem,e.prop,""),!t||t==="auto"?0:t):e.elem[e.prop]},set:function(e){w.fx.step[e.prop]?w.fx.step[e.prop](e):e.elem.style&&(e.elem.style[w.cssProps[e.prop]]!=null||w.cssHooks[e.prop])?w.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},rr.propHooks.scrollTop=rr.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},w.each(["toggle","show","hide"],function(e,t){var n=w.fn[t];w.fn[t]=function(e,r,i){return e==null||typeof e=="boolean"?n.apply(this,arguments):this.animate(ir(t,!0),e,r,i)}}),w.fn.extend({fadeTo:function(e,t,n,r){return this.filter(nn).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=w.isEmptyObject(e),s=w.speed(t,n,r),o=function(){var t=er(this,w.extend({},e),s);(i||w._data(this,"finish"))&&t.stop(!0)};return o.finish=o,i||s.queue===!1?this.each(o):this.queue(s.queue,o)},stop:function(e,n,r){var i=function(e){var t=e.stop;delete e.stop,t(r)};return typeof e!="string"&&(r=n,n=e,e=t),n&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,n=e!=null&&e+"queueHooks",s=w.timers,o=w._data(this);if(n)o[n]&&o[n].stop&&i(o[n]);else for(n in o)o[n]&&o[n].stop&&Kn.test(n)&&i(o[n]);for(n=s.length;n--;)s[n].elem===this&&(e==null||s[n].queue===e)&&(s[n].anim.stop(r),t=!1,s.splice(n,1));(t||!r)&&w.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=w._data(this),r=n[e+"queue"],i=n[e+"queueHooks"],s=w.timers,o=r?r.length:0;n.finish=!0,w.queue(this,e,[]),i&&i.stop&&i.stop.call(this,!0);for(t=s.length;t--;)s[t].elem===this&&s[t].queue===e&&(s[t].anim.stop(!0),s.splice(t,1));for(t=0;t<o;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}}),w.each({slideDown:ir("show"),slideUp:ir("hide"),slideToggle:ir("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){w.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),w.speed=function(e,t,n){var r=e&&typeof e=="object"?w.extend({},e):{complete:n||!n&&t||w.isFunction(e)&&e,duration:e,easing:n&&t||t&&!w.isFunction(t)&&t};r.duration=w.fx.off?0:typeof r.duration=="number"?r.duration:r.duration in w.fx.speeds?w.fx.speeds[r.duration]:w.fx.speeds._default;if(r.queue==null||r.queue===!0)r.queue="fx";return r.old=r.complete,r.complete=function(){w.isFunction(r.old)&&r.old.call(this),r.queue&&w.dequeue(this,r.queue)},r},w.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},w.timers=[],w.fx=rr.prototype.init,w.fx.tick=function(){var e,n=w.timers,r=0;Xn=w.now();for(;r<n.length;r++)e=n[r],!e()&&n[r]===e&&n.splice(r--,1);n.length||w.fx.stop(),Xn=t},w.fx.timer=function(e){e()&&w.timers.push(e)&&w.fx.start()},w.fx.interval=13,w.fx.start=function(){Vn||(Vn=setInterval(w.fx.tick,w.fx.interval))},w.fx.stop=function(){clearInterval(Vn),Vn=null},w.fx.speeds={slow:600,fast:200,_default:400},w.fx.step={},w.expr&&w.expr.filters&&(w.expr.filters.animated=function(e){return w.grep(w.timers,function(t){return e===t.elem}).length}),w.fn.offset=function(e){if(arguments.length)return e===t?this:this.each(function(t){w.offset.setOffset(this,e,t)});var n,r,s={top:0,left:0},o=this[0],u=o&&o.ownerDocument;if(!u)return;return n=u.documentElement,w.contains(n,o)?(typeof o.getBoundingClientRect!==i&&(s=o.getBoundingClientRect()),r=sr(u),{top:s.top+(r.pageYOffset||n.scrollTop)-(n.clientTop||0),left:s.left+(r.pageXOffset||n.scrollLeft)-(n.clientLeft||0)}):s},w.offset={setOffset:function(e,t,n){var r=w.css(e,"position");r==="static"&&(e.style.position="relative");var i=w(e),s=i.offset(),o=w.css(e,"top"),u=w.css(e,"left"),a=(r==="absolute"||r==="fixed")&&w.inArray("auto",[o,u])>-1,f={},l={},c,h;a?(l=i.position(),c=l.top,h=l.left):(c=parseFloat(o)||0,h=parseFloat(u)||0),w.isFunction(t)&&(t=t.call(e,n,s)),t.top!=null&&(f.top=t.top-s.top+c),t.left!=null&&(f.left=t.left-s.left+h),"using"in t?t.using.call(e,f):i.css(f)}},w.fn.extend({position:function(){if(!this[0])return;var e,t,n={top:0,left:0},r=this[0];return w.css(r,"position")==="fixed"?t=r.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),w.nodeName(e[0],"html")||(n=e.offset()),n.top+=w.css(e[0],"borderTopWidth",!0),n.left+=w.css(e[0],"borderLeftWidth",!0)),{top:t.top-n.top-w.css(r,"marginTop",!0),left:t.left-n.left-w.css(r,"marginLeft",!0)}},offsetParent:function(){return this.map(function(){var e=this.offsetParent||u;while(e&&!w.nodeName(e,"html")&&w.css(e,"position")==="static")e=e.offsetParent;return e||u})}}),w.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,n){var r=/Y/.test(n);w.fn[e]=function(i){return w.access(this,function(e,i,s){var o=sr(e);if(s===t)return o?n in o?o[n]:o.document.documentElement[i]:e[i];o?o.scrollTo(r?w(o).scrollLeft():s,r?s:w(o).scrollTop()):e[i]=s},e,i,arguments.length,null)}}),w.each({Height:"height",Width:"width"},function(e,n){w.each({padding:"inner"+e,content:n,"":"outer"+e},function(r,i){w.fn[i]=function(i,s){var o=arguments.length&&(r||typeof i!="boolean"),u=r||(i===!0||s===!0?"margin":"border");return w.access(this,function(n,r,i){var s;return w.isWindow(n)?n.document.documentElement["client"+e]:n.nodeType===9?(s=n.documentElement,Math.max(n.body["scroll"+e],s["scroll"+e],n.body["offset"+e],s["offset"+e],s["client"+e])):i===t?w.css(n,r,u):w.style(n,r,i,u)},n,o?i:t,o,null)}})}),w.fn.size=function(){return this.length},w.fn.andSelf=w.fn.addBack,typeof module=="object"&&module&&typeof module.exports=="object"?module.exports=w:(e.jQuery=e.$=w,typeof define=="function"&&define.amd&&define("jquery",[],function(){return w}))})(window),function(){var e=this,t=e._,n={},r=Array.prototype,i=Object.prototype,s=Function.prototype,o=r.push,u=r.slice,a=r.concat,f=i.toString,l=i.hasOwnProperty,c=r.forEach,h=r.map,p=r.reduce,d=r.reduceRight,v=r.filter,m=r.every,g=r.some,y=r.indexOf,b=r.lastIndexOf,w=Array.isArray,E=Object.keys,S=s.bind,x=function(e){if(e instanceof x)return e;if(!(this instanceof x))return new x(e);this._wrapped=e};typeof exports!="undefined"?(typeof module!="undefined"&&module.exports&&(exports=module.exports=x),exports._=x):e._=x,x.VERSION="1.5.0";var T=x.each=x.forEach=function(e,t,r){if(e==null)return;if(c&&e.forEach===c)e.forEach(t,r);else if(e.length===+e.length){for(var i=0,s=e.length;i<s;i++)if(t.call(r,e[i],i,e)===n)return}else for(var o in e)if(x.has(e,o)&&t.call(r,e[o],o,e)===n)return};x.map=x.collect=function(e,t,n){var r=[];return e==null?r:h&&e.map===h?e.map(t,n):(T(e,function(e,i,s){r.push(t.call(n,e,i,s))}),r)};var N="Reduce of empty array with no initial value";x.reduce=x.foldl=x.inject=function(e,t,n,r){var i=arguments.length>2;e==null&&(e=[]);if(p&&e.reduce===p)return r&&(t=x.bind(t,r)),i?e.reduce(t,n):e.reduce(t);T(e,function(e,s,o){i?n=t.call(r,n,e,s,o):(n=e,i=!0)});if(!i)throw new TypeError(N);return n},x.reduceRight=x.foldr=function(e,t,n,r){var i=arguments.length>2;e==null&&(e=[]);if(d&&e.reduceRight===d)return r&&(t=x.bind(t,r)),i?e.reduceRight(t,n):e.reduceRight(t);var s=e.length;if(s!==+s){var o=x.keys(e);s=o.length}T(e,function(u,a,f){a=o?o[--s]:--s,i?n=t.call(r,n,e[a],a,f):(n=e[a],i=!0)});if(!i)throw new TypeError(N);return n},x.find=x.detect=function(e,t,n){var r;return C(e,function(e,i,s){if(t.call(n,e,i,s))return r=e,!0}),r},x.filter=x.select=function(e,t,n){var r=[];return e==null?r:v&&e.filter===v?e.filter(t,n):(T(e,function(e,i,s){t.call(n,e,i,s)&&r.push(e)}),r)},x.reject=function(e,t,n){return x.filter(e,function(e,r,i){return!t.call(n,e,r,i)},n)},x.every=x.all=function(e,t,r){t||(t=x.identity);var i=!0;return e==null?i:m&&e.every===m?e.every(t,r):(T(e,function(e,s,o){if(!(i=i&&t.call(r,e,s,o)))return n}),!!i)};var C=x.some=x.any=function(e,t,r){t||(t=x.identity);var i=!1;return e==null?i:g&&e.some===g?e.some(t,r):(T(e,function(e,s,o){if(i||(i=t.call(r,e,s,o)))return n}),!!i)};x.contains=x.include=function(e,t){return e==null?!1:y&&e.indexOf===y?e.indexOf(t)!=-1:C(e,function(e){return e===t})},x.invoke=function(e,t){var n=u.call(arguments,2),r=x.isFunction(t);return x.map(e,function(e){return(r?t:e[t]).apply(e,n)})},x.pluck=function(e,t){return x.map(e,function(e){return e[t]})},x.where=function(e,t,n){return x.isEmpty(t)?n?void 0:[]:x[n?"find":"filter"](e,function(e){for(var n in t)if(t[n]!==e[n])return!1;return!0})},x.findWhere=function(e,t){return x.where(e,t,!0)},x.max=function(e,t,n){if(!t&&x.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.max.apply(Math,e);if(!t&&x.isEmpty(e))return-Infinity;var r={computed:-Infinity,value:-Infinity};return T(e,function(e,i,s){var o=t?t.call(n,e,i,s):e;o>r.computed&&(r={value:e,computed:o})}),r.value},x.min=function(e,t,n){if(!t&&x.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.min.apply(Math,e);if(!t&&x.isEmpty(e))return Infinity;var r={computed:Infinity,value:Infinity};return T(e,function(e,i,s){var o=t?t.call(n,e,i,s):e;o<r.computed&&(r={value:e,computed:o})}),r.value},x.shuffle=function(e){var t,n=0,r=[];return T(e,function(e){t=x.random(n++),r[n-1]=r[t],r[t]=e}),r};var k=function(e){return x.isFunction(e)?e:function(t){return t[e]}};x.sortBy=function(e,t,n){var r=k(t);return x.pluck(x.map(e,function(e,t,i){return{value:e,index:t,criteria:r.call(n,e,t,i)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;if(n!==r){if(n>r||n===void 0)return 1;if(n<r||r===void 0)return-1}return e.index<t.index?-1:1}),"value")};var L=function(e,t,n,r){var i={},s=k(t==null?x.identity:t);return T(e,function(t,o){var u=s.call(n,t,o,e);r(i,u,t)}),i};x.groupBy=function(e,t,n){return L(e,t,n,function(e,t,n){(x.has(e,t)?e[t]:e[t]=[]).push(n)})},x.countBy=function(e,t,n){return L(e,t,n,function(e,t){x.has(e,t)||(e[t]=0),e[t]++})},x.sortedIndex=function(e,t,n,r){n=n==null?x.identity:k(n);var i=n.call(r,t),s=0,o=e.length;while(s<o){var u=s+o>>>1;n.call(r,e[u])<i?s=u+1:o=u}return s},x.toArray=function(e){return e?x.isArray(e)?u.call(e):e.length===+e.length?x.map(e,x.identity):x.values(e):[]},x.size=function(e){return e==null?0:e.length===+e.length?e.length:x.keys(e).length},x.first=x.head=x.take=function(e,t,n){return e==null?void 0:t!=null&&!n?u.call(e,0,t):e[0]},x.initial=function(e,t,n){return u.call(e,0,e.length-(t==null||n?1:t))},x.last=function(e,t,n){return e==null?void 0:t!=null&&!n?u.call(e,Math.max(e.length-t,0)):e[e.length-1]},x.rest=x.tail=x.drop=function(e,t,n){return u.call(e,t==null||n?1:t)},x.compact=function(e){return x.filter(e,x.identity)};var A=function(e,t,n){return t&&x.every(e,x.isArray)?a.apply(n,e):(T(e,function(e){x.isArray(e)||x.isArguments(e)?t?o.apply(n,e):A(e,t,n):n.push(e)}),n)};x.flatten=function(e,t){return A(e,t,[])},x.without=function(e){return x.difference(e,u.call(arguments,1))},x.uniq=x.unique=function(e,t,n,r){x.isFunction(t)&&(r=n,n=t,t=!1);var i=n?x.map(e,n,r):e,s=[],o=[];return T(i,function(n,r){if(t?!r||o[o.length-1]!==n:!x.contains(o,n))o.push(n),s.push(e[r])}),s},x.union=function(){return x.uniq(x.flatten(arguments,!0))},x.intersection=function(e){var t=u.call(arguments,1);return x.filter(x.uniq(e),function(e){return x.every(t,function(t){return x.indexOf(t,e)>=0})})},x.difference=function(e){var t=a.apply(r,u.call(arguments,1));return x.filter(e,function(e){return!x.contains(t,e)})},x.zip=function(){return x.unzip.apply(x,u.call(arguments))},x.unzip=function(){var e=x.max(x.pluck(arguments,"length").concat(0)),t=new Array(e);for(var n=0;n<e;n++)t[n]=x.pluck(arguments,""+n);return t},x.object=function(e,t){if(e==null)return{};var n={};for(var r=0,i=e.length;r<i;r++)t?n[e[r]]=t[r]:n[e[r][0]]=e[r][1];return n},x.indexOf=function(e,t,n){if(e==null)return-1;var r=0,i=e.length;if(n){if(typeof n!="number")return r=x.sortedIndex(e,t),e[r]===t?r:-1;r=n<0?Math.max(0,i+n):n}if(y&&e.indexOf===y)return e.indexOf(t,n);for(;r<i;r++)if(e[r]===t)return r;return-1},x.lastIndexOf=function(e,t,n){if(e==null)return-1;var r=n!=null;if(b&&e.lastIndexOf===b)return r?e.lastIndexOf(t,n):e.lastIndexOf(t);var i=r?n:e.length;while(i--)if(e[i]===t)return i;return-1},x.range=function(e,t,n){arguments.length<=1&&(t=e||0,e=0),n=arguments[2]||1;var r=Math.max(Math.ceil((t-e)/n),0),i=0,s=new Array(r);while(i<r)s[i++]=e,e+=n;return s};var O=function(){};x.bind=function(e,t){var n,r;if(S&&e.bind===S)return S.apply(e,u.call(arguments,1));if(!x.isFunction(e))throw new TypeError;return n=u.call(arguments,2),r=function(){if(this instanceof r){O.prototype=e.prototype;var i=new O;O.prototype=null;var s=e.apply(i,n.concat(u.call(arguments)));return Object(s)===s?s:i}return e.apply(t,n.concat(u.call(arguments)))}},x.partial=function(e){var t=u.call(arguments,1);return function(){return e.apply(this,t.concat(u.call(arguments)))}},x.bindAll=function(e){var t=u.call(arguments,1);if(t.length===0)throw new Error("bindAll must be passed function names");return T(t,function(t){e[t]=x.bind(e[t],e)}),e},x.memoize=function(e,t){var n={};return t||(t=x.identity),function(){var r=t.apply(this,arguments);return x.has(n,r)?n[r]:n[r]=e.apply(this,arguments)}},x.delay=function(e,t){var n=u.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},x.defer=function(e){return x.delay.apply(x,[e,1].concat(u.call(arguments,1)))},x.throttle=function(e,t,n){var r,i,s,o=null,u=0;n||(n={});var a=function(){u=new Date,o=null,s=e.apply(r,i)};return function(){var f=new Date;!u&&n.leading===!1&&(u=f);var l=t-(f-u);return r=this,i=arguments,l<=0?(clearTimeout(o),o=null,u=f,s=e.apply(r,i)):!o&&n.trailing!==!1&&(o=setTimeout(a,l)),s}},x.debounce=function(e,t,n){var r,i=null;return function(){var s=this,o=arguments,u=function(){i=null,n||(r=e.apply(s,o))},a=n&&!i;return clearTimeout(i),i=setTimeout(u,t),a&&(r=e.apply(s,o)),r}},x.once=function(e){var t=!1,n;return function(){return t?n:(t=!0,n=e.apply(this,arguments),e=null,n)}},x.wrap=function(e,t){return function(){var n=[e];return o.apply(n,arguments),t.apply(this,n)}},x.compose=function(){var e=arguments;return function(){var t=arguments;for(var n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}},x.after=function(e,t){return function(){if(--e<1)return t.apply(this,arguments)}},x.keys=E||function(e){if(e!==Object(e))throw new TypeError("Invalid object");var t=[];for(var n in e)x.has(e,n)&&t.push(n);return t},x.values=function(e){var t=[];for(var n in e)x.has(e,n)&&t.push(e[n]);return t},x.pairs=function(e){var t=[];for(var n in e)x.has(e,n)&&t.push([n,e[n]]);return t},x.invert=function(e){var t={};for(var n in e)x.has(e,n)&&(t[e[n]]=n);return t},x.functions=x.methods=function(e){var t=[];for(var n in e)x.isFunction(e[n])&&t.push(n);return t.sort()},x.extend=function(e){return T(u.call(arguments,1),function(t){if(t)for(var n in t)e[n]=t[n]}),e},x.pick=function(e){var t={},n=a.apply(r,u.call(arguments,1));return T(n,function(n){n in e&&(t[n]=e[n])}),t},x.omit=function(e){var t={},n=a.apply(r,u.call(arguments,1));for(var i in e)x.contains(n,i)||(t[i]=e[i]);return t},x.defaults=function(e){return T(u.call(arguments,1),function(t){if(t)for(var n in t)e[n]===void 0&&(e[n]=t[n])}),e},x.clone=function(e){return x.isObject(e)?x.isArray(e)?e.slice():x.extend({},e):e},x.tap=function(e,t){return t(e),e};var M=function(e,t,n,r){if(e===t)return e!==0||1/e==1/t;if(e==null||t==null)return e===t;e instanceof x&&(e=e._wrapped),t instanceof x&&(t=t._wrapped);var i=f.call(e);if(i!=f.call(t))return!1;switch(i){case"[object String]":return e==String(t);case"[object Number]":return e!=+e?t!=+t:e==0?1/e==1/t:e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}if(typeof e!="object"||typeof t!="object")return!1;var s=n.length;while(s--)if(n[s]==e)return r[s]==t;var o=e.constructor,u=t.constructor;if(o!==u&&!(x.isFunction(o)&&o instanceof o&&x.isFunction(u)&&u instanceof u))return!1;n.push(e),r.push(t);var a=0,l=!0;if(i=="[object Array]"){a=e.length,l=a==t.length;if(l)while(a--)if(!(l=M(e[a],t[a],n,r)))break}else{for(var c in e)if(x.has(e,c)){a++;if(!(l=x.has(t,c)&&M(e[c],t[c],n,r)))break}if(l){for(c in t)if(x.has(t,c)&&!(a--))break;l=!a}}return n.pop(),r.pop(),l};x.isEqual=function(e,t){return M(e,t,[],[])},x.isEmpty=function(e){if(e==null)return!0;if(x.isArray(e)||x.isString(e))return e.length===0;for(var t in e)if(x.has(e,t))return!1;return!0},x.isElement=function(e){return!!e&&e.nodeType===1},x.isArray=w||function(e){return f.call(e)=="[object Array]"},x.isObject=function(e){return e===Object(e)},T(["Arguments","Function","String","Number","Date","RegExp"],function(e){x["is"+e]=function(t){return f.call(t)=="[object "+e+"]"}}),x.isArguments(arguments)||(x.isArguments=function(e){return!!e&&!!x.has(e,"callee")}),typeof /./!="function"&&(x.isFunction=function(e){return typeof e=="function"}),x.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},x.isNaN=function(e){return x.isNumber(e)&&e!=+e},x.isBoolean=function(e){return e===!0||e===!1||f.call(e)=="[object Boolean]"},x.isNull=function(e){return e===null},x.isUndefined=function(e){return e===void 0},x.has=function(e,t){return l.call(e,t)},x.noConflict=function(){return e._=t,this},x.identity=function(e){return e},x.times=function(e,t,n){var r=Array(Math.max(0,e));for(var i=0;i<e;i++)r[i]=t.call(n,i);return r},x.random=function(e,t){return t==null&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))};var _={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};_.unescape=x.invert(_.escape);var D={escape:new RegExp("["+x.keys(_.escape).join("")+"]","g"),unescape:new RegExp("("+x.keys(_.unescape).join("|")+")","g")};x.each(["escape","unescape"],function(e){x[e]=function(t){return t==null?"":(""+t).replace(D[e],function(t){return _[e][t]})}}),x.result=function(e,t){if(e==null)return void 0;var n=e[t];return x.isFunction(n)?n.call(e):n},x.mixin=function(e){T(x.functions(e),function(t){var n=x[t]=e[t];x.prototype[t]=function(){var e=[this._wrapped];return o.apply(e,arguments),F.call(this,n.apply(x,e))}})};var P=0;x.uniqueId=function(e){var t=++P+"";return e?e+t:t},x.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var H=/(.)^/,B={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},j=/\\|'|\r|\n|\t|\u2028|\u2029/g;x.template=function(e,t,n){var r;n=x.defaults({},n,x.templateSettings);var i=new RegExp([(n.escape||H).source,(n.interpolate||H).source,(n.evaluate||H).source].join("|")+"|$","g"),s=0,o="__p+='";e.replace(i,function(t,n,r,i,u){return o+=e.slice(s,u).replace(j,function(e){return"\\"+B[e]}),n&&(o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"),r&&(o+="'+\n((__t=("+r+"))==null?'':__t)+\n'"),i&&(o+="';\n"+i+"\n__p+='"),s=u+t.length,t}),o+="';\n",n.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{r=new Function(n.variable||"obj","_",o)}catch(u){throw u.source=o,u}if(t)return r(t,x);var a=function(e){return r.call(this,e,x)};return a.source="function("+(n.variable||"obj")+"){\n"+o+"}",a},x.chain=function(e){return x(e).chain()};var F=function(e){return this._chain?x(e).chain():e};x.mixin(x),T(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=r[e];x.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),(e=="shift"||e=="splice")&&n.length===0&&delete n[0],F.call(this,n)}}),T(["concat","join","slice"],function(e){var t=r[e];x.prototype[e]=function(){return F.call(this,t.apply(this._wrapped,arguments))}}),x.extend(x.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}.call(this),define("underscore",function(e){return function(){var t,n;return t||e._}}(this)),function(){var e=this,t=e.Backbone,n=[],r=n.push,i=n.slice,s=n.splice,o;typeof exports!="undefined"?o=exports:o=e.Backbone={},o.VERSION="1.0.0";var u=e._;!u&&typeof require!="undefined"&&(u=require("underscore")),o.$=e.jQuery||e.Zepto||e.ender||e.$,o.noConflict=function(){return e.Backbone=t,this},o.emulateHTTP=!1,o.emulateJSON=!1;var a=o.Events={on:function(e,t,n){if(!l(this,"on",e,[t,n])||!t)return this;this._events||(this._events={});var r=this._events[e]||(this._events[e]=[]);return r.push({callback:t,context:n,ctx:n||this}),this},once:function(e,t,n){if(!l(this,"once",e,[t,n])||!t)return this;var r=this,i=u.once(function(){r.off(e,i),t.apply(this,arguments)});return i._callback=t,this.on(e,i,n)},off:function(e,t,n){var r,i,s,o,a,f,c,h;if(!this._events||!l(this,"off",e,[t,n]))return this;if(!e&&!t&&!n)return this._events={},this;o=e?[e]:u.keys(this._events);for(a=0,f=o.length;a<f;a++){e=o[a];if(s=this._events[e]){this._events[e]=r=[];if(t||n)for(c=0,h=s.length;c<h;c++)i=s[c],(t&&t!==i.callback&&t!==i.callback._callback||n&&n!==i.context)&&r.push(i);r.length||delete this._events[e]}}return this},trigger:function(e){if(!this._events)return this;var t=i.call(arguments,1);if(!l(this,"trigger",e,t))return this;var n=this._events[e],r=this._events.all;return n&&c(n,t),r&&c(r,arguments),this},stopListening:function(e,t,n){var r=this._listeners;if(!r)return this;var i=!t&&!n;typeof t=="object"&&(n=this),e&&((r={})[e._listenerId]=e);for(var s in r)r[s].off(t,n,this),i&&delete this._listeners[s];return this}},f=/\s+/,l=function(e,t,n,r){if(!n)return!0;if(typeof n=="object"){for(var i in n)e[t].apply(e,[i,n[i]].concat(r));return!1}if(f.test(n)){var s=n.split(f);for(var o=0,u=s.length;o<u;o++)e[t].apply(e,[s[o]].concat(r));return!1}return!0},c=function(e,t){var n,r=-1,i=e.length,s=t[0],o=t[1],u=t[2];switch(t.length){case 0:while(++r<i)(n=e[r]).callback.call(n.ctx);return;case 1:while(++r<i)(n=e[r]).callback.call(n.ctx,s);return;case 2:while(++r<i)(n=e[r]).callback.call(n.ctx,s,o);return;case 3:while(++r<i)(n=e[r]).callback.call(n.ctx,s,o,u);return;default:while(++r<i)(n=e[r]).callback.apply(n.ctx,t)}},h={listenTo:"on",listenToOnce:"once"};u.each(h,function(e,t){a[t]=function(t,n,r){var i=this._listeners||(this._listeners={}),s=t._listenerId||(t._listenerId=u.uniqueId("l"));return i[s]=t,typeof n=="object"&&(r=this),t[e](n,r,this),this}}),a.bind=a.on,a.unbind=a.off,u.extend(o,a);var p=o.Model=function(e,t){var n,r=e||{};t||(t={}),this.cid=u.uniqueId("c"),this.attributes={},u.extend(this,u.pick(t,d)),t.parse&&(r=this.parse(r,t)||{});if(n=u.result(this,"defaults"))r=u.defaults({},r,n);this.set(r,t),this.changed={},this.initialize.apply(this,arguments)},d=["url","urlRoot","collection"];u.extend(p.prototype,a,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(e){return u.clone(this.attributes)},sync:function(){return o.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return u.escape(this.get(e))},has:function(e){return this.get(e)!=null},set:function(e,t,n){var r,i,s,o,a,f,l,c;if(e==null)return this;typeof e=="object"?(i=e,n=t):(i={})[e]=t,n||(n={});if(!this._validate(i,n))return!1;s=n.unset,a=n.silent,o=[],f=this._changing,this._changing=!0,f||(this._previousAttributes=u.clone(this.attributes),this.changed={}),c=this.attributes,l=this._previousAttributes,this.idAttribute in i&&(this.id=i[this.idAttribute]);for(r in i)t=i[r],u.isEqual(c[r],t)||o.push(r),u.isEqual(l[r],t)?delete this.changed[r]:this.changed[r]=t,s?delete c[r]:c[r]=t;if(!a){o.length&&(this._pending=!0);for(var h=0,p=o.length;h<p;h++)this.trigger("change:"+o[h],this,c[o[h]],n)}if(f)return this;if(!a)while(this._pending)this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,u.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var n in this.attributes)t[n]=void 0;return this.set(t,u.extend({},e,{unset:!0}))},hasChanged:function(e){return e==null?!u.isEmpty(this.changed):u.has(this.changed,e)},changedAttributes:function(e){if(!e)return this.hasChanged()?u.clone(this.changed):!1;var t,n=!1,r=this._changing?this._previousAttributes:this.attributes;for(var i in e){if(u.isEqual(r[i],t=e[i]))continue;(n||(n={}))[i]=t}return n},previous:function(e){return e==null||!this._previousAttributes?null:this._previousAttributes[e]},previousAttributes:function(){return u.clone(this._previousAttributes)},fetch:function(e){e=e?u.clone(e):{},e.parse===void 0&&(e.parse=!0);var t=this,n=e.success;return e.success=function(r){if(!t.set(t.parse(r,e),e))return!1;n&&n(t,r,e),t.trigger("sync",t,r,e)},j(this,e),this.sync("read",this,e)},save:function(e,t,n){var r,i,s,o=this.attributes;e==null||typeof e=="object"?(r=e,n=t):(r={})[e]=t;if(r&&(!n||!n.wait)&&!this.set(r,n))return!1;n=u.extend({validate:!0},n);if(!this._validate(r,n))return!1;r&&n.wait&&(this.attributes=u.extend({},o,r)),n.parse===void 0&&(n.parse=!0);var a=this,f=n.success;return n.success=function(e){a.attributes=o;var t=a.parse(e,n);n.wait&&(t=u.extend(r||{},t));if(u.isObject(t)&&!a.set(t,n))return!1;f&&f(a,e,n),a.trigger("sync",a,e,n)},j(this,n),i=this.isNew()?"create":n.patch?"patch":"update",i==="patch"&&(n.attrs=r),s=this.sync(i,this,n),r&&n.wait&&(this.attributes=o),s},destroy:function(e){e=e?u.clone(e):{};var t=this,n=e.success,r=function(){t.trigger("destroy",t,t.collection,e)};e.success=function(i){(e.wait||t.isNew())&&r(),n&&n(t,i,e),t.isNew()||t.trigger("sync",t,i,e)};if(this.isNew())return e.success(),!1;j(this,e);var i=this.sync("delete",this,e);return e.wait||r(),i},url:function(){var e=u.result(this,"urlRoot")||u.result(this.collection,"url")||B();return this.isNew()?e:e+(e.charAt(e.length-1)==="/"?"":"/")+encodeURIComponent(this.id)},parse:function(e,t){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return this.id==null},isValid:function(e){return this._validate({},u.extend(e||{},{validate:!0}))},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=u.extend({},this.attributes,e);var n=this.validationError=this.validate(e,t)||null;return n?(this.trigger("invalid",this,n,u.extend(t||{},{validationError:n})),!1):!0}});var v=["keys","values","pairs","invert","pick","omit"];u.each(v,function(e){p.prototype[e]=function(){var t=i.call(arguments);return t.unshift(this.attributes),u[e].apply(u,t)}});var m=o.Collection=function(e,t){t||(t={}),t.url&&(this.url=t.url),t.model&&(this.model=t.model),t.comparator!==void 0&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,u.extend({silent:!0},t))},g={add:!0,remove:!0,merge:!0},y={add:!0,merge:!1,remove:!1};u.extend(m.prototype,a,{model:p,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return o.sync.apply(this,arguments)},add:function(e,t){return this.set(e,u.defaults(t||{},y))},remove:function(e,t){e=u.isArray(e)?e.slice():[e],t||(t={});var n,r,i,s;for(n=0,r=e.length;n<r;n++){s=this.get(e[n]);if(!s)continue;delete this._byId[s.id],delete this._byId[s.cid],i=this.indexOf(s),this.models.splice(i,1),this.length--,t.silent||(t.index=i,s.trigger("remove",s,this,t)),this._removeReference(s)}return this},set:function(e,t){t=u.defaults(t||{},g),t.parse&&(e=this.parse(e,t)),u.isArray(e)||(e=e?[e]:[]);var n,i,o,a,f,l,c=t.at,h=this.comparator&&c==null&&t.sort!==!1,p=u.isString(this.comparator)?this.comparator:null,d=[],v=[],m={};for(n=0,i=e.length;n<i;n++){if(!(o=this._prepareModel(e[n],t)))continue;(f=this.get(o))?(t.remove&&(m[f.cid]=!0),t.merge&&(f.set(o.attributes,t),h&&!l&&f.hasChanged(p)&&(l=!0))):t.add&&(d.push(o),o.on("all",this._onModelEvent,this),this._byId[o.cid]=o,o.id!=null&&(this._byId[o.id]=o))}if(t.remove){for(n=0,i=this.length;n<i;++n)m[(o=this.models[n]).cid]||v.push(o);v.length&&this.remove(v,t)}d.length&&(h&&(l=!0),this.length+=d.length,c!=null?s.apply(this.models,[c,0].concat(d)):r.apply(this.models,d)),l&&this.sort({silent:!0});if(t.silent)return this;for(n=0,i=d.length;n<i;n++)(o=d[n]).trigger("add",o,this,t);return l&&this.trigger("sort",this,t),this},reset:function(e,t){t||(t={});for(var n=0,r=this.models.length;n<r;n++)this._removeReference(this.models[n]);return t.previousModels=this.models,this._reset(),this.add(e,u.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),this},push:function(e,t){return e=this._prepareModel(e,t),this.add(e,u.extend({at:this.length},t)),e},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e),t},unshift:function(e,t){return e=this._prepareModel(e,t),this.add(e,u.extend({at:0},t)),e},shift:function(e){var t=this.at(0);return this.remove(t,e),t},slice:function(e,t){return this.models.slice(e,t)},get:function(e){return e==null?void 0:this._byId[e.id!=null?e.id:e.cid||e]},at:function(e){return this.models[e]},where:function(e,t){return u.isEmpty(e)?t?void 0:[]:this[t?"find":"filter"](function(t){for(var n in e)if(e[n]!==t.get(n))return!1;return!0})},findWhere:function(e){return this.where(e,!0)},sort:function(e){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return e||(e={}),u.isString(this.comparator)||this.comparator.length===1?this.models=this.sortBy(this.comparator,this):this.models.sort(u.bind(this.comparator,this)),e.silent||this.trigger("sort",this,e),this},sortedIndex:function(e,t,n){t||(t=this.comparator);var r=u.isFunction(t)?t:function(e){return e.get(t)};return u.sortedIndex(this.models,e,r,n)},pluck:function(e){return u.invoke(this.models,"get",e)},fetch:function(e){e=e?u.clone(e):{},e.parse===void 0&&(e.parse=!0);var t=e.success,n=this;return e.success=function(r){var i=e.reset?"reset":"set";n[i](r,e),t&&t(n,r,e),n.trigger("sync",n,r,e)},j(this,e),this.sync("read",this,e)},create:function(e,t){t=t?u.clone(t):{};if(!(e=this._prepareModel(e,t)))return!1;t.wait||this.add(e,t);var n=this,r=t.success;return t.success=function(i){t.wait&&n.add(e,t),r&&r(e,i,t)},e.save(null,t),e},parse:function(e,t){return e},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(e,t){if(e instanceof p)return e.collection||(e.collection=this),e;t||(t={}),t.collection=this;var n=new this.model(e,t);return n._validate(e,t)?n:(this.trigger("invalid",this,e,t),!1)},_removeReference:function(e){this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,n,r){if((e==="add"||e==="remove")&&n!==this)return;e==="destroy"&&this.remove(t,r),t&&e==="change:"+t.idAttribute&&(delete this._byId[t.previous(t.idAttribute)],t.id!=null&&(this._byId[t.id]=t)),this.trigger.apply(this,arguments)}});var b=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","indexOf","shuffle","lastIndexOf","isEmpty","chain"];u.each(b,function(e){m.prototype[e]=function(){var t=i.call(arguments);return t.unshift(this.models),u[e].apply(u,t)}});var w=["groupBy","countBy","sortBy"];u.each(w,function(e){m.prototype[e]=function(t,n){var r=u.isFunction(t)?t:function(e){return e.get(t)};return u[e](this.models,r,n)}});var E=o.View=function(e){this.cid=u.uniqueId("view"),this._configure(e||{}),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},S=/^(\S+)\s*(.*)$/,x=["model","collection","el","id","attributes","className","tagName","events"];u.extend(E.prototype,a,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(e,t){return this.$el&&this.undelegateEvents(),this.$el=e instanceof o.$?e:o.$(e),this.el=this.$el[0],t!==!1&&this.delegateEvents(),this},delegateEvents:function(e){if(!e&&!(e=u.result(this,"events")))return this;this.undelegateEvents();for(var t in e){var n=e[t];u.isFunction(n)||(n=this[e[t]]);if(!n)continue;var r=t.match(S),i=r[1],s=r[2];n=u.bind(n,this),i+=".delegateEvents"+this.cid,s===""?this.$el.on(i,n):this.$el.on(i,s,n)}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_configure:function(e){this.options&&(e=u.extend({},u.result(this,"options"),e)),u.extend(this,u.pick(e,x)),this.options=e},_ensureElement:function(){if(!this.el){var e=u.extend({},u.result(this,"attributes"));this.id&&(e.id=u.result(this,"id")),this.className&&(e["class"]=u.result(this,"className"));var t=o.$("<"+u.result(this,"tagName")+">").attr(e);this.setElement(t,!1)}else this.setElement(u.result(this,"el"),!1)}}),o.sync=function(e,t,n){var r=T[e];u.defaults(n||(n={}),{emulateHTTP:o.emulateHTTP,emulateJSON:o.emulateJSON});var i={type:r,dataType:"json"};n.url||(i.url=u.result(t,"url")||B()),n.data==null&&t&&(e==="create"||e==="update"||e==="patch")&&(i.contentType="application/json",i.data=JSON.stringify(n.attrs||t.toJSON(n))),n.emulateJSON&&(i.contentType="application/x-www-form-urlencoded",i.data=i.data?{model:i.data}:{});if(n.emulateHTTP&&(r==="PUT"||r==="DELETE"||r==="PATCH")){i.type="POST",n.emulateJSON&&(i.data._method=r);var s=n.beforeSend;n.beforeSend=function(e){e.setRequestHeader("X-HTTP-Method-Override",r);if(s)return s.apply(this,arguments)}}i.type!=="GET"&&!n.emulateJSON&&(i.processData=!1),i.type==="PATCH"&&window.ActiveXObject&&(!window.external||!window.external.msActiveXFilteringEnabled)&&(i.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var a=n.xhr=o.ajax(u.extend(i,n));return t.trigger("request",t,a,n),a};var T={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};o.ajax=function(){return o.$.ajax.apply(o.$,arguments)};var N=o.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},C=/\((.*?)\)/g,k=/(\(\?)?:\w+/g,L=/\*\w+/g,A=/[\-{}\[\]+?.,\\\^$|#\s]/g;u.extend(N.prototype,a,{initialize:function(){},route:function(e,t,n){u.isRegExp(e)||(e=this._routeToRegExp(e)),u.isFunction(t)&&(n=t,t=""),n||(n=this[t]);var r=this;return o.history.route(e,function(i){var s=r._extractParameters(e,i);n&&n.apply(r,s),r.trigger.apply(r,["route:"+t].concat(s)),r.trigger("route",t,s),o.history.trigger("route",r,t,s)}),this},navigate:function(e,t){return o.history.navigate(e,t),this},_bindRoutes:function(){if(!this.routes)return;this.routes=u.result(this,"routes");var e,t=u.keys(this.routes);while((e=t.pop())!=null)this.route(e,this.routes[e])},_routeToRegExp:function(e){return e=e.replace(A,"\\$&").replace(C,"(?:$1)?").replace(k,function(e,t){return t?e:"([^/]+)"}).replace(L,"(.*?)"),new RegExp("^"+e+"$")},_extractParameters:function(e,t){var n=e.exec(t).slice(1);return u.map(n,function(e){return e?decodeURIComponent(e):null})}});var O=o.History=function(){this.handlers=[],u.bindAll(this,"checkUrl"),typeof window!="undefined"&&(this.location=window.location,this.history=window.history)},M=/^[#\/]|\s+$/g,_=/^\/+|\/+$/g,D=/msie [\w.]+/,P=/\/$/;O.started=!1,u.extend(O.prototype,a,{interval:50,getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getFragment:function(e,t){if(e==null)if(this._hasPushState||!this._wantsHashChange||t){e=this.location.pathname;var n=this.root.replace(P,"");e.indexOf(n)||(e=e.substr(n.length))}else e=this.getHash();return e.replace(M,"")},start:function(e){if(O.started)throw new Error("Backbone.history has already been started");O.started=!0,this.options=u.extend({},{root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var t=this.getFragment(),n=document.documentMode,r=D.exec(navigator.userAgent.toLowerCase())&&(!n||n<=7);this.root=("/"+this.root+"/").replace(_,"/"),r&&this._wantsHashChange&&(this.iframe=o.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(t)),this._hasPushState?o.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!r?o.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=t;var i=this.location,s=i.pathname.replace(/[^\/]$/,"$&/")===this.root;if(this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!s)return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0;this._wantsPushState&&this._hasPushState&&s&&i.hash&&(this.fragment=this.getHash().replace(M,""),this.history.replaceState({},document.title,this.root+this.fragment+i.search));if(!this.options.silent)return this.loadUrl()},stop:function(){o.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),O.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(e){var t=this.getFragment();t===this.fragment&&this.iframe&&(t=this.getFragment(this.getHash(this.iframe)));if(t===this.fragment)return!1;this.iframe&&this.navigate(t),this.loadUrl()||this.loadUrl(this.getHash())},loadUrl:function(e){var t=this.fragment=this.getFragment(e),n=u.any(this.handlers,function(e){if(e.route.test(t))return e.callback(t),!0});return n},navigate:function(e,t){if(!O.started)return!1;if(!t||t===!0)t={trigger:t};e=this.getFragment(e||"");if(this.fragment===e)return;this.fragment=e;var n=this.root+e;if(this._hasPushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getFragment(this.getHash(this.iframe))&&(t.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,e,t.replace))}t.trigger&&this.loadUrl(e)},_updateHash:function(e,t,n){if(n){var r=e.href.replace(/(javascript:|#).*$/,"");e.replace(r+"#"+t)}else e.hash="#"+t}}),o.history=new O;var H=function(e,t){var n=this,r;e&&u.has(e,"constructor")?r=e.constructor:r=function(){return n.apply(this,arguments)},u.extend(r,n,t);var i=function(){this.constructor=r};return i.prototype=n.prototype,r.prototype=new i,e&&u.extend(r.prototype,e),r.__super__=n.prototype,r};p.extend=m.extend=N.extend=E.extend=O.extend=H;var B=function(){throw new Error('A "url" property or function must be specified')},j=function(e,t){var n=t.error;t.error=function(r){n&&n(e,r,t),e.trigger("error",e,r,t)}}}.call(this),define("backbone",["underscore","jquery"],function(e){return function(){var t,n;return t||e.Backbone}}(this));var Handlebars={};(function(e,t){e.VERSION="1.0.0",e.COMPILER_REVISION=4,e.REVISION_CHANGES={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:">= 1.0.0"},e.helpers={},e.partials={};var n=Object.prototype.toString,r="[object Function]",i="[object Object]";e.registerHelper=function(t,r,s){if(n.call(t)===i){if(s||r)throw new e.Exception("Arg not supported with multiple helpers");e.Utils.extend(this.helpers,t)}else s&&(r.not=s),this.helpers[t]=r},e.registerPartial=function(t,r){n.call(t)===i?e.Utils.extend(this.partials,t):this.partials[t]=r},e.registerHelper("helperMissing",function(e){if(arguments.length===2)return t;throw new Error("Missing helper: '"+e+"'")}),e.registerHelper("blockHelperMissing",function(t,i){var s=i.inverse||function(){},o=i.fn,u=n.call(t);return u===r&&(t=t.call(this)),t===!0?o(this):t===!1||t==null?s(this):u==="[object Array]"?t.length>0?e.helpers.each(t,i):s(this):o(t)}),e.K=function(){},e.createFrame=Object.create||function(t){e.K.prototype=t;var n=new e.K;return e.K.prototype=null,n},e.logger={DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,methodMap:{0:"debug",1:"info",2:"warn",3:"error"},log:function(t,n){if(e.logger.level<=t){var r=e.logger.methodMap[t];typeof console!="undefined"&&console[r]&&console[r].call(console,n)}}},e.log=function(t,n){e.logger.log(t,n)},e.registerHelper("each",function(t,i){var s=i.fn,o=i.inverse,u=0,a="",f,l=n.call(t);l===r&&(t=t.call(this)),i.data&&(f=e.createFrame(i.data));if(t&&typeof t=="object")if(t instanceof Array)for(var c=t.length;u<c;u++)f&&(f.index=u),a+=s(t[u],{data:f});else for(var h in t)t.hasOwnProperty(h)&&(f&&(f.key=h),a+=s(t[h],{data:f}),u++);return u===0&&(a=o(this)),a}),e.registerHelper("if",function(t,i){var s=n.call(t);return s===r&&(t=t.call(this)),!t||e.Utils.isEmpty(t)?i.inverse(this):i.fn(this)}),e.registerHelper("unless",function(t,n){return e.helpers["if"].call(this,t,{fn:n.inverse,inverse:n.fn})}),e.registerHelper("with",function(t,i){var s=n.call(t);s===r&&(t=t.call(this));if(!e.Utils.isEmpty(t))return i.fn(t)}),e.registerHelper("log",function(t,n){var r=n.data&&n.data.level!=null?parseInt(n.data.level,10):1;e.log(r,t)});var s=["description","fileName","lineNumber","message","name","number","stack"];e.Exception=function(e){var t=Error.prototype.constructor.apply(this,arguments);for(var n=0;n<s.length;n++)this[s[n]]=t[s[n]]},e.Exception.prototype=new Error,e.SafeString=function(e){this.string=e},e.SafeString.prototype.toString=function(){return this.string.toString()};var o={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},u=/[&<>"'`]/g,a=/[&<>"'`]/,f=function(e){return o[e]||"&amp;"};e.Utils={extend:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},escapeExpression:function(t){return t instanceof e.SafeString?t.toString():t==null||t===!1?"":(t=t.toString(),a.test(t)?t.replace(u,f):t)},isEmpty:function(e){return!e&&e!==0?!0:n.call(e)==="[object Array]"&&e.length===0?!0:!1}},e.VM={template:function(t){var n={escapeExpression:e.Utils.escapeExpression,invokePartial:e.VM.invokePartial,programs:[],program:function(t,n,r){var i=this.programs[t];return r?i=e.VM.program(t,n,r):i||(i=this.programs[t]=e.VM.program(t,n)),i},merge:function(t,n){var r=t||n;return t&&n&&(r={},e.Utils.extend(r,n),e.Utils.extend(r,t)),r},programWithDepth:e.VM.programWithDepth,noop:e.VM.noop,compilerInfo:null};return function(r,i){i=i||{};var s=t.call(n,e,r,i.helpers,i.partials,i.data),o=n.compilerInfo||[],u=o[0]||1,a=e.COMPILER_REVISION;if(u!==a){if(u<a){var f=e.REVISION_CHANGES[a],l=e.REVISION_CHANGES[u];throw"Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+f+") or downgrade your runtime to an older version ("+l+")."}throw"Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+o[1]+")."}return s}},programWithDepth:function(e,t,n){var r=Array.prototype.slice.call(arguments,3),i=function(e,i){return i=i||{},t.apply(this,[e,i.data||n].concat(r))};return i.program=e,i.depth=r.length,i},program:function(e,t,n){var r=function(e,r){return r=r||{},t(e,r.data||n)};return r.program=e,r.depth=0,r},noop:function(){return""},invokePartial:function(n,r,i,s,o,u){var a={helpers:s,partials:o,data:u};if(n===t)throw new e.Exception("The partial "+r+" could not be found");if(n instanceof Function)return n(i,a);if(!e.compile)throw new e.Exception("The partial "+r+" could not be compiled when running in runtime-only mode");return o[r]=e.compile(n,{data:u!==t}),o[r](i,a)}},e.template=e.VM.template})(Handlebars),define("handlebars",function(e){return function(){var t,n;return t||e.Handlebars}}(this)),function(e){var t,n=e.Backbone,r=e._,i=n.$,s=e.console&&e.console.warn,o=e.console&&e.console.trace,u=n.View.prototype._configure,a=n.View.prototype.render,f=Array.prototype.push,l=Array.prototype.concat,c=Array.prototype.splice,h=n.View.extend({constructor:function(t){t=t||{},h.setupView(this,t),n.View.call(this,t)},insertView:function(e,t){return t?this.setView(e,t,!0):this.setView(e,!0)},insertViews:function(e){return r.isArray(e)?this.setViews({"":e}):(r.each(e,function(t,n){e[n]=r.isArray(t)?t:[t]}),this.setViews(e))},getView:function(e){return e==null&&(e=arguments[1]),this.getViews(e).first().value()},getViews:function(e){var t;return typeof e=="string"?(t=this.views[e]||[],r.chain([].concat(t))):(t=r.chain(this.views).map(function(e){return r.isArray(e)?e:[e]},this).flatten(),typeof e=="object"?t.where(e):typeof e=="function"?t.filter(e):t)},removeView:function(e){return this.getViews(e).each(function(e){e.remove()})},setView:function(e,t,n){var i,s,o,u=this;typeof e!="string"&&(n=t,t=e,e=""),this.views=this.views||{},i=t.__manager__,s=this.views[e];if(!i)throw new Error("Please set `View#manage` property with selector '"+e+"' to `true`.");return o=t.getAllOptions(),i.parent=u,i.selector=e,t.on("all",function(e){e!=="beforeRender"&&e!=="afterRender"&&u.trigger.apply(u,arguments)},t),n?(this.views[e]=l.call([],s||[],t),i.insert=!0,t):(i.hasRendered&&o.partial(u.$el,t.$el,u.__manager__,i),s&&r.each(l.call([],s),function(e){e.remove()}),this.views[e]=t)},setViews:function(e){return r.each(e,function(e,t){if(r.isArray(e))return r.each(e,function(e){this.insertView(t,e)},this);this.setView(t,e)},this),this},render:function(){function c(){function c(){var r=n.afterRender;r&&r.call(t,t),t.trigger("afterRender",t),i.noel&&t.$el.length>1&&s&&!n.suppressWarnings&&(e.console.warn("Using `el: false` with multiple top level elements is not supported."),o&&e.console.trace())}var r,f;return u&&(n.contains(u.el,t.el)||n.partial(u.$el,t.$el,a,i)),t.delegateEvents(),i.hasRendered=!0,(r=i.queue.shift())?r():delete i.queue,a&&a.queue?u.once("afterRender",c):c(),l.resolveWith(t,[t])}function p(){var e=t.getAllOptions(),n=t.__manager__,i=n.parent,s=i&&i.__manager__;t._render(h._viewRender,e).done(function(){if(!r.keys(t.views).length)return c();var n=r.map(t.views,function(e){var t=r.isArray(e);return t&&e.length?r.reduce(e.slice(1),function(e,t){return e.then(function(){return t.render()})},e[0].render()):t?e:e.render()});e.when(n).done(c)})}var t=this,n=t.getAllOptions(),i=t.__manager__,u=i.parent,a=u&&u.__manager__,l=n.deferred();return i.queue?f.call(i.queue,p):(i.queue=[],p(t,l)),l.view=t,l},remove:function(){return h._removeView(this,!0),this._remove.apply(this,arguments)},getAllOptions:function(){return r.extend({},this,h.prototype.options,this.options)}},{_cache:{},_makeAsync:function(e,t){var n=e.deferred();return n.async=function(){return n._isAsync=!0,t},n},_viewRender:function(e,t){function f(n){r.isString(n)&&(a.noel?(n=i.trim(n),u=i(n),e.$el.slice(1).remove(),e.$el.replaceWith(u),e.setElement(u,!1)):t.html(e.$el,n)),o.resolveWith(e,[e])}function l(e,r){var i,s=h._makeAsync(t,function(e){f(e)});h.cache(n,r),r&&(i=t.render.call(s,r,e)),s._isAsync||f(i)}var n,s,o,u,a=e.__manager__;return{render:function(){var i=e.serialize||t.serialize,u=e.template||t.template;return r.isFunction(i)&&(i=i.call(e)),o=h._makeAsync(t,function(e){l(i,e)}),typeof u=="string"&&(n=t.prefix+u),(s=h.cache(n))?(l(i,s,n),o):(typeof u=="string"?s=t.fetch.call(o,t.prefix+u):typeof u=="function"?s=u:u!=null&&(s=t.fetch.call(o,u)),o._isAsync||l(i,s),o)}}},_removeViews:function(e,t){var n;typeof e=="boolean"&&(t=e,e=this),e=e||this,e.getViews().each(function(e){(e.__manager__.hasRendered||t)&&h._removeView(e,t)})},_removeView:function(e,t){var n,i=e.__manager__,s=typeof e.keep=="boolean"?e.keep:e.options.keep;if(!s&&i.insert===!0||t){h.cleanViews(e),e._removeViews(!0),e.$el.remove();if(!i.parent)return;n=i.parent.views[i.selector];if(r.isArray(n))return r.each(r.clone(n),function(e,t){e&&e.__manager__===i&&c.call(n,t,1)});delete i.parent.views[i.selector]}},cache:function(e,t){if(e in this._cache&&t==null)return this._cache[e];if(e!=null&&t!=null)return this._cache[e]=t},cleanViews:function(e){r.each(l.call([],e),function(e){var t;e.unbind(),e.model instanceof n.Model&&e.model.off(null,null,e),e.collection instanceof n.Collection&&e.collection.off(null,null,e),e.stopListening(),t=e.getAllOptions().cleanup,r.isFunction(t)&&t.call(e)})},configure:function(e){r.extend(h.prototype.options,e),e.manage&&(n.View.prototype.manage=!0),e.el===!1&&(n.View.prototype.el=!1),e.suppressWarnings===!0&&(n.View.prototype.suppressWarnings=!0)},setupView:function(e,i){r.each(l.call([],e),function(e){if(e.__manager__)return;var s,o,u,a=h.prototype,f=r.pick(e,t);r.defaults(e,{views:{},__manager__:{},_removeViews:h._removeViews,_removeView:h._removeView},h.prototype),i=e.options=r.defaults(i||{},e.options,a.options),u=r.pick(i,l.call(["events"],r.values(i.events))),r.extend(e,u),(f.render===h.prototype.render||f.render===n.View.prototype.render)&&delete f.render,r.extend(i,f),e._remove=n.View.prototype.remove,e._render=function(e,t){var n=this,r=n.__manager__,i=t.beforeRender;return r.hasRendered&&this._removeViews(),i&&i.call(this,this),this.trigger("beforeRender",this),e(this,t).render()},e.render=h.prototype.render,e.remove!==a.remove&&(e._remove=e.remove,e.remove=a.remove),s=i.views||e.views,r.keys(s).length&&(o=s,e.views={},e.setViews(o)),e.options.template?e.options.template=i.template:e.template&&(i.template=e.template)})}});n.Layout=h,h.VERSION="0.8.8",n.View.prototype._configure=function(e){var t,n;if("el"in e?e.el===!1:this.el===!1)t=!0;return n=u.apply(this,arguments),(e.manage||this.manage)&&h.setupView(this),this.__manager__&&(this.__manager__.noel=t,this.__manager__.suppressWarnings=e.suppressWarnings),n},h.prototype.options={prefix:"",deferred:function(){return i.Deferred()},fetch:function(e){return r.template(i(e).html())},partial:function(e,t,n,r){if(r.selector)if(n.noel){var i=e.filter(r.selector);e=i.length?i:e.find(r.selector)}else e=e.find(r.selector);r.insert?this.insert(e,t):this.html(e,t)},html:function(e,t){e.html(t)},insert:function(e,t){e.append(t)},when:function(e){return i.when.apply(null,e)},render:function(e,t){return e(t)},contains:function(e,t){return i.contains(e,t)}},t=r.keys(h.prototype.options)}(typeof global=="object"?global:this),define("layoutmanager",function(){}),function(){var e,t,n,r,i,s,o,u,a,f,l,c;return typeof window=="undefined"?(c=require("underscore"),e=require("backbone"),t=e,typeof module=="undefined"||(module.exports=t)):(c=window._,e=window.Backbone,t=window),a=this,e.JJStore={},e.JJStore.Models={},e.JJStore.Events=c.extend({},e.Events),e.JJStore.__registerModelType=function(t){return this.Models[t]||(this.Models[t]=new e.Collection),this.Models[t]},e.JJStore.__registerModelInStore=function(t){var n;return n=this.__registerModelType(t.storeIdentifier),n.get(t)||(n.add(t,{silent:!0}),e.JJStore.Events.trigger("added:"+t.storeIdentifier,t)),!0},e.JJStore.__removeModelFromStore=function(e){return this.Models[e.storeIdentifier].remove(e),!0},e.JJStore._byId=function(e,t){return c.isString(e)&&(e=this.Models[e]),e?e.get(t):null},e.JJRelational={},e.JJRelational.VERSION="0.2.8",e.JJRelational.Config={url_id_appendix:"?ids=",work_with_store:!0},e.JJRelational.CollectionTypes={},e.JJRelational.__getObjectByName=function(e){var n;return n=c.reduce(e.split("."),function(e,t){return e[t]},t),n!==t?n:null},e.JJRelational.registerCollectionTypes=function(t){var n,r;if(!c.isObject(t))return!1;for(r in t)n=t[r],e.JJRelational.CollectionTypes[r]=n;return!0},e.JJRelational.__getCollectionType=function(t){var n,r,i;i=e.JJRelational.CollectionTypes;for(r in i){n=i[r];if(r===t)return n}return e.Collection},e.Model.prototype.__save=e.Model.prototype.save,e.JJRelationalModel=e.Model.extend({relationsInstalled:!1,constructor:function(t,n){var r,i;return e.JJRelational.Config.work_with_store&&c.isObject(t)&&(i=t[this.idAttribute])&&(r=e.JJStore._byId(this.storeIdentifier,i)),r?(r.set(t,n),r):(e.Model.apply(this,arguments),this.__prepopulate_rel_atts(),e.JJStore.__registerModelInStore(this),this.__populate_rels_with_atts(t,n),e.JJStore.Events.trigger("created:"+this.storeIdentifier,this),this)},__prepopulate_rel_atts:function(){var t,n,r,i,s,o,a,f,l,h;if(this.relations){h=this.relations;for(r=f=0,l=h.length;f<l;r=++f){o=h[r],s=o.relatedModel,o.includeInJSON=o.includeInJSON?o.includeInJSON:[],o.includeInJSON=c.isArray(o.includeInJSON)?o.includeInJSON:[o.includeInJSON],i=c.indexOf(o.includeInJSON,"id"),i>=0&&this.idAttribute&&(o.includeInJSON[i]=this.idAttribute);if(s===void 0||s.prototype instanceof e.JJRelationalModel==0)if(c.isString(s)){n=e.JJRelational.__getObjectByName(s);if(!n||n.prototype instanceof e.JJRelationalModel!=1)throw new TypeError('relatedModel "'+s+'" is neither a reference to a JJRelationalModel nor a string referring to an object in the global oject');s=this.relations[r].relatedModel=n}else c.isFunction(s)&&(s=this.relations[r].relatedModel=s.call(this));a,o&&!u(o)&&(t=e.JJRelational.__getCollectionType(o.collectionType))?(a=new t,a._relational={owner:this,ownerKey:o.key,reverseKey:o.reverseKey,idQueue:[]}):a=null,this.attributes[o.key]=a,e.JJStore.Events.bind("created:"+s.prototype.storeIdentifier,this.newModelInStore,this)}this.bind("destroy",this._destroyAllRelations)}return this.relationsInstalled=!0,this},__populate_rels_with_atts:function(t,n){var r,i,s,o,u,a;for(r in t){o=t[r];if(i=this.getRelationByKey(r)){if(o instanceof e.Collection==1)throw new TypeError('The attribute "'+r+'" is a collection. You should not replace whole collections in a relational attribute. Please use the direct reference to the model array (Backbone.Collection.models)');o=c.isArray(o)?o:[o];for(u=0,a=o.length;u<a;u++)s=o[u],this.checkAndAdd(s,i,n)}}return this},save:function(t,n,r){a;var i,s,a,f,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L=this;y=null,s=this.attributes,c.isObject(t)||!t?(a=t,r=n):t!==null&&(a={},a[t]=n),r=r?c.clone(r):{},r.isSave=!0;if(a&&(!r||!r.wait)&&!this.set(a,r))return!1;r=c.extend({validate:!0},r);if(!this._validate(a,r))return!1;a&&r.wait&&(this.attributes=c.extend({},s,a)),i=function(){var e,t,n;return t=r.success,r.contentType||(r.contentType="application/json"),r.data||(r.data=JSON.stringify(L.toJSON({isSave:!0}))),r.parse===void 0&&(r.parse=!0),r.success=function(e,n,i){var o;return L.attributes=s,o=L.parse(e,r),r.wait&&(o=c.extend(a||{},o)),c.isObject(o)&&!L.set(o,r)?!1:(t&&t(L,e,r),L.trigger("sync",L,e,r))},l(L,r),e=L.isNew()?"create":r.patch?"patch":"update",e==="patch"&&(r.attrs=a),n=L.sync(e,L,r),a&&r.wait&&(L.attributes=s),n},r.ignoreSaveOnModels||(r.ignoreSaveOnModels=[this]),m=[],h=function(t){if(t&&t instanceof e.JJRelationalModel&&t.isNew())return m.push({model:t,done:!1})},f=function(){var e,t,n,r;c.isEmpty(m)&&(y=i()),e=!0;for(n=0,r=m.length;n<r;n++)t=m[n],t.done===!1&&(e=!1);if(e)return y=i()};if(this.relations){C=this.relations;for(w=0,x=C.length;w<x;w++){g=C[w],b=this.get(g.key);if(u(g))h(b);else if(o(g)){k=b.models;for(E=0,T=k.length;E<T;E++)p=k[E],h(p)}}}c.isEmpty(m)&&(y=i());for(S=0,N=m.length;S<N;S++)d=m[S],c.indexOf(r.ignoreSaveOnModels,d.model)<=-1?(r.ignoreSaveOnModels.push(d.model),v=c.clone(r),v.success=function(t,n){var r,i;for(r=0,i=m.length;r<i;r++)d=m[r],d.model.cid===t.cid&&(d.done=!0);return e.JJStore.Events.trigger("created:"+t.storeIdentifier,t),f()},d.model.save({},v)):(d.done=!0,f());return y},set:function(e,t,n){var r,i,s,o,u,a,f,l,h,p,d,v=this;if(e===null)return this;typeof e=="object"?(r=e,n=t):(r={},r[e]=t),n=n||{};if(!this._validate(r,n))return!1;p=n.unset,l=n.silent,i=[],s=this._changing,this._changing=!0,s||(this._previousAttributes=c.clone(this.attributes),this.changed={}),u=this.attributes,f=this._previousAttributes,o=function(e,r){var s,o,a,l,h;c.isEqual(u[e],r)||i.push(e),c.isEqual(f[e],r)?delete v.changed[e]:v.changed[e]=t;if((s=v.getRelationByKey(e))&&v.relationsInstalled){v._emptyRelation(s),r=c.isArray(r)?r:[r],h=[];for(a=0,l=r.length;a<l;a++)o=r[a],p?h.push(void 0):h.push(v.checkAndAdd(o,s,n));return h}return p?delete u[e]:u[e]=r},h=function(){var e,t,r,s;if(!l){i.length&&(v._pending=!0),s=[];for(t=0,r=i.length;t<r;t++)e=i[t],s.push(v.trigger("change:"+e,v,u[e],n));return s}},this.idAttribute in r&&(this.id=r[this.idAttribute],o(this.idAttribute,r[this.idAttribute]),h(),a=i.indexOf(this.idAttribute),~a&&i.splice(a,1),delete r[this.idAttribute]),this.idAttribute in r&&(this.id=r[this.idAttribute]);for(e in r)d=r[e],o(e,d);h();if(s)return this;if(!l)while(this._pending)this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},_validate:function(t,n){var r,i,s,o,u,a;if(!n.validate||!this.validate)return!0;t=c.extend({},this.attributes,t),a=this.relations;for(o=0,u=a.length;o<u;o++)i=a[o],s=t[i.key],s instanceof e.Collection==1&&(t[i.key]=s.models);return r=this.validationError=this.validate(t,n)||null,r?(this.trigger("invalid",this,r,c.extend(n||{},{validationError:r})),!1):!0},toJSON:function(e){var t,n,r,i,s,f,l,h,p,d,v;e=e||{};if(e.withRelIDs)return this.toJSONWithRelIDs();n=c.clone(this.attributes);if(e.bypass)return n;if(e.isSave){d=this.relations;for(f=0,h=d.length;f<h;f++){s=d[f];if(e.scaffold&&c.indexOf(e.scaffold,s.key)<0)continue;t=s.includeInJSON,r=s.key,i=this.get(r),u(s)?i?i instanceof s.relatedModel==1?t.length===0?n[s.key]=i.toJSONWithRelIDs():t.length===1?n[s.key]=i.get(t[0]):n[s.key]=i.toJSON({isSave:!0,scaffold:t}):n[s.key]=c.indexOf(t,s.relatedModel.prototype.idAttribute)>=0?i:null:n[s.key]=null:o(s)&&(t.length===0?n[s.key]=i.toJSON({withRelIDs:!0}):t.length===1?n[s.key]=i.getArrayForAttribute(t[0]):(n[s.key]=i.toJSON({isSave:!0,scaffold:t}),c.indexOf(t,"id")>=0&&n[s.key].push(i._relational.idQueue)))}}else{v=this.relations;for(l=0,p=v.length;l<p;l++)s=v[l],i=this.get(s.key),u(s)?n[s.key]=i instanceof s.relatedModel==1?i.toJSONWithRelIDs():i:o(s)&&(n[s.key]=i.toJSON({withRelIDs:!0}))}return e.scaffold&&(n=c.pick.apply(a,[n,e.scaffold])),n},toJSONWithRelIDs:function(){var e,t,n,r,i,s;e=c.clone(this.attributes),s=this.relations;for(r=0,i=s.length;r<i;r++)n=s[r],t=this.get(n.key),u(n)?e[n.key]=t instanceof n.relatedModel==1?t.id:t:o(n)&&(e[n.key]=t.getIDArray());return e},checkAndAdd:function(t,n,r){var i,s,a,f;r=r||{},a=n.relatedModel;if(t instanceof a==1)this.addToRelation(t,n,!1);else if(c.isObject(t)&&t instanceof e.Model==0)s=new a(t),this.addToRelation(s,n,!1);else{f=a.prototype.storeIdentifier;if(i=e.JJStore._byId(f,t)){if(r.ignoreModel===i)return;this.addToRelation(i,n,!1)}else o(n)?this.get(n.key).addToIdQueue(t):u(n)&&this.setHasOneRelation(n,t,!0)}return this},newModelInStore:function(e){var t,n,r,i;return t=e.id,t&&(i=this.getRelationByIdentifier(e.storeIdentifier),i&&(u(i)?t===this.get(i.key)&&this.addToRelation(e,i,!1):o(i)&&(r=this.get(i.key),n=r._relational.idQueue,c.indexOf(n,t)>-1&&this.addToRelation(e,i,!1)))),void 0},addToRelation:function(e,t,n){return c.isObject(t)||(t=this.getRelationByKey(t)),t&&e instanceof t.relatedModel==1&&(u(t)?this.get(t.key)!==e&&this.setHasOneRelation(t,e,n):o(t)&&this.get(t.key).add(e,{silentRelation:n})),this},setHasOneRelation:function(e,t,n){var r;c.isObject(e)||(e=this.getRelationByKey(e)),r=this.get(e.key),this.attributes[e.key]=t;if(n)return;return r instanceof e.relatedModel==1&&r.removeFromRelation(e.reverseKey,this,!0),t instanceof e.relatedModel==1&&t.addToRelation(this,e.reverseKey,!0),this},removeFromRelation:function(e,t,n){var r;return c.isObject(e)||(e=this.getRelationByKey(e)),e&&(u(e)?this.setHasOneRelation(e,null,n):o(e)&&(r=this.get(e.key),t instanceof e.relatedModel==1?r.remove(t,{silentRelation:n}):r.removeFromIdQueue(t))),this},_emptyRelation:function(e){var t;return u(e)?this.setHasOneRelation(e,null,!1):o(e)&&(t=this.get(e.key),t._cleanup()),this},_destroyAllRelations:function(){var t,n,r,i,s;e.JJStore.__removeModelFromStore(this),s=this.relations;for(r=0,i=s.length;r<i;r++)n=s[r],this.unbind("destroy",this._destroyAllRelations),e.JJStore.Events.unbind("created:"+n.relatedModel.prototype.storeIdentifier,this.newModelInStore,this),u(n)&&(t=this.get(n.key))?this.setHasOneRelation(n,null,!1):o(n)&&this.get(n.key)._cleanup();return this},getIdQueueLength:function(e){var t;c.isObject(e)||(e=this.getRelationByKey(e));if(e){if(u(e))return t=this.get(e.key),!t||t instanceof e.relatedModel==1?0:1;if(o(e))return this.get(e.key)._relational.idQueue.length}return 0},clearIdQueue:function(e){var t,n;return c.isObject(e)||(e=this.getRelationByKey(e)),e&&(u(e)?(n=this.get(e.key),n&&n instanceof e.relatedModel==0&&this.set(e.key,null,{silentRelation:!0})):o(e)&&(t=this.get(e.key),t._relational.idQueue=[])),this},fetchByIdQueue:function(t,n){var r,i,a,f,h=this;c.isObject(t)||(t=this.getRelationByKey(t));if(t)if(o(t))this.get(t.key).fetchByIdQueue(n);else if(u(t)){r=this.get(t.key);if(r&&r instanceof t.relatedModel==0)return i=t.relatedModel,n?n=c.clone(n):n={},f=s(i.prototype,"url"),f+=e.JJRelational.Config.url_id_appendix+r,n.url=f,n.parse===void 0&&(n.parse=!0),a=n.success,n.success=function(e,r,s){var o;return h.setHasOneRelation(t,null,!0),n.ignoreModel=h,o=new i(i.prototype.parse(e[0]),n),h.set(t.key,o),a&&a(o,e),o.trigger("sync",o,e,n)},l(this,n),this.sync.call(this,"read",this,n)}return this},getRelationByKey:function(e){var t,n,r,i;i=this.relations;for(n=0,r=i.length;n<r;n++){t=i[n];if(t.key===e)return t}return!1},getRelationByReverseKey:function(e){var t,n,r,i;i=this.relations;for(n=0,r=i.length;n<r;n++){t=i[n];if(t.reverseKey===e)return t}return!1},getRelationByIdentifier:function(e){var t,n,r,i;i=this.relations;for(n=0,r=i.length;n<r;n++){t=i[n];if(t.relatedModel.prototype.storeIdentifier===e)return t}return!1}}),e.Collection.prototype.fetchByIdQueueOfModels=function(t,n){var i,s,a,f,h=this;if(this.model&&this.model.prototype instanceof e.JJRelationalModel==1){a=this.model.prototype.getRelationByKey(t),s=a.relatedModel,i=[],u(a)?this.each(function(e){var n;n=e.get(t);if(n&&n instanceof s==0)return i.push(n)}):o(a)&&this.each(function(e){var n;return n=e.get(t),i=c.union(i,n._relational.idQueue)});if(i.length>0)return n.url=r(s.prototype,i),n.parse===void 0&&(n.parse=!0),f=n.success,n.success=function(t,r,i){var o,u,l,p,d,v,m,g;l=[];if(a.collectionType&&(o=e.JJRelational.__getCollectionType(a.collectionType)))l=o.prototype.parse(t);else if(c.isArray(t))for(d=0,m=t.length;d<m;d++)p=t[d],c.isObject(p)&&l.push(s.prototype.parse(p));for(v=0,g=l.length;v<g;v++)u=l[v],new s(u);return f&&f(h,t),h.trigger("sync",h,t,n)},l(this,n),this.sync.call(this,"read",this,n)}return n.success&&n.success(this),this},e.Collection.prototype.__set=e.Collection.prototype.set,e.Collection.prototype.set=function(t,n){var r,i,s,o,u,a,f,l,h,p,d,v,m;if(!this._relational)return this.__set(t,n);if(this._relational){n||(n={}),c.isArray(t)||(t=[t]),f=[],o=[],s=[];for(l=0,d=t.length;l<d;l++){u=t[l];if(u instanceof e.Model==0)if(!c.isObject(u)){if(!(r=e.JJStore._byId(this.model.prototype.storeIdentifier,u))){s.push(u);break}u=r}else u=this._prepareModel(u,n);if(u){if(u instanceof this.model==0)throw new TypeError('Invalid model to be added to collection with relation key "'+this._relational.ownerKey+'"');f.push(u),u.id&&o.push(u.id)}}this.removeFromIdQueue(o);for(h=0,v=s.length;h<v;h++)i=s[h],this.addToIdQueue(i);if(!n.silentRelation)for(p=0,m=f.length;p<m;p++)a=f[p],a.addToRelation(this._relational.owner,this._relational.reverseKey,!0);n.silentRelation=!1,e.JJRelational.Config.work_with_store&&(n.merge=!1)}return this.__set(f,n)},e.Collection.prototype.__remove=e.Collection.prototype.remove,e.Collection.prototype.remove=function(t,n){var r=this;return this._relational?(n||(n={}),c.isArray(t)?t=t.slice():t=[t],c.each(t,function(t){if(t instanceof e.Model==1){r.__remove(t,n);if(!n.silentRelation)return r._relatedModelRemoved(t,n)}}),this):this.__remove(t,n)},e.Collection.prototype._cleanup=function(){return this.remove(this.models,{silentRelation:!1}),this._relational.idQueue=[],this},e.Collection.prototype._relatedModelRemoved=function(e,t){var n;return t.silentRelation?n=!1:n=!0,e.removeFromRelation(this._relational.reverseKey,this._relational.owner,n),this},e.Collection.prototype.__reset=e.Collection.prototype.reset,e.Collection.prototype.reset=function(e,t){return this._relational&&this._cleanup(),this.__reset(e,t),this},e.Collection.prototype.__fetch=e.Collection.prototype.fetch,e.Collection.prototype.fetch=function(t){var n,r=this;return t=t?c.clone(t):{},t.parse===void 0&&(t.parse=!0),n=t.success,t.success=function(i,s,o){var u,f,l,h,p,d,v,m,g,y,b,w;p=r.model.prototype.idAttribute,y=r.model.prototype.storeIdentifier,m=r.parse(i),l=[],u=[],u.push(m);for(b=0,w=m.length;b<w;b++)g=m[b],h=g[p],f=e.JJStore._byId(y,h),f&&(f.set(g,t),l.push(f),u.push(g));return m=c.without.apply(a,u),r._relational&&(t.ignoreModel=r._relational.owner),v=l.concat(m),d=t.reset?"reset":"set",t.reset||(t.merge=!1),r[d](v,t),n&&n(r,i),r.trigger("sync",r,i,t)},l(this,t),this.sync.call(this,"read",this,t)},e.Collection.prototype.fetchByIdQueue=function(e){var t,n,i=this;return e?e=c.clone(e):e={},t=this._relational.idQueue,t.length>0?(e.url=r(this,t),e.parse===void 0&&(e.parse=!0),n=e.success,e.success=function(t,r,s){return e.ignoreModel=i._relational.owner,i._relational.idQueue=[],i.add(i.parse(t),e),n&&n(i,t),i.trigger("sync",i,t,e)},l(this,e),this.sync.call(this,"read",this,e)):this},e.Collection.prototype.addToIdQueue=function(e){var t;return t=this._relational.idQueue,t.push(e),this._relational.idQueue=c.uniq(t),this},e.Collection.prototype.removeFromIdQueue=function(e){var t;return e=c.isArray?e:[e],t=[this._relational.idQueue].concat(e),this._relational.idQueue=c.without.apply(a,t),this},e.Collection.prototype.getIDArray=function(){var e;return e=[],this.each(function(t){if(t.id)return e.push(t.id)}),c.union(e,this._relational.idQueue)},e.Collection.prototype.getArrayForAttribute=function(e){var t;return e===this.model.prototype.idAttribute?this.getIDArray():(t=[],this.each(function(n){return t.push(n.get(e))}),t)},l=function(e,t){var n;return n=t.error,t.error=function(r){return n&&n(e,r,t),e.trigger("error",e,r,t)}},n=function(t){var n,r;for(n in t)r=t[n],r instanceof e.Collection&&r._relational&&(t[n]=r.models.concat(r._relational.idQueue));return t},s=function(e,t){return!e||!e[t]?null:c.isFunction(e[t])?e[t]():e[t]},i=function(e,t){var n;return n=s(e,"urlRoot")||s(e.collection,"url")||f(),n+(n.charAt(n.length-1)==="/"?"":"/")+encodeURIComponent(t?t:e.id)},r=function(t,n){var r;return r=s(t,"url"),r?(r+=e.JJRelational.Config.url_id_appendix+n.join(","),r):(f(),!1)},f=function(){throw new Error('A "url" property or function must be specified')},u=function(e){return e.type==="has_one"?!0:!1},o=function(e){return e.type==="has_many"||e.type==="many_many"?!0:!1},this}(),define("plugins/backbone.JJRelational",function(){});var JJRestApi;JJRestApi={url:"/api/v2/",extension:"json",structurID:"api-structure"},JJRestApi.Models={},JJRestApi.Collections={},JJRestApi.Modules={},JJRestApi.Modules._modules=[],JJRestApi.Events=_.extend({},Backbone.Events),JJRestApi.Model=function(e){return this.Models[e]?this.Models[e]:!1},JJRestApi.Collection=function(e){return this.Collections[e]?this.Collections[e]:!1},JJRestApi.Modules.extend=function(e,t){return JJRestApi.Modules._modules.push({module:e,extension:t}),!0},JJRestApi.extendModel=function(e,t,n){var r;r=this.Model(e),t.prototype instanceof Backbone.Model==0&&(n=t,t=r),n||(n={});if(r)return this.Models[e]=t.extend(n)},JJRestApi.extendCollection=function(e,t,n){var r;r=this.Collection(e),t instanceof Backbone.Collection==0&&(n=t,t=r),n||(n={});if(r)return this.Collections[e]=t.extend(n)},JJRestApi.setObjectUrl=function(e,t){return t=t||{},this.url+e+(t.id?"/"+t.id:"")+"."+this.extension},JJRestApi.hookSecurityToken=function(){return JJRestApi.getFromDomOrApi("SecurityID",{noAjax:!0}).done(function(e){if(e.SecurityID)return $(document).bind("ajaxSend",function(t,n,r){return n.setRequestHeader(e.RequestHeader,e.SecurityID)})})},JJRestApi.getFromDomOrApi=function(e,t){var n,r,i,s,o;return t=t||{},s=t.name?t.name:e.toLowerCase(),n=$("#api-"+s),n.length?(r=$.trim(n.html()),n.attr("type")==="application/json"&&(r=r?$.parseJSON(r):null),i=new $.Deferred,i.resolve(r),i.promise()):t.noAjax?$.Deferred().resolve(null):(o=t.url?t.url:JJRestApi.setObjectUrl(e,t),t.urlSuffix&&(o+=t.urlSuffix),i=$.getJSON(o),JJRestApi.Events.trigger("dfdAjax",i),i)},JJRestApi.objToUrlString=function(e){var t,n,r,i,s,o,u;i="";for(n in e){u=e[n];if(n==="search"){s="s=";for(t in u)o=u[t],s+=encodeURIComponent(t)+":",s+=_.isArray(o)?encodeURIComponent(o.join("|")):encodeURIComponent(o),s+=";";i+=s}else i+=encodeURIComponent(n)+"="+encodeURIComponent(u);i+="&"}return r=i.length,i.lastIndexOf("&")===r-1&&(i=i.substr(0,r-1)),i},JJRestApi.bootstrapWithStructure=function(e){var t;return t=JJRestApi.getFromDomOrApi("Structure"),t.done(function(e){return JJRestApi.Bootstrap(e)}),t.fail(function(){throw new Error("Structure could not be loaded.")}),t},JJRestApi.Bootstrap=function(e){o,s;var t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b=this;i=[],a=function(e){t;var t;switch(e){case"belongs_to":t="has_one";break;case"has_one":t="has_one";break;case"has_many":t="has_many";break;case"many_many":t="many_many";break;case"belongs_many_many":t="many_many"}return t},u=function(e,t){var n,r;return n=a(t.Type),r={type:n,relatedModel:function(){return JJRestApi.Model(t.ClassName)},key:t.Key,reverseKey:t.ReverseKey,includeInJSON:["id"]},n!=="has_one"&&(r.collectionType=t.ClassName,i.push(t.ClassName)),r},f=function(e){return(e="has_many")?!0:!1},t=function(e,t,n){var r,i,s,o,a,f,l,c;o={defaults:{}},l=[];for(i in t)f=t[i],(a=u(e,f))&&l.push(a);l.length&&(o.relations=l),o.storeIdentifier=e,o.url=function(){return this.id?JJRestApi.url+this.storeIdentifier+"/"+this.id+"."+JJRestApi.extension:this.urlRoot},o.urlRoot=b.setObjectUrl(e),o.idAttribute="ID";if(n&&n.DefaultFields){c=n.DefaultFields;for(s in c)r=c[s],o.defaults[r]=null}return b.Models[e]=b.Model(e).extend(o),!0},s=e.Config||!1,o=e.Config?e.Objs:e;if(!o)return;for(n in o)h=o[n],this.Models[n]=Backbone.JJRelationalModel.extend({}),this.Collections[n]=Backbone.Collection.extend({url:this.setObjectUrl(n),comparator:function(e){return e.id},parse:function(e){return e}});g=JJRestApi.Modules._modules;for(p=0,v=g.length;p<v;p++)l=g[p],l.extension.call(window,l.module);for(n in o)h=o[n],t(n,h,s),this.Collections[n]=this.Collection(n).extend({model:this.Model(n)});r={},y=_.uniq(i);for(d=0,m=y.length;d<m;d++)c=y[d],r[c]=this.Collection(c);return Backbone.JJRelational.registerCollectionTypes(r),!1},JJRestApi,define("plugins/backbone.JJRestApi",function(){}),window.matchMedia=window.matchMedia||function(e,t){var n,r=e.documentElement,i=r.firstElementChild||r.firstChild,s=e.createElement("body"),o=e.createElement("div");return o.id="mq-test-1",o.style.cssText="position:absolute;top:-100em",s.appendChild(o),function(e){return o.innerHTML='&shy;<style media="'+e+'"> #mq-test-1 { width: 42px; }</style>',r.insertBefore(s,i),n=o.offsetWidth==42,r.removeChild(s),{matches:n,media:e}}}(document),define("responsiveimage/external/matchmedia",function(){}),function(e){e.picturefill_opts={wrapperTag:"span",imageTag:"span"},e.picturefill=function(t){t=t||e.picturefill_opts;var n=e.document.getElementsByTagName(t.wrapperTag);for(var r=0,i=n.length;r<i;r++)if(n[r].getAttribute("data-picture")!==null){var s=n[r].getElementsByTagName(t.imageTag),o=[],u=n[r].offsetWidth;for(var a=0,f=s.length;a<f;a++){var l=s[a].getAttribute("data-media"),c=n[a].getAttribute("data-ratio");(!l||e.matchMedia&&e.matchMedia(l).matches)&&o.push(s[a])}var h=n[r].getElementsByTagName("img")[0],p;o.length?(h||(h=e.document.createElement("img"),h.alt=n[r].getAttribute("data-alt"),n[r].appendChild(h)),p=o.pop(),h.src=p.getAttribute("data-src"),h.height=u/parseFloat(p.getAttribute("data-ratio"),10)):h&&n[r].removeChild(h)}},e.addEventListener?(e.addEventListener("resize",e.picturefill,!1),e.addEventListener("DOMContentLoaded",function(){e.picturefill(),e.removeEventListener("load",e.picturefill,!1)},!1),e.addEventListener("load",e.picturefill,!1)):e.attachEvent&&e.attachEvent("onload",e.picturefill)}(this),define("responsiveimage/picturefill",function(){}),define("app",["jquery","underscore","backbone","handlebars","layoutmanager","plugins/backbone.JJRelational","plugins/backbone.JJRestApi","responsiveimage/picturefill"],function(e,t,n,r){var i,s;return s={root:"/",pendingTemplateReqs:{}},i=window.JST=window.JST||{},n.NMLayout=n.Layout.extend({setViewAndRenderMaybe:function(e,t){this.setView(e,t);if(this.__manager__.hasRendered)return t.render()},insertViewAndRenderMaybe:function(e,t){this.insertView(e,t);if(this.__manager__.hasRendered)return t.render()}}),n.Layout.configure({manage:!0,prefix:"app/templates/",pendingAjaxRequests:{},fetch:function(t){var o,u,a;return u=void 0,a=t.replace(n.Layout.prototype.options.prefix,""),a.indexOf("/")===0?t=a.substring(1):t+=".html",i[t]?i[t]:(u=this.async(),(o=s.pendingTemplateReqs[t])?o.then(function(){return u(i[t])}):(o=e.ajax({url:s.root+"app/"+t}),s.pendingTemplateReqs[t]=o,o.then(function(e){return i[t]=r.compile(e),i[t].__compiled__=!0,delete s.pendingTemplateReqs[t],u(i[t])})),o)}}),t.extend(s,{module:function(e){return t.extend({Views:{}},e)},useLayout:function(r,i){var s,o,u,a,f;return i=i||{},u=i.customClass?i.customClass:r,this.layout&&this.layout.getAllOptions().template==="layouts/"+r?(a=this.layout,a.customClass&&a.$el.removeClass(a.customClass),u&&(a.customClass=u,a.$el.addClass(u)),this.layout):(this.layout&&this.layout.remove(),f=new n.NMLayout(t.extend({template:"layouts/"+r,className:"layout "+u,id:"layout"},i)),e("#main").empty().append(f.el),e(f.el).css("height","100%"),o=this.currentLayoutName,s=e("body"),o&&s.removeClass(o),s.addClass(r),this.currentLayoutName=r,f.render(),this.layout=f,f)}},n.Events)}),function(e,t){function i(t,n){var r,i,o,u=t.nodeName.toLowerCase();return"area"===u?(r=t.parentNode,i=r.name,!t.href||!i||r.nodeName.toLowerCase()!=="map"?!1:(o=e("img[usemap=#"+i+"]")[0],!!o&&s(o))):(/input|select|textarea|button|object/.test(u)?!t.disabled:"a"===u?t.href||n:n)&&s(t)}function s(t){return e.expr.filters.visible(t)&&!e(t).parents().addBack().filter(function(){return e.css(this,"visibility")==="hidden"}).length}var n=0,r=/^ui-id-\d+$/;e.ui=e.ui||{},e.extend(e.ui,{version:"1.10.3",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({focus:function(t){return function(n,r){return typeof n=="number"?this.each(function(){var t=this;setTimeout(function(){e(t).focus(),r&&r.call(t)},n)}):t.apply(this,arguments)}}(e.fn.focus),scrollParent:function(){var t;return e.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?t=this.parents().filter(function(){return/(relative|absolute|fixed)/.test(e.css(this,"position"))&&/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0):t=this.parents().filter(function(){return/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!t.length?e(document):t},zIndex:function(n){if(n!==t)return this.css("zIndex",n);if(this.length){var r=e(this[0]),i,s;while(r.length&&r[0]!==document){i=r.css("position");if(i==="absolute"||i==="relative"||i==="fixed"){s=parseInt(r.css("zIndex"),10);if(!isNaN(s)&&s!==0)return s}r=r.parent()}}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++n)})},removeUniqueId:function(){return this.each(function(){r.test(this.id)&&e(this).removeAttr("id")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(n){return!!e.data(n,t)}}):function(t,n,r){return!!e.data(t,r[3])},focusable:function(t){return i(t,!isNaN(e.attr(t,"tabindex")))},tabbable:function(t){var n=e.attr(t,"tabindex"),r=isNaN(n);return(r||n>=0)&&i(t,!r)}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(n,r){function u(t,n,r,s){return e.each(i,function(){n-=parseFloat(e.css(t,"padding"+this))||0,r&&(n-=parseFloat(e.css(t,"border"+this+"Width"))||0),s&&(n-=parseFloat(e.css(t,"margin"+this))||0)}),n}var i=r==="Width"?["Left","Right"]:["Top","Bottom"],s=r.toLowerCase(),o={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+r]=function(n){return n===t?o["inner"+r].call(this):this.each(function(){e(this).css(s,u(this,n)+"px")})},e.fn["outer"+r]=function(t,n){return typeof t!="number"?o["outer"+r].call(this,t):this.each(function(){e(this).css(s,u(this,t,!0,n)+"px")})}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(e==null?this.prevObject:this.prevObject.filter(e))}),e("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(e.fn.removeData=function(t){return function(n){return arguments.length?t.call(this,e.camelCase(n)):t.call(this)}}(e.fn.removeData)),e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),e.support.selectstart="onselectstart"in document.createElement("div"),e.fn.extend({disableSelection:function(){return this.bind((e.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(e){e.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),e.extend(e.ui,{plugin:{add:function(t,n,r){var i,s=e.ui[t].prototype;for(i in r)s.plugins[i]=s.plugins[i]||[],s.plugins[i].push([n,r[i]])},call:function(e,t,n){var r,i=e.plugins[t];if(!i||!e.element[0].parentNode||e.element[0].parentNode.nodeType===11)return;for(r=0;r<i.length;r++)e.options[i[r][0]]&&i[r][1].apply(e.element,n)}},hasScroll:function(t,n){if(e(t).css("overflow")==="hidden")return!1;var r=n&&n==="left"?"scrollLeft":"scrollTop",i=!1;return t[r]>0?!0:(t[r]=1,i=t[r]>0,t[r]=0,i)}})}(jQuery),define("bower/jquery-ui/ui/jquery.ui.core",function(){}),function(e,t){var n=0,r=Array.prototype.slice,i=e.cleanData;e.cleanData=function(t){for(var n=0,r;(r=t[n])!=null;n++)try{e(r).triggerHandler("remove")}catch(s){}i(t)},e.widget=function(t,n,r){var i,s,o,u,a={},f=t.split(".")[0];t=t.split(".")[1],i=f+"-"+t,r||(r=n,n=e.Widget),e.expr[":"][i.toLowerCase()]=function(t){return!!e.data(t,i)},e[f]=e[f]||{},s=e[f][t],o=e[f][t]=function(e,t){if(!this._createWidget)return new o(e,t);arguments.length&&this._createWidget(e,t)},e.extend(o,s,{version:r.version,_proto:e.extend({},r),_childConstructors:[]}),u=new n,u.options=e.widget.extend({},u.options),e.each(r,function(t,r){if(!e.isFunction(r)){a[t]=r;return}a[t]=function(){var e=function(){return n.prototype[t].apply(this,arguments)},i=function(e){return n.prototype[t].apply(this,e)};return function(){var t=this._super,n=this._superApply,s;return this._super=e,this._superApply=i,s=r.apply(this,arguments),this._super=t,this._superApply=n,s}}()}),o.prototype=e.widget.extend(u,{widgetEventPrefix:s?u.widgetEventPrefix:t},a,{constructor:o,namespace:f,widgetName:t,widgetFullName:i}),s?(e.each(s._childConstructors,function(t,n){var r=n.prototype;e.widget(r.namespace+"."+r.widgetName,o,n._proto)}),delete s._childConstructors):n._childConstructors.push(o),e.widget.bridge(t,o)},e.widget.extend=function(n){var i=r.call(arguments,1),s=0,o=i.length,u,a;for(;s<o;s++)for(u in i[s])a=i[s][u],i[s].hasOwnProperty(u)&&a!==t&&(e.isPlainObject(a)?n[u]=e.isPlainObject(n[u])?e.widget.extend({},n[u],a):e.widget.extend({},a):n[u]=a);return n},e.widget.bridge=function(n,i){var s=i.prototype.widgetFullName||n;e.fn[n]=function(o){var u=typeof o=="string",a=r.call(arguments,1),f=this;return o=!u&&a.length?e.widget.extend.apply(null,[o].concat(a)):o,u?this.each(function(){var r,i=e.data(this,s);if(!i)return e.error("cannot call methods on "+n+" prior to initialization; "+"attempted to call method '"+o+"'");if(!e.isFunction(i[o])||o.charAt(0)==="_")return e.error("no such method '"+o+"' for "+n+" widget instance");r=i[o].apply(i,a);if(r!==i&&r!==t)return f=r&&r.jquery?f.pushStack(r.get()):r,!1}):this.each(function(){var t=e.data(this,s);t?t.option(o||{})._init():e.data(this,s,new i(o,this))}),f}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,r){r=e(r||this.defaultElement||this)[0],this.element=e(r),this.uuid=n++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this.bindings=e(),this.hoverable=e(),this.focusable=e(),r!==this&&(e.data(r,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===r&&this.destroy()}}),this.document=e(r.style?r.ownerDocument:r.document||r),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled "+"ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(n,r){var i=n,s,o,u;if(arguments.length===0)return e.widget.extend({},this.options);if(typeof n=="string"){i={},s=n.split("."),n=s.shift();if(s.length){o=i[n]=e.widget.extend({},this.options[n]);for(u=0;u<s.length-1;u++)o[s[u]]=o[s[u]]||{},o=o[s[u]];n=s.pop();if(r===t)return o[n]===t?null:o[n];o[n]=r}else{if(r===t)return this.options[n]===t?null:this.options[n];i[n]=r}}return this._setOptions(i),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,e==="disabled"&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!t).attr("aria-disabled",t),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(t,n,r){var i,s=this;typeof t!="boolean"&&(r=n,n=t,t=!1),r?(n=i=e(n),this.bindings=this.bindings.add(n)):(r=n,n=this.element,i=this.widget()),e.each(r,function(r,o){function u(){if(!t&&(s.options.disabled===!0||e(this).hasClass("ui-state-disabled")))return;return(typeof o=="string"?s[o]:o).apply(s,arguments)}typeof o!="string"&&(u.guid=o.guid=o.guid||u.guid||e.guid++);var a=r.match(/^(\w+)\s*(.*)$/),f=a[1]+s.eventNamespace,l=a[2];l?i.delegate(l,f,u):n.bind(f,u)})},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(t).undelegate(t)},_delay:function(e,t){function n(){return(typeof e=="string"?r[e]:e).apply(r,arguments)}var r=this;return setTimeout(n,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,n,r){var i,s,o=this.options[t];r=r||{},n=e.Event(n),n.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),n.target=this.element[0],s=n.originalEvent;if(s)for(i in s)i in n||(n[i]=s[i]);return this.element.trigger(n,r),!(e.isFunction(o)&&o.apply(this.element[0],[n].concat(r))===!1||n.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,n){e.Widget.prototype["_"+t]=function(r,i,s){typeof i=="string"&&(i={effect:i});var o,u=i?i===!0||typeof i=="number"?n:i.effect||n:t;i=i||{},typeof i=="number"&&(i={duration:i}),o=!e.isEmptyObject(i),i.complete=s,i.delay&&r.delay(i.delay),o&&e.effects&&e.effects.effect[u]?r[t](i):u!==t&&r[u]?r[u](i.duration,i.easing,s):r.queue(function(n){e(this)[t](),s&&s.call(r[0]),n()})}})}(jQuery),define("bower/jquery-ui/ui/jquery.ui.widget",function(){}),function(e,t){var n=0;e.widget("ui.autocomplete",{version:"1.10.3",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},pending:0,_create:function(){var t,n,r,i=this.element[0].nodeName.toLowerCase(),s=i==="textarea",o=i==="input";this.isMultiLine=s?!0:o?!1:this.element.prop("isContentEditable"),this.valueMethod=this.element[s||o?"val":"text"],this.isNewMenu=!0,this.element.addClass("ui-autocomplete-input").attr("autocomplete","off"),this._on(this.element,{keydown:function(i){if(this.element.prop("readOnly")){t=!0,r=!0,n=!0;return}t=!1,r=!1,n=!1;var s=e.ui.keyCode;switch(i.keyCode){case s.PAGE_UP:t=!0,this._move("previousPage",i);break;case s.PAGE_DOWN:t=!0,this._move("nextPage",i);break;case s.UP:t=!0,this._keyEvent("previous",i);break;case s.DOWN:t=!0,this._keyEvent("next",i);break;case s.ENTER:case s.NUMPAD_ENTER:this.menu.active&&(t=!0,i.preventDefault(),this.menu.select(i));break;case s.TAB:this.menu.active&&this.menu.select(i);break;case s.ESCAPE:this.menu.element.is(":visible")&&(this._value(this.term),this.close(i),i.preventDefault());break;default:n=!0,this._searchTimeout(i)}},keypress:function(r){if(t){t=!1,(!this.isMultiLine||this.menu.element.is(":visible"))&&r.preventDefault();return}if(n)return;var i=e.ui.keyCode;switch(r.keyCode){case i.PAGE_UP:this._move("previousPage",r);break;case i.PAGE_DOWN:this._move("nextPage",r);break;case i.UP:this._keyEvent("previous",r);break;case i.DOWN:this._keyEvent("next",r)}},input:function(e){if(r){r=!1,e.preventDefault();return}this._searchTimeout(e)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(e){if(this.cancelBlur){delete this.cancelBlur;return}clearTimeout(this.searching),this.close(e),this._change(e)}}),this._initSource(),this.menu=e("<ul>").addClass("ui-autocomplete ui-front").appendTo(this._appendTo()).menu({role:null}).hide().data("ui-menu"),this._on(this.menu.element,{mousedown:function(t){t.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur});var n=this.menu.element[0];e(t.target).closest(".ui-menu-item").length||this._delay(function(){var t=this;this.document.one("mousedown",function(r){r.target!==t.element[0]&&r.target!==n&&!e.contains(n,r.target)&&t.close()})})},menufocus:function(t,n){if(this.isNewMenu){this.isNewMenu=!1;if(t.originalEvent&&/^mouse/.test(t.originalEvent.type)){this.menu.blur(),this.document.one("mousemove",function(){e(t.target).trigger(t.originalEvent)});return}}var r=n.item.data("ui-autocomplete-item");!1!==this._trigger("focus",t,{item:r})?t.originalEvent&&/^key/.test(t.originalEvent.type)&&this._value(r.value):this.liveRegion.text(r.value)},menuselect:function(e,t){var n=t.item.data("ui-autocomplete-item"),r=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=r,this._delay(function(){this.previous=r,this.selectedItem=n})),!1!==this._trigger("select",e,{item:n})&&this._value(n.value),this.term=this._value(),this.close(e),this.selectedItem=n}}),this.liveRegion=e("<span>",{role:"status","aria-live":"polite"}).addClass("ui-helper-hidden-accessible").insertBefore(this.element),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(e,t){this._super(e,t),e==="source"&&this._initSource(),e==="appendTo"&&this.menu.element.appendTo(this._appendTo()),e==="disabled"&&t&&this.xhr&&this.xhr.abort()},_appendTo:function(){var t=this.options.appendTo;return t&&(t=t.jquery||t.nodeType?e(t):this.document.find(t).eq(0)),t||(t=this.element.closest(".ui-front")),t.length||(t=this.document[0].body),t},_initSource:function(){var t,n,r=this;e.isArray(this.options.source)?(t=this.options.source,this.source=function(n,r){r(e.ui.autocomplete.filter(t,n.term))}):typeof this.options.source=="string"?(n=this.options.source,this.source=function(t,i){r.xhr&&r.xhr.abort(),r.xhr=e.ajax({url:n,data:t,dataType:"json",success:function(e){i(e)},error:function(){i([])}})}):this.source=this.options.source},_searchTimeout:function(e){clearTimeout(this.searching),this.searching=this._delay(function(){this.term!==this._value()&&(this.selectedItem=null,this.search(null,e))},this.options.delay)},search:function(e,t){e=e!=null?e:this._value(),this.term=this._value();if(e.length<this.options.minLength)return this.close(t);if(this._trigger("search",t)===!1)return;return this._search(e)},_search:function(e){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:e},this._response())},_response:function(){var e=this,t=++n;return function(r){t===n&&e.__response(r),e.pending--,e.pending||e.element.removeClass("ui-autocomplete-loading")}},__response:function(e){e&&(e=this._normalize(e)),this._trigger("response",null,{content:e}),!this.options.disabled&&e&&e.length&&!this.cancelSearch?(this._suggest(e),this._trigger("open")):this._close()},close:function(e){this.cancelSearch=!0,this._close(e)},_close:function(e){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",e))},_change:function(e){this.previous!==this._value()&&this._trigger("change",e,{item:this.selectedItem})},_normalize:function(t){return t.length&&t[0].label&&t[0].value?t:e.map(t,function(t){return typeof t=="string"?{label:t,value:t}:e.extend({label:t.label||t.value,value:t.value||t.label},t)})},_suggest:function(t){var n=this.menu.element.empty();this._renderMenu(n,t),this.isNewMenu=!0,this.menu.refresh(),n.show(),this._resizeMenu(),n.position(e.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var e=this.menu.element;e.outerWidth(Math.max(e.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(t,n){var r=this;e.each(n,function(e,n){r._renderItemData(t,n)})},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-autocomplete-item",t)},_renderItem:function(t,n){return e("<li>").append(e("<a>").text(n.label)).appendTo(t)},_move:function(e,t){if(!this.menu.element.is(":visible")){this.search(null,t);return}if(this.menu.isFirstItem()&&/^previous/.test(e)||this.menu.isLastItem()&&/^next/.test(e)){this._value(this.term),this.menu.blur();return}this.menu[e](t)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(e,t){if(!this.isMultiLine||this.menu.element.is(":visible"))this._move(e,t),t.preventDefault()}}),e.extend(e.ui.autocomplete,{escapeRegex:function(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(t,n){var r=new RegExp(e.ui.autocomplete.escapeRegex(n),"i");return e.grep(t,function(e){return r.test(e.label||e.value||e)})}}),e.widget("ui.autocomplete",e.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(e){return e+(e>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(e){var t;this._superApply(arguments);if(this.options.disabled||this.cancelSearch)return;e&&e.length?t=this.options.messages.results(e.length):t=this.options.messages.noResults,this.liveRegion.text(t)}})}(jQuery),define("bower/jquery-ui/ui/jquery.ui.autocomplete",function(){}),function(e,t){e.widget("ui.menu",{version:"1.10.3",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content ui-corner-all").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}).bind("click"+this.eventNamespace,e.proxy(function(e){this.options.disabled&&e.preventDefault()},this)),this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true"),this._on({"mousedown .ui-menu-item > a":function(e){e.preventDefault()},"click .ui-state-disabled > a":function(e){e.preventDefault()},"click .ui-menu-item:has(a)":function(t){var n=e(t.target).closest(".ui-menu-item");!this.mouseHandled&&n.not(".ui-state-disabled").length&&(this.mouseHandled=!0,this.select(t),n.has(".ui-menu").length?this.expand(t):this.element.is(":focus")||(this.element.trigger("focus",[!0]),this.active&&this.active.parents(".ui-menu").length===1&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(t){var n=e(t.currentTarget);n.siblings().children(".ui-state-active").removeClass("ui-state-active"),this.focus(t,n)},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(e,t){var n=this.active||this.element.children(".ui-menu-item").eq(0);t||this.focus(e,n)},blur:function(t){this._delay(function(){e.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(t)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(t){e(t.target).closest(".ui-menu").length||this.collapseAll(t),this.mouseHandled=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").children("a").removeUniqueId().removeClass("ui-corner-all ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var t=e(this);t.data("ui-menu-submenu-carat")&&t.remove()}),this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(t){function a(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}var n,r,i,s,o,u=!0;switch(t.keyCode){case e.ui.keyCode.PAGE_UP:this.previousPage(t);break;case e.ui.keyCode.PAGE_DOWN:this.nextPage(t);break;case e.ui.keyCode.HOME:this._move("first","first",t);break;case e.ui.keyCode.END:this._move("last","last",t);break;case e.ui.keyCode.UP:this.previous(t);break;case e.ui.keyCode.DOWN:this.next(t);break;case e.ui.keyCode.LEFT:this.collapse(t);break;case e.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(t);break;case e.ui.keyCode.ENTER:case e.ui.keyCode.SPACE:this._activate(t);break;case e.ui.keyCode.ESCAPE:this.collapse(t);break;default:u=!1,r=this.previousFilter||"",i=String.fromCharCode(t.keyCode),s=!1,clearTimeout(this.filterTimer),i===r?s=!0:i=r+i,o=new RegExp("^"+a(i),"i"),n=this.activeMenu.children(".ui-menu-item").filter(function(){return o.test(e(this).children("a").text())}),n=s&&n.index(this.active.next())!==-1?this.active.nextAll(".ui-menu-item"):n,n.length||(i=String.fromCharCode(t.keyCode),o=new RegExp("^"+a(i),"i"),n=this.activeMenu.children(".ui-menu-item").filter(function(){return o.test(e(this).children("a").text())})),n.length?(this.focus(t,n),n.length>1?(this.previousFilter=i,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter):delete this.previousFilter}u&&t.preventDefault()},_activate:function(e){this.active.is(".ui-state-disabled")||(this.active.children("a[aria-haspopup='true']").length?this.expand(e):this.select(e))},refresh:function(){var t,n=this.options.icons.submenu,r=this.element.find(this.options.menus);r.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-corner-all").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var t=e(this),r=t.prev("a"),i=e("<span>").addClass("ui-menu-icon ui-icon "+n).data("ui-menu-submenu-carat",!0);r.attr("aria-haspopup","true").prepend(i),t.attr("aria-labelledby",r.attr("id"))}),t=r.add(this.element),t.children(":not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","presentation").children("a").uniqueId().addClass("ui-corner-all").attr({tabIndex:-1,role:this._itemRole()}),t.children(":not(.ui-menu-item)").each(function(){var t=e(this);/[^\-\u2014\u2013\s]/.test(t.text())||t.addClass("ui-widget-content ui-menu-divider")}),t.children(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!e.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(e,t){e==="icons"&&this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(t.submenu),this._super(e,t)},focus:function(e,t){var n,r;this.blur(e,e&&e.type==="focus"),this._scrollIntoView(t),this.active=t.first(),r=this.active.children("a").addClass("ui-state-focus"),this.options.role&&this.element.attr("aria-activedescendant",r.attr("id")),this.active.parent().closest(".ui-menu-item").children("a:first").addClass("ui-state-active"),e&&e.type==="keydown"?this._close():this.timer=this._delay(function(){this._close()},this.delay),n=t.children(".ui-menu"),n.length&&/^mouse/.test(e.type)&&this._startOpening(n),this.activeMenu=t.parent(),this._trigger("focus",e,{item:t})},_scrollIntoView:function(t){var n,r,i,s,o,u;this._hasScroll()&&(n=parseFloat(e.css(this.activeMenu[0],"borderTopWidth"))||0,r=parseFloat(e.css(this.activeMenu[0],"paddingTop"))||0,i=t.offset().top-this.activeMenu.offset().top-n-r,s=this.activeMenu.scrollTop(),o=this.activeMenu.height(),u=t.height(),i<0?this.activeMenu.scrollTop(s+i):i+u>o&&this.activeMenu.scrollTop(s+i-o+u))},blur:function(e,t){t||clearTimeout(this.timer);if(!this.active)return;this.active.children("a").removeClass("ui-state-focus"),this.active=null,this._trigger("blur",e,{item:this.active})},_startOpening:function(e){clearTimeout(this.timer);if(e.attr("aria-hidden")!=="true")return;this.timer=this._delay(function(){this._close(),this._open(e)},this.delay)},_open:function(t){var n=e.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(t.parents(".ui-menu")).hide().attr("aria-hidden","true"),t.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(n)},collapseAll:function(t,n){clearTimeout(this.timer),this.timer=this._delay(function(){var r=n?this.element:e(t&&t.target).closest(this.element.find(".ui-menu"));r.length||(r=this.element),this._close(r),this.blur(t),this.activeMenu=r},this.delay)},_close:function(e){e||(e=this.active?this.active.parent():this.element),e.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find("a.ui-state-active").removeClass("ui-state-active")},collapse:function(e){var t=this.active&&this.active.parent().closest(".ui-menu-item",this.element);t&&t.length&&(this._close(),this.focus(e,t))},expand:function(e){var t=this.active&&this.active.children(".ui-menu ").children(".ui-menu-item").first();t&&t.length&&(this._open(t.parent()),this._delay(function(){this.focus(e,t)}))},next:function(e){this._move("next","first",e)},previous:function(e){this._move("prev","last",e)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(e,t,n){var r;this.active&&(e==="first"||e==="last"?r=this.active[e==="first"?"prevAll":"nextAll"](".ui-menu-item").eq(-1):r=this.active[e+"All"](".ui-menu-item").eq(0));if(!r||!r.length||!this.active)r=this.activeMenu.children(".ui-menu-item")[t]();this.focus(n,r)},nextPage:function(t){var n,r,i;if(!this.active){this.next(t);return}if(this.isLastItem())return;this._hasScroll()?(r=this.active.offset().top,i=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return n=e(this),n.offset().top-r-i<0}),this.focus(t,n)):this.focus(t,this.activeMenu.children(".ui-menu-item")[this.active?"last":"first"]())},previousPage:function(t){var n,r,i;if(!this.active){this.next(t);return}if(this.isFirstItem())return;this._hasScroll()?(r=this.active.offset().top,i=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return n=e(this),n.offset().top-r+i>0}),this.focus(t,n)):this.focus(t,this.activeMenu.children(".ui-menu-item").first())},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(t){this.active=this.active||e(t.target).closest(".ui-menu-item");var n={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(t,!0),this._trigger("select",t,n)}})}(jQuery),define("bower/jquery-ui/ui/jquery.ui.menu",function(){}),function(){var e=jQuery;window.VS||(window.VS={}),VS.app||(VS.app={}),VS.ui||(VS.ui={}),VS.model||(VS.model={}),VS.utils||(VS.utils={}),VS.VERSION="0.4.0",VS.VisualSearch=function(t){var n={container:"",query:"",autosearch:!0,unquotable:[],remainder:"text",showFacets:!0,callbacks:{search:e.noop,focus:e.noop,blur:e.noop,facetMatches:e.noop,valueMatches:e.noop}};this.options=_.extend({},n,t),this.options.callbacks=_.extend({},n.callbacks,t.callbacks),VS.app.hotkeys.initialize(),this.searchQuery=new VS.model.SearchQuery,this.searchBox=new VS.ui.SearchBox({app:this,showFacets:this.options.showFacets});if(t.container){var r=this.searchBox.render().el;e(this.options.container).html(r)}return this.searchBox.value(this.options.query||""),e(window).bind("unload",function(e){}),this},VS.init=function(e){return new VS.VisualSearch(e)}}(),function(){var e=jQuery;VS.ui.SearchBox=Backbone.View.extend({id:"search",events:{"click .VS-cancel-search-box":"clearSearch","mousedown .VS-search-box":"maybeFocusSearch","dblclick .VS-search-box":"highlightSearch","click .VS-search-box":"maybeTripleClick"},manage:!1,initialize:function(){this.app=this.options.app,this.flags={allSelected:!1},this.facetViews=[],this.inputViews=[],_.bindAll(this,"renderFacets","_maybeDisableFacets","disableFacets","deselectAllFacets","addedFacet","removedFacet","changedFacet"),this.app.searchQuery.bind("reset",this.renderFacets).bind("add",this.addedFacet).bind("remove",this.removedFacet).bind("change",this.changedFacet),e(document).bind("keydown",this._maybeDisableFacets)},render:function(){return e(this.el).append(JST.search_box({})),e(document.body).setMode("no","search"),this},value:function(e){return e==null?this.serialize():this.setQuery(e)},serialize:function(){var e=[],t=this.inputViews.length;return this.app.searchQuery.each(_.bind(function(t,n){e.push(this.inputViews[n].value()),e.push(t.serialize())},this)),t&&e.push(this.inputViews[t-1].value()),_.compact(e).join(" ")},selected:function(){return _.select(this.facetViews,function(e){return e.modes.editing=="is"||e.modes.selected=="is"})},selectedModels:function(){return _.pluck(this.selected(),"model")},setQuery:function(e){this.currentQuery=e,VS.app.SearchParser.parse(this.app,e)},viewPosition:function(e){var t=e.type=="facet"?this.facetViews:this.inputViews,n=_.indexOf(t,e);return n==-1&&(n=0),n},searchEvent:function(e){var t=this.value();this.focusSearch(e),this.value(t),this.app.options.callbacks.search(t,this.app.searchQuery)},addFacet:function(e,t,n){e=VS.utils.inflector.trim(e),t=VS.utils.inflector.trim(t||"");if(!e)return;var r=new VS.model.SearchFacet({category:e,value:t||"",app:this.app});this.app.searchQuery.add(r,{at:n})},addedFacet:function(e){this.renderFacets();var t=_.detect(this.facetViews,function(t){if(t.model==e)return!0});_.defer(function(){t.enableEdit()})},changedFacet:function(){this.renderFacets()},removedFacet:function(e,t,n){},renderFacets:function(){this.facetViews=[],this.inputViews=[],this.$(".VS-search-inner").empty(),this.app.searchQuery.each(_.bind(this.renderFacet,this)),this.renderSearchInput(),this.renderPlaceholder()},renderFacet:function(e,t){var n=new VS.ui.SearchFacet({app:this.app,model:e,order:t});return this.renderSearchInput(),this.facetViews.push(n),this.$(".VS-search-inner").children().eq(t*2).after(n.render().el),n.calculateSize(),_.defer(_.bind(n.calculateSize,n)),n},renderSearchInput:function(){var e=new VS.ui.SearchInput({position:this.inputViews.length,app:this.app,showFacets:this.options.showFacets});this.$(".VS-search-inner").append(e.render().el),this.inputViews.push(e)},renderPlaceholder:function(){var e=this.$(".VS-placeholder");this.app.searchQuery.length?e.addClass("VS-hidden"):e.removeClass("VS-hidden").text(this.app.options.placeholder)},clearSearch:function(e){var t=_.bind(function(){this.disableFacets(),this.value(""),this.flags.allSelected=!1,this.searchEvent(e),this.focusSearch(e)},this);this.app.options.callbacks.clearSearch?this.app.options.callbacks.clearSearch(t):t()},selectAllFacets:function(){this.flags.allSelected=!0,e(document).one("click.selectAllFacets",this.deselectAllFacets),_.each(this.facetViews,function(e,t){e.selectFacet()}),_.each(this.inputViews,function(e,t){e.selectText()})},allSelected:function(e){return e&&(this.flags.allSelected=!1),this.flags.allSelected},deselectAllFacets:function(t){this.disableFacets();if(this.$(t.target).is(".category,input")){var n=e(t.target).closest(".search_facet,.search_input"),r=_.detect(this.facetViews.concat(this.inputViews),function(e){return e.el==n[0]});r.type=="facet"?r.selectFacet():r.type=="input"&&_.defer(function(){r.enableEdit(!0)})}},disableFacets:function(t){_.each(this.inputViews,function(e){e&&e!=t&&(e.modes.editing=="is"||e.modes.selected=="is")&&e.disableEdit()}),_.each(this.facetViews,function(e){e&&e!=t&&(e.modes.editing=="is"||e.modes.selected=="is")&&(e.disableEdit(),e.deselectFacet())}),this.flags.allSelected=!1,this.removeFocus(),e(document).unbind("click.selectAllFacets")},resizeFacets:function(e){_.each(this.facetViews,function(t,n){(!e||t==e)&&t.resize()})},_maybeDisableFacets:function(e){if(this.flags.allSelected&&VS.app.hotkeys.key(e)=="backspace")return e.preventDefault(),this.clearSearch(e),!1;this.flags.allSelected&&VS.app.hotkeys.printable(e)&&this.clearSearch(e)},focusNextFacet:function(e,t,n){n=n||{};var r=this.facetViews.length,i=n.viewPosition||this.viewPosition(e);if(!n.skipToFacet)e.type=="text"&&t>0&&(t-=1),e.type=="facet"&&t<0&&(t+=1);else if(n.skipToFacet&&e.type=="text"&&r==i&&t>=0)return!1;var s,o=Math.min(r,i+t);return e.type=="text"?(o>=0&&o<r?s=this.facetViews[o]:o==r&&(s=this.inputViews[this.inputViews.length-1]),s&&n.selectFacet&&s.type=="facet"?s.selectFacet():s&&(s.enableEdit(),s.setCursorAtEnd(t||n.startAtEnd))):e.type=="facet"&&(n.skipToFacet?o>=r||o<0?(s=_.last(this.inputViews),s.enableEdit()):(s=this.facetViews[o],s.enableEdit(),s.setCursorAtEnd(t||n.startAtEnd)):(s=this.inputViews[o],s.enableEdit())),n.selectText&&s.selectText(),this.resizeFacets(),!0},maybeFocusSearch:function(t){(e(t.target).is(".VS-search-box")||e(t.target).is(".VS-search-inner")||t.type=="keydown")&&this.focusSearch(t)},focusSearch:function(e,t){var n=this.inputViews[this.inputViews.length-1];n.enableEdit(t),t||n.setCursorAtEnd(-1),e.type=="keydown"&&(n.keydown(e),n.box.trigger("keydown")),_.defer(_.bind(function(){this.$("input:focus").length||n.enableEdit(t)},this))},highlightSearch:function(t){if(e(t.target).is(".VS-search-box")||e(t.target).is(".VS-search-inner")||t.type=="keydown"){var n=this.inputViews[this.inputViews.length-1];n.startTripleClickTimer(),this.focusSearch(t,!0)}},maybeTripleClick:function(e){var t=this.inputViews[this.inputViews.length-1];return t.maybeTripleClick(e)},addFocus:function(){this.app.options.callbacks.focus(),this.$(".VS-search-box").addClass("VS-focus")},removeFocus:function(){this.app.options.callbacks.blur();var e=_.any(this.facetViews.concat(this.inputViews),function(e){return e.isFocused()});e||this.$(".VS-search-box").removeClass("VS-focus")},showFacetCategoryMenu:function(e){e.preventDefault(),e.stopPropagation();if(this.facetCategoryMenu&&this.facetCategoryMenu.modes.open=="is")return this.facetCategoryMenu.close();var t=[{title:"Account",onClick:_.bind(this.addFacet,this,"account","")},{title:"Project",onClick:_.bind(this.addFacet,this,"project","")},{title:"Filter",onClick:_.bind(this.addFacet,this,"filter","")},{title:"Access",onClick:_.bind(this.addFacet,this,"access","")}],n=this.facetCategoryMenu||(this.facetCategoryMenu=new dc.ui.Menu({items:t,standalone:!0}));return this.$(".VS-icon-search").after(n.render().open().content),!1}})}(),function(){var e=jQuery;VS.ui.SearchFacet=Backbone.View.extend({type:"facet",className:"search_facet",events:{"click .category":"selectFacet","keydown input":"keydown","mousedown input":"enableEdit","mouseover .VS-icon-cancel":"showDelete","mouseout .VS-icon-cancel":"hideDelete","click .VS-icon-cancel":"remove"},manage:!1,initialize:function(e){this.flags={canClose:!1},_.bindAll(this,"set","keydown","deselectFacet","deferDisableEdit")},render:function(){return e(this.el).html(JST.search_facet({model:this.model})),this.setMode("not","editing"),this.setMode("not","selected"),this.box=this.$("input"),this.box.val(this.model.label()),this.box.bind("blur",this.deferDisableEdit),this.box.bind("input propertychange",this.keydown),this.setupAutocomplete(),this},calculateSize:function(){this.box.autoGrowInput(),this.box.unbind("updated.autogrow"),this.box.bind("updated.autogrow",_.bind(this.moveAutocomplete,this))},resize:function(e){this.box.trigger("resize.autogrow",e)},setupAutocomplete:function(){console.log(this),this.box.autocomplete({source:_.bind(this.autocompleteValues,this),appendTo:this.$el,minLength:0,delay:0,autoFocus:!0,position:{offset:"0 5"},create:_.bind(function(t,n){e(this.el).find(".ui-autocomplete-input").css("z-index","auto")},this),select:_.bind(function(e,t){e.preventDefault();var n=this.model.get("value");this.set(t.item.value);if(n!=t.item.value||this.box.val()!=t.item.value)this.options.app.options.autosearch?this.search(e):(this.options.app.searchBox.renderFacets(),this.options.app.searchBox.focusNextFacet(this,1,{viewPosition:this.options.order}));return!1},this),open:_.bind(function(t,n){var r=this.box;this.box.autocomplete("widget").find(".ui-menu-item").each(function(){var t=e(this),n=t.data("item.autocomplete")||t.data("ui-autocomplete-item");n["value"]==r.val()&&r.data("uiAutocomplete").menu.activate&&r.data("uiAutocomplete").menu.activate(new e.Event("mouseover"),t)})},this)}),this.box.autocomplete("widget").addClass("VS-interface")},moveAutocomplete:function(){var e=this.box.data("uiAutocomplete");e&&e.menu.element.position({my:"left top",at:"left bottom",of:this.box.data("uiAutocomplete").element,collision:"flip",offset:"0 5"})},searchAutocomplete:function(e){var t=this.box.data("uiAutocomplete");if(t){var n=t.menu.element;t.search(),n.outerWidth(Math.max(n.width("").outerWidth(),t.element.outerWidth()))}},closeAutocomplete:function(){var e=this.box.data("uiAutocomplete");e&&e.close()},autocompleteValues:function(t,n){var r=this.model.get("category"),i=this.model.get("value"),s=t.term;this.options.app.options.callbacks.valueMatches(r,s,function(t,r){r=r||{},t=t||[];if(s&&i!=s)if(r.preserveMatches)n(t);else{var o=VS.utils.inflector.escapeRegExp(s||""),u=new RegExp("\\b"+o,"i");t=e.grep(t,function(e){return u.test(e)||u.test(e.value)||u.test(e.label)})}r.preserveOrder?n(t):n(_.sortBy(t,function(e){return e==i||e.value==i?"":e}))})},set:function(e){if(!e)return;this.model.set({value:e})},search:function(e,t){t||(t=1),this.closeAutocomplete(),this.options.app.searchBox.searchEvent(e),_.defer(_.bind(function(){this.options.app.searchBox.focusNextFacet(this,t,{viewPosition:this.options.order})},this))},enableEdit:function(){this.modes.editing!="is"&&(this.setMode("is","editing"),this.deselectFacet(),this.box.val()==""&&this.box.val(this.model.get("value"))),this.flags.canClose=!1,this.options.app.searchBox.disableFacets(this),this.options.app.searchBox.addFocus(),_.defer(_.bind(function(){this.options.app.searchBox.addFocus()},this)),this.resize(),this.searchAutocomplete(),this.box.focus()},deferDisableEdit:function(){this.flags.canClose=!0,_.delay(_.bind(function(){this.flags.canClose&&!this.box.is(":focus")&&this.modes.editing=="is"&&this.modes.selected!="is"&&this.disableEdit()},this),250)},disableEdit:function(){var e=VS.utils.inflector.trim(this.box.val());e!=this.model.get("value")&&this.set(e),this.flags.canClose=!1,this.box.selectRange(0,0),this.box.blur(),this.setMode("not","editing"),this.closeAutocomplete(),this.options.app.searchBox.removeFocus()},selectFacet:function(t){t&&t.preventDefault();var n=this.options.app.searchBox.allSelected();if(this.modes.selected=="is")return;this.box.is(":focus")&&(this.box.setCursorPosition(0),this.box.blur()),this.flags.canClose=!1,this.closeAutocomplete(),this.setMode("is","selected"),this.setMode("not","editing");if(!n||t)e(document).unbind("keydown.facet",this.keydown),e(document).unbind("click.facet",this.deselectFacet),_.defer(_.bind(function(){e(document).unbind("keydown.facet").bind("keydown.facet",this.keydown),e(document).unbind("click.facet").one("click.facet",this.deselectFacet)},this)),this.options.app.searchBox.disableFacets(this),this.options.app.searchBox.addFocus();return!1},deselectFacet:function(t){return t&&t.preventDefault(),this.modes.selected=="is"&&(this.setMode("not","selected"),this.closeAutocomplete(),this.options.app.searchBox.removeFocus()),e(document).unbind("keydown.facet",this.keydown),e(document).unbind("click.facet",this.deselectFacet),!1},isFocused:function(){return this.box.is(":focus")},showDelete:function(){e(this.el).addClass("search_facet_maybe_delete")},hideDelete:function(){e(this.el).removeClass("search_facet_maybe_delete")},setCursorAtEnd:function(e){e==-1?this.box.setCursorPosition(this.box.val().length):this.box.setCursorPosition(0)},remove:function(e){var t=this.model.get("value");this.deselectFacet(),this.disableEdit(),this.options.app.searchQuery.remove(this.model),t&&this.options.app.options.autosearch?this.search(e,-1):(this.options.app.searchBox.renderFacets(),this.options.app.searchBox.focusNextFacet(this,-1,{viewPosition:this.options.order}))},selectText:function(){this.box.selectRange(0,this.box.val().length)},keydown:function(e){var t=VS.app.hotkeys.key(e);if(t=="enter"&&this.box.val())this.disableEdit(),this.search(e);else if(t=="left")this.modes.selected=="is"?(this.deselectFacet(),this.options.app.searchBox.focusNextFacet(this,-1,{startAtEnd:-1})):this.box.getCursorPosition()==0&&!this.box.getSelection().length&&this.selectFacet();else if(t=="right")this.modes.selected=="is"?(e.preventDefault(),this.deselectFacet(),this.setCursorAtEnd(0),this.enableEdit()):this.box.getCursorPosition()==this.box.val().length&&(e.preventDefault(),this.disableEdit(),this.options.app.searchBox.focusNextFacet(this,1));else if(VS.app.hotkeys.shift&&t=="tab")e.preventDefault(),this.options.app.searchBox.focusNextFacet(this,-1,{startAtEnd:-1,skipToFacet:!0,selectText:!0});else if(t=="tab")e.preventDefault(),this.options.app.searchBox.focusNextFacet(this,1,{skipToFacet:!0,selectText:!0});else{if(!(!VS.app.hotkeys.command||e.which!=97&&e.which!=65))return e.preventDefault(),this.options.app.searchBox.selectAllFacets(),!1;VS.app.hotkeys.printable(e)&&this.modes.selected=="is"?(this.options.app.searchBox.focusNextFacet(this,-1,{startAtEnd:-1}),this.remove(e)):t=="backspace"&&(this.modes.selected=="is"?(e.preventDefault(),this.remove(e)):this.box.getCursorPosition()==0&&!this.box.getSelection().length&&(e.preventDefault(),this.selectFacet()))}e.which==null?_.defer(_.bind(this.resize,this,e)):this.resize(e)}})}(),function(){var e=jQuery;VS.ui.SearchInput=Backbone.View.extend({type:"text",className:"search_input ui-menu",events:{"keypress input":"keypress","keydown input":"keydown","click input":"maybeTripleClick","dblclick input":"startTripleClickTimer"},manage:!1,initialize:function(){this.app=this.options.app,this.flags={canClose:!1},_.bindAll(this,"removeFocus","addFocus","moveAutocomplete","deferDisableEdit")},render:function(){return e(this.el).html(JST.search_input({})),this.setMode("not","editing"),this.setMode("not","selected"),this.box=this.$("input"),this.box.autoGrowInput(),this.box.bind("updated.autogrow",this.moveAutocomplete),this.box.bind("blur",this.deferDisableEdit),this.box.bind("focus",this.addFocus),this.setupAutocomplete(),this},setupAutocomplete:function(){this.box.autocomplete({minLength:this.options.showFacets?0:1,delay:50,autoFocus:!0,appendTo:this.$el,position:{offset:"0 -1"},source:_.bind(this.autocompleteValues,this),create:_.bind(function(t,n){e(this.el).find(".ui-autocomplete-input").css("z-index","auto")},this),select:_.bind(function(e,t){e.preventDefault();var n=this.addTextFacetRemainder(t.item.value),r=this.options.position+(n?1:0);return this.app.searchBox.addFacet(t.item instanceof String?t.item:t.item.value,"",r),!1},this)}),this.box.data("uiAutocomplete")._renderMenu=function(e,t){var n="";_.each(t,_.bind(function(t,r){t.category&&t.category!=n&&(e.append('<li class="ui-autocomplete-category">'+t.category+"</li>"),n=t.category),this._renderItemData?this._renderItemData(e,t):this._renderItem(e,t)},this))},this.box.autocomplete("widget").addClass("VS-interface")},autocompleteValues:function(t,n){var r=t.term,i=r.match(/\w+\*?$/),s=VS.utils.inflector.escapeRegExp(i&&i[0]||"");this.app.options.callbacks.facetMatches(function(t,r){r=r||{},t=t||[];var i=new RegExp("^"+s,"i"),o=e.grep(t,function(e){return e&&i.test(e.label||e)});r.preserveOrder?n(o):n(_.sortBy(o,function(e){return e.label?e.category+"-"+e.label:e}))})},closeAutocomplete:function(){var e=this.box.data("uiAutocomplete");e&&e.close()},moveAutocomplete:function(){var e=this.box.data("uiAutocomplete");e&&e.menu.element.position({my:"left top",at:"left bottom",of:this.box.data("uiAutocomplete").element,collision:"none",offset:"0 -1"})},searchAutocomplete:function(e){var t=this.box.data("uiAutocomplete");if(t){var n=t.menu.element;t.search(),n.outerWidth(Math.max(n.width("").outerWidth(),t.element.outerWidth()))}},addTextFacetRemainder:function(e){var t=this.box.val(),n=t.match(/\b(\w+)$/);if(!n)return"";var r=new RegExp(n[0],"i");return e.search(r)==0&&(t=t.replace(/\b(\w+)$/,"")),t=t.replace("^s+|s+$",""),t&&this.app.searchBox.addFacet(this.app.options.remainder,t,this.options.position),t},enableEdit:function(e){this.addFocus(),e&&this.selectText(),this.box.focus()},addFocus:function(){this.flags.canClose=!1,this.app.searchBox.allSelected()||this.app.searchBox.disableFacets(this),this.app.searchBox.addFocus(),this.setMode("is","editing"),this.setMode("not","selected"),this.app.searchBox.allSelected()||this.searchAutocomplete()},disableEdit:function(){this.box.blur(),this.removeFocus()},removeFocus:function(){this.flags.canClose=!1,this.app.searchBox.removeFocus(),this.setMode("not","editing"),this.setMode("not","selected"),this.closeAutocomplete()},deferDisableEdit:function(){this.flags.canClose=!0,_.delay(_.bind(function(){this.flags.canClose&&!this.box.is(":focus")&&this.modes.editing=="is"&&this.disableEdit()},this),250)},startTripleClickTimer:function(){this.tripleClickTimer=setTimeout(_.bind(function(){this.tripleClickTimer=null},this),500)},maybeTripleClick:function(e){if(!!this.tripleClickTimer)return e.preventDefault(),this.app.searchBox.selectAllFacets(),!1},isFocused:function(){return this.box.is(":focus")},value:function(){return this.box.val()},setCursorAtEnd:function(e){e==-1?this.box.setCursorPosition(this.box.val().length):this.box.setCursorPosition(0)},selectText:function(){this.box.selectRange(0,this.box.val().length),this.app.searchBox.allSelected()?this.setMode("is","selected"):this.box.focus()},search:function(e,t){t||(t=0),this.closeAutocomplete(),this.app.searchBox.searchEvent(e),_.defer(_.bind(function(){this.app.searchBox.focusNextFacet(this,t)},this))},keypress:function(e){var t=VS.app.hotkeys.key(e);if(t=="enter")return this.search(e,100);if(VS.app.hotkeys.colon(e)){this.box.trigger("resize.autogrow",e);var n=this.box.val(),r=[];this.app.options.callbacks.facetMatches&&this.app.options.callbacks.facetMatches(function(e){r=e});var i=_.map(r,function(e){return e.label?e.label:e});if(_.contains(i,n)){e.preventDefault();var s=this.addTextFacetRemainder(n),o=this.options.position+(s?1:0);return this.app.searchBox.addFacet(n,"",o),!1}}else if(t=="backspace"&&this.box.getCursorPosition()==0&&!this.box.getSelection().length)return e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),this.app.searchBox.resizeFacets(),!1},keydown:function(e){var t=VS.app.hotkeys.key(e);if(t=="left")this.box.getCursorPosition()==0&&(e.preventDefault(),this.app.searchBox.focusNextFacet(this,-1,{startAtEnd:-1}));else if(t=="right")this.box.getCursorPosition()==this.box.val().length&&(e.preventDefault(),this.app.searchBox.focusNextFacet(this,1,{selectFacet:!0}));else if(VS.app.hotkeys.shift&&t=="tab")e.preventDefault(),this.app.searchBox.focusNextFacet(this,-1,{selectText:!0});else if(t=="tab"){var n=this.box.val();if(n.length){e.preventDefault();var r=this.addTextFacetRemainder(n),i=this.options.position+(r?1:0);n!=r&&this.app.searchBox.addFacet(n,"",i)}else{var s=this.app.searchBox.focusNextFacet(this,0,{skipToFacet:!0,selectText:!0});s&&e.preventDefault()}}else{if(VS.app.hotkeys.command&&String.fromCharCode(e.which).toLowerCase()=="a")return e.preventDefault(),this.app.searchBox.selectAllFacets(),!1;if(t=="backspace"&&!this.app.searchBox.allSelected()){if(this.box.getCursorPosition()==0&&!this.box.getSelection().length)return e.preventDefault(),this.app.searchBox.focusNextFacet(this,-1,{backspace:!0}),!1}else if(t=="end"){var o=this.app.searchBox.inputViews[this.app.searchBox.inputViews.length-1];o.setCursorAtEnd(-1)}else if(t=="home"){var o=this.app.searchBox.inputViews[0];o.setCursorAtEnd(-1)}}this.box.trigger("resize.autogrow",e)}})}(),function(){var e=jQuery;Backbone.View.prototype.setMode=function(t,n){this.modes||(this.modes={});if(this.modes[n]===t)return;e(this.el).setMode(t,n),this.modes[n]=t}}(),function(){var e=jQuery;VS.app.hotkeys={KEYS:{16:"shift",17:"command",91:"command",93:"command",224:"command",13:"enter",37:"left",38:"upArrow",39:"right",40:"downArrow",46:"delete",8:"backspace",35:"end",36:"home",9:"tab",188:"comma"},initialize:function(){_.bindAll(this,"down","up","blur"),e(document).bind("keydown",this.down),e(document).bind("keyup",this.up),e(window).bind("blur",this.blur)},down:function(e){var t=this.KEYS[e.which];t&&(this[t]=!0)},up:function(e){var t=this.KEYS[e.which];t&&(this[t]=!1)},blur:function(e){for(var t in this.KEYS)this[this.KEYS[t]]=!1},key:function(e){return this.KEYS[e.which]},colon:function(e){var t=e.which;return t&&String.fromCharCode(t)==":"},printable:function(e){var t=e.which;if(e.type=="keydown"){if(t==32||t>=48&&t<=90||t>=96&&t<=111||t>=186&&t<=192||t>=219&&t<=222)return!0}else if(t>=32&&t<=126||t>=160&&t<=500||String.fromCharCode(t)==":")return!0;return!1}}}(),function(){var e=jQuery;VS.utils.inflector={trim:function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},escapeRegExp:function(e){return e.replace(/([.*+?^${}()|[\]\/\\])/g,"\\$1")}}}(),function(){var e=jQuery;e.fn.extend({setMode:function(e,t){t=t||"mode";var n=new RegExp("\\w+_"+t+"(\\s|$)","g"),r=e===null?"":e+"_"+t;return this.each(function(){this.className=(this.className.replace(n,"")+" "+r).replace(/\s\s/g," ")}),r},autoGrowInput:function(){return this.each(function(){var t=e(this),n=e("<div />").css({opacity:0,top:-9999,left:-9999,position:"absolute",whiteSpace:"nowrap"}).addClass("VS-input-width-tester").addClass("VS-interface"),r="keydown.autogrow keypress.autogrow resize.autogrow change.autogrow";t.next(".VS-input-width-tester").remove(),t.after(n),t.unbind(r).bind(r,function(e,r){r&&(e=r);var i=t.val();if(VS.app.hotkeys.key(e)=="backspace"){var s=t.getCursorPosition();s>0&&(i=i.slice(0,s-1)+i.slice(s,i.length))}else VS.app.hotkeys.printable(e)&&!VS.app.hotkeys.command&&(i+=String.fromCharCode(e.which));i=i.replace(/&/g,"&amp;").replace(/\s/g,"&nbsp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),n.html(i),t.width(n.width()+3+parseInt(t.css("min-width"))),t.trigger("updated.autogrow")}),t.trigger("resize.autogrow")})},getCursorPosition:function(){var t=0,n=this.get(0);if(document.selection){n.focus();var r=document.selection.createRange(),i=document.selection.createRange().text.length;r.moveStart("character",-n.value.length),t=r.text.length-i}else n&&e(n).is(":visible")&&n.selectionStart!=null&&(t=n.selectionStart);return t},setCursorPosition:function(t){return this.each(function(){return e(this).selectRange(t,t)})},selectRange:function(e,t){return this.filter(":visible").each(function(){if(this.setSelectionRange)this.focus(),this.setSelectionRange(e,t);else if(this.createTextRange){var n=this.createTextRange();n.collapse(!0),n.moveEnd("character",t),n.moveStart("character",e),t-e>=0&&n.select()}})},getSelection:function(){var e=this[0];if(e.selectionStart!=null){var t=e.selectionStart,n=e.selectionEnd;return{start:t,end:n,length:n-t,text:e.value.substr(t,n-t)}}if(document.selection){var r=document.selection.createRange();if(r){var i=e.createTextRange(),s=i.duplicate();i.moveToBookmark(r.getBookmark()),s.setEndPoint("EndToStart",i);var t=s.text.length,n=t+r.text.length;return{start:t,end:n,length:n-t,text:r.text}}}return{start:0,end:0,length:0}}})}(),function(){var e=jQuery,t="('[^']+'|\"[^\"]+\")",n="('[^']+'|\"[^\"]+\"|[^'\"\\s]\\S*)",r=n+":\\s*";VS.app.SearchParser={ALL_FIELDS:new RegExp(r+n,"g"),CATEGORY:new RegExp(r),parse:function(e,t){var n=this._extractAllFacets(e,t);return e.searchQuery.reset(n),n},_extractAllFacets:function(e,t){var n=[],r=t;while(t){var i,s;r=t;var o=this._extractNextField(t);o?o.indexOf(":")!=-1?(i=o.match(this.CATEGORY)[1].replace(/(^['"]|['"]$)/g,""),s=o.replace(this.CATEGORY,"").replace(/(^['"]|['"]$)/g,""),t=VS.utils.inflector.trim(t.replace(o,""))):o.indexOf(":")==-1&&(i=e.options.remainder,s=o,t=VS.utils.inflector.trim(t.replace(s,""))):(i=e.options.remainder,s=this._extractSearchText(t),t=VS.utils.inflector.trim(t.replace(s,"")));if(i&&s){var u=new VS.model.SearchFacet({category:i,value:VS.utils.inflector.trim(s),app:e});n.push(u)}if(r==t)break}return n},_extractNextField:function(e){var r=new RegExp("^\\s*(\\S+)\\s+(?="+t+n+")"),i=e.match(r);return i&&i.length>=1?i[1]:this._extractFirstField(e)},_extractFirstField:function(e){var t=e.match(this.ALL_FIELDS);return t&&t.length&&t[0]},_extractSearchText:function(e){e=e||"";var t=VS.utils.inflector.trim(e.replace(this.ALL_FIELDS,""));return t}}}(),function(){var e=jQuery;VS.model.SearchFacet=Backbone.Model.extend({serialize:function(){var e=this.quoteCategory(this.get("category")),t=VS.utils.inflector.trim(this.get("value")),n=this.get("app").options.remainder;return t?(!_.contains(this.get("app").options.unquotable||[],e)&&e!=n&&(t=this.quoteValue(t)),e!=n?e+=": ":e="",e+t):""},quoteCategory:function(e){var t=/"/.test(e),n=/'/.test(e),r=/\s/.test(e);return t&&!n?"'"+e+"'":r||n&&!t?'"'+e+'"':e},quoteValue:function(e){var t=/"/.test(e),n=/'/.test(e);return t&&!n?"'"+e+"'":'"'+e+'"'},label:function(){return this.get("label")||this.get("value")}})}(),function(){var e=jQuery;VS.model.SearchQuery=Backbone.Collection.extend({model:VS.model.SearchFacet,serialize:function(){return this.map(function(e){return e.serialize()}).join(" ")},facets:function(){return this.map(function(e){var t={};return t[e.get("category")]=e.get("value"),t})},find:function(e){var t=this.detect(function(t){return t.get("category").toLowerCase()==e.toLowerCase()});return t&&t.get("value")},count:function(e){return this.select(function(t){return t.get("category").toLowerCase()==e.toLowerCase()}).length},values:function(e){var t=this.select(function(t){return t.get("category").toLowerCase()==e.toLowerCase()});return _.map(t,function(e){return e.get("value")})},has:function(e,t){return this.any(function(n){var r=n.get("category").toLowerCase()==e.toLowerCase();return t?r&&n.get("value")==t:r})},withoutCategory:function(){var e=_.map(_.toArray(arguments),function(e){return e.toLowerCase()});return this.map(function(t){if(!_.include(e,t.get("category").toLowerCase()))return t.serialize()}).join(" ")}})}(),function(){window.JST=window.JST||{},window.JST.search_box=_.template('<div class="VS-search">\n  <div class="VS-search-box-wrapper VS-search-box">\n    <div class="VS-icon VS-icon-search"></div>\n    <div class="VS-placeholder"></div>\n    <div class="VS-search-inner"></div>\n    <div class="VS-icon VS-icon-cancel VS-cancel-search-box" title="clear search"></div>\n  </div>\n</div>'),window.JST.search_facet=_.template('<% if (model.has(\'category\')) { %>\n  <div class="category"><%= model.get(\'category\') %>:</div>\n<% } %>\n\n<div class="search_facet_input_container">\n  <input type="text" class="search_facet_input ui-menu VS-interface" value="" />\n</div>\n\n<div class="search_facet_remove VS-icon VS-icon-cancel"></div>'),window.JST.search_input=_.template('<input type="text" class="ui-menu" />')}(),define("plugins/visualsearch/visualsearch",function(){}),define("modules/ProjectSearch",["app","plugins/visualsearch/visualsearch"],function(e){var t,n=this;return t={fields:{Title:"partial",Space:"partial",Location:"partial",Text:function(e,n){return t.test(e,"TeaserText",n,"partial")},Type:function(e,n){return t.test(e,"ClassName",n,"partial")},Category:function(e,n){var r;return e.Categories&&e.Categories.length?(r=!0,_.each(n,function(n){var i;i=!1,_.each(e.Categories,function(e){if(t.exactMatchFilter(e,"Title",n))return i=!0});if(!i)return r=!1}),r):!1},Person:function(e,n){var r;return e.Persons&&e.Persons.length?(r=!0,_.each(t.partializeArray(n),function(t){var n;n=!1,_.each(e.Persons,function(e){var r;r=(e.FirstName?e.FirstName+" ":"")+(e.Surname?e.Surname:"");if(r.indexOf(t)>=0)return n=!0});if(!n)return r=!1}),r):!1}},transformSearchTerm:function(e){var t,n,r,i,s,o,u;n={},e=decodeURI(e),u=e.split(";");for(s=0,o=u.length;s<o;s++)r=u[s],t=r.split(":"),i=null,t.length>1&&(i=t[1].split("|")),n[t[0]]=i;return n},makeSearchTerm:function(e){var t,n,r,i,s,o,u;t=[];for(r in e){s=e[r],n=[],_.isArray(s)||(s=[s]);for(o=0,u=s.length;o<u;o++)i=s[o],i&&n.push(i);n.length&&t.push(""+r+":"+n.join("|"))}return encodeURI(t.join(";"))},partializeArray:function(e){var t,n,r,i;t=[];for(r=0,i=e.length;r<i;r++)n=e[r],t=t.concat(n.split(" "));return t},test:function(e,t,n,r){var i,s,o,u,a,f;s=!0,_.isArray(n)||(n=[n]),o=r||this.fields[t];if(o)if(_.isFunction(o))s=o.call(this,e,n);else{o==="exact"?i="exactMatchFilter":(i="partialMatchFilter",n=this.partializeArray(n));for(a=0,f=n.length;a<f;a++){u=n[a];if(!this[i](e,t,u))return!1}}return s},partialMatchFilter:function(e,t,n){var r;return e.hasOwnProperty(t)?(r=e[t].toLowerCase(),r.indexOf(n.toLowerCase())>=0?!0:!1):!1},exactMatchFilter:function(e,t,n){return e.hasOwnProperty(t)?n.toLowerCase()===e[t].toLowerCase()?!0:!1:!1}},t.getVisualSearchMatches=function(){var t,n,r,i,s,o,u,a;i=e.wholePortfolioJSON(),t={Title:[],Space:[],Location:[],Person:[],Year:[],Type:["Project","Exhibition","Excursion","Workshop"]},o=[],n=[],r=[],_.each(i,function(e){var i;return e.Title&&t.Title.push(e.Title),e.Space&&t.Space.push(e.Space),e.Location&&t.Location.push(e.Location),e.YearSearch&&(i=parseInt(e.YearSearch)),i&&o.push(i),_.each(e.Persons,function(e){var t;if(e.FirstName&&e.Surname){t=""+e.Surname+", "+e.FirstName;if(_.indexOf(r,t)<0)return n.push({label:t,value:""+e.FirstName+" "+e.Surname}),r.push(t)}})}),t.Person=_.sortBy(n,function(e){return e.label}),o=_.sortBy(_.uniq(o),function(e){return e*-1});for(u=0,a=o.length;u<a;u++)s=o[u],t.Year.push(s.toString());return t},t.View=Backbone.View.extend({template:"searchbar",id:"searchbar",search:{Category:[]},events:{"click .category-filter a":"updateCategorySearch","click .btn":"switchSearchView"},initialize:function(e){e.searchTerm&&(this.search=t.transformSearchTerm(e.searchTerm));if(!this.search.Category)return this.search.Category=[]},switchSearchView:function(e){return e.preventDefault(),$(e.target).removeClass("active").blur(),this.$el.find("section").toggleClass("active"),!1},doSearch:function(){var e,n;return n=t.makeSearchTerm(this.search),e=n?"/portfolio/search/"+n+"/":"/portfolio/",Backbone.history.navigate(e,!0)},updateCategorySearch:function(e){var t,n,r,i;return e.preventDefault(),t=$(e.target),t.blur(),i=t.data("title"),n=_.indexOf(this.search.Category,i),n<0?(this.search.Category.push(i),r="addClass"):(this.search.Category.splice(n,1),r="removeClass"),t[r]("active"),this.doSearch(),!1},initVisualSearch:function(){var e,n,r=this;return e=this.$el.find(".visualsearch"),n=t.VisualSearchMatches=t.VisualSearchMatches||t.getVisualSearchMatches(),this.visualSearch=VS.init({container:e,remainder:"Text",callbacks:{search:function(e,t){return r.search={Category:r.search.Category},t.each(function(e){var t;return t=e.get("category"),r.search[t]||(r.search[t]=[]),r.search[t].push(e.get("value"))}),console.log(r.search),r.doSearch()},facetMatches:function(e){return e(["Type","Person","Title","Year","Space","Location"])},valueMatches:function(e,t,r){switch(e){case"Person":return r(n.Person);case"Title":return r(n.Title);case"Year":return r(n.Year);case"Space":return r(n.Space);case"Location":return r(n.Location);case"Type":return r(n.Type)}}}}),this.prePopulateSearchBox(),console.log("Project search view: %o",this.search),console.log(this.visualSearch)},prePopulateSearchBox:function(){var e,t,n,r,i,s,o;t="",o=this.search;for(e in o){r=o[e];if(e!=="Category")for(i=0,s=r.length;i<s;i++)n=r[i],t+='"'+e+'": "'+n+'" '}return this.visualSearch.searchBox.value(t)},updateCategoryClasses:function(){return n=this,this.$el.find(".category-filter ul a").each(function(){var e,t,r,i,s,o,u;e=$(this),r=e.data("title").toLowerCase(),o=n.search.Category,u=[];for(i=0,s=o.length;i<s;i++)t=o[i],t.toLowerCase()===r?u.push(e.addClass("active")):u.push(void 0);return u})},afterRender:function(){return this.updateCategoryClasses(),this.initVisualSearch()},serialize:function(){var t;return t={},t.Categories=_.map(e.Collections.Category.models,function(e){return{ID:e.id,Title:e.get("Title")}}),t}}),t}),define("modules/DataRetrieval",["app","modules/ProjectSearch"],function(e,t){var n;return n={forProjectsOverview:function(t){var n,r,i,s,o,u,a,f;r=t.present,s=e.Config.ProjectTypes,o=new $.Deferred;if(!r.flag){n=[],u=function(r){var i;return i={name:t.domName(r),urlSuffix:t.urlSuffix},n.push(JJRestApi.getFromDomOrApi(r,i).done(function(t){return e.handleFetchedModels(r,t)}))};for(a=0,f=s.length;a<f;a++)i=s[a],u(i);$.when.apply(this,n).done(function(){return r.flag=!0,o.resolve()})}else o.resolve();return o.promise()},filterProjectTypesBySearchTerm:function(n){var r,i,s,o;return o=e.Cache.WholePortfolio,s=t.transformSearchTerm(n),console.log("Search obj found by data retrieval: %o",s),i=_.filter(e.wholePortfolioJSON(),function(e){return i=!0,_.each(s,function(n,r){if(!t.test(e,r,n))return i=!1}),i}),r=_.map(i,function(e){return function(e){return _.find(o,function(t){return t.id===e.ID&&t.get("ClassName")===e.ClassName})}(e)}),r},forCalendar:function(t){var n,r,i;return n=e.Config.Calendar[t],r=new $.Deferred,n.flag?r.resolve():(i=_.clone(n),i.name=t+"-calendar",JJRestApi.getFromDomOrApi("CalendarEntry",i).done(function(i){var s,o,u;if(i){if(t==="upcoming")for(o=0,u=i.length;o<u;o++)s=i[o],s.IsUpcoming=!0;e.handleFetchedModels("CalendarEntry",i),n.flag=!0,t==="whole"&&(e.Config.Calendar.upcoming.flag=!0)}return r.resolve()})),r.promise()},forCategories:function(){var t;return t=new $.Deferred,e.CategoriesFetched?t.resolve():JJRestApi.getFromDomOrApi("Category").done(function(n){return n&&_.isArray(n)&&(e.handleFetchedModels("Category",n),e.CategoriesFetched=!0),t.resolve()}),t.promise()},forPersonsOverview:function(){var t,n,r;return t=e.Config.Person,n=new $.Deferred,t.about_present?n.resolve():(r=_.clone(t),JJRestApi.getFromDomOrApi("Person",r).done(function(r){return t.about_present=!0,e.handleFetchedModels("Person",r),n.resolve()})),n.promise()},forDetailedObject:function(t,n,r){var i,s,o,u,a,f,l,c,h=this;return s=e.Config.Detail[t],f={name:s.domName,urlSuffix:s.urlSuffix(n)},a=function(){var n;return n=new $.Deferred,JJRestApi.getFromDomOrApi(t,f).done(function(r){var i;return r||n.resolve(null),r=_.isArray(r)?r:[r],i=r.length===1?e.handleFetchedModel(t,r[0]):null,i&&(i._isCompletelyFetched=!0,e.CurrentMember&&(i._isFetchedWhenLoggedIn=!0)),n.resolve(i)}),n.promise()},o=new $.Deferred,i=e.Collections[t],c=s.where(n),u=i.findWhere(c),u?(u._isCompletelyFetched&&(l=!0),r&&!u._isFetchedWhenLoggedIn&&(l=!1),l?o.resolve(u):(f.noAjax=!0,a().done(function(e){return e&&e.cid===u.cid?o.resolve(e):h.fetchExistingModelCompletely(u).done(function(e){return o.resolve(e)})}))):a().done(function(e){return o.resolve(e)}),o.promise()},forRandomGroupImage:function(){var t,n,r;return r=e.PageInfos,t=new $.Deferred,n=function(){var e;return e=r.GroupImages,e&&e.length>0?e[Math.floor(Math.random()*e.length)]:null},r.GroupImages?t.resolve(n()):JJRestApi.getFromDomOrApi("GroupImage").done(function(e){return r.GroupImages=e,t.resolve(n())}),t.promise()},addNewProjectToUserGallery:function(t){var n;n=e.Cache.UserGallery;if(!n.fetched.Projects)return;return n.images.Projects.push({FilterID:t.get("ClassName")+"-"+t.id,Title:t.get("Title"),Images:[]})},forUserGallery:function(t){var n,r,i;return i=e.Cache.UserGallery,n=new $.Deferred,i.fetched[t]?n.resolve(i):(r=$.getJSON(e.Config.GalleryUrl+t+"/").done(function(e){return i.images[t]=e,i.fetched[t]=!0,n.resolve(i)}),n.fail(function(){if(r.readyState!==4)return r.abort()})),n},forDocImage:function(t){var n,r;return n=new $.Deferred,(r=e.Collections.DocImage.get(t))?n.resolve(r):JJRestApi.getFromDomOrApi("DocImage",{id:t}).done(function(t){return t?n.resolve(e.handleFetchedModel("DocImage",t)):n.reject()}),n.promise()},forMultipleDocImages:function(t){var n,r,i,s;return n=new $.Deferred,i=[],r=[],_.each(t,function(t){var n;return(n=e.Collections.DocImage.get(t))?r.push(n):i.push(t)}),i.length?(s=JJRestApi.setObjectUrl("DocImage")+Backbone.JJRelational.Config.url_id_appendix+i.join(","),this._docImagesReq&&this._docImagesReq.readyState!==4&&this._docImagesReq.abort(),this._docImagesReq=$.getJSON(s,function(t){return $.isArray(t)&&(r=r.concat(e.handleFetchedModels("DocImage",t))),n.resolve(r)}),n):(n.resolve(r),n)},fetchExistingModelCompletely:function(t){var n;return n=new $.Deferred,t.fetch({success:function(t){n.resolve(t),t._isCompletelyFetched=!0;if(e.CurrentMember)return t._isFetchedWhenLoggedIn=!0}}),n.promise()}},n}),define("modules/RecycleBin",["app"],function(e){var t;return t={},t.setup=function(){var e,t,n=this;return t=function(){return e.addClass("done"),setTimeout(function(){return e.removeClass("done")},1e3)},this.$bin=e=$("#recycle-bin").removeClass("done"),e.on("dragenter dragleave drop",function(e){var t;return t=e.type==="dragenter"?"addClass":"removeClass",$(e.target)[t]("dragover")}),e.on("drop",function(r){var i,s,o,u,a;u=n.activeRecycleDrag,n.activeRecycleDrag=null;if(u&&u.className)return e.addClass("processing"),i=u.model.ID?u.model.ID:u.model.id,n.removeViewAndData(u),(s=Backbone.JJStore._byId(u.className,i))?(s.destroy(),t(),e.removeClass("processing")):(a=JJRestApi.setObjectUrl(u.className,{id:i}),o=$.ajax({url:a,contentType:"json",type:"DELETE"}),o.always(function(){return e.removeClass("processing")}),o.done(function(){return t()}))})},t.removeViewAndData=function(t){return t.view.$el.trigger("dragend"),$("body").removeClass("drag-inline"),t.className==="PersonImage"||t.className==="DocImage"?(e.removeFromGalleryCache(t.className,t.model.id),t.view.liveRemoval()):t.view.remove()},t.setViewAsRecyclable=function(e){var t,n=this;return t={view:e,model:e.model},t.className=e.className?e.className:e.model.ClassName,e.$el.on("dragstart dragend",function(e){var r;return $.fireGlobalDragEvent(e.type,e.target),e.type==="dragstart"?(r="addClass",n.activeRecycleDrag=t):(n.activeRecycleDrag=null,r="removeClass"),n.$bin[r]("active")})},t}),define("modules/Website",["app","modules/RecycleBin"],function(e,t){var n;return n=e.module(),n.Views.ListView=Backbone.View.extend({tagName:"li",template:"website-list-item",className:"Website",serialize:function(){return{ID:this.model.id,Title:this.model.get("Title"),Link:this.model.get("Link")}},afterRender:function(){return t.setViewAsRecyclable(this)}}),n}),function(e,t){typeof exports=="object"?module.exports=t():typeof define=="function"&&define.amd?define("plugins/misc/spin.min",t):e.Spinner=t()}(this,function(){function r(e,t){var n=document.createElement(e||"div"),r;for(r in t)n[r]=t[r];return n}function i(e){for(var t=1,n=arguments.length;t<n;t++)e.appendChild(arguments[t]);return e}function o(e,r,i,o){var u=["opacity",r,~~(e*100),i,o].join("-"),a=.01+i/o*100,f=Math.max(1-(1-e)/r*(100-a),e),l=n.substring(0,n.indexOf("Animation")).toLowerCase(),c=l&&"-"+l+"-"||"";return t[u]||(s.insertRule("@"+c+"keyframes "+u+"{"+"0%{opacity:"+f+"}"+a+"%{opacity:"+e+"}"+(a+.01)+"%{opacity:1}"+(a+r)%100+"%{opacity:"+e+"}"+"100%{opacity:"+f+"}"+"}",s.cssRules.length),t[u]=1),u}function u(t,n){var r=t.style,i,s;if(r[n]!==undefined)return n;n=n.charAt(0).toUpperCase()+n.slice(1);for(s=0;s<e.length;s++){i=e[s]+n;if(r[i]!==undefined)return i}}function a(e,t){for(var n in t)e.style[u(e,n)||n]=t[n];return e}function f(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)e[r]===undefined&&(e[r]=n[r])}return e}function l(e){var t={x:e.offsetLeft,y:e.offsetTop};while(e=e.offsetParent)t.x+=e.offsetLeft,t.y+=e.offsetTop;return t}function h(e){if(typeof this=="undefined")return new h(e);this.opts=f(e||{},h.defaults,c)}function p(){function e(e,t){return r("<"+e+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',t)}s.addRule(".spin-vml","behavior:url(#default#VML)"),h.prototype.lines=function(t,n){function o(){return a(e("group",{coordsize:s+" "+s,coordorigin:-r+" "+ -r}),{width:s,height:s})}function c(t,s,u){i(f,i(a(o(),{rotation:360/n.lines*t+"deg",left:~~s}),i(a(e("roundrect",{arcsize:n.corners}),{width:r,height:n.width,left:n.radius,top:-n.width>>1,filter:u}),e("fill",{color:n.color,opacity:n.opacity}),e("stroke",{opacity:0}))))}var r=n.length+n.width,s=2*r,u=-(n.width+n.length)*2+"px",f=a(o(),{position:"absolute",top:u,left:u}),l;if(n.shadow)for(l=1;l<=n.lines;l++)c(l,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(l=1;l<=n.lines;l++)c(l);return i(t,f)},h.prototype.opacity=function(e,t,n,r){var i=e.firstChild;r=r.shadow&&r.lines||0,i&&t+r<i.childNodes.length&&(i=i.childNodes[t+r],i=i&&i.firstChild,i=i&&i.firstChild,i&&(i.opacity=n))}}var e=["webkit","Moz","ms","O"],t={},n,s=function(){var e=r("style",{type:"text/css"});return i(document.getElementsByTagName("head")[0],e),e.sheet||e.styleSheet}(),c={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:"#000",direction:1,speed:1,trail:100,opacity:.25,fps:20,zIndex:2e9,className:"spinner",top:"auto",left:"auto",position:"relative"};h.defaults={},f(h.prototype,{spin:function(e){this.stop();var t=this,i=t.opts,s=t.el=a(r(0,{className:i.className}),{position:i.position,width:0,zIndex:i.zIndex}),o=i.radius+i.length+i.width,u,f;e&&(e.insertBefore(s,e.firstChild||null),f=l(e),u=l(s),a(s,{left:(i.left=="auto"?f.x-u.x+(e.offsetWidth>>1):parseInt(i.left,10)+o)+"px",top:(i.top=="auto"?f.y-u.y+(e.offsetHeight>>1):parseInt(i.top,10)+o)+"px"})),s.setAttribute("role","progressbar"),t.lines(s,t.opts);if(!n){var c=0,h=(i.lines-1)*(1-i.direction)/2,p,d=i.fps,v=d/i.speed,m=(1-i.opacity)/(v*i.trail/100),g=v/i.lines;(function y(){c++;for(var e=0;e<i.lines;e++)p=Math.max(1-(c+(i.lines-e)*g)%v*m,i.opacity),t.opacity(s,e*i.direction+h,p,i);t.timeout=t.el&&setTimeout(y,~~(1e3/d))})()}return t},stop:function(){var e=this.el;return e&&(clearTimeout(this.timeout),e.parentNode&&e.parentNode.removeChild(e),this.el=undefined),this},lines:function(e,t){function l(e,n){return a(r(),{position:"absolute",width:t.length+t.width+"px",height:t.width+"px",background:e,boxShadow:n,transformOrigin:"left",transform:"rotate("+~~(360/t.lines*s+t.rotate)+"deg) translate("+t.radius+"px"+",0)",borderRadius:(t.corners*t.width>>1)+"px"})}var s=0,u=(t.lines-1)*(1-t.direction)/2,f;for(;s<t.lines;s++)f=a(r(),{position:"absolute",top:1+~(t.width/2)+"px",transform:t.hwaccel?"translate3d(0,0,0)":"",opacity:t.opacity,animation:n&&o(t.opacity,t.trail,u+s*t.direction,t.lines)+" "+1/t.speed+"s linear infinite"}),t.shadow&&i(f,a(l("#000","0 0 4px #000"),{top:"2px"})),i(e,i(f,l(t.color,"0 0 1px rgba(0,0,0,.1)")));return e},opacity:function(e,t,n){t<e.childNodes.length&&(e.childNodes[t].style.opacity=n)}});var d=a(r("group"),{behavior:"url(#default#VML)"});return!u(d,"transform")&&d.adj?p():n=u(d,"animation"),h}),function(e){var t="list",n="1.2.4",r=!0,i={headerSelector:"dt",zIndex:1,fakeHeaderClass:"ui-"+t+"-fakeheader"},s=null,o={log:function(){if(r&&window.console&&window.console.log)try{window.console.log.apply(console,arguments)}catch(e){window.console.log(arguments)}},updateHeader:function(e,n){var r=e.data(t);r&&(r.fakeHeader=n.clone().removeAttr("id").addClass(r.settings.fakeHeaderClass),r.fakeHeader.css({position:"absolute",top:0,width:r.headers.width(),zIndex:r.settings.zIndex}),e.data(t,r).children(0).eq(0).replaceWith(r.fakeHeader))},events:{resize:function(){var n=e(this),r=n.data(t);r&&(r.fakeHeader.width(r.headers.width()),r.wrapper.css("maxHeight",n.css("maxHeight")))},scroll:function(){var n=e(this),r=n.data(t);if(r){var i=null,s=r.headers.eq(r.currentHeader),u=r.currentHeader>=r.headers.length-1?null:r.headers.eq(r.currentHeader+1),a=r.currentHeader<=0?null:r.headers.eq(r.currentHeader-1),f=!1;r.containerTop=n.offset().top+parseInt(n.css("marginTop"),10)+parseInt(n.css("borderTopWidth"),10),r.fakeHeader.css("top",0);if(a!==null){var l=s.offset().top,c=s.outerHeight();l>r.containerTop&&(r.fakeHeader.css("top",l-c-r.containerTop),o.updateHeader(n,a),r.currentHeader=r.currentHeader-1,f=!0),l-c>r.containerTop&&(r.fakeHeader.css("top",0),i=r.currentHeader-1)}if(u!==null){var l=u.offset().top,c=u.outerHeight();l-c<r.containerTop&&r.fakeHeader.css("top",l-c-r.containerTop),l<r.containerTop&&(r.fakeHeader.css("top",0),i=r.currentHeader+1)}if(i!==null){var h=r.headers.eq(i);r.currentHeader=i,o.updateHeader(n,h),f=!0}var p=r.wrapper.scrollTop()>=r.wrapper.prop("scrollHeight")-r.wrapper.height();(f||p||r.max&&!p)&&n.trigger("headingChange",[r.currentHeader,r.headers.eq(r.currentHeader),p]),r.max=p,n.data(t,r)}}}},u={init:function(n){return e(this).each(function(){var r=e.extend({},i);typeof n=="object"&&e.extend(r,n);var s=e(this),u=s.data(t);u||(u={target:s,wrapper:s.wrapInner('<div class="ui-'+t+'" />').find(".ui-"+t+""),settings:r,headers:[],containerTop:0,currentHeader:0,fakeHeader:null,scrolllist:[],original:{position:"",overflowX:"",overflowY:""},max:!1},s.addClass("-"+t+"-container").css({position:s.css("position")=="absolute"?"absolute":"relative",overflowY:"hidden"}),u.headers=s.find(u.settings.headerSelector),u.fakeHeader=u.headers.eq(0).clone().removeAttr("id").addClass(u.settings.fakeHeaderClass),u.wrapper.bind("scroll."+t,e.proxy(o.events.scroll,s)).css({height:"100%",maxHeight:s.css("maxHeight"),overflowY:"scroll",position:"relative"}),u.fakeHeader.css({position:"absolute",top:0,width:u.headers.width(),zIndex:u.settings.zIndex}),e(window).bind("resize."+t,e.proxy(o.events.resize,s)),s.data(t,u).prepend(u.fakeHeader))})},header:function(){var n=e(this),r=n.data(t);if(r)return r.currentHeader},scrollTo:function(n,r,i,s){return this.each(function(){var u=e(this),a=u.data(t);if(a&&n!==undefined&&!isNaN(n)&&n>=0&&n<a.headers.length){var f=a.headers.eq(n),l=f.position().top+a.wrapper.scrollTop()+parseInt(f.css("borderTopWidth"),10)+parseInt(f.css("borderBottomWidth"),10);r?a.wrapper.stop().animate({scrollTop:l},r,i,s):(a.wrapper.stop().scrollTop(l),a.currentHeader=n,o.updateHeader(u,f),u.trigger("headingChange",[n,f]),u.data(t,a))}})},option:function(n,r){var i=e(this),s=i.data(t);if(s)return typeof n=="undefined"?s.settings:!n in s.settings?!1:typeof r=="undefined"?s.settings[n]:(s.settings[n]=r,i)},version:function(e){if(e){var r=n.split("."),i=(Number(r[0])||1)+"",s=(Number(r[1])||0)+"",o=(Number(r[2])||0)+"",u="000";return Number(u.slice(0,3-i.length)+i+u.slice(0,3-s.length)+s+u.slice(0,3-o.length)+o)}return t+" v"+n},destroy:function(){return this.each(function(){var n=e(this),r=n.data(t);r&&(r.wrapper.children().unwrap(),r.fakeHeader.remove(),n.css(r.original).removeData(t).removeClass("-"+t+"-container").unbind("."+t))})}};e.fn[t]=function(n){if(u[n])return u[n].apply(this,Array.prototype.slice.call(arguments,1));if(typeof n=="object"||!n)return u.init.apply(this,arguments);e.error("Method "+n+" does not exist on jQuery."+t)},e[t]={},e[t].log=function(e){return e!==undefined&&(r=e),r}}(jQuery),define("plugins/misc/jquery.list",function(){}),function(e){var t;return t=function(){function t(){}return t["do"]=function(t,n,r,i,s,o,u){var a,f,l,c,h,p,d,v,m,g=this;h=null,n.removeClass("failed done"),e(".progress-text, .progress",n).remove(),a=e("<div />",{"class":"progress"}).height(0).appendTo(n),f=e("<div />",{"class":"progress-text"}).appendTo(n),p=t.dataTransfer.files,p.length===0&&(m=t.dataTransfer.getData("URL"),m&&(i.external=m)),d=new FormData,u&&p.length>u&&(p=array_slice(p,0,3)),e.each(p,function(e,t){return t.type.match(o)?d.append(t.name,t):h="Sorry, but "+t.name+" is no image, bitch!"});if(i)for(l in i)c=i[l],d.append(l,c);return h?(console.log(h),v=new e.Deferred,v.reject({error:h})):(n.addClass("uploading"),v=e.ajax({url:r,data:d,processData:!1,contentType:!1,type:"POST",xhr:function(){var e;return e=new XMLHttpRequest,e.upload.onprogress=function(e){var t;if(e.lengthComputable)return t=Math.round(e.loaded/e.total*100),f.html(t+"%"),a.height(t+"%")},e}})),v.pipe(function(t){return t.error?e.Deferred().reject(t):t}).fail(function(e){return n.addClass("failed"),f.text(s),setTimeout(function(){return n.removeClass("dragover")},3e3)}).always(function(){return n.removeClass("uploading"),a.remove(),f.remove()}).done(function(){return n.addClass("done"),setTimeout(function(){return n.removeClass("dragover")},1e3)})},t}(),window.JJFileUpload=t}(jQuery),define("plugins/editor/jquery.jjfileupload",function(){});var __hasProp={}.hasOwnProperty,__extends=function(e,t){function r(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};(function(e){var t,n,r;return e.globalDragStart=e.Callbacks(),e.globalDragEnd=e.Callbacks(),e.dragLeaveTimeout=null,e.fireGlobalDragEvent=function(t,n,r){var i;return r==null&&(r="inline"),i=t==="dragstart"?"Start":"End",e["globalDrag"+i].fire({type:r,target:n})},e.globalDragStart.add(function(t){return e.dragLeaveTimeout&&clearTimeout(e.dragLeaveTimeout),e("body").addClass("dragover drag-"+t.type)}),e.globalDragEnd.add(function(t){return e.dragLeaveTimeout&&clearTimeout(e.dragLeaveTimeout),e.dragLeaveTimeout=setTimeout(function(){return e("body").removeClass("dragover drag-"+t.type)},200)}),r=function(){function t(t,n){this.options=e.extend({},this.defaults,n),this.$dropzone=t instanceof jQuery?t:e(t),this.$dropzone.addClass("dropzone")}return t.prototype.fileMatch="image.*",t.prototype.defaults={url:null,errorMsg:"Sorry, but there has been an error.",additionalData:null,responseHandler:function(e){return console.log("UPLOAD DATA"),console.log(e)}},t.prototype.$dropzone=null,t.prototype.maxAllowed=null,t.prototype.cleanup=function(){return this.$dropzone.off("dragenter dragleave drop")},t.prototype.deferredUpload=function(t){var n,r=this;return n=JJFileUpload["do"](t,this.$dropzone,this.options.url,this.options.additionalData,this.options.errorMsg,this.fileMatch,this.maxAllowed),n.done(function(t){return t=e.parseJSON(t),r.options.responseHandler(t)})},t}(),t=function(t){function n(e,t){n.__super__.constructor.call(this,e,t),this.dragAndDropSetup()}return __extends(n,t),n.prototype.dragAndDropSetup=function(){var t,n=this;return t=this.$dropzone,t.on("dragenter",function(t){return e(this).addClass("dragover")}),t.on("dragleave",function(t){return e(this).removeClass("dragover")}),t.on("drop",function(r){return n.deferredUpload(r).always(function(){return e.fireGlobalDragEvent(r.type,r.target),t.removeClass("dragover")})})},n}(r),n=function(t){function n(e,t){n.__super__.constructor.call(this,e,t),window.dropzoneIDCount++,this.dropzoneID="jjdrop-"+window.dropzoneIDCount,this.dragAndDropSetup()}return __extends(n,t),n.prototype.setAsActiveDraggable=function(t){if(t.type!=="dragstart")return this._activeDraggableId=null;this._activeDraggableId=e(t.target).data("id");if(!this._activeDraggableId)return this._activeDraggableId=e(t.target).parent().data("id")},n.prototype.setAsDraggable=function(t){var n=this;this.draggables||(this.draggables=[]);if(t.length)return this.draggables.push(t),t.on("dragstart."+this.dropzoneID+" dragend."+this.dropzoneID,function(t){return e.fireGlobalDragEvent(t.type,t.target),n.setAsActiveDraggable(t)})},n.prototype.cleanup=function(){var e,t,r,i,s;n.__super__.cleanup.call(this);if(this.draggables){i=this.draggables,s=[];for(t=0,r=i.length;t<r;t++)e=i[t],s.push(e.off("dragstart."+this.dropzoneID+" dragend."+this.dropzoneID));return s}},n.prototype.dragAndDropSetup=function(){var t,n=this;return t=this.$dropzone,t.on("dragenter",function(t){return e(this).addClass("dragover")}),t.on("dragleave drop",function(t){return e(this).removeClass("dragover")}),t.on("drop",function(t){var r,i;e.fireGlobalDragEvent(t.type,t.target);if(i=n._activeDraggableId){n._activeDraggableId=null,r=n.options.getFromCache(i);if(r)return r.done?r.done(n.options.responseHandler):n.options.responseHandler(r)}else if(t.dataTransfer)return n.deferredUpload(t)})},n}(r),window.dropzoneIDCount=0,window.JJSimpleImagesUploadZone=t,window.JJSingleImageUploadZone=n})(jQuery),define("plugins/editor/jquery.jjdropzone",function(){}),function(e){function t(e){window.console&&window.console.log&&window.console.log("textarea count: "+e.size())}function n(e,t,n){var s=e.scrollTop;e.setSelectionRange?r(e,t,n):document.selection&&i(e,t,n),e.scrollTop=s}function r(e,t,n){var r=e.selectionStart,i=e.selectionEnd;if(r==i)t?"	"==e.value.substring(r-n.tabString.length,r)?(e.value=e.value.substring(0,r-n.tabString.length)+e.value.substring(r),e.focus(),e.setSelectionRange(r-n.tabString.length,r-n.tabString.length)):"	"==e.value.substring(r,r+n.tabString.length)&&(e.value=e.value.substring(0,r)+e.value.substring(r+n.tabString.length),e.focus(),e.setSelectionRange(r,r)):(e.value=e.value.substring(0,r)+n.tabString+e.value.substring(r),e.focus(),e.setSelectionRange(r+n.tabString.length,r+n.tabString.length));else{var s=e.value.split("\n"),o=new Array,u=0,a=0,f=!1;for(var l in s)a=u+s[l].length,o.push({start:u,end:a,selected:u<=r&&a>r||a>=i&&u<i||u>r&&a<i}),u=a+1;var c=0;for(var l in o)if(o[l].selected){var h=o[l].start+c;t&&n.tabString==e.value.substring(h,h+n.tabString.length)?(e.value=e.value.substring(0,h)+e.value.substring(h+n.tabString.length),c-=n.tabString.length):t||(e.value=e.value.substring(0,h)+n.tabString+e.value.substring(h),c+=n.tabString.length)}e.focus();var p=r+(c>0?n.tabString.length:c<0?-n.tabString.length:0),d=i+c;e.setSelectionRange(p,d)}}function i(t,n,r){var i=document.selection.createRange();if(t==i.parentElement())if(""==i.text)if(n){var s=i.getBookmark();i.moveStart("character",-r.tabString.length),r.tabString==i.text?i.text="":(i.moveToBookmark(s),i.moveEnd("character",r.tabString.length),r.tabString==i.text&&(i.text="")),i.collapse(!0),i.select()}else i.text=r.tabString,i.collapse(!1),i.select();else{var o=i.text,u=o.length,a=o.split("\r\n"),f=document.body.createTextRange();f.moveToElementText(t),f.setEndPoint("EndToStart",i);var l=f.text,c=l.split("\r\n"),h=l.length,p=document.body.createTextRange();p.moveToElementText(t),p.setEndPoint("StartToEnd",i);var d=p.text,v=document.body.createTextRange();v.moveToElementText(t),v.setEndPoint("StartToEnd",f);var m=v.text,g=e(t).html();e("#r3").text(h+" + "+u+" + "+d.length+" = "+g.length),h+m.length<g.length?(c.push(""),h+=2,n&&r.tabString==a[0].substring(0,r.tabString.length)?a[0]=a[0].substring(r.tabString.length):n||(a[0]=r.tabString+a[0])):n&&r.tabString==c[c.length-1].substring(0,r.tabString.length)?c[c.length-1]=c[c.length-1].substring(r.tabString.length):n||(c[c.length-1]=r.tabString+c[c.length-1]);for(var y=1;y<a.length;y++)n&&r.tabString==a[y].substring(0,r.tabString.length)?a[y]=a[y].substring(r.tabString.length):n||(a[y]=r.tabString+a[y]);1==c.length&&0==h&&(n&&r.tabString==a[0].substring(0,r.tabString.length)?a[0]=a[0].substring(r.tabString.length):n||(a[0]=r.tabString+a[0])),h+u+d.length<g.length&&(a.push(""),u+=2),f.text=c.join("\r\n"),i.text=a.join("\r\n");var b=document.body.createTextRange();b.moveToElementText(t),0<h?b.setEndPoint("StartToEnd",f):b.setEndPoint("StartToStart",f),b.setEndPoint("EndToEnd",i),b.select()}}e.fn.tabby=function(t){var r=e.extend({},e.fn.tabby.defaults,t),i=e.fn.tabby.pressed;return this.each(function(){$this=e(this);var t=e.meta?e.extend({},r,$this.data()):r;$this.bind("keydown",function(r){var s=e.fn.tabby.catch_kc(r);16==s&&(i.shft=!0),17==s&&(i.ctrl=!0,setTimeout("$.fn.tabby.pressed.ctrl = false;",1e3)),18==s&&(i.alt=!0,setTimeout("$.fn.tabby.pressed.alt = false;",1e3));if(9==s&&!i.ctrl&&!i.alt)return r.preventDefault,i.last=s,setTimeout("$.fn.tabby.pressed.last = null;",0),n(e(r.target).get(0),i.shft,t),!1}).bind("keyup",function(t){16==e.fn.tabby.catch_kc(t)&&(i.shft=!1)}).bind("blur",function(t){9==i.last&&e(t.target).one("focus",function(e){i.last=null}).get(0).focus()})})},e.fn.tabby.catch_kc=function(e){return e.keyCode?e.keyCode:e.charCode?e.charCode:e.which},e.fn.tabby.pressed={shft:!1,ctrl:!1,alt:!1,last:null},e.fn.tabby.defaults={tabString:String.fromCharCode(9)}}(jQuery),define("plugins/editor/jquery.tabby",function(){}),function(){function t(t){this.tokens=[],this.strs=[],this.tokens.links={},this.options=t||f.defaults,this.rules=e.normal,this.options.gfm&&(this.options.tables?this.rules=e.tables:this.rules=e.gfm)}function r(e,t){this.options=t||f.defaults,this.links=e,this.rules=n.normal;if(!this.links)throw new Error("Tokens array requires a `links` property.");this.options.gfm?this.options.breaks?this.rules=n.breaks:this.rules=n.gfm:this.options.pedantic&&(this.rules=n.pedantic)}function i(e){this.tokens=[],this.token=null,this.options=e||f.defaults}function s(e,t){return e.replace(t?/&/g:/&(?!#?\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function o(e,t){return e=e.source,t=t||"",function n(r,i){return r?(i=i.source||i,i=i.replace(/(^|[^\[])\^/g,"$1"),e=e.replace(r,i),n):new RegExp(e,t)}}function u(){}function a(e){var t=1,n,r;for(;t<arguments.length;t++){n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}function f(e,n,r){if(r||typeof n=="function"){r||(r=n,n=null),n&&(n=a({},f.defaults,n));var o=t.lex(o,n),u=n.highlight,l=0,c=o.length,h=0;if(!u||u.length<3)return r(null,i.parse(o,n));var p=function(){delete n.highlight;var e=i.parse(o,n);return n.highlight=u,r(null,e)};for(;h<c;h++)(function(e){if(e.type!=="code")return;return l++,u(e.text,e.lang,function(t,n){if(n==null||n===e.text)return--l||p();e.text=n,e.escaped=!0,--l||p()})})(o[h]);return}try{return n&&(n=a({},f.defaults,n)),i.parse(t.lex(e,n),n,e)}catch(d){d.message+="\nPlease report this to https://github.com/chjj/marked.";if((n||f.defaults).silent)return"<p>An error occured:</p><pre>"+s(d.message+"",!0)+"</pre>";throw d}}var e={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,fences:u,hr:/^( *[-*_]){3,} *(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *#* *(?:\n+|$)/,nptable:u,lheading:/^([^\n]+)\n *(=|-){3,} *\n*/,blockquote:/^( *>[^\n]+(\n[^\n]+)*\n*)+/,list:/^( *)(bull) [\s\S]+?(?:hr|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:/^ *(?:comment|closed|closing) *(?:\n{2,}|\s*$)/,def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +["(]([^\n]+)[")])? *(?:\n+|$)/,table:u,paragraph:/^((?:[^\n]+\n?(?!hr|heading|lheading|blockquote|tag|def))+)\n*/,text:/^[^\n]+/};e.bullet=/(?:[*+-]|\d+\.)/,e.item=/^( *)(bull) [^\n]*(?:\n(?!\1bull )[^\n]*)*/,e.item=o(e.item,"gm")(/bull/g,e.bullet)(),e.list=o(e.list)(/bull/g,e.bullet)("hr",/\n+(?=(?: *[-*_]){3,} *(?:\n+|$))/)(),e._tag="(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:/|@)\\b",e.html=o(e.html)("comment",/<!--[\s\S]*?-->/)("closed",/<(tag)[\s\S]+?<\/\1>/)("closing",/<tag(?:"[^"]*"|'[^']*'|[^'">])*?>/)(/tag/g,e._tag)(),e.paragraph=o(e.paragraph)("hr",e.hr)("heading",e.heading)("lheading",e.lheading)("blockquote",e.blockquote)("tag","<"+e._tag)("def",e.def)(),e.normal=a({},e),e.gfm=a({},e.normal,{fences:/^ *(`{3,}|~{3,}) *(\S+)? *\n([\s\S]+?)\s*\1 *(?:\n+|$)/,paragraph:/^/}),e.gfm.paragraph=o(e.paragraph)("(?!","(?!"+e.gfm.fences.source.replace("\\1","\\2")+"|")(),e.tables=a({},e.gfm,{nptable:/^ *(\S.*\|.*)\n *([-:]+ *\|[-| :]*)\n((?:.*\|.*(?:\n|$))*)\n*/,table:/^ *\|(.+)\n *\|( *[-:]+[-| :]*)\n((?: *\|.*(?:\n|$))*)\n*/}),t.rules=e,t.lex=function(e,n){var r=new t(n);return r.lex(e)},t.prototype.lex=function(e){return e=e.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    ").replace(/\u00a0/g," ").replace(/\u2424/g,"\n"),this.token(e,!0)},t.prototype.token=function(t,n){var t=t.replace(/^ +$/gm,""),r,i,s,o,u,a,f,l,c,h,p=0;h=t;while(t){p&&(this.tokens[this.tokens.length-1].origin=h.substring(0,h.indexOf(t))),h=t,p++;if(s=this.rules.newline.exec(t))t=t.substring(s[0].length),s[0].length>1&&this.tokens.push({type:"space"});if(s=this.rules.code.exec(t)){t=t.substring(s[0].length),s=s[0].replace(/^ {4}/gm,""),this.tokens.push({type:"code",text:this.options.pedantic?s:s.replace(/\n+$/,"")});continue}if(s=this.rules.fences.exec(t)){t=t.substring(s[0].length),this.tokens.push({type:"code",lang:s[2],text:s[3]});continue}if(s=this.rules.heading.exec(t)){t=t.substring(s[0].length),this.tokens.push({type:"heading",depth:s[1].length,text:s[2]});continue}if(n&&(s=this.rules.nptable.exec(t))){t=t.substring(s[0].length),a={type:"table",header:s[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:s[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:s[3].replace(/\n$/,"").split("\n")};for(l=0;l<a.align.length;l++)/^ *-+: *$/.test(a.align[l])?a.align[l]="right":/^ *:-+: *$/.test(a.align[l])?a.align[l]="center":/^ *:-+ *$/.test(a.align[l])?a.align[l]="left":a.align[l]=null;for(l=0;l<a.cells.length;l++)a.cells[l]=a.cells[l].split(/ *\| */);this.tokens.push(a);continue}if(s=this.rules.lheading.exec(t)){t=t.substring(s[0].length),this.tokens.push({type:"heading",depth:s[2]==="="?1:2,text:s[1]});continue}if(s=this.rules.hr.exec(t)){t=t.substring(s[0].length),this.tokens.push({type:"hr"});continue}if(s=this.rules.blockquote.exec(t)){t=t.substring(s[0].length),this.tokens.push({type:"blockquote_start"}),s=s[0].replace(/^ *> ?/gm,""),this.token(s,n),this.tokens.push({type:"blockquote_end"});continue}if(s=this.rules.list.exec(t)){t=t.substring(s[0].length),o=s[2],this.tokens.push({type:"list_start",ordered:o.length>1}),s=s[0].match(this.rules.item),r=!1,c=s.length,l=0;for(;l<c;l++)a=s[l],f=a.length,a=a.replace(/^ *([*+-]|\d+\.) +/,""),~a.indexOf("\n ")&&(f-=a.length,a=this.options.pedantic?a.replace(/^ {1,4}/gm,""):a.replace(new RegExp("^ {1,"+f+"}","gm"),"")),this.options.smartLists&&l!==c-1&&(u=e.bullet.exec(s[l+1])[0],o!==u&&!(o.length>1&&u.length>1)&&(t=s.slice(l+1).join("\n")+t,l=c-1)),i=r||/\n\n(?!\s*$)/.test(a),l!==c-1&&(r=a[a.length-1]==="\n",i||(i=r)),this.tokens.push({type:i?"loose_item_start":"list_item_start"}),this.token(a,!1),this.tokens.push({type:"list_item_end"});this.tokens.push({type:"list_end"});continue}if(s=this.rules.html.exec(t)){t=t.substring(s[0].length),this.tokens.push({type:this.options.sanitize?"paragraph":"html",pre:s[1]==="pre"||s[1]==="script",text:s[0]});continue}if(n&&(s=this.rules.def.exec(t))){t=t.substring(s[0].length),this.tokens.links[s[1].toLowerCase()]={href:s[2],title:s[3]};continue}if(n&&(s=this.rules.table.exec(t))){t=t.substring(s[0].length),a={type:"table",header:s[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:s[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:s[3].replace(/(?: *\| *)?\n$/,"").split("\n")};for(l=0;l<a.align.length;l++)/^ *-+: *$/.test(a.align[l])?a.align[l]="right":/^ *:-+: *$/.test(a.align[l])?a.align[l]="center":/^ *:-+ *$/.test(a.align[l])?a.align[l]="left":a.align[l]=null;for(l=0;l<a.cells.length;l++)a.cells[l]=a.cells[l].replace(/^ *\| *| *\| *$/g,"").split(/ *\| */);this.tokens.push(a);continue}if(n&&(s=this.rules.paragraph.exec(t))){t=t.substring(s[0].length),this.tokens.push({type:"paragraph",text:s[1][s[1].length-1]==="\n"?s[1].slice(0,-1):s[1]});continue}if(s=this.rules.text.exec(t)){t=t.substring(s[0].length),this.tokens.push({type:"text",text:s[0]});continue}if(t)throw new Error("Infinite loop on byte: "+t.charCodeAt(0))}return this.tokens&&this.tokens.length&&(this.tokens[this.tokens.length-1].origin=h),this.tokens};var n={escape:/^\\([\\`*{}\[\]()#+\-.!_>])/,autolink:/^<([^ >]+(@|:\/)[^ >]+)>/,url:u,tag:/^<!--[\s\S]*?-->|^<\/?\w+(?:"[^"]*"|'[^']*'|[^'">])*?>/,link:/^!?\[(inside)\]\(href\)/,reflink:/^!?\[(inside)\]\s*\[([^\]]*)\]/,nolink:/^!?\[((?:\[[^\]]*\]|[^\[\]])*)\]/,strong:/^__([\s\S]+?)__(?!_)|^\*\*([\s\S]+?)\*\*(?!\*)/,em:/^\b_((?:__|[\s\S])+?)_\b|^\*((?:\*\*|[\s\S])+?)\*(?!\*)/,code:/^(`+)\s*([\s\S]*?[^`])\s*\1(?!`)/,br:/^ {2,}\n(?!\s*$)/,del:u,cite:/^""([\s\S]+?)""/,text:/^[\s\S]+?(?=[\\<!\[_"*`]| {2,}\n|$)/};n._inside=/(?:\[[^\]]*\]|[^\]]|\](?=[^\[]*\]))*/,n._href=/\s*<?([^\s]*?)>?(?:\s+['"]([\s\S]*?)['"])?\s*/,n.link=o(n.link)("inside",n._inside)("href",n._href)(),n.reflink=o(n.reflink)("inside",n._inside)(),n.normal=a({},n),n.pedantic=a({},n.normal,{strong:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/}),n.gfm=a({},n.normal,{escape:o(n.escape)("])","~|])")(),url:/^(https?:\/\/[^\s<]+[^<.,:;"')\]\s])/,del:/^~~(?=\S)([\s\S]*?\S)~~/,text:o(n.text)("]|","~]|")("|","|https?://|")()}),n.breaks=a({},n.gfm,{br:o(n.br)("{2,}","*")(),text:o(n.gfm.text)("{2,}","*")()}),r.rules=n,r.output=function(e,t,n){var i=new r(t,n);return i.output(e)},r.prototype.output=function(e){var t="",n,r,i,o;while(e){if(o=this.rules.escape.exec(e)){e=e.substring(o[0].length),t+=o[1];continue}if(o=this.rules.autolink.exec(e)){e=e.substring(o[0].length),o[2]==="@"?(r=o[1][6]===":"?this.mangle(o[1].substring(7)):this.mangle(o[1]),i=this.mangle("mailto:")+r):(r=s(o[1]),i=r),t+='<a href="'+i+'">'+r+"</a>";continue}if(o=this.rules.url.exec(e)){e=e.substring(o[0].length),r=s(o[1]),i=r,t+='<a href="'+i+'">'+r+"</a>";continue}if(o=this.rules.tag.exec(e)){e=e.substring(o[0].length),t+=this.options.sanitize?s(o[0]):o[0];continue}if(o=this.rules.link.exec(e)){e=e.substring(o[0].length),t+=this.outputLink(o,{href:o[2],title:o[3]});continue}if((o=this.rules.reflink.exec(e))||(o=this.rules.nolink.exec(e))){e=e.substring(o[0].length),n=(o[2]||o[1]).replace(/\s+/g," "),n=this.links[n.toLowerCase()];if(!n||!n.href){t+=o[0][0],e=o[0].substring(1)+e;continue}t+=this.outputLink(o,n);continue}if(o=this.rules.strong.exec(e)){e=e.substring(o[0].length),t+="<strong>"+this.output(o[2]||o[1])+"</strong>";continue}if(o=this.rules.cite.exec(e)){e=e.substring(o[0].length),t+="<cite>"+this.output(o[2]||o[1])+"</cite>";continue}if(o=this.rules.em.exec(e)){e=e.substring(o[0].length),t+="<em>"+this.output(o[2]||o[1])+"</em>";continue}if(o=this.rules.code.exec(e)){e=e.substring(o[0].length),t+="<code>"+s(o[2],!0)+"</code>";continue}if(o=this.rules.br.exec(e)){e=e.substring(o[0].length),t+="<br>";continue}if(o=this.rules.del.exec(e)){e=e.substring(o[0].length),t+="<del>"+this.output(o[1])+"</del>";continue}if(o=this.rules.text.exec(e)){e=e.substring(o[0].length),t+=s(o[0]);continue}if(e)throw new Error("Infinite loop on byte: "+e.charCodeAt(0))}return t},r.prototype.outputLink=function(e,t){return e[0][0]!=="!"?'<a href="'+s(t.href)+'"'+(t.title?' title="'+s(t.title)+'"':"")+">"+this.output(e[1])+"</a>":'<img src="'+s(t.href)+'" alt="'+s(e[1])+'"'+(t.title?' title="'+s(t.title)+'"':"")+">"},r.prototype.smartypants=function(e){return this.options.smartypants?e.replace(/--/g,"—").replace(/'([^']*)'/g,"‘$1’").replace(/"([^"]*)"/g,"“$1”").replace(/\.{3}/g,"…"):e},r.prototype.mangle=function(e){var t="",n=e.length,r=0,i;for(;r<n;r++)i=e.charCodeAt(r),Math.random()>.5&&(i="x"+i.toString(16)),t+="&#"+i+";";return t},i.parse=function(e,t,n){var r=new i(t);return r.parse(e,n)},i.prototype.parse=function(e,t){var n=[];for(var i=0;i<e.length;i++)node=e[i],n.push(t.indexOf(node.origin));this.inline=new r(e.links,this.options),this.tokens=e.reverse();var s="";while(this.next()){var o=this.tok(),u=n[0],a=o.indexOf(">");o&&(o=[o.slice(0,a),' data-editor-pos="'+u+'"',o.slice(a)].join("")),n.shift(),s+=o}return s},i.prototype.next=function(){return this.token=this.tokens.pop()},i.prototype.peek=function(){return this.tokens[this.tokens.length-1]||0},i.prototype.parseText=function(){var e=this.token.text;while(this.peek().type==="text")e+="\n"+this.next().text;return this.inline.output(e)},i.prototype.tok=function(){switch(this.token.type){case"space":return"";case"hr":return"<hr>\n";case"heading":return"<h"+this.token.depth+">"+this.inline.output(this.token.text)+"</h"+this.token.depth+">\n";case"code":if(this.options.highlight){var e=this.options.highlight(this.token.text,this.token.lang);e!=null&&e!==this.token.text&&(this.token.escaped=!0,this.token.text=e)}return this.token.escaped||(this.token.text=s(this.token.text,!0)),"<pre><code"+(this.token.lang?' class="'+this.options.langPrefix+this.token.lang+'"':"")+">"+this.token.text+"</code></pre>\n";case"table":var t="",n,r,i,o,u;t+="<thead>\n<tr>\n";for(r=0;r<this.token.header.length;r++)n=this.inline.output(this.token.header[r]),t+=this.token.align[r]?'<th align="'+this.token.align[r]+'">'+n+"</th>\n":"<th>"+n+"</th>\n";t+="</tr>\n</thead>\n",t+="<tbody>\n";for(r=0;r<this.token.cells.length;r++){i=this.token.cells[r],t+="<tr>\n";for(u=0;u<i.length;u++)o=this.inline.output(i[u]),t+=this.token.align[u]?'<td align="'+this.token.align[u]+'">'+o+"</td>\n":"<td>"+o+"</td>\n";t+="</tr>\n"}return t+="</tbody>\n","<table>\n"+t+"</table>\n";case"blockquote_start":var t="";while(this.next().type!=="blockquote_end")t+=this.tok();return"<blockquote>\n"+t+"</blockquote>\n";case"list_start":var a=this.token.ordered?"ol":"ul",t="";while(this.next().type!=="list_end")t+=this.tok();return"<"+a+">\n"+t+"</"+a+">\n";case"list_item_start":var t="";while(this.next().type!=="list_item_end")t+=this.token.type==="text"?this.parseText():this.tok();return"<li>"+t+"</li>\n";case"loose_item_start":var t="";while(this.next().type!=="list_item_end")t+=this.tok();return"<li>"+t+"</li>\n";case"html":return!this.token.pre&&!this.options.pedantic?this.inline.output(this.token.text):this.token.text;case"paragraph":return"<p>"+this.inline.output(this.token.text)+"</p>\n";case"text":return"<p>"+this.parseText()+"</p>\n"}},u.exec=u,f.options=f.setOptions=function(e){return a(f.defaults,e),f},f.defaults={gfm:!0,tables:!0,breaks:!1,pedantic:!1,sanitize:!1,smartLists:!1,silent:!1,highlight:null,langPrefix:"lang-"},f.Parser=i,f.parser=i.parse,f.Lexer=t,f.lexer=t.lex,f.InlineLexer=r,f.inlineLexer=r.output,f.parse=f,typeof exports=="object"?module.exports=f:this.marked=f}.call(function(){return this||(typeof window!="undefined"?window:global)}()),define("plugins/editor/marked_jjedit",function(){}),function(e){var t,n,r;return r=function(){function n(t,n){var r;r=null,this.$preview=null,this.currentDrag=null,this.inlineElementDragged=null,this.dragCount=0,this.fileDragPermitted=!0,this.pendingAjax=[],this.customParsers={},this.firstTimeRendered=!1,this.options=e.extend({},this.defaults,n),this.$input=t instanceof jQuery?t:e(t),this.$input._val=this.$input[this.options.contentGetter],this.$preview=this.options.preview instanceof jQuery?this.options.preview:e(this.options.preview),this.initialize()}var t;return n.prototype.defaults={preview:"#preview",parsingDelay:200,dragAndDropAllowed:!0,hideDropzoneDelay:1e3,errorMsg:"Sorry, but there has been an error.",contentGetter:"val",customParsers:{},customParserOptions:{},afterRender:null,onChange:null,onBlur:null,imageUrl:"/imagery/images/docimage/",placeholder:"PLACEHOLDER",charlimit:0,additionalPOSTData:null,uploadResponseHandler:null},t=function(t){var r;return t.type==="dragstart"?(r=e(t.target).data("md-tag"),r||(r=e(t.target).parent().data("md-tag")),r=r.replace("\\[","[").replace("\\]","]")):r=null,e.fireGlobalDragEvent(t.type,t.target),n._activeDraggable=r},n.setAsDraggable=function(e){n.draggables||(n.draggables=[]),e=e.filter("[data-md-tag]");if(e.length)return n.draggables.push(e),e.on("dragstart dragend",t)},n.cleanupDraggables=function(){if(n.draggables)return e.each(n.draggables,function(e,t){return t.off("dragstart dragend")})},n.prototype.cleanup=function(){this.$input.remove(),this.$preview.remove();if(this.$dropzone)return this.$dropzone.remove()},n.prototype.initialize=function(){var t,n,r,i,s=this;return e.each(this.options.customParsers,function(e,t){var n,r;r=window[t];if(r)return n=s.options.customParserOptions[e],s.customParsers[e]=new r(n)}),n=this.$input,r=this.$preview,s=this,n.tabby().trigger("keyup"),this.delayTimeout=null,n.off("keyup").on("keyup",function(t){var r,i,o;return r=e(this),i=s.options.charlimit,i>0&&n._val().length>i&&n._val(n._val().substring(0,i)),o&&clearTimeout(o),o=setTimeout(function(){return s.parseMarkdown()},s.options.parsingDelay)}),t=n.add(r),i=null,t.on("scroll",function(t){var s,o;return o=e(this),s=o.is(n)?r:n,i&&i.is(s)?!1:(i=o,s[0].scrollTop=this.scrollTop*s[0].scrollHeight/this.scrollHeight,setTimeout(function(){return i=null},200))}),s.parseMarkdown(),this.options.dragAndDropAllowed&&this.dragAndDropSetup(),this},n.prototype.parseMarkdown=function(){var t,n,r,i=this;return e.each(this.pendingAjax,function(e,t){if(t.readyState!==4&&t.abort)return t.abort()}),n=this.$input._val(),t=marked(n),r=[],e.each(this.customParsers,function(e,t){var s,o;s=t.findIDs(n),o=t.getData(s),r.push(o);if(!t.noAjax)return i.pendingAjax.push(o)}),e.when.apply(e,r).then(function(){var r;return i.pendingAjax=[],e.each(i.customParsers,function(e,n){return t=n.parseMarkdown(t)}),i.$preview.trigger("markdown:replaced"),n.length===0?i.$preview.html(i.options.placeholder):i.$preview.html(t),i.inlineDragAndDropSetup(),i.options.afterRender&&i.options.afterRender(),r={raw:n},i.customParsers.images&&(r.images=i.customParsers.images.returnIds()),i.options.onChange&&i.firstTimeRendered&&i.options.onChange(r),i.firstTimeRendered=!0})},n.prototype.dragAndDropSetup=function(){var t,r,i,s,o=this;return t=this.$preview,r=this.options.hideDropzoneDelay,t.on("dragover",function(n){var r,s,u,a,f,l;o.currentDrag||(o.currentDrag={$dropzone:e("<div>",{"class":"dropzone"})},o.dragCount++,t.data("dragid",o.dragCount),o.currentDrag.$dropzone.data("dragid",o.dragCount)),i(),a=o.currentDrag,r=a.$dropzone,a.hideDropzoneTimeout&&clearTimeout(o.currentDrag.hideDropzoneTimeout),s=e(n.target);if(!s.is(r))return l=!1,s.is(t)?l=!0:s.attr("data-editor-pos")||(u=s.closest("[data-editor-pos]"),u.length?s=u:(s=t,l=!0)),f=l?"appendTo":"insertBefore",a.$target=s,r[f].call(r,s)}),t.on("drop",function(t){var n;n=e(t.originalEvent.originalTarget);if(o.currentDrag&&!n.is(o.currentDrag.$dropzone))return s(),!1}),s=function(){if(!o.currentDrag)return;return clearTimeout(o.currentDrag.hideDropzoneTimeout),o.currentDrag.hideDropzoneTimeout=setTimeout(function(){return o.currentDrag.$dropzone.hide().detach().show()},r)},t.on("dragleave",s),i=function(){var t;return o.currentDrag.dropHandlerBound?!1:(o.currentDrag.dropHandlerBound=!0,t=o.currentDrag.$dropzone,t.on("dragenter",function(t){return e(this).addClass("dragover")}),t.on("dragleave",function(t){return e(this).removeClass("dragover")}),t.on("drop",function(r){var i,s,u,a,f,l;return i=o.currentDrag.$target,a=o.currentDrag.hideDropzoneTimeout,a&&clearTimeout(a),t.off("drop"),o.currentDrag=null,s=new e.Deferred,s.done(function(){return t.remove(),o.parseMarkdown()}),(u=o.inlineElementDragged)?(o.moveInlineElement(e(u),i),o.inlineElementDragged=null,s.resolve()):(f=n._activeDraggable)?(o.insertAtEditorPosByEl(i,f+"  \n\n"),n._activeDraggable=null,s.resolve()):r.dataTransfer?(l=JJFileUpload["do"](r,t,o.options.imageUrl,o.options.additionalPOSTData,o.options.errorMsg,"image.*"),l.done(function(t){var n,r,u,a,f;t=e.parseJSON(t),o.options.uploadResponseHandler&&o.options.uploadResponseHandler(t),u="";for(a=0,f=t.length;a<f;a++)r=t[a],u+="[img "+r.id+"]";return n="  \n\n",o.insertAtEditorPosByEl(i,u+n),s.resolve()})):t.remove()}))}},n.prototype.inlineDragAndDropSetup=function(){var e,t,n=this;return t=this.$preview,e=t.find("[data-md-tag]"),n=this,e.on("dragstart",function(e){return n.inlineElementDragged=this}),e.on("dragend",function(e){return n.inlineElementDragged=null}),t.on("markdown:replace",function(){return e.off("dragstart dragend")})},n.prototype.moveInlineElement=function(e,t){var n,r,i;return r=e.data("md-tag").replace(/\\/g,""),n=r+"  \n\n",i=e.data("editor-pos"),!t.is(this.$preview)&&t.data("editor-pos")<i&&(i+=n.length),this.insertAtEditorPosByEl(t,n),this.removeAtEditorPos(i,r)},n.prototype.removeAtEditorPos=function(e,t){var n,r,i;return i=this.$input._val(),n=t.length,r="  \n\n",i.substring(e+n,e+n+r.length)===r&&(n+=r.length),i=[i.slice(0,e),i.slice(e+n)].join(""),this.$input._val(i)},n.prototype.insertAtEditorPosByEl=function(e,t){var n,r;return r=this.$input._val(),e.is(this.$preview)?r+=t:(n=e.data("editor-pos"),r=[r.slice(0,n),t,r.slice(n)].join("")),this.$input._val(r)},n}(),n={findIDs:function(e){},parseFound:function(e){},getUrl:function(e){},getData:function(e){},parseMarkdown:function(e){},returnIds:function(){}},t=function(){function e(e){var t,n;this.cache=[];if(e)for(t in e)n=e[t],this[t]=n}return e.prototype.url="",e}(),t.prototype.findIDs=function(t){var n,r,i,s;this._raw=t,s=[],i=[];while(n=this.rule.exec(t))s.push(n),r=this.parseFound(n[1]),e.inArray(r,i)<0&&i.push(r);return this._tempReplacements=s,i},t.prototype.parseFound=function(e){return e},t.prototype.getUrl=function(e){return this.url+"?ids="+e.join(",")},t.prototype.getData=function(t){var n,r,i,s,o=this;return r=[],i=[],n=new e.Deferred,e.each(t,function(t,n){var s;return s=null,e.each(o.cache,function(e,t){t.id===n&&(s=t)}),s?i.push(s):r.push(n)}),r.length?(s=this.getUrl(r),e.getJSON(s).done(function(t){if(e.isArray(t))return o.cache=o.cache.concat(t),i=i.concat(t),o.data=i})):(this.data=i,n.resolve(),n)},t.prototype.parseMarkdown=function(t){var n,r,i,s,o=this;return n=function(e,t,n){var r;return r=e.indexOf(">"),[e.slice(0,r)," data-"+t+'="'+n+'"',e.slice(r)].join("")},r=[],i=this._raw,s=[],e.each(this._tempReplacements,function(r,i){var u,a,f,l;a=null,u=o.parseFound(i[1]),e.each(o.data,function(e,t){t.id===u&&(a=t)});if(a)return s.push(a.id),f=i[0].replace("[","\\[").replace("]","\\]"),l=n(a.tag,"editor-pos",i.index),l=n(l,"md-tag",f),t=t.replace(i[0],l)}),this._raw=null,this._tempReplacements=null,this.usedIds=e.unique(s),t},t.prototype.returnIds=function(){var e;return e={ids:this.usedIds},this.className&&(e.className=this.className),e},window.JJMarkdownEditor=r,window.CustomMarkdownParser=t}(jQuery),define("plugins/editor/jquery.jjmarkdown",function(){}),function(e){function H(t,i,s,o){this.id=s,this.target=t,this.tooltip=r,this.elements=elements={target:t},this._id=E+"-"+s,this.timers={img:{}},this.options=i,this.plugins={},this.cache=cache={event:{},target:e(),disabled:n,attr:o,onTooltip:n,lastClass:""},this.rendered=this.destroyed=this.disabled=this.waiting=this.hiddenDuringWait=this.positioning=this.triggering=n}function B(t){return t===r||e.type(t)!=="object"}function j(t){return!(e.isFunction(t)||t&&t.attr||t.length||e.type(t)==="object"&&(t.jquery||t.then))}function F(i){var s,o,u,a;return B(i)?n:(B(i.metadata)&&(i.metadata={type:i.metadata}),"content"in i&&(s=i.content,B(s)||s.jquery||s.done?s=i.content={text:o=j(s)?n:s}:o=s.text,"ajax"in s&&(u=s.ajax,a=u&&u.once!==n,delete s.ajax,s.text=function(t,n){var i=o||e(this).attr(n.options.content.attr)||"Loading...",s=e.ajax(e.extend({},u,{context:n})).then(u.success,r,u.error).then(function(e){return e&&a&&n.set("content.text",e),e},function(e,t,r){if(n.destroyed||e.status===0)return;n.set("content.text",t+": "+r)});return a?i:(n.set("content.text",i),s)}),"title"in s&&(B(s.title)||(s.button=s.title.button,s.title=s.title.text),j(s.title||n)&&(s.title=n))),"position"in i&&B(i.position)&&(i.position={my:i.position,at:i.position}),"show"in i&&B(i.show)&&(i.show=i.show.jquery?{target:i.show}:i.show===t?{ready:t}:{event:i.show}),"hide"in i&&B(i.hide)&&(i.hide=i.hide.jquery?{target:i.hide}:{event:i.hide}),"style"in i&&B(i.style)&&(i.style={classes:i.style}),e.each(w,function(){this.sanitize&&this.sanitize(i)}),i)}function I(e,t){var n=0,r,i=e,s=t.split(".");while(i=i[s[n++]])n<s.length&&(r=i);return[r||e,s.pop()]}function q(e,t){var n,r,i;for(n in this.checks)for(r in this.checks[n])if(i=(new RegExp(r,"i")).exec(e))t.push(i),(n==="builtin"||this.plugins[n])&&this.checks[n][r].apply(this.plugins[n]||this,t)}function W(e){return T.concat("").join(e?"-"+e+" ":" ")}function X(r){if(this.tooltip.hasClass(M))return n;clearTimeout(this.timers.show),clearTimeout(this.timers.hide);var i=e.proxy(function(){this.toggle(t,r)},this);this.options.show.delay>0?this.timers.show=setTimeout(i,this.options.show.delay):i()}function V(t){if(this.tooltip.hasClass(M))return n;var r=e(t.relatedTarget),i=r.closest(N)[0]===this.tooltip[0],s=r[0]===this.options.show.target[0];clearTimeout(this.timers.show),clearTimeout(this.timers.hide);if(this!==r[0]&&this.options.position.target==="mouse"&&i||this.options.hide.fixed&&/mouse(out|leave|move)/.test(t.type)&&(i||s)){try{t.preventDefault(),t.stopImmediatePropagation()}catch(o){}return}var u=e.proxy(function(){this.toggle(n,t)},this);this.options.hide.delay>0?this.timers.hide=setTimeout(u,this.options.hide.delay):u()}function $(t){if(this.tooltip.hasClass(M)||!this.options.hide.inactive)return n;clearTimeout(this.timers.inactive),this.timers.inactive=setTimeout(e.proxy(function(){this.hide(t)},this),this.options.hide.inactive)}function J(e){this.rendered&&this.tooltip[0].offsetWidth>0&&this.reposition(e)}function Q(t,n,r){e(document.body).delegate(t,(n.split?n:n.join(K+" "))+K,function(){var t=m.api[e.attr(this,x)];t&&!t.disabled&&r.apply(t,arguments)})}function G(i,s,o){var u,a,f,l,c,h=e(document.body),p=i[0]===document?h:i,d=i.metadata?i.metadata(o.metadata):r,v=o.metadata.type==="html5"&&d?d[o.metadata.name]:r,g=i.data(o.metadata.name||"qtipopts");try{g=typeof g=="string"?e.parseJSON(g):g}catch(b){}l=e.extend(t,{},m.defaults,o,typeof g=="object"?F(g):r,F(v||d)),a=l.position,l.id=s;if("boolean"==typeof l.content.text){f=i.attr(l.content.attr);if(l.content.attr===n||!f)return n;l.content.text=f}a.container.length||(a.container=h),a.target===n&&(a.target=p),l.show.target===n&&(l.show.target=p),l.show.solo===t&&(l.show.solo=a.container.closest("body")),l.hide.target===n&&(l.hide.target=p),l.position.viewport===t&&(l.position.viewport=a.container),a.container=a.container.eq(0),a.at=new y(a.at,t),a.my=new y(a.my);if(i.data(E))if(l.overwrite)i.qtip("destroy");else if(l.overwrite===n)return n;return i.attr(S,s),l.suppress&&(c=i.attr("title"))&&i.removeAttr("title").attr(D,c).attr("title",""),u=new H(i,l,s,!!f),i.data(E,u),i.one("remove.qtip-"+s+" removeqtip.qtip-"+s,function(){var t;(t=e(this).data(E))&&t.destroy()}),u}var t=!0,n=!1,r=null,i="x",s="y",o="width",u="height",a="top",f="left",l="bottom",c="right",h="center",p="flip",d="flipinvert",v="shift",m,g,y,b,w={},E="qtip",S="data-hasqtip",x="data-qtip-id",T=["ui-widget","ui-tooltip"],N="."+E,C="click dblclick mousedown mouseup mousemove mouseleave mouseenter".split(" "),k=E+"-fixed",L=E+"-default",A=E+"-focus",O=E+"-hover",M=E+"-disabled",_="_replacedByqTip",D="oldtitle",P;BROWSER={ie:function(){var e=3,t=document.createElement("div");while(t.innerHTML="<!--[if gt IE "+ ++e+"]><i></i><![endif]-->")if(!t.getElementsByTagName("i")[0])break;return e>4?e:NaN}(),iOS:parseFloat((""+(/CPU.*OS ([0-9_]{1,5})|(CPU like).*AppleWebKit.*Mobile/i.exec(navigator.userAgent)||[0,""])[1]).replace("undefined","3_2").replace("_",".").replace("_",""))||n},g=H.prototype,g.render=function(r){if(this.rendered||this.destroyed)return this;var i=this,s=this.options,o=this.cache,u=this.elements,a=s.content.text,f=s.content.title,l=s.content.button,c=s.position,h="."+this._id+" ",p=[];return e.attr(this.target[0],"aria-describedby",this._id),this.tooltip=u.tooltip=tooltip=e("<div/>",{id:this._id,"class":[E,L,s.style.classes,E+"-pos-"+s.position.my.abbrev()].join(" "),width:s.style.width||"",height:s.style.height||"",tracking:c.target==="mouse"&&c.adjust.mouse,role:"alert","aria-live":"polite","aria-atomic":n,"aria-describedby":this._id+"-content","aria-hidden":t}).toggleClass(M,this.disabled).attr(x,this.id).data(E,this).appendTo(c.container).append(u.content=e("<div />",{"class":E+"-content",id:this._id+"-content","aria-atomic":t})),this.rendered=-1,this.positioning=t,f&&(this._createTitle(),e.isFunction(f)||p.push(this._updateTitle(f,n))),l&&this._createButton(),e.isFunction(a)||p.push(this._updateContent(a,n)),this.rendered=t,this._setWidget(),e.each(s.events,function(t,n){e.isFunction(n)&&tooltip.bind((t==="toggle"?["tooltipshow","tooltiphide"]:["tooltip"+t]).join(h)+h,n)}),e.each(w,function(e){var t;this.initialize==="render"&&(t=this(i))&&(i.plugins[e]=t)}),this._assignEvents(),e.when.apply(e,p).then(function(){i._trigger("render"),i.positioning=n,!i.hiddenDuringWait&&(s.show.ready||r)&&i.toggle(t,o.event,n),i.hiddenDuringWait=n}),m.api[this.id]=this,this},g.destroy=function(n){function i(){if(this.destroyed)return;this.destroyed=t;var n=this.target,i=n.attr(D);this.rendered&&this.tooltip.stop(1,0).find("*").remove().end().remove(),e.each(this.plugins,function(e){this.destroy&&this.destroy()}),clearTimeout(this.timers.show),clearTimeout(this.timers.hide),this._unassignEvents(),n.removeData(E).removeAttr(x).removeAttr("aria-describedby"),this.options.suppress&&i&&n.attr("title",i).removeAttr(D),this._unbind(n),this.options=this.elements=this.cache=this.timers=this.plugins=this.mouse=r,delete m.api[this.id]}return this.destroyed?this.target:(n!==t&&this.rendered?(tooltip.one("tooltiphidden",e.proxy(i,this)),!this.triggering&&this.hide()):i.call(this),this.target)},b=g.checks={builtin:{"^id$":function(r,i,s,o){var u=s===t?m.nextid:s,a=E+"-"+u;u!==n&&u.length>0&&!e("#"+a).length?(this._id=a,this.rendered&&(this.tooltip[0].id=this._id,this.elements.content[0].id=this._id+"-content",this.elements.title[0].id=this._id+"-title")):r[i]=o},"^prerender":function(e,t,n){n&&!this.rendered&&this.render(this.options.show.ready)},"^content.text$":function(e,t,n){this._updateContent(n)},"^content.attr$":function(e,t,n,r){this.options.content.text===this.target.attr(r)&&this._updateContent(this.target.attr(n))},"^content.title$":function(e,t,n){if(!n)return this._removeTitle();n&&!this.elements.title&&this._createTitle(),this._updateTitle(n)},"^content.button$":function(e,t,n){this._updateButton(n)},"^content.title.(text|button)$":function(e,t,n){this.set("content."+t,n)},"^position.(my|at)$":function(e,t,n){"string"==typeof n&&(e[t]=new y(n,t==="at"))},"^position.container$":function(e,t,n){this.tooltip.appendTo(n)},"^show.ready$":function(e,n,r){r&&(!this.rendered&&this.render(t)||this.toggle(t))},"^style.classes$":function(e,t,n,r){this.tooltip.removeClass(r).addClass(n)},"^style.width|height":function(e,t,n){this.tooltip.css(t,n)},"^style.widget|content.title":function(){this._setWidget()},"^style.def":function(e,t,n){this.tooltip.toggleClass(L,!!n)},"^events.(render|show|move|hide|focus|blur)$":function(t,n,r){tooltip[(e.isFunction(r)?"":"un")+"bind"]("tooltip"+n,r)},"^(show|hide|position).(event|target|fixed|inactive|leave|distance|viewport|adjust)":function(){var e=this.options.position;tooltip.attr("tracking",e.target==="mouse"&&e.adjust.mouse),this._unassignEvents(),this._assignEvents()}}},g.get=function(e){if(this.destroyed)return this;var t=I(this.options,e.toLowerCase()),n=t[0][t[1]];return n.precedance?n.string():n};var R=/^position\.(my|at|adjust|target|container|viewport)|style|content|show\.ready/i,U=/^prerender|show\.ready/i;g.set=function(i,s){if(this.destroyed)return this;var o=this.rendered,u=n,a=this.options,f=this.checks,l;return"string"==typeof i?(l=i,i={},i[l]=s):i=e.extend({},i),e.each(i,function(t,n){if(!o&&!U.test(t)){delete i[t];return}var r=I(a,t.toLowerCase()),s;s=r[0][r[1]],r[0][r[1]]=n&&n.nodeType?e(n):n,u=R.test(t)||u,i[t]=[r[0],r[1],n,s]}),F(a),this.positioning=t,e.each(i,e.proxy(q,this)),this.positioning=n,this.rendered&&this.tooltip[0].offsetWidth>0&&u&&this.reposition(a.position.target==="mouse"?r:this.cache.event),this},g._update=function(i,s,o){var u=this,a=this.cache;return!this.rendered||!i?n:(e.isFunction(i)&&(i=i.call(this.elements.target,a.event,this)||""),e.isFunction(i.then)?(a.waiting=t,i.then(function(e){return a.waiting=n,u._update(e,s,o)},r,function(e){return u._update(e,s,o)})):i===n||!i&&i!==""?n:(i.jquery&&i.length>0?s.children().detach().end().append(i.css({display:"block"})):s.html(i),a.waiting=t,s.imagesLoaded().done(function(e){a.waiting=n,o!==n&&u.rendered&&u.tooltip[0].offsetWidth>0&&u.reposition(a.event,!e.length)}).promise()))},g._updateContent=function(e,t){this._update(e,this.elements.content,t)},g._updateTitle=function(e,t){this._update(e,this.elements.title,t)===n&&this._removeTitle(n)},g._createTitle=function(){var n=this.elements,r=this._id+"-title";n.titlebar&&this._removeTitle(),n.titlebar=e("<div />",{"class":E+"-titlebar "+(this.options.style.widget?W("header"):"")}).append(n.title=e("<div />",{id:r,"class":E+"-title","aria-atomic":t})).insertBefore(n.content).delegate(".qtip-close","mousedown keydown mouseup keyup mouseout",function(t){e(this).toggleClass("ui-state-active ui-state-focus",t.type.substr(-4)==="down")}).delegate(".qtip-close","mouseover mouseout",function(t){e(this).toggleClass("ui-state-hover",t.type==="mouseover")}),this.options.content.button&&this._createButton()},g._removeTitle=function(e){var t=this.elements;t.title&&(t.titlebar.remove(),t.titlebar=t.title=t.button=r,e!==n&&this.reposition())},g.reposition=function(r,i){if(!this.rendered||this.positioning||this.destroyed)return this;this.positioning=t;var s=this.cache,o=this.tooltip,u=this.options.position,p=u.target,d=u.my,v=u.at,m=u.viewport,g=u.container,y=u.adjust,b=y.method.split(" "),E=o.outerWidth(n),S=o.outerHeight(n),x=0,T=0,N=o.css("position"),C={left:0,top:0},k=o[0].offsetWidth>0,L=r&&r.type==="scroll",A=e(window),O=g[0].ownerDocument,M=this.mouse,_,D;if(e.isArray(p)&&p.length===2)v={x:f,y:a},C={left:p[0],top:p[1]};else if(p==="mouse"&&(r&&r.pageX||s.event.pageX))v={x:f,y:a},r=M&&M.pageX&&(y.mouse||!r||!r.pageX)?M:(!r||r.type!=="resize"&&r.type!=="scroll"?r&&r.pageX&&r.type==="mousemove"?r:(!y.mouse||this.options.show.distance)&&s.origin&&s.origin.pageX?s.origin:r:s.event)||r||s.event||M||{},N!=="static"&&(C=g.offset()),O.body.offsetWidth!==(window.innerWidth||O.documentElement.clientWidth)&&(D=e(O.body).offset()),C={left:r.pageX-C.left+(D&&D.left||0),top:r.pageY-C.top+(D&&D.top||0)},y.mouse&&L&&(C.left-=M.scrollX-A.scrollLeft(),C.top-=M.scrollY-A.scrollTop());else{p==="event"&&r&&r.target&&r.type!=="scroll"&&r.type!=="resize"?s.target=e(r.target):p!=="event"&&(s.target=e(p.jquery?p:elements.target)),p=s.target,p=e(p).eq(0);if(p.length===0)return this;p[0]===document||p[0]===window?(x=BROWSER.iOS?window.innerWidth:p.width(),T=BROWSER.iOS?window.innerHeight:p.height(),p[0]===window&&(C={top:(m||p).scrollTop(),left:(m||p).scrollLeft()})):w.imagemap&&p.is("area")?_=w.imagemap(this,p,v,w.viewport?b:n):w.svg&&p[0].ownerSVGElement?_=w.svg(this,p,v,w.viewport?b:n):(x=p.outerWidth(n),T=p.outerHeight(n),C=p.offset()),_&&(x=_.width,T=_.height,D=_.offset,C=_.position),C=this.reposition.offset(p,C,g);if(BROWSER.iOS>3.1&&BROWSER.iOS<4.1||BROWSER.iOS>=4.3&&BROWSER.iOS<4.33||!BROWSER.iOS&&N==="fixed")C.left-=A.scrollLeft(),C.top-=A.scrollTop();if(!_||_&&_.adjustable!==n)C.left+=v.x===c?x:v.x===h?x/2:0,C.top+=v.y===l?T:v.y===h?T/2:0}return C.left+=y.x+(d.x===c?-E:d.x===h?-E/2:0),C.top+=y.y+(d.y===l?-S:d.y===h?-S/2:0),w.viewport?(C.adjusted=w.viewport(this,C,u,x,T,E,S),D&&C.adjusted.left&&(C.left+=D.left),D&&C.adjusted.top&&(C.top+=D.top)):C.adjusted={left:0,top:0},this._trigger("move",[C,m.elem||m],r)?(delete C.adjusted,i===n||!k||isNaN(C.left)||isNaN(C.top)||p==="mouse"||!e.isFunction(u.effect)?o.css(C):e.isFunction(u.effect)&&(u.effect.call(o,this,e.extend({},C)),o.queue(function(t){e(this).css({opacity:"",height:""}),BROWSER.ie&&this.style.removeAttribute("filter"),t()})),this.positioning=n,this):this},g.reposition.offset=function(t,n,r){function c(e,t){n.left+=t*e.scrollLeft(),n.top+=t*e.scrollTop()}if(!r[0])return n;var i=e(t[0].ownerDocument),s=!!BROWSER.ie&&document.compatMode!=="CSS1Compat",o=r[0],u,a,f,l;do(a=e.css(o,"position"))!=="static"&&(a==="fixed"?(f=o.getBoundingClientRect(),c(i,-1)):(f=e(o).position(),f.left+=parseFloat(e.css(o,"borderLeftWidth"))||0,f.top+=parseFloat(e.css(o,"borderTopWidth"))||0),n.left-=f.left+(parseFloat(e.css(o,"marginLeft"))||0),n.top-=f.top+(parseFloat(e.css(o,"marginTop"))||0),!u&&(l=e.css(o,"overflow"))!=="hidden"&&l!=="visible"&&(u=e(o)));while(o=o.offsetParent);return u&&(u[0]!==i[0]||s)&&c(u,1),n};var z=(y=g.reposition.Corner=function(e,t){e=(""+e).replace(/([A-Z])/," $1").replace(/middle/gi,h).toLowerCase(),this.x=(e.match(/left|right/i)||e.match(/center/)||["inherit"])[0].toLowerCase(),this.y=(e.match(/top|bottom|center/i)||["inherit"])[0].toLowerCase(),this.forceY=!!t;var n=e.charAt(0);this.precedance=n==="t"||n==="b"?s:i}).prototype;z.invert=function(e,t){this[e]=this[e]===f?c:this[e]===c?f:t||this[e]},z.string=function(){var e=this.x,t=this.y;return e===t?e:this.precedance===s||this.forceY&&t!=="center"?t+" "+e:e+" "+t},z.abbrev=function(){var e=this.string().split(" ");return e[0].charAt(0)+(e[1]&&e[1].charAt(0)||"")},z.clone=function(){return new y(this.string(),this.forceY)},g.toggle=function(i,s){var o=this.cache,u=this.options,a=this.tooltip;if(s){if(/over|enter/.test(s.type)&&/out|leave/.test(o.event.type)&&u.show.target.add(s.target).length===u.show.target.length&&a.has(s.relatedTarget).length)return this;o.event=e.extend({},s)}this.waiting&&!i&&(this.hiddenDuringWait=t);if(!this.rendered)return i?this.render(1):this;if(this.destroyed||this.disabled)return this;var f=i?"show":"hide",l=this.options[f],c=this.options[i?"hide":"show"],h=this.options.position,p=this.options.content,d=this.tooltip.css("width"),v=this.tooltip[0].offsetWidth>0,m=i||l.target.length===1,g=!s||l.target.length<2||o.target[0]===s.target,y,b,w,S;return(typeof i).search("boolean|number")&&(i=!v),y=!a.is(":animated")&&v===i&&g,b=y?r:!!this._trigger(f,[90]),b!==n&&i&&this.focus(s),!b||y?this:(e.attr(a[0],"aria-hidden",!i),i?(o.origin=e.extend({},this.mouse),e.isFunction(p.text)&&this._updateContent(p.text,n),e.isFunction(p.title)&&this._updateTitle(p.title,n),!P&&h.target==="mouse"&&h.adjust.mouse&&(e(document).bind("mousemove."+E,this._storeMouse),P=t),d||a.css("width",a.outerWidth(n)),this.reposition(s,arguments[2]),d||a.css("width",""),!l.solo||(typeof l.solo=="string"?e(l.solo):e(N,l.solo)).not(a).not(l.target).qtip("hide",e.Event("tooltipsolo"))):(clearTimeout(this.timers.show),delete o.origin,P&&!e(N+'[tracking="true"]:visible',l.solo).not(a).length&&(e(document).unbind("mousemove."+E),P=n),this.blur(s)),after=e.proxy(function(){i?(BROWSER.ie&&a[0].style.removeAttribute("filter"),a.css("overflow",""),"string"==typeof l.autofocus&&e(this.options.show.autofocus,a).focus(),this.options.show.target.trigger("qtip-"+this.id+"-inactive")):a.css({display:"",visibility:"",opacity:"",left:"",top:""}),this._trigger(i?"visible":"hidden")},this),l.effect===n||m===n?(a[f](),after()):e.isFunction(l.effect)?(a.stop(1,1),l.effect.call(a,this),a.queue("fx",function(e){after(),e()})):a.fadeTo(90,i?1:0,after),i&&l.target.trigger("qtip-"+this.id+"-inactive"),this)},g.show=function(e){return this.toggle(t,e)},g.hide=function(e){return this.toggle(n,e)},g.focus=function(t){if(!this.rendered||this.destroyed)return this;var n=e(N),r=this.tooltip,i=parseInt(r[0].style.zIndex,10),s=m.zindex+n.length,o;return r.hasClass(A)||this._trigger("focus",[s],t)&&(i!==s&&(n.each(function(){this.style.zIndex>i&&(this.style.zIndex=this.style.zIndex-1)}),n.filter("."+A).qtip("blur",t)),r.addClass(A)[0].style.zIndex=s),this},g.blur=function(e){return!this.rendered||this.destroyed?this:(this.tooltip.removeClass(A),this._trigger("blur",[this.tooltip.css("zIndex")],e),this)},g.disable=function(e){return this.destroyed?this:("boolean"!=typeof e&&(e=!this.tooltip.hasClass(M)&&!this.disabled),this.rendered&&this.tooltip.toggleClass(M,e).attr("aria-disabled",e),this.disabled=!!e,this)},g.enable=function(){return this.disable(n)},g._createButton=function(){var t=this,r=this.elements,i=r.tooltip,s=this.options.content.button,o=typeof s=="string",u=o?s:"Close tooltip";r.button&&r.button.remove(),s.jquery?r.button=s:r.button=e("<a />",{"class":"qtip-close "+(this.options.style.widget?"":E+"-icon"),title:u,"aria-label":u}).prepend(e("<span />",{"class":"ui-icon ui-icon-close",html:"&times;"})),r.button.appendTo(r.titlebar||i).attr("role","button").click(function(e){return i.hasClass(M)||t.hide(e),n})},g._updateButton=function(e){if(!this.rendered)return n;var t=this.elements.button;e?this._createButton():t.remove()},g._setWidget=function(){var e=this.options.style.widget,t=this.elements,n=t.tooltip,r=n.hasClass(M);n.removeClass(M),M=e?"ui-state-disabled":"qtip-disabled",n.toggleClass(M,r),n.toggleClass("ui-helper-reset "+W(),e).toggleClass(L,this.options.style.def&&!e),t.content&&t.content.toggleClass(W("content"),e),t.titlebar&&t.titlebar.toggleClass(W("header"),e),t.button&&t.button.toggleClass(E+"-icon",!e)},g._storeMouse=function(e){this.mouse={pageX:e.pageX,pageY:e.pageY,type:"mousemove",scrollX:window.pageXOffset||document.body.scrollLeft||document.documentElement.scrollLeft,scrollY:window.pageYOffset||document.body.scrollTop||document.documentElement.scrollTop}},g._bind=function(t,n,r,i,s){var o="."+this._id+(i?"-"+i:"");n.length&&e(t).bind((n.split?n:n.join(o+" "))+o,e.proxy(r,s||this))},g._unbind=function(t,n){e(t).unbind("."+this._id+(n?"-"+n:""))};var K="."+E;e(function(){Q(N,["mouseenter","mouseleave"],function(t){var n=t.type==="mouseenter",r=e(t.currentTarget),i=e(t.relatedTarget||t.target),s=this.options;n?(this.focus(t),r.hasClass(k)&&!r.hasClass(M)&&clearTimeout(this.timers.hide)):s.position.target==="mouse"&&s.hide.event&&s.show.target&&!i.closest(s.show.target[0]).length&&this.hide(t),r.toggleClass(O,n)}),Q("["+x+"]",C,$)}),g._trigger=function(i,s,o){var u=e.Event("tooltip"+i);return u.originalEvent=o&&e.extend({},o)||this.cache.event||r,this.triggering=t,this.tooltip.trigger(u,[this].concat(s||[])),this.triggering=n,!u.isDefaultPrevented()},g._assignEvents=function(){var t=this.options,n=t.position,r=this.tooltip,i=t.show.target,s=t.hide.target,o=n.container,u=n.viewport,a=e(document),f=e(document.body),l=e(window),c=t.show.event?e.trim(""+t.show.event).split(" "):[],h=t.hide.event?e.trim(""+t.hide.event).split(" "):[],p=[];/mouse(out|leave)/i.test(t.hide.event)&&t.hide.leave==="window"&&this._bind(a,["mouseout","blur"],function(e){!/select|option/.test(e.target.nodeName)&&!e.relatedTarget&&this.hide(e)}),t.hide.fixed?s=s.add(r.addClass(k)):/mouse(over|enter)/i.test(t.show.event)&&this._bind(s,"mouseleave",function(){clearTimeout(this.timers.show)}),(""+t.hide.event).indexOf("unfocus")>-1&&this._bind(o.closest("html"),["mousedown","touchstart"],function(t){var n=e(t.target),r=this.rendered&&!this.tooltip.hasClass(M)&&this.tooltip[0].offsetWidth>0,i=n.parents(N).filter(this.tooltip[0]).length>0;n[0]!==this.target[0]&&n[0]!==this.tooltip[0]&&!i&&!this.target.has(n[0]).length&&r&&this.hide(t)}),"number"==typeof t.hide.inactive&&(this._bind(i,"qtip-"+this.id+"-inactive",$),this._bind(s.add(r),m.inactiveEvents,$,"-inactive")),h=e.map(h,function(t){var n=e.inArray(t,c);if(n>-1&&s.add(i).length===s.length){p.push(c.splice(n,1)[0]);return}return t}),this._bind(i,c,X),this._bind(s,h,V),this._bind(i,p,function(e){(this.tooltip[0].offsetWidth>0?V:X).call(this,e)}),this._bind(i.add(r),"mousemove",function(e){if("number"==typeof t.hide.distance){var n=this.cache.origin||{},r=this.options.hide.distance,i=Math.abs;(i(e.pageX-n.pageX)>=r||i(e.pageY-n.pageY)>=r)&&this.hide(e)}this._storeMouse(e)}),n.target==="mouse"&&n.adjust.mouse&&(t.hide.event&&this._bind(i,["mouseenter","mouseleave"],function(e){this.cache.onTarget=e.type==="mouseenter"}),this._bind(a,"mousemove",function(e){this.rendered&&this.cache.onTarget&&!this.tooltip.hasClass(M)&&this.tooltip[0].offsetWidth>0&&this.reposition(e)})),(n.adjust.resize||u.length)&&this._bind(e.event.special.resize?u:l,"resize",J),n.adjust.scroll&&this._bind(l.add(n.container),"scroll",J)},g._unassignEvents=function(){var t=[this.options.show.target[0],this.options.hide.target[0],this.rendered&&this.tooltip[0],this.options.position.container[0],this.options.position.viewport[0],this.options.position.container.closest("html")[0],window,document];this.rendered?this._unbind(e([]).pushStack(e.grep(t,function(e){return typeof e=="object"}))):e(t[0]).unbind("."+this._id+"-create")},m=e.fn.qtip=function(i,s,o){var u=(""+i).toLowerCase(),a=r,f=e.makeArray(arguments).slice(1),l=f[f.length-1],c=this[0]?e.data(this[0],E):r;if(!arguments.length&&c||u==="api")return c;if("string"==typeof i)return this.each(function(){var r=e.data(this,E);if(!r)return t;l&&l.timeStamp&&(r.cache.event=l);if(!s||u!=="option"&&u!=="options")r[u]&&r[u].apply(r,f);else{if(o===undefined&&!e.isPlainObject(s))return a=r.get(s),n;r.set(s,o)}}),a!==r?a:this;if("object"==typeof i||!arguments.length)return c=F(e.extend(t,{},i)),m.bind.call(this,c,l)},m.bind=function(r,i){return this.each(function(s){function h(t){function r(){l.render(typeof t=="object"||o.show.ready),u.show.add(u.hide).unbind(f)}if(l.disabled)return n;l.cache.event=e.extend({},t),l.cache.target=t?e(t.target):[undefined],o.show.delay>0?(clearTimeout(l.timers.show),l.timers.show=setTimeout(r,o.show.delay),a.show!==a.hide&&u.hide.bind(a.hide,function(){clearTimeout(l.timers.show)})):r()}var o,u,a,f,l,c;c=e.isArray(r.id)?r.id[s]:r.id,c=!c||c===n||c.length<1||m.api[c]?m.nextid++:c,f=".qtip-"+c+"-create",l=G(e(this),c,r);if(l===n)return t;m.api[c]=l,o=l.options,e.each(w,function(){this.initialize==="initialize"&&this(l)}),u={show:o.show.target,hide:o.hide.target},a={show:e.trim(""+o.show.event).replace(/ /g,f+" ")+f,hide:e.trim(""+o.hide.event).replace(/ /g,f+" ")+f},/mouse(over|enter)/i.test(a.show)&&!/mouse(out|leave)/i.test(a.hide)&&(a.hide+=" mouseleave"+f),u.show.bind("mousemove"+f,function(e){l._storeMouse(e),l.cache.onTarget=t}),u.show.bind(a.show,h),(o.show.ready||o.prerender)&&h(i)})},m.api={},e.each({attr:function(t,n){if(this.length){var r=this[0],i="title",s=e.data(r,"qtip");if(t===i&&s&&"object"==typeof s&&s.options.suppress)return arguments.length<2?e.attr(r,D):(s&&s.options.content.attr===i&&s.cache.attr&&s.set("content.text",n),this.attr(D,n))}return e.fn["attr"+_].apply(this,arguments)},clone:function(t){var n=e([]),r="title",i=e.fn["clone"+_].apply(this,arguments);return t||i.filter("["+D+"]").attr("title",function(){return e.attr(this,D)}).removeAttr(D),i}},function(n,r){if(!r||e.fn[n+_])return t;var i=e.fn[n+_]=e.fn[n];e.fn[n]=function(){return r.apply(this,arguments)||i.apply(this,arguments)}}),e.ui||(e["cleanData"+_]=e.cleanData,e.cleanData=function(t){for(var n=0,r;(r=e(t[n])).length&&r.attr(x);n++)try{r.triggerHandler("removeqtip")}catch(i){}e["cleanData"+_](t)}),m.version="2.0.1-101",m.nextid=0,m.inactiveEvents=C,m.zindex=15e3,m.defaults={prerender:n,id:n,overwrite:t,suppress:t,content:{text:t,attr:"title",title:n,button:n},position:{my:"top left",at:"bottom right",target:n,container:n,viewport:n,adjust:{x:0,y:0,mouse:t,scroll:t,resize:t,method:"flipinvert flipinvert"},effect:function(t,r,i){e(this).animate(r,{duration:200,queue:n})}},show:{target:n,event:"mouseenter",effect:t,delay:90,solo:n,ready:n,autofocus:n},hide:{target:n,event:"mouseleave",effect:t,delay:0,fixed:n,inactive:n,leave:"window",distance:n},style:{classes:"",widget:n,width:n,height:n,def:t},events:{render:r,move:r,show:r,hide:r,toggle:r,visible:r,hidden:r,focus:r,blur:r}},w.viewport=function(e,t,r,p,m,g,y){function B(e,n,r,i,s,o,u,a,f){var l=t[s],c=S[e],p=x[e],m=r===v,g=-A.offset[s]+L.offset[s]+L["scroll"+s],y=c===s?f:c===o?-f:-f/2,b=p===s?a:p===o?-a:-a/2,w=M&&M.size?M.size[u]||0:0,E=M&&M.corner&&M.corner.precedance===e&&!m?w:0,T=g-l+E,N=l+f-L[u]-g+E,C=y-(S.precedance===e||c===S[n]?b:0)-(p===h?a/2:0);return m?(E=M&&M.corner&&M.corner.precedance===n?w:0,C=(c===s?1:-1)*y-E,t[s]+=T>0?T:N>0?-N:0,t[s]=Math.max(-A.offset[s]+L.offset[s]+(E&&M.corner[e]===h?M.offset:0),l-C,Math.min(Math.max(-A.offset[s]+L.offset[s]+L[u],l+C),t[s]))):(i*=r===d?2:0,T>0&&(c!==s||N>0)?(t[s]-=C+i,P.invert(e,s)):N>0&&(c!==o||T>0)&&(t[s]-=(c===h?-C:C)+i,P.invert(e,o)),t[s]<g&&-t[s]>N&&(t[s]=l,P=S.clone())),t[s]-l}var b=r.target,w=e.elements.tooltip,S=r.my,x=r.at,T=r.adjust,N=T.method.split(" "),C=N[0],k=N[1]||N[0],L=r.viewport,A=r.container,O=e.cache,M=e.plugins.tip,_={left:0,top:0},D,P,H;if(!L.jquery||b[0]===window||b[0]===document.body||T.method==="none")return _;D=w.css("position")==="fixed",L={elem:L,width:L[0]===window?L.width():L.outerWidth(n),height:L[0]===window?L.height():L.outerHeight(n),scrollleft:D?0:L.scrollLeft(),scrolltop:D?0:L.scrollTop(),offset:L.offset()||{left:0,top:0}},A={elem:A,scrollLeft:A.scrollLeft(),scrollTop:A.scrollTop(),offset:A.offset()||{left:0,top:0}};if(C!=="shift"||k!=="shift")P=S.clone();return _={left:C!=="none"?B(i,s,C,T.x,f,c,o,p,g):0,top:k!=="none"?B(s,i,k,T.y,a,l,u,m,y):0},P&&O.lastClass!==(H=E+"-pos-"+P.abbrev())&&w.removeClass(e.cache.lastClass).addClass(e.cache.lastClass=H),_}}(jQuery),function(e,t){var n="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==";e.fn.imagesLoaded=function(r){function c(){var t=e(f),n=e(l);s&&(l.length?s.reject(u,t,n):s.resolve(u)),e.isFunction(r)&&r.call(i,u,t,n)}function h(e){p(e.target,e.type==="error")}function p(t,r){if(t.src===n||e.inArray(t,a)!==-1)return;a.push(t),r?l.push(t):f.push(t),e.data(t,"imagesLoaded",{isBroken:r,src:t.src}),o&&s.notifyWith(e(t),[r,u,e(f),e(l)]),u.length===a.length&&(setTimeout(c),u.unbind(".imagesLoaded",h))}var i=this,s=e.isFunction(e.Deferred)?e.Deferred():0,o=e.isFunction(s.notify),u=i.find("img").add(i.filter("img")),a=[],f=[],l=[];return e.isPlainObject(r)&&e.each(r,function(e,t){e==="callback"?r=t:s&&s[e](t)}),u.length?u.bind("load.imagesLoaded error.imagesLoaded",h).each(function(r,i){var s=i.src,o=e.data(i,"imagesLoaded");if(o&&o.src===s){p(i,o.isBroken);return}if(i.complete&&i.naturalWidth!==t){p(i,i.naturalWidth===0||i.naturalHeight===0);return}if(i.readyState||i.complete)i.src=n,i.src=s}):c(),s?s.promise(i):i}}(jQuery),define("plugins/tooltip/jquery.qtip",function(){}),function(e){e.Zebra_DatePicker=function(t,n){var r={always_show_clear:!1,always_visible:!1,days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],days_abbr:!1,direction:0,disabled_dates:!1,enabled_dates:!1,first_day_of_week:1,format:"Y-m-d",inside:!0,lang_clear_date:"Clear",months:["January","February","March","April","May","June","July","August","September","October","November","December"],months_abbr:!1,offset:[5,-5],pair:!1,readonly_element:!0,select_other_months:!1,show_icon:!0,show_other_months:!0,show_week_number:!1,start_date:!1,view:"days",weekend_days:[0,6],zero_pad:!1,onChange:null,onClear:null,onSelect:null},i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O,M,_,D,P,H,B=this;B.settings={};var j=e(t),F=function(N){N||(B.settings=e.extend({},r,n)),B.settings.readonly_element&&j.attr("readonly","readonly");var M={days:["d","j","D"],months:["F","m","M","n","t"],years:["o","Y","y"]},_=!1,D=!1,F=!1;for(type in M)e.each(M[type],function(e,t){B.settings.format.indexOf(t)>-1&&(type=="days"?_=!0:type=="months"?D=!0:type=="years"&&(F=!0))});_&&D&&F?P=["years","months","days"]:!_&&D&&F?P=["years","months"]:!_&&!D&&F?P=["years"]:!_&&D&&!F?P=["months"]:P=["years","months","days"],e.inArray(B.settings.view,P)==-1&&(B.settings.view=P[P.length-1]),T=[],x=[];var R;for(var U=0;U<2;U++)U==0?R=B.settings.disabled_dates:R=B.settings.enabled_dates,e.isArray(R)&&R.length>0&&e.each(R,function(){var t=this.split(" ");for(var n=0;n<4;n++){t[n]||(t[n]="*"),t[n]=t[n].indexOf(",")>-1?t[n].split(","):new Array(t[n]);for(var r=0;r<t[n].length;r++)if(t[n][r].indexOf("-")>-1){var i=t[n][r].match(/^([0-9]+)\-([0-9]+)/);if(null!=i){for(var s=tt(i[1]);s<=tt(i[2]);s++)e.inArray(s,t[n])==-1&&t[n].push(s+"");t[n].splice(r,1)}}for(r=0;r<t[n].length;r++)t[n][r]=isNaN(tt(t[n][r]))?t[n][r]:tt(t[n][r])}U==0?T.push(t):x.push(t)});var z=new Date,W=B.settings.reference_date?B.settings.reference_date:j.data("zdp_reference_date")&&undefined!=j.data("zdp_reference_date")?j.data("zdp_reference_date"):z,X,V;C=undefined,k=undefined,v=W.getMonth(),h=z.getMonth(),m=W.getFullYear(),p=z.getFullYear(),g=W.getDate(),d=z.getDate();if(B.settings.direction===!0)C=W;else if(B.settings.direction===!1)k=W,O=k.getMonth(),A=k.getFullYear(),L=k.getDate();else if(!e.isArray(B.settings.direction)&&K(B.settings.direction)&&tt(B.settings.direction)>0||e.isArray(B.settings.direction)&&((X=I(B.settings.direction[0]))||B.settings.direction[0]===!0||K(B.settings.direction[0])&&B.settings.direction[0]>0)&&((V=I(B.settings.direction[1]))||B.settings.direction[1]===!1||K(B.settings.direction[1])&&B.settings.direction[1]>=0))X?C=X:C=new Date(m,v,g+(e.isArray(B.settings.direction)?tt(B.settings.direction[0]===!0?0:B.settings.direction[0]):tt(B.settings.direction))),v=C.getMonth(),m=C.getFullYear(),g=C.getDate(),V&&+V>=+C?k=V:!V&&B.settings.direction[1]!==!1&&e.isArray(B.settings.direction)&&(k=new Date(m,v,g+tt(B.settings.direction[1]))),k&&(O=k.getMonth(),A=k.getFullYear(),L=k.getDate());else if(!e.isArray(B.settings.direction)&&K(B.settings.direction)&&tt(B.settings.direction)<0||e.isArray(B.settings.direction)&&(B.settings.direction[0]===!1||K(B.settings.direction[0])&&B.settings.direction[0]<0)&&((X=I(B.settings.direction[1]))||K(B.settings.direction[1])&&B.settings.direction[1]>=0))k=new Date(m,v,g+(e.isArray(B.settings.direction)?tt(B.settings.direction[0]===!1?0:B.settings.direction[0]):tt(B.settings.direction))),O=k.getMonth(),A=k.getFullYear(),L=k.getDate(),X&&+X<+k?C=X:!X&&e.isArray(B.settings.direction)&&(C=new Date(A,O,L-tt(B.settings.direction[1]))),C&&(v=C.getMonth(),m=C.getFullYear(),g=C.getDate());else if(e.isArray(B.settings.disabled_dates)&&B.settings.disabled_dates.length>0)for(var Q in T)if(T[Q][0]=="*"&&T[Q][1]=="*"&&T[Q][2]=="*"&&T[Q][3]=="*"){var Z=[];e.each(x,function(){var e=this;e[2][0]!="*"&&Z.push(parseInt(e[2][0]+(e[1][0]=="*"?"12":et(e[1][0],2))+(e[0][0]=="*"?e[1][0]=="*"?"31":(new Date(e[2][0],e[1][0],0)).getDate():et(e[0][0],2)),10))}),Z.sort();if(Z.length>0){var rt=(Z[0]+"").match(/([0-9]{4})([0-9]{2})([0-9]{2})/);m=parseInt(rt[1],10),v=parseInt(rt[2],10)-1,g=parseInt(rt[3],10)}break}if(J(m,v,g)){while(J(m))C?(m++,v=0):(m--,v=11);while(J(m,v))C?(v++,g=1):(v--,g=(new Date(m,v+1,0)).getDate()),v>11?(m++,v=0,g=1):v<0&&(m--,v=11,g=(new Date(m,v+1,0)).getDate());while(J(m,v,g))C?g++:g--;z=new Date(m,v,g),m=z.getFullYear(),v=z.getMonth(),g=z.getDate()}var it=I(j.val()||(B.settings.start_date?B.settings.start_date:""));it&&J(it.getFullYear(),it.getMonth(),it.getDate())&&j.val(""),nt(it);if(!B.settings.always_visible){if(!N){if(B.settings.show_icon){var st='<button type="button" class="Zebra_DatePicker_Icon'+(j.attr("disabled")=="disabled"?" Zebra_DatePicker_Icon_Disabled":"")+'">Pick a date</button>';o=e(st),B.icon=o,H=o.add(j)}else H=j;H.bind("click",function(e){e.preventDefault(),j.attr("disabled")||(s.css("display")!="none"?B.hide():B.show())}),undefined!=o&&o.insertAfter(t)}if(undefined!=o){o.attr("style",""),B.settings.inside&&o.addClass("Zebra_DatePicker_Icon_Inside");var ot=j.position(),ut=j.outerWidth(!1),at=j.outerHeight(!1),ft=parseInt(j.css("marginTop"),10)||0,lt=parseInt(j.css("marginRight"),10)||0,ct=o.position(),ht=o.outerWidth(!0),pt=o.outerHeight(!0),dt=parseInt(o.css("marginLeft"),10)||0;B.settings.inside?o.css({marginLeft:(ct.left<=ot.left+ut?ot.left+ut-ct.left:0)-(lt+ht)}):o.css({marginLeft:(ct.left<=ot.left+ut?ot.left+ut-ct.left:0)-lt+dt}),o.css({marginRight:-parseInt(o.css("marginLeft"),10)}),o.css({marginTop:(ct.top>ot.top?ot.top-ct.top:ct.top-ot.top)+ft+(at-pt)/2})}}undefined!=o&&(j.is(":visible")?o.show():o.hide());if(N)return;var st='<div class="Zebra_DatePicker"><table class="dp_header"><tr><td class="dp_previous">&#171;</td><td class="dp_caption">&#032;</td><td class="dp_next">&#187;</td></tr></table><table class="dp_daypicker"></table><table class="dp_monthpicker"></table><table class="dp_yearpicker"></table><table class="dp_footer"><tr><td>'+B.settings.lang_clear_date+"</td></tr>"+"</table>"+"</div>";s=e(st),B.datepicker=s,u=e("table.dp_header",s),a=e("table.dp_daypicker",s),f=e("table.dp_monthpicker",s),l=e("table.dp_yearpicker",s),c=e("table.dp_footer",s),B.settings.always_visible?j.attr("disabled")||(B.settings.always_visible.append(s),B.show()):e("body").append(s),s.delegate("td:not(.dp_disabled, .dp_weekend_disabled, .dp_not_in_month, .dp_blocked, .dp_week_number)","mouseover",function(){e(this).addClass("dp_hover")}).delegate("td:not(.dp_disabled, .dp_weekend_disabled, .dp_not_in_month, .dp_blocked, .dp_week_number)","mouseout",function(){e(this).removeClass("dp_hover")}),q(e("td",u)),e(".dp_previous",u).bind("click",function(){e(this).hasClass("dp_blocked")||(i=="months"?b--:i=="years"?b-=12:--y<0&&(y=11,b--),G())}),e(".dp_caption",u).bind("click",function(){i=="days"?i=e.inArray("months",P)>-1?"months":e.inArray("years",P)>-1?"years":"days":i=="months"?i=e.inArray("years",P)>-1?"years":e.inArray("days",P)>-1?"days":"months":i=e.inArray("days",P)>-1?"days":e.inArray("months",P)>-1?"months":"years",G()}),e(".dp_next",u).bind("click",function(){e(this).hasClass("dp_blocked")||(i=="months"?b++:i=="years"?b+=12:++y==12&&(y=0,b++),G())}),a.delegate("td:not(.dp_disabled, .dp_weekend_disabled, .dp_not_in_month, .dp_week_number)","click",function(){B.settings.select_other_months&&null!=(rt=e(this).attr("class").match(/date\_([0-9]{4})(0[1-9]|1[012])(0[1-9]|[12][0-9]|3[01])/))?Y(rt[1],rt[2],rt[3],"days",e(this)):Y(b,y,tt(e(this).html()),"days",e(this))}),f.delegate("td:not(.dp_disabled)","click",function(){var t=e(this).attr("class").match(/dp\_month\_([0-9]+)/);y=tt(t[1]),e.inArray("days",P)==-1?Y(b,y,1,"months",e(this)):(i="days",B.settings.always_visible&&j.val(""),G())}),l.delegate("td:not(.dp_disabled)","click",function(){b=tt(e(this).html()),e.inArray("months",P)==-1?Y(b,1,1,"years",e(this)):(i="months",B.settings.always_visible&&j.val(""),G())}),e("td",c).bind("click",function(e){e.preventDefault(),j.val(""),B.settings.always_visible||(w=null,E=null,S=null,y=null,b=null,c.css("display","none")),B.hide(),B.settings.onClear&&typeof B.settings.onClear=="function"&&B.settings.onClear(j)}),B.settings.always_visible||e(document).bind({mousedown:B._mousedown,keyup:B._keyup}),G()};B.hide=function(){B.settings.always_visible||(V("hide"),s.css("display","none"))},B.show=function(){i=B.settings.view;var t=I(j.val()||(B.settings.start_date?B.settings.start_date:""));t?(E=t.getMonth(),y=t.getMonth(),S=t.getFullYear(),b=t.getFullYear(),w=t.getDate(),J(S,E,w)&&(j.val(""),y=v,b=m)):(y=v,b=m),G();if(!B.settings.always_visible){var n=s.outerWidth(),r=s.outerHeight(),u=(undefined!=o?o.offset().left+o.outerWidth(!0):j.offset().left+j.outerWidth(!0))+B.settings.offset[0],a=(undefined!=o?o.offset().top:j.offset().top)-r+B.settings.offset[1],f=e(window).width(),l=e(window).height(),c=e(window).scrollTop(),h=e(window).scrollLeft();u+n>h+f&&(u=h+f-n),u<h&&(u=h),a+r>c+l&&(a=c+l-r),a<c&&(a=c),s.css({left:u,top:a}),s.fadeIn(it.name=="explorer"&&it.version<9?0:150,"linear"),V()}else s.css("display","block")},B.update=function(t){B.original_direction&&(B.original_direction=B.direction),B.settings=e.extend(B.settings,t),F(!0)};var I=function(t){t+="";if(e.trim(t)!=""){var n=R(B.settings.format),r=["d","D","j","l","N","S","w","F","m","M","n","Y","y"],i=new Array,s=new Array;for(var o=0;o<r.length;o++)(position=n.indexOf(r[o]))>-1&&i.push({character:r[o],position:position});i.sort(function(e,t){return e.position-t.position}),e.each(i,function(e,t){switch(t.character){case"d":s.push("0[1-9]|[12][0-9]|3[01]");break;case"D":s.push("[a-z]{3}");break;case"j":s.push("[1-9]|[12][0-9]|3[01]");break;case"l":s.push("[a-z]+");break;case"N":s.push("[1-7]");break;case"S":s.push("st|nd|rd|th");break;case"w":s.push("[0-6]");break;case"F":s.push("[a-z]+");break;case"m":s.push("0[1-9]|1[012]+");break;case"M":s.push("[a-z]{3}");break;case"n":s.push("[1-9]|1[012]");break;case"Y":s.push("[0-9]{4}");break;case"y":s.push("[0-9]{2}")}});if(s.length){i.reverse(),e.each(i,function(e,t){n=n.replace(t.character,"("+s[s.length-e-1]+")")}),s=new RegExp("^"+n+"$","ig");if(segments=s.exec(t)){var u=new Date,a=u.getDate(),f=u.getMonth()+1,l=u.getFullYear(),c=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],h=["January","February","March","April","May","June","July","August","September","October","November","December"],p,d=!0;i.reverse(),e.each(i,function(t,n){if(!d)return!0;switch(n.character){case"m":case"n":f=tt(segments[t+1]);break;case"d":case"j":a=tt(segments[t+1]);break;case"D":case"l":case"F":case"M":n.character=="D"||n.character=="l"?p=B.settings.days:p=B.settings.months,d=!1,e.each(p,function(e,r){if(d)return!0;if(segments[t+1].toLowerCase()==r.substring(0,n.character=="D"||n.character=="M"?3:r.length).toLowerCase()){switch(n.character){case"D":segments[t+1]=c[e].substring(0,3);break;case"l":segments[t+1]=c[e];break;case"F":segments[t+1]=h[e],f=e+1;break;case"M":segments[t+1]=h[e].substring(0,3),f=e+1}d=!0}});break;case"Y":l=tt(segments[t+1]);break;case"y":l="19"+tt(segments[t+1])}});if(d){var v=new Date(l,(f||1)-1,a||1);if(v.getFullYear()==l&&v.getDate()==(a||1)&&v.getMonth()==(f||1)-1)return v}}}return!1}},q=function(e){it.name=="firefox"?e.css("MozUserSelect","none"):it.name=="explorer"?e.bind("selectstart",function(){return!1}):e.mousedown(function(){return!1})},R=function(e){return e.replace(/([-.,*+?^${}()|[\]\/\\])/g,"\\$1")},U=function(t){var n="",r=t.getDate(),i=t.getDay(),s=B.settings.days[i],o=t.getMonth()+1,u=B.settings.months[o-1],a=t.getFullYear()+"";for(var f=0;f<B.settings.format.length;f++){var l=B.settings.format.charAt(f);switch(l){case"y":a=a.substr(2);case"Y":n+=a;break;case"m":o=et(o,2);case"n":n+=o;break;case"M":u=e.isArray(B.settings.months_abbr)&&undefined!=B.settings.months_abbr[o-1]?B.settings.months_abbr[o-1]:B.settings.months[o-1].substr(0,3);case"F":n+=u;break;case"d":r=et(r,2);case"j":n+=r;break;case"D":s=e.isArray(B.settings.days_abbr)&&undefined!=B.settings.days_abbr[i]?B.settings.days_abbr[i]:B.settings.days[i].substr(0,3);case"l":n+=s;break;case"N":i++;case"w":n+=i;break;case"S":r%10==1&&r!="11"?n+="st":r%10==2&&r!="12"?n+="nd":r%10==3&&r!="13"?n+="rd":n+="th";break;default:n+=l}}return n},z=function(){var t=(new Date(b,y+1,0)).getDate(),n=(new Date(b,y,1)).getDay(),r=(new Date(b,y,0)).getDate(),i=n-B.settings.first_day_of_week;i=i<0?7+i:i,Q(B.settings.months[y]+", "+b);var s="<tr>";B.settings.show_week_number&&(s+="<th>"+B.settings.show_week_number+"</th>");for(var o=0;o<7;o++)s+="<th>"+(e.isArray(B.settings.days_abbr)&&undefined!=B.settings.days_abbr[(B.settings.first_day_of_week+o)%7]?B.settings.days_abbr[(B.settings.first_day_of_week+o)%7]:B.settings.days[(B.settings.first_day_of_week+o)%7].substr(0,2))+"</th>";s+="</tr><tr>";for(var o=0;o<42;o++){o>0&&o%7==0&&(s+="</tr><tr>"),o%7==0&&B.settings.show_week_number&&(s+='<td class="dp_week_number">'+rt(new Date(b,y,o-i+1))+"</td>");var u=o-i+1;if(B.settings.select_other_months&&(o<i||u>t)){var f=new Date(b,y,u),l=f.getFullYear(),c=f.getMonth(),v=f.getDate();f=l+et(c,2)+et(v,2)}if(o<i)s+='<td class="'+(B.settings.select_other_months&&!J(l,c,v)?"dp_not_in_month_selectable date_"+f:"dp_not_in_month")+'">'+(B.settings.select_other_months||B.settings.show_other_months?et(r-i+o+1,B.settings.zero_pad?2:0):"&#032;")+"</td>";else if(u>t)s+='<td class="'+(B.settings.select_other_months&&!J(l,c,v)?"dp_not_in_month_selectable date_"+f:"dp_not_in_month")+'">'+(B.settings.select_other_months||B.settings.show_other_months?et(u-t,B.settings.zero_pad?2:0):"&#032;")+"</td>";else{var m=(B.settings.first_day_of_week+o)%7,g="";J(b,y,u)?(e.inArray(m,B.settings.weekend_days)>-1?g="dp_weekend_disabled":g+=" dp_disabled",y==h&&b==p&&d==u&&(g+=" dp_disabled_current")):(e.inArray(m,B.settings.weekend_days)>-1&&(g="dp_weekend"),y==E&&b==S&&w==u&&(g+=" dp_selected"),y==h&&b==p&&d==u&&(g+=" dp_current")),s+="<td"+(g!=""?' class="'+e.trim(g)+'"':"")+">"+(B.settings.zero_pad?et(u,2):u)+"</td>"}}s+="</tr>",a.html(e(s)),B.settings.always_visible&&(M=e("td:not(.dp_disabled, .dp_weekend_disabled, .dp_not_in_month, .dp_blocked, .dp_week_number)",a)),a.css("display","")},W=function(){Q(b);var t="<tr>";for(var n=0;n<12;n++){n>0&&n%3==0&&(t+="</tr><tr>");var r="dp_month_"+n;J(b,n)?r+=" dp_disabled":E!==!1&&E==n?r+=" dp_selected":h==n&&p==b&&(r+=" dp_current"),t+='<td class="'+e.trim(r)+'">'+(e.isArray(B.settings.months_abbr)&&undefined!=B.settings.months_abbr[n]?B.settings.months_abbr[n]:B.settings.months[n].substr(0,3))+"</td>"}t+="</tr>",f.html(e(t)),B.settings.always_visible&&(_=e("td:not(.dp_disabled)",f)),f.css("display","")},X=function(){Q(b-7+" - "+(b+4));var t="<tr>";for(var n=0;n<12;n++){n>0&&n%3==0&&(t+="</tr><tr>");var r="";J(b-7+n)?r+=" dp_disabled":S&&S==b-7+n?r+=" dp_selected":p==b-7+n&&(r+=" dp_current"),t+="<td"+(e.trim(r)!=""?' class="'+e.trim(r)+'"':"")+">"+(b-7+n)+"</td>"}t+="</tr>",l.html(e(t)),B.settings.always_visible&&(D=e("td:not(.dp_disabled)",l)),l.css("display","")},V=function(t){if(it.name=="explorer"&&it.version==6){if(!N){var n=tt(s.css("zIndex"))-1;N=jQuery("<iframe>",{src:'javascript:document.write("")',scrolling:"no",frameborder:0,allowtransparency:"true",css:{zIndex:n,position:"absolute",top:-1e3,left:-1e3,width:s.outerWidth(),height:s.outerHeight(),filter:"progid:DXImageTransform.Microsoft.Alpha(opacity=0)",display:"none"}}),e("body").append(N)}switch(t){case"hide":N.css("display","none");break;default:var r=s.offset();N.css({top:r.top,left:r.left,display:"block"})}}},J=function(t,n,r){if(undefined!=t&&!isNaN(t)||undefined!=n&&!isNaN(n)||undefined!=r&&!isNaN(r)){if(!!e.isArray(B.settings.direction)||tt(B.settings.direction)!==0){var i=tt(Z(t,typeof n!="undefined"?et(n,2):"",typeof r!="undefined"?et(r,2):"")),s=(i+"").length;if(s==8&&(typeof C!="undefined"&&i<tt(Z(m,et(v,2),et(g,2)))||typeof k!="undefined"&&i>tt(Z(A,et(O,2),et(L,2)))))return!0;if(s==6&&(typeof C!="undefined"&&i<tt(Z(m,et(v,2)))||typeof k!="undefined"&&i>tt(Z(A,et(O,2)))))return!0;if(s==4&&(typeof C!="undefined"&&i<m||typeof k!="undefined"&&i>A))return!0}typeof n!="undefined"&&(n+=1);var o=!1,u=!1;return T&&e.each(T,function(){if(o)return;var i=this;if(e.inArray(t,i[2])>-1||e.inArray("*",i[2])>-1)if(typeof n!="undefined"&&e.inArray(n,i[1])>-1||e.inArray("*",i[1])>-1)if(typeof r!="undefined"&&e.inArray(r,i[0])>-1||e.inArray("*",i[0])>-1){if(i[3]=="*")return o=!0;var s=(new Date(t,n-1,r)).getDay();if(e.inArray(s,i[3])>-1)return o=!0}}),x&&e.each(x,function(){if(u)return;var i=this;if(e.inArray(t,i[2])>-1||e.inArray("*",i[2])>-1){u=!0;if(typeof n!="undefined"){u=!0;if(e.inArray(n,i[1])>-1||e.inArray("*",i[1])>-1){if(typeof r!="undefined"){u=!0;if(e.inArray(r,i[0])>-1||e.inArray("*",i[0])>-1){if(i[3]=="*")return u=!0;var s=(new Date(t,n-1,r)).getDay();if(e.inArray(s,i[3])>-1)return u=!0;u=!1}else u=!1}}else u=!1}}}),x&&u?!1:T&&o?!0:!1}return!1},K=function(e){return(e+"").match(/^\-?[0-9]+$/)?!0:!1},Q=function(t){e(".dp_caption",u).html(t);if(!!e.isArray(B.settings.direction)||tt(B.settings.direction)!==0||P.length==1&&P[0]=="months"){var n=b,r=y,s,o;i=="days"?(o=r-1<0?Z(n-1,"11"):Z(n,et(r-1,2)),s=r+1>11?Z(n+1,"00"):Z(n,et(r+1,2))):i=="months"?(o=n-1,s=n+1):i=="years"&&(o=n-7,s=n+7),P.length==1&&P[0]=="months"||J(o)?(e(".dp_previous",u).addClass("dp_blocked"),e(".dp_previous",u).removeClass("dp_hover")):e(".dp_previous",u).removeClass("dp_blocked"),P.length==1&&P[0]=="months"||J(s)?(e(".dp_next",u).addClass("dp_blocked"),e(".dp_next",u).removeClass("dp_hover")):e(".dp_next",u).removeClass("dp_blocked")}},G=function(){if(a.text()==""||i=="days"){if(a.text()==""){B.settings.always_visible||s.css("left",-1e3),s.css({display:"block"}),z();var t=a.outerWidth(),n=a.outerHeight();u.css("width",t),f.css({width:t,height:n}),l.css({width:t,height:n}),c.css("width",t),s.css({display:"none"})}else z();f.css("display","none"),l.css("display","none")}else i=="months"?(W(),a.css("display","none"),l.css("display","none")):i=="years"&&(X(),a.css("display","none"),f.css("display","none"));if(B.settings.onChange&&typeof B.settings.onChange=="function"&&undefined!=i){var r=i=="days"?a.find("td:not(.dp_disabled, .dp_weekend_disabled, .dp_not_in_month, .dp_blocked)"):i=="months"?f.find("td:not(.dp_disabled, .dp_weekend_disabled, .dp_not_in_month, .dp_blocked)"):l.find("td:not(.dp_disabled, .dp_weekend_disabled, .dp_not_in_month, .dp_blocked)");r.each(function(){if(i=="days")e(this).data("date",b+"-"+et(y+1,2)+"-"+et(tt(e(this).text()),2));else if(i=="months"){var t=e(this).attr("class").match(/dp\_month\_([0-9]+)/);e(this).data("date",b+"-"+et(tt(t[1])+1,2))}else e(this).data("date",tt(e(this).text()))}),B.settings.onChange(i,r,j)}B.settings.always_show_clear||B.settings.always_visible||j.val()!=""?c.css("display",""):c.css("display","none")},Y=function(e,t,n,r,i){var s=new Date(e,t,n,12,0,0),o=r=="days"?M:r=="months"?_:D,u=U(s);j.val(u),B.settings.always_visible&&(E=s.getMonth(),y=s.getMonth(),S=s.getFullYear(),b=s.getFullYear(),w=s.getDate(),o.removeClass("dp_selected"),i.addClass("dp_selected")),B.hide(),nt(s),B.settings.onSelect&&typeof B.settings.onSelect=="function"&&B.settings.onSelect(u,e+"-"+et(t+1,2)+"-"+et(n,2),s,j),j.focus()},Z=function(){var e="";for(var t=0;t<arguments.length;t++)e+=arguments[t]+"";return e},et=function(e,t){e+="";while(e.length<t)e="0"+e;return e},tt=function(e){return parseInt(e,10)},nt=function(t){B.settings.pair&&e.each(B.settings.pair,function(){var n=e(this);if(!n.data||!n.data("Zebra_DatePicker"))n.data("zdp_reference_date",t);else{var r=n.data("Zebra_DatePicker");r.update({reference_date:t,direction:r.settings.direction==0?1:r.settings.direction}),r.settings.always_visible&&r.show()}})},rt=function(e){var t=e.getFullYear(),n=e.getMonth()+1,r=e.getDate(),i,s,o,u,a,f,l,r,c,h;return n<3?(i=t-1,s=(i/4|0)-(i/100|0)+(i/400|0),o=((i-1)/4|0)-((i-1)/100|0)+((i-1)/400|0),u=s-o,a=0,f=r-1+31*(n-1)):(i=t,s=(i/4|0)-(i/100|0)+(i/400|0),o=((i-1)/4|0)-((i-1)/100|0)+((i-1)/400|0),u=s-o,a=u+1,f=r+((153*(n-3)+2)/5|0)+58+u),l=(i+s)%7,r=(f+l-a)%7,c=f+3-r,c<0?h=53-((l-u)/5|0):c>364+u?h=1:h=(c/7|0)+1,h};B._keyup=function(e){return(s.css("display")=="block"||e.which==27)&&B.hide(),!0},B._mousedown=function(t){if(s.css("display")=="block"){if(B.settings.show_icon&&e(t.target).get(0)===o.get(0))return!0;e(t.target).parents().filter(".Zebra_DatePicker").length==0&&B.hide()}return!0};var it={init:function(){this.name=this.searchString(this.dataBrowser)||"",this.version=this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||""},searchString:function(e){for(var t=0;t<e.length;t++){var n=e[t].string,r=e[t].prop;this.versionSearchString=e[t].versionSearch||e[t].identity;if(n){if(n.indexOf(e[t].subString)!=-1)return e[t].identity}else if(r)return e[t].identity}},searchVersion:function(e){var t=e.indexOf(this.versionSearchString);if(t==-1)return;return parseFloat(e.substring(t+this.versionSearchString.length+1))},dataBrowser:[{string:navigator.userAgent,subString:"Firefox",identity:"firefox"},{string:navigator.userAgent,subString:"MSIE",identity:"explorer",versionSearch:"MSIE"}]};it.init(),F()},e.fn.Zebra_DatePicker=function(t){return this.each(function(){if(undefined!=e(this).data("Zebra_DatePicker")){var n=e(this).data("Zebra_DatePicker");undefined!=n.icon&&n.icon.remove(),n.datepicker.remove(),e(document).unbind("keyup",n._keyup),e(document).unbind("mousedown",n._mousedown)}var n=new e.Zebra_DatePicker(this,t);e(this).data("Zebra_DatePicker",n)})}}(jQuery),define("plugins/misc/zebra_datepicker.src",function(){});var __hasProp={}.hasOwnProperty,__extends=function(e,t){function r(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};(function(e,t,n){var r;return r=function(r){var i,s,o,u,a;s=0,o=t.length,u=r.target,i=void 0,a=[];while(s<o)i=t[s],i!==u&&!(i.contains?i.contains(u):i.compareDocumentPosition?i.compareDocumentPosition(u)&16:1)&&e.event.trigger(n,r,i),a.push(s++);return a},e.event.special[n]={setup:function(){var n;n=t.length,n||e.event.add(document,"click",r);if(e.inArray(this,t)<0)return t[n]=this},teardown:function(){var n;n=e.inArray(this,t);if(n>=0){t.splice(n,1);if(!t.length)return jQuery(this).unbind("click",r)}}},e.fn[n]=function(e){return e?this.bind(n,e):this.trigger(n)}})(jQuery,[],"outerClick"),function(e){var t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E;return e.fn._selectRange=function(e,t){return t||(t=e),this.each(function(){var n;if(this.setSelectionRange)return this.focus(),this.setSelectionRange(e,t);if(this.createTextRange)return n=this.createTextRange(),n.collapse(!0),n.moveEnd("character",t),n.moveStart("character",e),n.select()})},i=function(){function a(n,r){var i=this;this.members(),r===void 0&&(r=n,n=e(document)),this.scope=n instanceof jQuery?n:e(n),this.debug&&console.group("EDITOR: add Components"),e.map(r,function(e){return i.debug&&console.log("- "+e),t.call(i,e)}),this.debug&&console.groupEnd(),this.on("change:\\",function(e){return i.updateState(e.fullName,e.value,!1,e.replace)}),this.on("editor.removeComponent",function(e){return i.updateState(e,null,!1,!0)}),this.updateElements()}var t,n,r,i,s,o,u;return a.prototype.members=function(){return this._contentTypes={},this._components={},this._storage={},this._events={},this.debug=!1,this.attr={_namespace:"editor-",type:"type",name:"name",scope:"scope",placeholder:"placeholder",options:"options",handledBy:"handled-by",componentId:"component-id"}},a.prototype.getAttr=function(e){return this.attr[e]?this.attr._namespace+this.attr[e]:!1},a.prototype.on=function(t,n){return this._events[t]||(this._events[t]=e.Callbacks("unique")),this._events[t].add(n)},a.prototype.off=function(e,t){if(!this._events[e])return;return this._events[e].remove(t)},a.prototype.trigger=function(e,t){this.debug&&e.indexOf(!0)&&(console.group("EDITOR: trigger "+e),console.log(t),console.groupEnd());if(this._events[e])return this._events[e].fire(t)},a.prototype.updateState=function(t,n,r,i){var o,u,a,f,l,c,h,p;this.debug&&console.group("EDITOR: update state"),this.debug&&console.log("scope: %s -> %O",t,n),f=!1;if(i){l=t.split("."),u=l.splice(-1)[0],c=this._storage;for(h=0,p=l.length;h<p;h++){o=l[h];if(!c[o])break;c=c[o]}c[u]&&(c[u]=n,f=!0)}f||(a={},a[t]=n,this._storage=e.extend(!0,this._storage,s.call(this,a))),this.debug&&console.log(this._storage),this.debug&&console.groupEnd();if(!r)return this.debug&&console.log(this._storage),this.debug&&console.log(this.getState()),this.trigger("stateUpdate",this._storage)},a.prototype.getState=function(){return this._storage},a.prototype.addElement=function(t){var n,r;return r=t.data(this.getAttr("type")),n=!1,t.attr(this.getAttr("handledBy"))?(this.debug&&console.log("already handled by the editor!"),n):(-1!==e.inArray(r,Object.keys(this._contentTypes))&&(n=o.call(this,r),t.data(this.getAttr("componentId"),n.id),n.init(t),this.debug&&console.log("added element: %s",n.getDataFullName())),n)},a.prototype.removeElement=function(e){var t,n;return this.debug&&console.group("EDITOR: remove component"),n=e.data(this.getAttr("componentId")),t=this.getComponent(n),t?(i.call(this,t),this.debug&&console.groupEnd(),!0):!1},a.prototype.removeElementByScope=function(e){var t,n,r,s;n=this.getComponents(),s=!1,this.debug&&console.group("EDITOR: remove component by scope: %s",e);for(r in n)t=n[r],e===t.getDataFullName()&&(i.call(this,t),s=!0);return this.debug&&console.groupEnd(),s},a.prototype.removeElementsByScope=function(t,n){var r,s,o,u,a;n==null&&(n=[]),o=this.getComponents(),a=!1,n.length||(r=!0),this.debug&&console.group("EDITOR: remove components by scope: %s, names: %O",t,n);for(u in o)s=o[u],t===s.getDataScope()&&(r||-1!==e.inArray(s.getDataName(),n))&&(i.call(this,s),a=!0);return this.debug&&console.groupEnd(),a},a.prototype.updateElements=function(){var t,n,r,s,o=this;n=this.getAttr("handledBy"),this.debug&&console.group("EDITOR: update Elements"),e("[data-"+this.getAttr("type")+"]",this.scope).each(function(t,r){var i;i=e(r);if(!i.attr(n))return o.addElement(i)}),s=this.getComponents();for(r in s)t=s[r],t.elementExists()||i.call(this,t);return this.debug&&console.groupEnd(),null},a.prototype.destroy=function(){var e,t,n,r,s,o;this.debug&&console.log("going to destroy the editor and remove all"),this.off(),s=this._events;for(r in s)e=s[r],e.disable(),e.empty();o=this.getComponents();for(n in o)t=o[n],i.call(this,t);return!1},t=function(t){var r,i=this;if(!window.editorComponents[t])throw new ReferenceError("The Component '"+t+"' doesn't exists. Maybe you forgot to add it to the global 'window.editorComponents' namespace?");return r=new window.editorComponents[t](this),e.map(r.contentTypes,function(e){return n.call(i,e,t)})},o=function(e){var t,n;return n=e.toLowerCase(),t=this._contentTypes[n],t?r.call(this,t):null},r=function(e){var t;return window.editorComponents[e]?(t=new window.editorComponents[e](this),t.name=e.toLowerCase(),this._components[t.id]=t,t):null},i=function(t){var n,r=this;return n=t.getId(),this.debug&&console.log("EDITOR: destroy component %s",t.getDataFullName()),t.destroy(),this._components[n]=null,e.map(t.contentTypes,function(e){if(r._contentTypes[e])return delete r._contentTypes[e]}),delete this._components[n]},a.prototype.getComponent=function(e){return this._components[e]?this._components[e]:null},a.prototype.getComponents=function(){return this._components},a.prototype.getComponentsByClassName=function(e){var t,n,r,i;n=this.getComponents(),i=[];for(r in n)t=n[r],t.name===e&&i.push(t);return i},a.prototype.getComponentsByType=function(t){var n,r,i,s;r=this.getComponents(),s=[];for(i in r)n=r[i],-1!==e.inArray(t.toLowerCase(),n.contentTypes)&&s.push(n);return s},a.prototype.getComponentByName=function(e){var t,n,r;n=this.getComponents();for(r in n){t=n[r];if(t.getDataFullName()===e)return t}return null},n=function(e,t){var n;return n=e.toLowerCase(),this._contentTypes[n]?console.error("Another Component ("+this._contentTypes[n]+') is already handling the content-type "'+e+'"'):this._contentTypes[n]=t},u=function(t){var n,r;for(n in t)r=t[n],typeof r=="object"&&(r=u(r)),(r===null||r===void 0||e.isEmptyObject(t[n]))&&delete t[n];return t},s=function(e){var t,n,r,i,s,o;r={},o=void 0,s=void 0,i=void 0;for(t in e){o=r,s=t.split("."),n=s.pop();while(s.length)i=s.shift(),o=o[i]=o[i]||{};o[n]=e[t]}return r},a}(),r=function(){function n(e){this.editor=e,this.members(),this.id="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t,n;return t=Math.random()*16|0,n=e==="x"?t:t&3|8,n.toString(16)});if(this.constructor.name==="Editable")throw new ReferenceError('"Editable" is an abstract class. Please use one of the subclasses instead.')}var t;return n.prototype.members=function(){return this._prevValue="",this._value="",this._options={},this._dataName="",this._dataFullName="",this.contentTypes=[],this.name=""},n.prototype.init=function(e){var t;this.element=e;if(!this.element){console.log("JJEditabel: no element found.");return}return this.setDataName(e.data(this.editor.getAttr("name"))),this.updateOptions(e.data(this.editor.getAttr("options")),!0),e.attr(this.editor.getAttr("handledBy"),this.id),this._options.elementClasses&&e.addClass(this._options.elementClasses),this.updateValue(!0),t=this.getValue(),t&&this.isValidValue(t)?this.setValueToContent(t):this.setValueToContent(this.getPlaceholder(),!0)},t=function(e){return e=-1!==e.indexOf(".")?e:this.name+"."+e},n.prototype.getNamespacedEventName=function(e){var t,n,r,i,s;r=e.split(" "),t=[];for(i=0,s=r.length;i<s;i++)n=r[i],t.push(""+n+"."+this.id);return t.join(" ")},n.prototype.trigger=function(e,n){return n==null&&(n={}),n.senderId=this.id,e=t.call(this,e),this.editor.trigger(e,n)},n.prototype.triggerScopeEvent=function(t,n){var r,i,s,o,u,a,f;n==null&&(n={}),o=this.getDataScope(),o,e.extend(n,{name:this.getDataName(),scope:o,fullName:this.getDataFullName(),senderId:this.id}),a=o.split("."),a.unshift("\\"),f=[];for(i in a)u=a[i],s=a.slice(0,i).join("."),s&&(s+="."),r=s+u,r=r.replace("\\.",""),f.push(this.editor.trigger(t+":"+r,n));return f},n.prototype.triggerDataEvent=function(e,t){return t==null&&(t={}),t.senderId=this.id,this.editor.trigger(e+":"+this.getDataFullName(),t)},n.prototype.on=function(e,n){e=t.call(this,e),e=this.getNamespacedEventName(e);if(!this.editor)return this.editor.on(e,n)},n.prototype.off=function(e,n){e=t.call(this,e),e=this.getNamespacedEventName(e);if(!this.editor)return this.editor.off(e,n)},n.prototype.getElement=function(){return this.element},n.prototype.elementExists=function(){return this.element.closest("body").length>0},n.prototype.getId=function(){return this.id},n.prototype.setValue=function(e,t,n){var r,i;if(!t&&this._prevValue===e)return;return this._prevValue=this._value,this._value=e,t?this.editor.updateState(this.getDataFullName(),this.getValue(),t,n):(r=this.getPrevValue(),i=this.getValue(),this.triggerScopeEvent("change",{value:i,prevValue:r,replace:n}),this.triggerDataEvent("change",{value:i,prevValue:r,replace:n}),typeof e=="string"&&this.render()),!0},n.prototype.getValue=function(){return this._value},n.prototype.getPrevValue=function(){return this._prevValue},n.prototype.updateValue=function(e){return this.setValue(this.getValueFromContent(),e)},n.prototype.getValueFromContent=function(){return null},n.prototype.setValueToContent=function(e,t){},n.prototype.isValidValue=function(e){return e?!0:!1},n.prototype.getPlaceholder=function(){var e;return e=this.element.data(this.editor.getAttr("placeholder")),e?e:this.getDataName()},n.prototype.getValueOrPlaceholder=function(){var e;return e=this.getValue(),this.debug&&console.log("value or placeholder: "+e),e?e:this.getPlaceholder()},n.prototype.setDataName=function(e){var t,n,r,i,s,o=this;n=function(e){return e.split(".").slice(-1)[0]},r=function(e){var t;return t=".",e[0]==="\\"&&(t="",e=e.slice(1)),e.lastIndexOf(".")!==-1?t+e.slice(0,e.lastIndexOf(".")):""},t=function(){var t,i,s;return s=o.editor.getAttr("scope"),t=function(e){return e[0]==="\\"?e.slice(1):e},i=function(r,o){var u,a;u=r.closest("[data-"+s+"]");if(u.length)return a=u.data(s),o=a+o,a[0]!=="\\"?o=i(u.parent(),"."+o):t(o);if(o[0]==="\\")return t(o);throw new Error("Couldn't find a complete scope for "+n(e)+". Maybe you forgot to add a Backslash at the beginning of your stack? Foo.Bar.FooBar")},i(o.element,r(e))};if(!e)throw new Error("Please add a data-"+this.editor.getAttr("name")+" attribute");return e[0]==="\\"?s=r(e):s=t(),i=n(e),this._dataScope=s,this._dataName=i},n.prototype.getDataScope=function(){return this._dataScope},n.prototype.getDataFullName=function(){return""+this._dataScope+"."+this._dataName},n.prototype.getDataName=function(){return this._dataName},n.prototype.getOptions=function(){return this._options},n.prototype.updateOptions=function(t,n){this._options=e.extend(!0,this._options,t);if(!n)return this.onOptionsUpdate()},n.prototype.onOptionsUpdate=function(){},n.prototype.render=function(){if(this.element)return this.element.html(this.getValueOrPlaceholder())},n.prototype.destroy=function(){return this.element.removeAttr(this.editor.getAttr("handledBy")),this.trigger("editor.removeComponent",this.getDataFullName()),this.editor.off(this.getNamespacedEventName("editor")),this.editor=null},n}(),s=function(t){function n(e){this.editor=e;if(this.constructor.name==="PopoverEditable")throw new ReferenceError('"PopoverEditable" is an abstract class. Please use one of the subclasses instead.');n.__super__.constructor.call(this,e)}return __extends(n,t),n.prototype.members=function(){return n.__super__.members.call(this),this._popoverContent="",this.popoverClasses=[],this.closeOnOuterClick=!0,this.repositionOnChangeTimeout=null},n.prototype.init=function(t){var r=this;if(!t){console.log("JJPopoverEditable: no element found.");return}return this._options.position||(this._options.position={at:"right center",my:"left center",adjust:{x:10,resize:!0,method:"flip shift"}}),this._options.repositionOnChange===void 0&&(this._options.repositionOnChange=!0),n.__super__.init.call(this,t),t.qtip({events:{render:function(e,t){},visible:function(){var t,n;t=e("input, textarea",r.api.tooltip).eq(0);try{t._selectRange(t.val().length)}catch(i){n=i,!1}return r.closeOnOuterClick&&r.api.tooltip.one(r.getNamespacedEventName("outerClick"),function(){return r.close()}),!0},move:function(e,t){return r.onMove(e),!0}},content:{text:function(){return r.getPopoverContent()},title:""},position:this.getPosition(),show:{event:!1},hide:{event:!1,fixed:!0},prerender:!0,style:{classes:this.getPopOverClasses(),tip:{width:20,height:10}}}),this.api=t.qtip("api"),this.editor.on("editor.closepopovers",function(e){if(!e||!e.senderId||e.senderId!==r.id)return r.close()}),t.on(this.getNamespacedEventName("click"),function(e){return e.preventDefault(),r.toggle(),!1}),e(window).on(this.getNamespacedEventName("resize"),function(){return r.updateTooltipDimensions()}),e("body").on(this.getNamespacedEventName("toggle.editor-sidebar"),function(e){if(e.name==="opened"||e.name==="close")return r.autoReposition()})},n.prototype.getValueFromContent=function(){var e,t;return e=this.getPlaceholder(),t=this.element.html(),e===t?"":t},n.prototype.setValueToContent=function(e,t){return this.element.html(e)},n.prototype.onOptionsUpdate=function(){var e,t,n,r,i,s;t=this.getPosition(),i=Object.keys(t),s=[];for(n=0,r=i.length;n<r;n++)e=i[n],s.push(this.element.qtip("option","position."+e,t[e]));return s},n.prototype.getPosition=function(){var t;return t=this._options.position?this._options.position:this.position,t=e.extend(!0,t,{adjust:{screen:!0,resize:!0},viewport:e(window)}),t},n.prototype.open=function(){return this.element.addClass("active"),this.trigger("editor.closepopovers"),this.api.show()},n.prototype.close=function(){return this.element.removeClass("active"),this.api.tooltip.unbind(this.getNamespacedEventName("outerClick")),this.api.hide()},n.prototype.toggle=function(){return this.api.tooltip&&e(this.api.tooltip).hasClass("qtip-focus")?this.close():this.open()},n.prototype.getPopOverClasses=function(){var e;return e=this.getDataFullName().toLowerCase().replace(".","-"),["editor-popover"].concat([this.name,e],this.popoverClasses).join(" ")},n.prototype.getPopoverContent=function(){var e;return e=this.contentTypes.join(", "),this._popoverContent?this._popoverContent:"<input placeholder='"+e+" Editor'>"},n.prototype.setPopoverContent=function(e){return this._popoverContent=e},n.prototype.autoReposition=function(){var e=this;if(!this._options.repositionOnChange)return;return this.repositionOnChangeTimeout&&clearTimeout(this.repositionOnChangeTimeout),this.repositionOnChangeTimeout=setTimeout(function(){return e.debug&&console.log("JJPopoverEditable: Popover reposition"),e.updateTooltipDimensions(),e.element.qtip("reposition")},100),!0},n.prototype.onMove=function(e){},n.prototype.updateTooltipDimensions=function(){},n.prototype.destroy=function(){return this.api&&this.api.tooltip&&this.api.tooltip.unbind(this.getNamespacedEventName("outerClick")),this.element.off(this.getNamespacedEventName("click")),e("body").off(this.getNamespacedEventName("toggle.editor-sidebar")),e(window).on(this.getNamespacedEventName("resize")),n.__super__.destroy.call(this)},n}(r),n=function(e){function t(){return p=t.__super__.constructor.apply(this,arguments),p}return __extends(t,e),t.prototype.members=function(){return t.__super__.members.call(this),this.contentTypes=["inline"]},t.prototype.init=function(e){var n=this;return t.__super__.init.call(this,e),e.attr("contenteditable",!0).on(this.getNamespacedEventName("blur"),function(e){return n.updateValue()}).on(this.getNamespacedEventName("click focus"),function(){return n.trigger("editor.closepopovers")})},t.prototype.getValueFromContent=function(){return this.element.text()},t.prototype.setValueToContent=function(e,t){return this.element.html(e)},t.prototype.destroy=function(){return this.element.removeAttr("contenteditable"),this.element.off(this.getNamespacedEventName("keyup click focus")),t.__super__.destroy.call(this)},t}(r),t=function(t){function n(){return d=n.__super__.constructor.apply(this,arguments),d}return __extends(n,t),n.prototype.members=function(){return n.__super__.members.call(this),this.contentTypes=["date"],this.contentFormattedValue=""},n.prototype.init=function(t){var r,i,s=this;return this.$input=e('<input type="text">'),i=e('<div class="datepicker">'),r=e("<div>").append(this.$input).append(i),this._options.position={my:"top right",at:"top left",adjust:{x:-5,y:-18,method:"flip shift"}},n.__super__.init.call(this,t),this.contentFormattedValue=this.getPlaceholder(),this.$input.Zebra_DatePicker({format:this.getContentFormat(),always_visible:i,onChange:function(){if(s.api)return s.api.reposition()},onClear:function(){return s.contentFormattedValue=s.getPlaceholder(),s.setValue(null),s.render()},onSelect:function(e,t,n){return s.contentFormattedValue=e,s.setValue(t)}}),this.setPopoverContent(r)},n.prototype.updateValue=function(e){return n.__super__.updateValue.call(this,e),this.element.html(this.getValueOrPlaceholder())},n.prototype.render=function(){return this.element.html(this.contentFormattedValue)},n.prototype.setValueToContent=function(e,t){if(this.$input.length&&!t)return this.$input.val(e)},n.prototype.getFormat=function(){return this.getOptions().format||"Y-m-d"},n.prototype.getContentFormat=function(){return this.getOptions().contentFormat||this.getFormat()},n.prototype.destroy=function(){return this.$input.off(this.getNamespacedEventName("keyup")),n.__super__.destroy.call(this)},n}(s),o=function(t){function n(){return v=n.__super__.constructor.apply(this,arguments),v}return __extends(n,t),n.prototype.members=function(){return n.__super__.members.call(this),this.contentTypes=["markdown"],this.markdown=null,this.markdownChangeTimeout=null,this.previewClass="preview",this.popoverClasses=["markdown"]},n.prototype.init=function(t){var r,i,s,o,u,a=this;return n.__super__.init.call(this,t),t.on(this.getNamespacedEventName("focus"),function(){return a.trigger("editor.closepopovers")}),i=e("<textarea>",{"class":this.previewClass}),u=this.getValue(),i.val(u.raw),r=e("<div>",{"class":this.previewClass}),this.setPopoverContent(i),s=!1,o={placeholder:this.getPlaceholder(),preview:t,contentGetter:"val",onChange:function(e){return a.markdownChangeTimeout&&clearTimeout(a.markdownChangeTimeout),a.autoReposition(),a.markdownChangeTimeout=setTimeout(function(){a.setValue(e);if(!e.raw)return a.element.html(a.getPlaceholder())},500)}},e.extend(o,this._options||{}),this.markdown=new JJMarkdownEditor(i,o)},n.prototype.isValidValue=function(e){return e&&e.raw?!0:!1},n.prototype.getValueFromContent=function(){var e,t;return e=this.getPlaceholder(),t=this.element.text(),e!==t?{raw:t}:{raw:""}},n.prototype.destroy=function(){return this.element.off(this.getNamespacedEventName("focus")),this.markdown.cleanup(),this.markdown=null,n.__super__.destroy.call(this)},n}(s),h=function(t){function n(){return m=n.__super__.constructor.apply(this,arguments),m}return __extends(n,t),n.prototype.members=function(){return n.__super__.members.call(this),this.contentTypes=["markdown-split"],this.previewClass="preview split"},n.prototype.init=function(e){return this._options.position={my:"top left",at:"top left",type:"fixed",target:[0,0],adjust:{x:0,y:0,method:"none"}},n.__super__.init.call(this,e)},n.prototype.open=function(){return this.trigger("editor.open-split-markdown"),this.updateTooltipDimensions(),n.__super__.open.call(this)},n.prototype.close=function(){return this.trigger("editor.close-split-markdown"),n.__super__.close.call(this)},n.prototype.updateTooltipDimensions=function(t){var n;return n=this.element.offset(),this.api.set("style.height",e(window).height()+top),this.api.set("style.width",n.left-10),!0},n}(o),a=function(t){function n(){return g=n.__super__.constructor.apply(this,arguments),g}return __extends(n,t),n.prototype.members=function(){return n.__super__.members.call(this),this.contentTypes=["select"],this.popoverClasses=["selectable"],this.contentSeperator=", ",this._source={}},n.prototype.init=function(t){return this._options.position||(this._options.position={my:"top left",at:"bottom left",adjust:{x:0,y:0,method:"flip shift"}}),this._source=t.data(this.editor.attr._namespace+"source")||{},n.__super__.init.call(this,t),this.$set=e('<div class="selectable-set">'),this.setPopoverContent(this.$set),this.setSource(this._source)},n.prototype.onElementChange=function(e,t,n,r){return!0},n.prototype.createPopupContent=function(){var t,n,r,i,s,o,u,a,f=this;this.$set.empty(),a=this.getSource();for(r in a)o=a[r],i=o.id||o.ID,u=o.title||o.Title,s=this.getDataName().toLowerCase()+"-item-"+i,n=e('<label class="selectable-item" for="'+s+'">'+u+"<label>"),t=e('<input type="checkbox" name="'+this.getDataName()+'" value="'+i+'" id="'+s+'">'),-1!==this.getValueIndex(i)&&t.prop("checked",!0),t.on(this.getNamespacedEventName("change"),function(t){var n,r,s,o,u;return u=f.getValue(),n=e(t.target),i=n.val(),isNaN(i)||(i=parseInt(i,10)),s=f.getValueIndex(i),o=n.prop("checked"),r=!1,!1===f.onElementChange(t,n,u,i)?(t.preventDefault(),n.prop("checked",!o),!1):(n.is(":checked")?-1===s&&(u.push(i),r=!0):-1!==s&&(u.splice(s,1),r=!0),r&&f.setValue(u),!0)}),this.$set.append(n.prepend(t));return!0},n.prototype.onOptionsUpdate=function(){this._options.source&&this.setSource(this._options.source);if(this._options.contentSeperator)return this.contentSeperator=this._options.contentSeperator},n.prototype.getSeperator=function(){return this.contentSeperator},n.prototype.getSource=function(){return this._source},n.prototype.setSource=function(e,t){return this._source=e,this.cleanupValue(t),this.createPopupContent()},n.prototype.getValue=function(){return n.__super__.getValue.call(this).slice()},n.prototype.getPrevValue=function(){return n.__super__.getPrevValue.call(this).slice()},n.prototype.getValueIndex=function(t){return e.inArray(t,this.getValue())},n.prototype.isValidValue=function(e){return e&&e.length?!0:!1},n.prototype.getValueFromContent=function(){var t,n,r,i,s,o;i=this.element.text().split(this.getSeperator()),s=[],o=this.getSource();for(t in o)n=o[t],r=n.title||n.Title,-1!==e.inArray(r,i)&&s.push(n.id);return s},n.prototype.cleanupValue=function(e){var t,n,r,i,s,o,u,a;u=this.getValue();for(n in u){o=u[n],t=!1,a=this.getSource();for(i in a)s=a[i],r=s.id||s.ID,o===r&&(t=!0);t||u.splice(n,1)}return this.setValue(u,e)},n.prototype.setValue=function(e,t,r){return r==null&&(r=!0),n.__super__.setValue.call(this,e,t,r),this.render()},n.prototype.setValueToContent=function(t,n){var r,i,s,o,u,a,f;a=[];if(t){f=this.getSource();for(i in f)o=f[i],s=o.id||o.ID,r=!1,-1!==e.inArray(s,t)&&(u=o.title||o.Title,a.push(u),r=!0),this.updatePopoverContent(u,s,r);return this.updateContent(a)}},n.prototype.updatePopoverContent=function(e,t,n){var r;if(this.$set)return r=this.$set.find("#"+this.getDataName().toLowerCase()+"-item-"+t),r.prop("checked",n)},n.prototype.updateContent=function(e){return this.element.html(e.join(this.getSeperator()))},n.prototype.render=function(){var e;return e=this.getValue(),e&&this.isValidValue(e)?this.setValueToContent(e):this.element.html(this.getPlaceholder())},n}(s),c=function(e){function t(){return y=t.__super__.constructor.apply(this,arguments),y}return __extends(t,e),t.prototype.members=function(){return t.__super__.members.call(this),this.contentTypes=["select-person"]},t.prototype.updateContent=function(e){var t;return t=e?" &amp; ":"",this.element.html(t+e.join(this.getSeperator()))},t}(a),l=function(e){function t(){return b=t.__super__.constructor.apply(this,arguments),b}return __extends(t,e),t.prototype.members=function(){return t.__super__.members.call(this),this.contentTypes=["select-list"]},t.prototype.init=function(e){return this._options.position||(this._options.position={my:"top right",at:"top left",adjust:{x:-10,y:-16,method:"flip shift"}}),t.__super__.init.call(this,e)},t.prototype.updateContent=function(e){var t,n,r,i;t="";for(r=0,i=e.length;r<i;r++)n=e[r],t+="<li>"+n+"</li>";return this.element.html(t)},t.prototype.render=function(){var e;return e=this.getValue(),e&&this.isValidValue(e)?this.setValueToContent(e):this.element.html("<li>"+this.getPlaceholder()+"</li>")},t}(a),f=function(e){function t(){return w=t.__super__.constructor.apply(this,arguments),w}return __extends(t,e),t.prototype.members=function(){return t.__super__.members.call(this),this.contentTypes=["select-list-confirm"],this._options={confirm:"Are you sure to do this?"}},t.prototype.init=function(e){var n,r;return r=e.data(this.editor.attr._namespace+"confirm"),r&&(n={confirm:r},this.updateOptions(n,!0)),t.__super__.init.call(this,e)},t.prototype.getConfirm=function(){return this.getOptions().confirm},t.prototype.onElementChange=function(e,t,n,r){return confirm(this.getConfirm())},t}(l),u=function(t){function n(){return E=n.__super__.constructor.apply(this,arguments),E}return __extends(n,t),n.prototype.members=function(){return n.__super__.members.call(this),this.contentTypes=["modal"],this.inputs=[],this.buttons=[]},n.prototype.init=function(e){return n.__super__.init.call(this,e),this._options={fields:{Foo:{placeholder:"Bar"}},buttons:{Submit:{type:"submit"},Cancel:{type:"cancel"}}},this.setFields(e.data(this.editor.attr._namespace+"fields")),this.setButtons(e.data(this.editor.attr._namespace+"buttons"))},n.prototype.getForm=function(){var t,n,r=this;return n=e("<form>").submit(function(e){return e.preventDefault(),r.submit()}),e.each(this.inputs,function(e,t){return n.append(t)}),t=e('<div class="buttons">'),e.each(this.buttons,function(e,n){return t.append(n)}),n.append(t)},n.prototype.getFields=function(){return this.getOptions().fields},n.prototype.setFields=function(t){var n,r,i,s;t&&(this._options.fields=t);if(this._options.fields){s=this._options.fields;for(i in s)r=s[i],r.type||(r.type="text"),r.placeholder||(r.placeholder=i),n=e('<input type="'+r.type+'"name="'+i+'" placeholder="'+r.placeholder+'"/>'),this.inputs.push(n)}return this.setPopoverContent()},n.prototype.getButtons=function(){return this.getOptions().buttons},n.prototype.setButtons=function(t){var n,r,i,s;t&&(this._options.buttons=t);if(this._options.buttons){s=this._options.buttons;for(i in s){r=s[i];if(r.type==="submit"||"cancel")n=e('<button type="'+r.type+'">'+i+"</button>"),r.type==="submit"?this._addSubmitEvent(n):r.type==="cancel"&&this._addCancelEvent(n),this.buttons.push(n)}}return this.setPopoverContent()},n.prototype._addSubmitEvent=function(e,t){var n=this;return t==null&&(t="click"),e.on(t,function(e){return e.preventDefault(),n.submit(),!1})},n.prototype.submit=function(){var t,n=this;return t={},e.each(this.inputs,function(n,r){var i;return i=e(r),t[i.attr("name")]=i.val()}),this.setValue(t),this.close()},n.prototype._addCancelEvent=function(e){var t=this;return e.on("click",function(e){return e.preventDefault(),t.close(),!1})},n.prototype.close=function(){return n.__super__.close.call(this),e("input, textarea",this.api.tooltip).val("")},n.prototype.getPopoverButtons=function(){return console.log($buttons),$buttons},n.prototype.setPopoverContent=function(e){return e||(e=this.getForm()),n.__super__.setPopoverContent.call(this,e)},n.prototype.setValue=function(e,t){if(!t)return this.triggerDataEvent("submit",e)},n}(s),window.JJEditor=i,window.editorComponents={},window.editorComponents.JJEditable=r,window.editorComponents.JJPopoverEditable=s,window.editorComponents.InlineEditable=n,window.editorComponents.DateEditable=t,window.editorComponents.MarkdownEditable=o,window.editorComponents.SplitMarkdownEditable=h,window.editorComponents.SelectEditable=a,window.editorComponents.SelectListEditable=l,window.editorComponents.SelectPersonEditable=c,window.editorComponents.SelectListConfirmEditable=f,window.editorComponents.ModalEditable=u}(jQuery),define("plugins/editor/jquery.editor-popover",function(){}),define("modules/UserSidebar",["app","modules/DataRetrieval","modules/RecycleBin","modules/Website","plugins/misc/spin.min","plugins/misc/jquery.list","plugins/editor/jquery.jjdropzone","plugins/editor/jquery.jjmarkdown","plugins/editor/jquery.editor-popover"],function(e,t,n,r,i){var s;return s=e.module(),s.config={},s.config.spinner={lines:13,length:6,width:2,radius:7,corners:1,rotate:0,direction:1,color:"#fff",speed:1,trail:70,shadow:!1,hwaccel:!1,className:"spinner",zIndex:2e9,top:"auto",left:"auto"},s.construct=function(){var e;return e=new s.Views.Main,e.$el.appendTo("#editor-sidebar"),e.render(),e},s.setPendingReq=function(e){var t=this;return this.pendingRequest&&this.pendingRequest.reject(),this.pendingRequest=e,this.pendingRequest.always(function(){return t.pendingRequest=null})},s.Views.Main=Backbone.View.extend({tagName:"div",className:"editor-sidebar",template:"security/editor-sidebar",availableSubViews:{user:"UserSidebar",gallery:"GallerySidebar"},subView:null,events:{"click nav a":"blurAfterClick","click [data-editor-sidebar-content]":"toggleSidebarCheck","click .icon-switch":"switchEditorView","click .icon-publish":"clickPublish"},initialize:function(){return Backbone.Events.on("projectEdited",this.handlePublishActive,this)},cleanup:function(){return Backbone.Events.off("projectEdited",this.handlePublishActive)},blurAfterClick:function(e){return $(e.target).blur()},switchEditorView:function(t){return t.preventDefault(),e.isEditor&&e.ProjectEditor.toggleView(),!1},clickPublish:function(t){var n,r,i;return t.preventDefault(),n=$(t.target),e.isEditor&&(i=e.ProjectEditor.model.get("IsPublished")?!1:!0,r=i?"add":"remove",n.addClass("publishing"),e.ProjectEditor.model.rejectAndSave("IsPublished",i).always(function(){return n.removeClass("publishing")}),n[r+"Class"]("published")),!1},handlePublishActive:function(e){var t;return t=e.get("IsPublished")?"add":"remove",this.$el.find(".icon-publish")[t+"Class"]("published")},toggleSidebarCheck:function(e){var t,n,r;e.preventDefault(),t=$(e.target),r=t.data("editor-sidebar-content"),n=this.getSubviewName(r);if(this.subViewName===n){if(!this.subView.__manager__.hasRendered)return!1;t.toggleClass("active"),this.toggle()}else n&&(t.parents("nav").find(".active").removeClass("active").end().end().addClass("active"),this.setSubview(n,!0),this.open(!0));return!1},toggleEditorClass:function(e){var t;return t=e?"addClass":"removeClass",t==="removeClass"&&this.$el.hasClass("is-editor")&&(this.close(),this.setSubview()),this.$el[t]("is-editor")},triggerSubview:function(e){var t,n;t=Array.prototype.slice.call(arguments),n="on"+e.charAt(0).toUpperCase()+e.slice(1);if(this.subView&&this.subView[n])return this.subView[n].apply(this.subView,t.slice(1))},getSubviewName:function(e){return this.availableSubViews[e]?this.availableSubViews[e]:!1},setSubview:function(e,t){if(!e)return this.subView&&this.subView.remove(),this.subView=null,this.subViewName=null;this.subViewName=e,this.subView=new s.Views[e],this.subView.parentView=this,this.startSpinner(),this.setView("#editor-sidebar-container",this.subView);if(t)return this.subView.render()},open:function(e){var t=this;return this.$el.addClass("open"),this.$body.addClass("editor-sidebar-open").trigger({type:"toggle.editor-sidebar",name:"open"}),setTimeout(function(){return t.triggerSubview("opened",e),t.$el.addClass("opened"),t.$body.trigger({type:"toggle.editor-sidebar",name:"opened"})},300)},close:function(){var e=this;return this.triggerSubview("close"),this.$body.removeClass("editor-sidebar-open").trigger({type:"toggle.editor-sidebar",name:"closing"}),this.$el.removeClass("open").find("nav .active").removeClass("active"),setTimeout(function(){return e.$el.removeClass("opened"),e.$body.trigger({type:"toggle.editor-sidebar",name:"close"})},300)},toggle:function(){return this.$el.hasClass("open")?this.close():this.open()},initSpinner:function(){return this.spinner={inst:new i(s.config.spinner),target:$("#editor-sidebar-spinner",this.$el)[0]}},startSpinner:function(){var e;return e=this.spinner,$(e.target).addClass("active"),e.inst.spin(e.target)},stopSpinner:function(){var e;return e=this.spinner,$(e.target).removeClass("active"),e.inst.stop()},afterRender:function(){return this.$body=$("body"),this.initSpinner()}}),s.Views.SidebarContainer=Backbone.View.extend({$sidebarHeader:null,$sidebarContent:null,parentView:null,className:"editor-sidebar-container",columnsPrefix:"columns-",galleryData:{},initSidebar:function(){var e=this;return this.$sidebarHeader=$("> header",this.$el),this.$sidebarContent=$("section.editor-sidebar-content",this.$el),this.setSidebarHeight(),$.addOnWindowResize("editor.sidebar.height",function(){return e.setSidebarHeight(),e._setColumnCount()})},hideSpinner:function(){if(this.parentView)return this.parentView.stopSpinner()},_cleanup:function(){return this.uploadZone&&this.uploadZone.cleanup(),$.removeOnWindowResize("editor.sidebar.height")},setSidebarHeight:function(){return this.$sidebarContent.css({height:$(window).height()-this.$sidebarHeader.outerHeight()})},_getColumnsCount:function(){return this.$sidebarContent.data("columns")},_setColumnCount:function(){var e,t,n;if(!this.$sidebarContent)return;n=parseInt(this.$sidebarContent.width(),10),t=this._getColumnsCount(),e=Math.floor(n/75);if(e)return this.$sidebarContent.removeClass(this.columnsPrefix+t).addClass(this.columnsPrefix+e).data("columns",e)},_afterRender:function(){var e=this;this.hideSpinner(),this.initSidebar(),_.once(function(){e.$sidebarContent=$(".editor-sidebar-content",e.$el);if(e.isOpen)return e._setColumnCount()})(),this.isOpen&&this._setColumnCount();if(this.$sidebarContent.hasClass("scrollbox"))return this.$sidebarContent.list({headerSelector:"header"}),$(".ui-list",this.$sidebarContent).scroll(function(t){return e.onContentScroll()})},onContentScroll:function(){},_onOpened:function(e){var t,n=this;return t=e?0:300,this.isOpen=!0,setTimeout(function(){return n._setColumnCount()},t)},onOpened:function(e){return this._onOpened(e)},_onClose:function(){var e,t=this;return this.isOpen=!1,e=this._getColumnsCount(),setTimeout(function(){if(t.$sidebarContent)return t.$sidebarContent.removeClass(t.columnsPrefix+e)},300)},onClose:function(){return this._onClose()}}),s.Views.UserSidebar=s.Views.SidebarContainer.extend({tagName:"div",template:"security/editor-sidebar-user",projectItemViews:[],events:{"submit form.user-settings":"changeUserCredentials","click a.new-project":"closeSidebar"},initialize:function(){return Backbone.Events.on("new:project",this.updateProjectList,this)},cleanup:function(){return Backbone.Events.off("new:project",this.updateProjectList),this._cleanup(),this.metaEditor.destroy()},render:function(n,r){var i,o;return r==null&&(r={}),i=this.async(),o=t.forUserGallery("Person").done(function(t){return r.PersonImages=t.images.Person,r.Person=e.CurrentMemberPerson.toJSON(),r.Member=e.CurrentMember,_.each(r.PersonImages,function(e){if(r.Person.Image&&e.id===r.Person.Image.ID)return r.CurrentImage=e}),i(n(r))}),s.setPendingReq(o)},updateProjectList:function(e){var t=this;return _.each(this.projectItemViews,function(e){return e.remove()}),this.projectItems=[],this.initProjectList()},initProjectList:function(){var t,n,r,i,o,u=this;t=[],o=["Projects","Exhibitions","Excursions","Workshops"];for(r=0,i=o.length;r<i;r++)n=o[r],t=t.concat(e.CurrentMemberPerson.get(n).toJSON());return t=_.sortBy(t,function(e){return e.Title.toLowerCase()}),_.each(t.reverse(),function(e){var t;if(e.EditableByMember)return t=new s.Views.ProjectItem({model:e}),u.projectItemViews.push(t),u.insertView(".editor-sidebar-content .project-list",t),t.render()})},initPersonImageList:function(){var t,n=this;return t=_.sortBy(e.Cache.UserGallery.images.Person,"id"),_.each(t,function(e){return n.insertPersonImage(e)})},insertPersonImage:function(e){var t,n;return t=this.uploadZone,n=new s.Views.PersonImage({model:e}),this.insertView(".editor-sidebar-content .image-list",n),n.afterRender=function(){return this._afterRender(),t.setAsDraggable(this.$el.find("[data-id]"))},n.render()},initDropzone:function(){var t=this;return this.uploadZone=new JJSingleImageUploadZone("#current-person-image",{url:e.Config.PersonImageUrl,getFromCache:function(t){var n;return n=null,_.each(e.Cache.UserGallery.images.Person,function(e){if(e.id===t)return n=e}),console.log(n),[n]},responseHandler:function(n){var r,i,s;i=n[0],i.UploadedToClass&&(e.updateGalleryCache(n),t.insertPersonImage(i)),console.log(i);if(r=i.id){t.uploadZone.$dropzone.html('<img src="'+i.url+'">'),s=e.CurrentMemberPerson.get("Image");if(r!==s&&(!s||r!==s.id))return e.CurrentMemberPerson.rejectAndSave("Image",r)}}})},onContentScroll:function(){var e;return e=this.metaEditor.getComponentByName("CurrentPerson.Bio"),e.api.reposition()},initMetaEditor:function(){var t=this;return this.metaEditor=new JJEditor($(".meta-info"),["InlineEditable","MarkdownEditable","ModalEditable"]),this.metaEditor.on("stateUpdate",function(t){var n,r,i,s;i=!1,s=t.CurrentPerson;for(n in s)r=s[n],n==="Bio"&&r&&(r=r.raw),r===null&&(r=""),e.CurrentMemberPerson.get(n)!==r&&(i=!0,e.CurrentMemberPerson.set(n,r));if(i)return e.CurrentMemberPerson.rejectAndSave()}),this.metaEditor.on("submit:CurrentPerson.Website",function(n){var r,i;if(n.Title&&n.Link)return r=JJRestApi.Model("Website"),i=new r({Title:n.Title,Link:n.Link}),e.CurrentMemberPerson.get("Websites").add(i),t.addWebsiteView(i,!0),e.CurrentMemberPerson.save()})},addWebsiteView:function(e,t){var n;return n=new r.Views.ListView({model:e}),this.insertView(".websites",n),t&&n.render(),!0},beforeRender:function(){var t=this;return e.CurrentMemberPerson.get("Websites").each(function(e){return t.addWebsiteView(e)})},afterRender:function(){return this._afterRender(),this.initDropzone(),this.initPersonImageList(),this.initProjectList(),this.initMetaEditor()},changeUserCredentials:function(t){var n,r,i,s=this;return t.preventDefault(),n=$(t.target),r=n.serialize(),i=$.ajax({url:e.Config.ChangeCredentialsUrl,data:r,type:"POST"}),i.done(function(t){var r;t.email&&(n.find('[name="email"]').val(t.email),s.$el.find(".editor-header .email").text(t.email),e.CurrentMember.Email=t.email);if(r=t.msg)return s.showMessageAt(r.text,n.parent(),r.type)}),!1},closeSidebar:function(e){return this.__manager__.parent.close()}}),s.Views.GallerySidebar=s.Views.SidebarContainer.extend({tagName:"div",template:"security/editor-sidebar-gallery",isGallery:!0,$sidebarContent:null,initialize:function(){return Backbone.Events.on("DocImageAdded",this.handleUploadedImageData,this)},cleanup:function(){return this._cleanup(),this.$el.parent().off("dragenter"),Backbone.Events.off("DocImageAdded",this.handleUploadedImageData)},initImageList:function(){var t=this;return _.each(e.Cache.UserGallery.images.Projects,function(e){return _.each(e.Images,function(n){return t.insertGalleryImage(e.FilterID,n)})})},insertGalleryImage:function(e,t){var n;return n=new s.Views.GalleryImage({model:t}),this.insertView('[data-filter-id="'+e+'"] .image-list',n),n.render()},initFilter:function(){var e=this;this.$filter||(this.$filter=$("select.filter",this.$el));if(this.$filter.length)return this.$filter.on("change",function(t){var n,r;r=$(t.target).blur().val();if(!r)return e.$sidebarContent.removeClass("filtered").find(".active").removeClass("active");n=$("[data-filter-id="+r+"]",e.$sidebarContent);if(n.length)return e.$sidebarContent.addClass("filtered"),n.addClass("active").siblings().removeClass("active"),n.prev("header").addClass("active")})},initDropzone:function(){var t=this;return this.uploadZone=new JJSimpleImagesUploadZone("#uploadzone",{url:e.Config.DocImageUrl,additionalData:{projectId:e.ProjectEditor.model.id,projectClass:e.ProjectEditor.model.get("ClassName")},responseHandler:function(n){return e.updateGalleryCache(n),t.handleUploadedImageData(n)}}),this.$el.parent().on("dragenter",function(e){if(!$("body").hasClass("drag-inline"))return t.uploadZone.$dropzone.addClass("dragover"),$.fireGlobalDragEvent("dragstart",e.target,"file")})},handleUploadedImageData:function(t){var n=this;return console.log(t),_.each(t,function(t){return n.insertGalleryImage(t.FilterID,t),e.ProjectEditor.model.get("Images").add(t.id)})},render:function(n,r){var i,o,u=this;return r==null&&(r={}),i=this.async(),o=t.forUserGallery("Projects").done(function(t){var s,o,u,a;return a=_.sortBy(t.images.Projects,function(e){return e.Title.toLowerCase()}),s=e.ProjectEditor.model,o=s.get("ClassName")+"-"+s.id,u=0,_.each(a,function(e,t){if(e.FilterID===o)return u=t}),u&&a.splice(0,0,a.splice(u,1)[0]),r.Projects=a,i(n(r))}),s.setPendingReq(o)},afterRender:function(){return this._afterRender(),this.initFilter(),this.initDropzone(),this.initImageList()}}),s.Views.ListItem=Backbone.View.extend({tagName:"li",_cleanup:function(){return this.$el.data("recyclable",null),this.$el.off("dragstart dragend")},cleanup:function(){return this._cleanup()},serialize:function(){return this.model},insert:function(e,t){return $(e).prepend(t)},_afterRender:function(){return n.setViewAsRecyclable(this)},afterRender:function(){return this._afterRender()}}),s.Views.GalleryImage=s.Views.ListItem.extend({template:"security/editor-sidebar-gallery-image",className:"DocImage",cleanup:function(){return this.$el.find("[data-md-tag]").trigger("dragend"),this._cleanup()},afterRender:function(){var t,n=this;return this._afterRender(),this.$img=this.$el.find("[data-md-tag]"),t=function(){var e,t;return t=n.$img.data("id"),e=n.$img[0].tagName.toLowerCase(),n.$el.closest(".editor-sidebar-content").find("[data-id="+t+"]").filter(function(t){return this.tagName.toLowerCase()===e})},JJMarkdownEditor.setAsDraggable(this.$img),e.ProjectEditor.PreviewImageZone.setAsDraggable(this.$img),this.$img.on("mouseover",function(){var e;e=t();if(e.length)return e.addClass("active")}).on("mouseleave",function(){var e;e=t();if(e.length)return e.removeClass("active")})},liveRemoval:function(){var t=this;return e.ProjectEditor.galleryImageRemoved(this.model.id),_.each(this.__manager__.parent.views,function(e){return _.each(e,function(e){if(e.model.id===t.model.id&&e!==t)return e.remove()})}),this.remove()}}),s.Views.PersonImage=s.Views.ListItem.extend({template:"security/editor-sidebar-person-image",className:"PersonImage",cleanup:function(){return this.$el.find("[data-id]").trigger("dragend"),this._cleanup()},liveRemoval:function(){var t;return t=e.CurrentMemberPerson.get("Image"),t.id===this.model.id&&$("#current-person-image").empty(),this.remove()}}),s.Views.ProjectItem=s.Views.ListItem.extend({template:"security/editor-sidebar-project-item",cleanup:function(){return this._cleanup(),Backbone.Events.off("projectEdited",this.handleActive)},initialize:function(){return Backbone.Events.on("projectEdited",this.handleActive,this)},afterRender:function(){this._afterRender();if(e.isEditor&&e.ProjectEditor)return this.handleActive(e.ProjectEditor.model)},handleActive:function(e){this.$el.find("a").removeClass("active");if(e.get("ClassName")===this.model.ClassName&&e.id===this.model.ID)return this.$el.find("a").addClass("active")}}),s}),define("modules/Auth",["app","modules/UserSidebar"],function(e,t){var n;return n=e.module(),n.ping={url:JJRestApi.setObjectUrl("User"),interval:2e5},n.loginUrl="api/v2/Auth/login/",n.logoutUrl="api/v2/Auth/logout/",n.canEditUrl="api/v2/Auth/canEdit/",n.Cache={userWidget:null},n.redirectTo=function(t){var n;return n=e.origin+"/"+t+"/",window.location.replace(n)},n.logout=function(){return $.post(n.logoutUrl).pipe(function(e){return e.success?e:$.Deferred().reject(e)}).done(function(t){return console.log("cancelling login ping, redirecting..."),e.CurrentMember={},n.cancelLoginPing(),n.redirectTo("login")}).promise()},n.handleUserServerResponse=function(t){if(!t.Email)return e.CurrentMember={};n.kickOffLoginPing();if(!e.CurrentMember.Email)return e.CurrentMember=t,n.fetchMembersPerson().done(function(){return n.updateUserWidget()});if(t.Email!==e.CurrentMember.Email)return n.redirectTo("login")},n.performLoginCheck=function(){return $.getJSON(this.ping.url).done(n.handleUserServerResponse).promise()},n.canEdit=function(e){var t,n,r;t="?";for(r in e)n=e[r],t+=r+"="+n+"&";return $.getJSON(this.canEditUrl+t).pipe(function(e){return e.allowed?e:$.Deferred().reject()}).promise()},n.kickOffLoginPing=function(){var t=this;return this.cancelLoginPing,this.loginPing=window.setTimeout(function(){return t.performLoginCheck().done(function(){if(!e.CurrentMember.Email)return n.redirectTo("login")})},this.ping.interval)},n.cancelLoginPing=function(){if(this.loginPing)return window.clearTimeout(this.loginPing),delete this.loginPing},n.updateUserWidget=function(){var n;if(e.CurrentMember.Email)return n=this.Cache.userWidget=this.Cache.userWidget||t.construct(),n.toggleEditorClass(e.isEditor)},n.fetchMembersPerson=function(){var t,n,r;return t=new $.Deferred,e.CurrentMemberPerson?(t.resolve(),t.promise()):(r=e.CurrentMember.PersonID,r?(n=e.Collections.Person.get(r),n?n._isFetchedWhenLoggedIn?(e.CurrentMemberPerson=n,t.resolve()):n.fetch({success:function(n){return n._isCompletelyFetched=!0,n._isFetchedWhenLoggedIn=!0,e.CurrentMemberPerson=n,t.resolve()}}):JJRestApi.getFromDomOrApi("Person",{name:"current-member-person",id:r}).done(function(n){var r;return _.isObject(n)?(r=e.handleFetchedModel("Person",n),r._isCompletelyFetched=!0,r._isFetchedWhenLoggedIn=!0,e.CurrentMemberPerson=r,t.resolve()):t.reject()}),t.promise()):(t.reject(),t.promise()))},n.Views.Login=Backbone.View.extend({tagName:"section",idAttribute:"login-form",template:"security/login-form",events:{"submit form":"submitLoginForm"},submitLoginForm:function(e){var t,r,i,s=this;return e.preventDefault(),r=this.$el.find('[name="password"]').val(),t=this.$el.find('[name="email"]').val(),i=this.$el.find('[name="remember"]').is(":checked")===!0?1:0,$.post(n.loginUrl,{pass:r,email:t,remember:i}).done(function(e){return n.handleUserServerResponse(e),s.render()}),!1},serialize:function(){return e.CurrentMember},afterRender:function(){var e,t;e=$("input:first",this.$el),t=e.val();if(!t||!t.length)return e.focus()}}),n.Views.Logout=Backbone.View.extend({tagName:"section",idAttribute:"logging-out",template:"security/logging-out",serialize:function(){return e.CurrentMember}}),n}),define("modules/SuperProject",["app"],function(e){var t;return t=e.module(),t.Model=Backbone.JJRelationalModel.extend({idArrayOfRelationToClass:function(e,t){return t==null&&(t=void 0),this.get("ClassName")==="Project"&&e==="Project"?this.get("ChildProjects").getIDArray().concat(this.get("ParentProjects").getIDArray()):this.get("ClassName")===e?[]:(t=t?t:e+"s",this.get(t).getIDArray())},setRelCollByIds:function(e,t){var n,r,i,s,o=this;s=!1;if(i=this.get(e))n=i.model.prototype.storeIdentifier,r=this.idArrayOfRelationToClass(n,e),_.each(t,function(e){if(_.indexOf(r,e)<0)return s=!0,i.add(e)}),_.each(_.difference(r,t),function(t){var n;s=!0,n=i.get(t);if(n)return i.remove(n);if(e==="Projects")return i=o.get("ParentProjects"),i.remove(i.get(t))});return s},basicListWithoutCurrentMember:function(t){var n;return n=[],_.each(this.get(t).toJSON(),function(t){var r;r={ID:t.ID,Title:t.FirstName+" "+(t.Surname?t.Surname:"")};if(r.ID!==e.CurrentMemberPerson.id)return n.push(r)}),n},getEditorsKey:function(){return this.get("ClassName")==="Project"?"BlockedEditors":"Editors"},setTempUrlPrefix:function(e){var t,n;return n="404",t=this.get("Persons"),console.log(this),this.get("IsPortfolio")?n="portfolio":e&&t.get(e.id)?n="about/"+e.get("UrlSlug"):t.length>0&&(n="about/"+t.models[0].get("UrlSlug")),this.set("TempUrlPrefix",n)}}),t}),define("modules/Project",["app","modules/SuperProject"],function(e,t){var n;return n=e.module(),JJRestApi.Modules.extend(n,function(e){return JJRestApi.extendModel("Project",t.Model,{foo:"bar"}),JJRestApi.extendCollection("Project",{foo:"bar"}),e.Views.Test=Backbone.View.extend({template:"head",tagName:"div",className:"head"})}),n}),function(e){function r(e){if(!e)return;if(typeof n[e]=="string")return e;e=e.charAt(0).toUpperCase()+e.slice(1);var r;for(var i=0,s=t.length;i<s;i++){r=t[i]+e;if(typeof n[r]=="string")return r}}var t="Webkit Moz ms Ms O".split(" "),n=document.documentElement.style;typeof define=="function"&&define.amd?define("get-style-property/get-style-property",[],function(){return r}):e.getStyleProperty=r}(window),function(e){function t(e){return new RegExp("(^|\\s+)"+e+"(\\s+|$)")}function s(e,t){var s=n(e,t)?i:r;s(e,t)}var n,r,i;"classList"in document.documentElement?(n=function(e,t){return e.classList.contains(t)},r=function(e,t){e.classList.add(t)},i=function(e,t){e.classList.remove(t)}):(n=function(e,n){return t(n).test(e.className)},r=function(e,t){n(e,t)||(e.className=e.className+" "+t)},i=function(e,n){e.className=e.className.replace(t(n)," ")});var o={hasClass:n,addClass:r,removeClass:i,toggleClass:s,has:n,add:r,remove:i,toggle:s};typeof define=="function"&&define.amd?define("classie/classie",o):e.classie=o}(window),function(e,t){function i(e){var t=parseFloat(e),n=e.indexOf("%")===-1&&!isNaN(t);return n&&t}function o(){var e={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0};for(var t=0,n=s.length;t<n;t++){var r=s[t];e[r]=0}return e}function u(e){function u(e){typeof e=="string"&&(e=document.querySelector(e));if(!e||typeof e!="object"||!e.nodeType)return;var u=r(e);if(u.display==="none")return o();var a={};a.width=e.offsetWidth,a.height=e.offsetHeight;var f=a.isBorderBox=!!t&&!!u[t]&&u[t]==="border-box";for(var l=0,c=s.length;l<c;l++){var h=s[l],p=u[h],d=parseFloat(p);a[h]=isNaN(d)?0:d}var v=a.paddingLeft+a.paddingRight,m=a.paddingTop+a.paddingBottom,g=a.marginLeft+a.marginRight,y=a.marginTop+a.marginBottom,b=a.borderLeftWidth+a.borderRightWidth,w=a.borderTopWidth+a.borderBottomWidth,E=f&&n,S=i(u.width);S!==!1&&(a.width=S+(E?0:v+b));var x=i(u.height);return x!==!1&&(a.height=x+(E?0:m+w)),a.innerWidth=a.width-(v+b),a.innerHeight=a.height-(m+w),a.outerWidth=a.width+g,a.outerHeight=a.height+y,a}var t=e("boxSizing"),n;return function(){if(!t)return;var e=document.createElement("div");e.style.width="200px",e.style.padding="1px 2px 3px 4px",e.style.borderStyle="solid",e.style.borderWidth="1px 2px 3px 4px",e.style[t]="border-box";var s=document.body||document.documentElement;s.appendChild(e);var o=r(e);n=i(o.width)===200,s.removeChild(e)}(),u}var n=document.defaultView,r=n&&n.getComputedStyle?function(e){return n.getComputedStyle(e,null)}:function(e){return e.currentStyle},s=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"];typeof define=="function"&&define.amd?define("get-size/get-size",["get-style-property/get-style-property"],u):e.getSize=u(e.getStyleProperty)}(window),function(e){var t=document.documentElement,n=function(){};t.addEventListener?n=function(e,t,n){e.addEventListener(t,n,!1)}:t.attachEvent&&(n=function(t,n,r){t[n+r]=r.handleEvent?function(){var t=e.event;t.target=t.target||t.srcElement,r.handleEvent.call(r,t)}:function(){var n=e.event;n.target=n.target||n.srcElement,r.call(t,n)},t.attachEvent("on"+n,t[n+r])});var r=function(){};t.removeEventListener?r=function(e,t,n){e.removeEventListener(t,n,!1)}:t.detachEvent&&(r=function(e,t,n){e.detachEvent("on"+t,e[t+n]);try{delete e[t+n]}catch(r){e[t+n]=undefined}});var i={bind:n,unbind:r};typeof define=="function"&&define.amd?define("eventie/eventie",i):e.eventie=i}(this),function(e){function r(e){if(typeof e!="function")return;r.isReady?e():n.push(e)}function i(e){var i=e.type==="readystatechange"&&t.readyState!=="complete";if(r.isReady||i)return;r.isReady=!0;for(var s=0,o=n.length;s<o;s++){var u=n[s];u()}}function s(n){return n.bind(t,"DOMContentLoaded",i),n.bind(t,"readystatechange",i),n.bind(e,"load",i),r}var t=e.document,n=[];r.isReady=!1,typeof define=="function"&&define.amd?(r.isReady=typeof requirejs=="function",define("doc-ready/doc-ready",["eventie/eventie"],s)):e.docReady=s(e.eventie)}(this),function(){function e(){}function n(e,t){var n=e.length;while(n--)if(e[n].listener===t)return n;return-1}function r(e){return function(){return this[e].apply(this,arguments)}}var t=e.prototype;t.getListeners=function(t){var n=this._getEvents(),r,i;if(typeof t=="object"){r={};for(i in n)n.hasOwnProperty(i)&&t.test(i)&&(r[i]=n[i])}else r=n[t]||(n[t]=[]);return r},t.flattenListeners=function(t){var n=[],r;for(r=0;r<t.length;r+=1)n.push(t[r].listener);return n},t.getListenersAsObject=function(t){var n=this.getListeners(t),r;return n instanceof Array&&(r={},r[t]=n),r||n},t.addListener=function(t,r){var i=this.getListenersAsObject(t),s=typeof r=="object",o;for(o in i)i.hasOwnProperty(o)&&n(i[o],r)===-1&&i[o].push(s?r:{listener:r,once:!1});return this},t.on=r("addListener"),t.addOnceListener=function(t,n){return this.addListener(t,{listener:n,once:!0})},t.once=r("addOnceListener"),t.defineEvent=function(t){return this.getListeners(t),this},t.defineEvents=function(t){for(var n=0;n<t.length;n+=1)this.defineEvent(t[n]);return this},t.removeListener=function(t,r){var i=this.getListenersAsObject(t),s,o;for(o in i)i.hasOwnProperty(o)&&(s=n(i[o],r),s!==-1&&i[o].splice(s,1));return this},t.off=r("removeListener"),t.addListeners=function(t,n){return this.manipulateListeners(!1,t,n)},t.removeListeners=function(t,n){return this.manipulateListeners(!0,t,n)},t.manipulateListeners=function(t,n,r){var i,s,o=t?this.removeListener:this.addListener,u=t?this.removeListeners:this.addListeners;if(typeof n!="object"||n instanceof RegExp){i=r.length;while(i--)o.call(this,n,r[i])}else for(i in n)n.hasOwnProperty(i)&&(s=n[i])&&(typeof s=="function"?o.call(this,i,s):u.call(this,i,s));return this},t.removeEvent=function(t){var n=typeof t,r=this._getEvents(),i;if(n==="string")delete r[t];else if(n==="object")for(i in r)r.hasOwnProperty(i)&&t.test(i)&&delete r[i];else delete this._events;return this},t.removeAllListeners=r("removeEvent"),t.emitEvent=function(t,n){var r=this.getListenersAsObject(t),i,s,o,u;for(o in r)if(r.hasOwnProperty(o)){s=r[o].length;while(s--)i=r[o][s],i.once===!0&&this.removeListener(t,i.listener),u=i.listener.apply(this,n||[]),u===this._getOnceReturnValue()&&this.removeListener(t,i.listener)}return this},t.trigger=r("emitEvent"),t.emit=function(t){var n=Array.prototype.slice.call(arguments,1);return this.emitEvent(t,n)},t.setOnceReturnValue=function(t){return this._onceReturnValue=t,this},t._getOnceReturnValue=function(){return this.hasOwnProperty("_onceReturnValue")?this._onceReturnValue:!0},t._getEvents=function(){return this._events||(this._events={})},typeof define=="function"&&define.amd?define("eventEmitter/EventEmitter",[],function(){return e}):typeof module=="object"&&module.exports?module.exports=e:this.EventEmitter=e}.call(this),function(e,t){function r(e,t){return e[n](t)}function i(e){if(e.parentNode)return;var t=document.createDocumentFragment();t.appendChild(e)}function s(e,t){i(e);var n=e.parentNode.querySelectorAll(t);for(var r=0,s=n.length;r<s;r++)if(n[r]===e)return!0;return!1}function o(e,t){return i(e),r(e,t)}var n=function(){if(t.matchesSelector)return"matchesSelector";var e=["webkit","moz","ms","o"];for(var n=0,r=e.length;n<r;n++){var i=e[n],s=i+"MatchesSelector";if(t[s])return s}}(),u;if(n){var a=document.createElement("div"),f=r(a,"div");u=f?r:o}else u=s;typeof define=="function"&&define.amd?define("matches-selector/matches-selector",[],function(){return u}):window.matchesSelector=u}(this,Element.prototype),function(e){function r(e,t){for(var n in t)e[n]=t[n];return e}function i(e){for(var t in e)return!1;return t=null,!0}function s(e){return e.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})}function o(e,t,o){function d(e,t){if(!e)return;this.element=e,this.layout=t,this.position={x:0,y:0},this._create()}var u=o("transition"),a=o("transform"),f=u&&a,l=!!o("perspective"),c={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"otransitionend",transition:"transitionend"}[u],h=["transform","transition","transitionDuration","transitionProperty"],p=function(){var e={};for(var t=0,n=h.length;t<n;t++){var r=h[t],i=o(r);i&&i!==r&&(e[r]=i)}return e}();r(d.prototype,e.prototype),d.prototype._create=function(){this._transition={ingProperties:{},clean:{},onEnd:{}},this.css({position:"absolute"})},d.prototype.handleEvent=function(e){var t="on"+e.type;this[t]&&this[t](e)},d.prototype.getSize=function(){this.size=t(this.element)},d.prototype.css=function(e){var t=this.element.style;for(var n in e){var r=p[n]||n;t[r]=e[n]}},d.prototype.getPosition=function(){var e=n(this.element),t=this.layout.options,r=t.isOriginLeft,i=t.isOriginTop,s=parseInt(e[r?"left":"right"],10),o=parseInt(e[i?"top":"bottom"],10);s=isNaN(s)?0:s,o=isNaN(o)?0:o;var u=this.layout.size;s-=r?u.paddingLeft:u.paddingRight,o-=i?u.paddingTop:u.paddingBottom,this.position.x=s,this.position.y=o},d.prototype.layoutPosition=function(){var e=this.layout.size,t=this.layout.options,n={};t.isOriginLeft?(n.left=this.position.x+e.paddingLeft+"px",n.right=""):(n.right=this.position.x+e.paddingRight+"px",n.left=""),t.isOriginTop?(n.top=this.position.y+e.paddingTop+"px",n.bottom=""):(n.bottom=this.position.y+e.paddingBottom+"px",n.top=""),this.css(n),this.emitEvent("layout",[this])};var v=l?function(e,t){return"translate3d("+e+"px, "+t+"px, 0)"}:function(e,t){return"translate("+e+"px, "+t+"px)"};d.prototype._transitionTo=function(e,t){this.getPosition();var n=this.position.x,r=this.position.y,i=parseInt(e,10),s=parseInt(t,10),o=i===this.position.x&&s===this.position.y;this.setPosition(e,t);if(o&&!this.isTransitioning){this.layoutPosition();return}var u=e-n,a=t-r,f={},l=this.layout.options;u=l.isOriginLeft?u:-u,a=l.isOriginTop?a:-a,f.transform=v(u,a),this.transition({to:f,onTransitionEnd:{transform:this.layoutPosition},isCleaning:!0})},d.prototype.goTo=function(e,t){this.setPosition(e,t),this.layoutPosition()},d.prototype.moveTo=f?d.prototype._transitionTo:d.prototype.goTo,d.prototype.setPosition=function(e,t){this.position.x=parseInt(e,10),this.position.y=parseInt(t,10)},d.prototype._nonTransition=function(e){this.css(e.to),e.isCleaning&&this._removeStyles(e.to);for(var t in e.onTransitionEnd)e.onTransitionEnd[t].call(this)},d.prototype._transition=function(e){if(!parseFloat(this.layout.options.transitionDuration)){this._nonTransition(e);return}var t=this._transition;for(var n in e.onTransitionEnd)t.onEnd[n]=e.onTransitionEnd[n];for(n in e.to)t.ingProperties[n]=!0,e.isCleaning&&(t.clean[n]=!0);if(e.from){this.css(e.from);var r=this.element.offsetHeight;r=null}this.enableTransition(e.to),this.css(e.to),this.isTransitioning=!0};var m=a&&s(a)+",opacity";d.prototype.enableTransition=function(){if(this.isTransitioning)return;this.css({transitionProperty:m,transitionDuration:this.layout.options.transitionDuration}),this.element.addEventListener(c,this,!1)},d.prototype.transition=d.prototype[u?"_transition":"_nonTransition"],d.prototype.onwebkitTransitionEnd=function(e){this.ontransitionend(e)},d.prototype.onotransitionend=function(e){this.ontransitionend(e)};var g={"-webkit-transform":"transform","-moz-transform":"transform","-o-transform":"transform"};d.prototype.ontransitionend=function(e){if(e.target!==this.element)return;var t=this._transition,n=g[e.propertyName]||e.propertyName;delete t.ingProperties[n],i(t.ingProperties)&&this.disableTransition(),n in t.clean&&(this.element.style[e.propertyName]="",delete t.clean[n]);if(n in t.onEnd){var r=t.onEnd[n];r.call(this),delete t.onEnd[n]}this.emitEvent("transitionEnd",[this])},d.prototype.disableTransition=function(){this.removeTransitionStyles(),this.element.removeEventListener(c,this,!1),this.isTransitioning=!1},d.prototype._removeStyles=function(e){var t={};for(var n in e)t[n]="";this.css(t)};var y={transitionProperty:"",transitionDuration:""};return d.prototype.removeTransitionStyles=function(){this.css(y)},d.prototype.removeElem=function(){this.element.parentNode.removeChild(this.element),this.emitEvent("remove",[this])},d.prototype.remove=function(){if(!u||!parseFloat(this.layout.options.transitionDuration)){this.removeElem();return}var e=this;this.on("transitionEnd",function(){return e.removeElem(),!0}),this.hide()},d.prototype.reveal=function(){delete this.isHidden,this.css({display:""});var e=this.layout.options;this.transition({from:e.hiddenStyle,to:e.visibleStyle,isCleaning:!0})},d.prototype.hide=function(){this.isHidden=!0,this.css({display:""});var e=this.layout.options;this.transition({from:e.visibleStyle,to:e.hiddenStyle,isCleaning:!0,onTransitionEnd:{opacity:function(){this.css({display:"none"})}}})},d.prototype.destroy=function(){this.css({position:"",left:"",right:"",top:"",bottom:"",transition:"",transform:""})},d}var t=document.defaultView,n=t&&t.getComputedStyle?function(e){return t.getComputedStyle(e,null)}:function(e){return e.currentStyle};typeof define=="function"&&define.amd?define("outlayer/item",["eventEmitter/EventEmitter","get-size/get-size","get-style-property/get-style-property"],o):(e.Outlayer={},e.Outlayer.Item=o(e.EventEmitter,e.getSize,e.getStyleProperty))}(window),function(e){function s(e,t){for(var n in t)e[n]=t[n];return e}function u(e){return o.call(e)==="[object Array]"}function a(e){var t=[];if(u(e))t=e;else if(e&&typeof e.length=="number")for(var n=0,r=e.length;n<r;n++)t.push(e[n]);else t.push(e);return t}function c(e,t){var n=l(t,e);n!==-1&&t.splice(n,1)}function h(e){return e.replace(/(.)([A-Z])/g,function(e,t,n){return t+"-"+n}).toLowerCase()}function p(o,u,l,p,d,v){function y(e,r){typeof e=="string"&&(e=t.querySelector(e));if(!e||!f(e)){n&&n.error("Bad "+this.settings.namespace+" element: "+e);return}this.element=e,this.options=s({},this.options),this.option(r);var i=++m;this.element.outlayerGUID=i,g[i]=this,this._create(),this.options.isInitLayout&&this.layout()}function b(e,t){e.prototype[t]=s({},y.prototype[t])}var m=0,g={};return y.prototype.settings={namespace:"outlayer",item:v},y.prototype.options={containerStyle:{position:"relative"},isInitLayout:!0,isOriginLeft:!0,isOriginTop:!0,isResizeBound:!0,transitionDuration:"0.4s",hiddenStyle:{opacity:0,transform:"scale(0.001)"},visibleStyle:{opacity:1,transform:"scale(1)"}},s(y.prototype,l.prototype),y.prototype.option=function(e){s(this.options,e)},y.prototype._create=function(){this.reloadItems(),this.stamps=[],this.stamp(this.options.stamp),s(this.element.style,this.options.containerStyle),this.options.isResizeBound&&this.bindResize()},y.prototype.reloadItems=function(){this.items=this._itemize(this.element.children)},y.prototype._itemize=function(e){var t=this._filterFindItemElements(e),n=this.settings.item,r=[];for(var i=0,s=t.length;i<s;i++){var o=t[i],u=new n(o,this);r.push(u)}return r},y.prototype._filterFindItemElements=function(e){e=a(e);var t=this.options.itemSelector,n=[];for(var r=0,i=e.length;r<i;r++){var s=e[r];if(!f(s))continue;if(t){d(s,t)&&n.push(s);var o=s.querySelectorAll(t);for(var u=0,l=o.length;u<l;u++)n.push(o[u])}else n.push(s)}return n},y.prototype.getItemElements=function(){var e=[];for(var t=0,n=this.items.length;t<n;t++)e.push(this.items[t].element);return e},y.prototype.layout=function(){this._resetLayout(),this._manageStamps();var e=this.options.isLayoutInstant!==undefined?this.options.isLayoutInstant:!this._isLayoutInited;this.layoutItems(this.items,e),this._isLayoutInited=!0},y.prototype._init=y.prototype.layout,y.prototype._resetLayout=function(){this.getSize()},y.prototype.getSize=function(){this.size=p(this.element)},y.prototype._getMeasurement=function(e,t){var n=this.options[e],r;n?(typeof n=="string"?r=this.element.querySelector(n):f(n)&&(r=n),this[e]=r?p(r)[t]:n):this[e]=0},y.prototype.layoutItems=function(e,t){e=this._getItemsForLayout(e),this._layoutItems(e,t),this._postLayout()},y.prototype._getItemsForLayout=function(e){var t=[];for(var n=0,r=e.length;n<r;n++){var i=e[n];i.isIgnored||t.push(i)}return t},y.prototype._layoutItems=function(e,t){if(!e||!e.length){this.emitEvent("layoutComplete",[this,e]);return}this._itemsOn(e,"layout",function(){this.emitEvent("layoutComplete",[this,e])});var n=[];for(var r=0,i=e.length;r<i;r++){var s=e[r],o=this._getItemLayoutPosition(s);o.item=s,o.isInstant=t,n.push(o)}this._processLayoutQueue(n)},y.prototype._getItemLayoutPosition=function(){return{x:0,y:0}},y.prototype._processLayoutQueue=function(e){for(var t=0,n=e.length;t<n;t++){var r=e[t];this._positionItem(r.item,r.x,r.y,r.isInstant)}},y.prototype._positionItem=function(e,t,n,r){r?e.goTo(t,n):e.moveTo(t,n)},y.prototype._postLayout=function(){var e=this._getContainerSize();e&&(this._setContainerMeasure(e.width,!0),this._setContainerMeasure(e.height,!1))},y.prototype._getContainerSize=i,y.prototype._setContainerMeasure=function(e,t){if(e===undefined)return;var n=this.size;n.isBorderBox&&(e+=t?n.paddingLeft+n.paddingRight+n.borderLeftWidth+n.borderRightWidth:n.paddingBottom+n.paddingTop+n.borderTopWidth+n.borderBottomWidth),e=Math.max(e,0),this.element.style[t?"width":"height"]=e+"px"},y.prototype._itemsOn=function(e,t,n){function o(){return r++,r===i&&n.call(s),!0}var r=0,i=e.length,s=this;for(var u=0,a=e.length;u<a;u++){var f=e[u];f.on(t,o)}},y.prototype.ignore=function(e){var t=this.getItem(e);t&&(t.isIgnored=!0)},y.prototype.unignore=function(e){var t=this.getItem(e);t&&delete t.isIgnored},y.prototype.stamp=function(e){e=this._find(e);if(!e)return;this.stamps=this.stamps.concat(e);for(var t=0,n=e.length;t<n;t++){var r=e[t];this.ignore(r)}},y.prototype.unstamp=function(e){e=this._find(e);if(!e)return;for(var t=0,n=e.length;t<n;t++){var r=e[t];c(r,this.stamps),this.unignore(r)}},y.prototype._find=function(e){if(!e)return;return typeof e=="string"&&(e=this.element.querySelectorAll(e)),e=a(e),e},y.prototype._manageStamps=function(){if(!this.stamps||!this.stamps.length)return;this._getBoundingRect();for(var e=0,t=this.stamps.length;e<t;e++){var n=this.stamps[e];this._manageStamp(n)}},y.prototype._getBoundingRect=function(){var e=this.element.getBoundingClientRect(),t=this.size;this._boundingRect={left:e.left+t.paddingLeft+t.borderLeftWidth,top:e.top+t.paddingTop+t.borderTopWidth,right:e.right-(t.paddingRight+t.borderRightWidth),bottom:e.bottom-(t.paddingBottom+t.borderBottomWidth)}},y.prototype._manageStamp=i,y.prototype._getElementOffset=function(e){var t=e.getBoundingClientRect(),n=this._boundingRect,r=p(e),i={left:t.left-n.left-r.marginLeft,top:t.top-n.top-r.marginTop,right:n.right-t.right-r.marginRight,bottom:n.bottom-t.bottom-r.marginBottom};return i},y.prototype.handleEvent=function(e){var t="on"+e.type;this[t]&&this[t](e)},y.prototype.bindResize=function(){if(this.isResizeBound)return;o.bind(e,"resize",this),this.isResizeBound=!0},y.prototype.unbindResize=function(){o.unbind(e,"resize",this),this.isResizeBound=!1},y.prototype.onresize=function(){function t(){e.resize(),delete e.resizeTimeout}this.resizeTimeout&&clearTimeout(this.resizeTimeout);var e=this;this.resizeTimeout=setTimeout(t,100)},y.prototype.resize=function(){var e=p(this.element),t=this.size&&e;if(t&&e.innerWidth===this.size.innerWidth)return;this.layout()},y.prototype.addItems=function(e){var t=this._itemize(e);return t.length&&(this.items=this.items.concat(t)),t},y.prototype.appended=function(e){var t=this.addItems(e);if(!t.length)return;this.layoutItems(t,!0),this.reveal(t)},y.prototype.prepended=function(e){var t=this._itemize(e);if(!t.length)return;var n=this.items.slice(0);this.items=t.concat(n),this._resetLayout(),this._manageStamps(),this.layoutItems(t,!0),this.reveal(t),this.layoutItems(n)},y.prototype.reveal=function(e){if(!e||!e.length)return;for(var t=0,n=e.length;t<n;t++){var r=e[t];r.reveal()}},y.prototype.hide=function(e){if(!e||!e.length)return;for(var t=0,n=e.length;t<n;t++){var r=e[t];r.hide()}},y.prototype.getItem=function(e){for(var t=0,n=this.items.length;t<n;t++){var r=this.items[t];if(r.element===e)return r}},y.prototype.getItems=function(e){if(!e||!e.length)return;var t=[];for(var n=0,r=e.length;n<r;n++){var i=e[n],s=this.getItem(i);s&&t.push(s)}return t},y.prototype.remove=function(e){e=a(e);var t=this.getItems(e);if(!t||!t.length)return;this._itemsOn(t,"remove",function(){this.emitEvent("removeComplete",[this,t])});for(var n=0,r=t.length;n<r;n++){var i=t[n];i.remove(),c(i,this.items)}},y.prototype.destroy=function(){var e=this.element.style;e.height="",e.position="",e.width="";for(var t=0,n=this.items.length;t<n;t++){var i=this.items[t];i.destroy()}this.unbindResize(),delete this.element.outlayerGUID,r&&r.removeData(this.element,this.settings.namespace)},y.data=function(e){var t=e&&e.outlayerGUID;return t&&g[t]},y.create=function(e,i){function o(){y.apply(this,arguments)}return s(o.prototype,y.prototype),b(o,"options"),b(o,"settings"),s(o.prototype.options,i),o.prototype.settings.namespace=e,o.data=y.data,o.Item=function(){v.apply(this,arguments)},o.Item.prototype=new v,o.prototype.settings.item=o.Item,u(function(){var i=h(e),s=t.querySelectorAll(".js-"+i),u="data-"+i+"-options";for(var a=0,f=s.length;a<f;a++){var l=s[a],c=l.getAttribute(u),p;try{p=c&&JSON.parse(c)}catch(d){n&&n.error("Error parsing "+u+" on "+l.nodeName.toLowerCase()+(l.id?"#"+l.id:"")+": "+d);continue}var v=new o(l,p);r&&r.data(l,e,v)}}),r&&r.bridget&&r.bridget(e,o),o},y.Item=v,y}var t=e.document,n=e.console,r=e.jQuery,i=function(){},o=Object.prototype.toString,f=typeof HTMLElement=="object"?function(t){return t instanceof HTMLElement}:function(t){return t&&typeof t=="object"&&t.nodeType===1&&typeof t.nodeName=="string"},l=Array.prototype.indexOf?function(e,t){return e.indexOf(t)}:function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1};typeof define=="function"&&define.amd?define("outlayer/outlayer",["eventie/eventie","doc-ready/doc-ready","eventEmitter/EventEmitter","get-size/get-size","matches-selector/matches-selector","./item"],p):e.Outlayer=p(e.eventie,e.docReady,e.EventEmitter,e.getSize,e.matchesSelector,e.Outlayer.Item)}(window),function(e){function n(){function e(t){for(var n in e.defaults)this[n]=e.defaults[n];for(n in t)this[n]=t[n]}return t.Rect=e,e.defaults={x:0,y:0,width:0,height:0},e.prototype.contains=function(e){var t=e.width||0,n=e.height||0;return this.x<=e.x&&this.y<=e.y&&this.x+this.width>=e.x+t&&this.y+this.height>=e.y+n},e.prototype.overlaps=function(e){var t=this.x+this.width,n=this.y+this.height,r=e.x+e.width,i=e.y+e.height;return this.x<r&&t>e.x&&this.y<i&&n>e.y},e.prototype.getMaximalFreeRects=function(t){if(!this.overlaps(t))return!1;var n=[],r,i=this.x+this.width,s=this.y+this.height,o=t.x+t.width,u=t.y+t.height;return this.y<t.y&&(r=new e({x:this.x,y:this.y,width:this.width,height:t.y-this.y}),n.push(r)),i>o&&(r=new e({x:o,y:this.y,width:i-o,height:this.height}),n.push(r)),s>u&&(r=new e({x:this.x,y:u,width:this.width,height:s-u}),n.push(r)),this.x<t.x&&(r=new e({x:this.x,y:this.y,width:t.x-this.x,height:this.height}),n.push(r)),n},e.prototype.canFit=function(e){return this.width>=e.width&&this.height>=e.height},e}var t=e.Packery=function(){};typeof define=="function"&&define.amd?define("packery/rect",n):(e.Packery=e.Packery||{},e.Packery.Rect=n())}(window),function(e){function t(e){function t(e,t){this.width=e||0,this.height=t||0,this.reset()}return t.prototype.reset=function(){this.spaces=[],this.newSpaces=[];var t=new e({x:0,y:0,width:this.width,height:this.height});this.spaces.push(t)},t.prototype.pack=function(e){for(var t=0,n=this.spaces.length;t<n;t++){var r=this.spaces[t];if(r.canFit(e)){this.placeInSpace(e,r);break}}},t.prototype.placeInSpace=function(e,t){e.x=t.x,e.y=t.y,this.placed(e)},t.prototype.placed=function(e){var n=[];for(var r=0,i=this.spaces.length;r<i;r++){var s=this.spaces[r],o=s.getMaximalFreeRects(e);o?n.push.apply(n,o):n.push(s)}this.spaces=n,t.mergeRects(this.spaces),this.spaces.sort(t.spaceSorterTopLeft)},t.mergeRects=function(e){for(var t=0,n=e.length;t<n;t++){var r=e[t];if(!r)continue;var i=e.slice(0);i.splice(t,1);var s=0;for(var o=0,u=i.length;o<u;o++){var a=i[o],f=t>o?0:1;r.contains(a)&&(e.splice(o+f-s,1),s++)}}return e},t.spaceSorterTopLeft=function(e,t){return e.y-t.y||e.x-t.x},t.spaceSorterLeftTop=function(e,t){return e.x-t.x||e.y-t.y},t}if(typeof define=="function"&&define.amd)define("packery/packer",["./rect"],t);else{var n=e.Packery=e.Packery||{};n.Packer=t(n.Rect)}}(window),function(e){function t(e,t,n){var r=e("transform"),i=function(){t.Item.apply(this,arguments)};i.prototype=new t.Item;var s=i.prototype._create;return i.prototype._create=function(){s.call(this),this.rect=new n,this.placeRect=new n},i.prototype.dragStart=function(){this.getPosition(),this.removeTransitionStyles(),this.isTransitioning&&r&&(this.element.style[r]="none"),this.getSize(),this.isPlacing=!0,this.needsPositioning=!1,this.positionPlaceRect(this.position.x,this.position.y),this.isTransitioning=!1,this.didDrag=!1},i.prototype.dragMove=function(e,t){this.didDrag=!0;var n=this.layout.size;e-=n.paddingLeft,t-=n.paddingTop,this.positionPlaceRect(e,t)},i.prototype.dragStop=function(){this.getPosition();var e=this.position.x!==this.placeRect.x,t=this.position.y!==this.placeRect.y;this.needsPositioning=e||t,this.didDrag=!1},i.prototype.positionPlaceRect=function(e,t,n){this.placeRect.x=this.getPlaceRectCoord(e,!0),this.placeRect.y=this.getPlaceRectCoord(t,!1,n)},i.prototype.getPlaceRectCoord=function(e,t,n){var r=t?"Width":"Height",i=this.size["outer"+r],s=this.layout[t?"columnWidth":"rowHeight"],o=this.layout.size["inner"+r];t||(o=Math.max(o,this.layout.maxY),this.layout.rowHeight||(o-=this.layout.gutter));var u;if(s){s+=this.layout.gutter,o+=t?this.layout.gutter:0,e=Math.round(e/s);var a=Math[t?"floor":"ceil"](o/s);a-=Math.ceil(i/s),u=a}else u=o-i;return e=n?e:Math.min(e,u),e*=s||1,Math.max(0,e)},i.prototype.copyPlaceRectPosition=function(){this.rect.x=this.placeRect.x,this.rect.y=this.placeRect.y},i}typeof define=="function"&&define.amd?define("packery/item",["get-style-property/get-style-property","outlayer/outlayer","./rect"],t):e.Packery.Item=t(e.getStyleProperty,e.Outlayer,e.Packery.Rect)}(window),function(e){function t(e,t,n,r,i,s){var o=n.create("packery");return o.Item=o.prototype.settings.item=s,o.prototype._create=function(){n.prototype._create.call(this),this.packer=new i,this.stamp(this.options.stamped);var e=this;this.handleDraggabilly={dragStart:function(t){e.itemDragStart(t.element)},dragMove:function(t){e.itemDragMove(t.element,t.position.x,t.position.y)},dragEnd:function(t){e.itemDragEnd(t.element)}},this.handleUIDraggable={start:function(n){e.itemDragStart(n.currentTarget)},drag:function(n,r){e.itemDragMove(n.currentTarget,r.position.left,r.position.top)},stop:function(n){e.itemDragEnd(n.currentTarget)}}},o.prototype._resetLayout=function(){this.getSize(),this._getMeasurements(),this.packer.width=this.size.innerWidth+this.gutter,this.packer.height=Number.POSITIVE_INFINITY,this.packer.reset(),this.maxY=0},o.prototype._getMeasurements=function(){this._getMeasurement("columnWidth","width"),this._getMeasurement("rowHeight","height"),this._getMeasurement("gutter","width")},o.prototype._getItemLayoutPosition=function(e){return this._packItem(e),e.rect},o.prototype._packItem=function(e){this._setRectSize(e.element,e.rect),this.packer.pack(e.rect),this._setMaxY(e.rect)},o.prototype._setMaxY=function(e){this.maxY=Math.max(e.y+e.height,this.maxY)},o.prototype._setRectSize=function(e,n){var r=t(e),i=r.outerWidth,s=r.outerHeight,o=this.columnWidth+this.gutter,u=this.rowHeight+this.gutter;i=this.columnWidth?Math.ceil(i/o)*o:i+this.gutter,s=this.rowHeight?Math.ceil(s/u)*u:s+this.gutter,n.width=Math.min(i,this.packer.width),n.height=s},o.prototype._getContainerSize=function(){return{height:this.maxY-this.gutter}},o.prototype._manageStamp=function(e){var t=this.getItem(e),n;if(t&&t.isPlacing)n=t.placeRect;else{var i=this._getElementOffset(e);n=new r({x:i.left,y:i.top})}this._setRectSize(e,n),this.packer.placed(n),this._setMaxY(n)},o.prototype.sortItemsByPosition=function(){this.items.sort(function(e,t){return e.position.y-t.position.y||e.position.x-t.position.x})},o.prototype.fit=function(e,t,n){var r=this.getItem(e);if(!r)return;this._getMeasurements(),this.stamp(r.element),r.getSize(),r.isPlacing=!0,t=t===undefined?r.rect.x:t,n=n===undefined?r.rect.y:n,r.positionPlaceRect(t,n,!0),this._bindFitEvents(r),r.moveTo(r.placeRect.x,r.placeRect.y),this.layout(),this.unstamp(r.element),this.sortItemsByPosition(),r.isPlacing=!1,r.copyPlaceRectPosition()},o.prototype._bindFitEvents=function(e){function r(){n++;if(n!==2)return;t.emitEvent("fitComplete",[t,e])}var t=this,n=0;e.on("layout",function(){return r(),!0}),this.on("layoutComplete",function(){return r(),!0})},o.prototype.itemDragStart=function(e){this.stamp(e);var t=this.getItem(e);t&&t.dragStart()},o.prototype.itemDragMove=function(e,t,n){function s(){i.layout(),delete i.dragTimeout}var r=this.getItem(e);r&&r.dragMove(t,n);var i=this;this.clearDragTimeout(),this.dragTimeout=setTimeout(s,40)},o.prototype.clearDragTimeout=function(){this.dragTimeout&&clearTimeout(this.dragTimeout)},o.prototype.itemDragEnd=function(t){var n=this.getItem(t),r;n&&(r=n.didDrag,n.dragStop());if(!n||!r&&!n.needsPositioning){this.unstamp(t);return}e.add(n.element,"is-positioning-post-drag");var i=this._getDragEndLayoutComplete(t,n);n.needsPositioning?(n.on("layout",i),n.moveTo(n.placeRect.x,n.placeRect.y)):n&&n.copyPlaceRectPosition(),this.clearDragTimeout(),this.on("layoutComplete",i),this.layout()},o.prototype._getDragEndLayoutComplete=function(t,n){var r=n&&n.needsPositioning,i=0,s=r?2:1,o=this;return function(){return i++,i!==s?!0:(n&&(e.remove(n.element,"is-positioning-post-drag"),n.isPlacing=!1,n.copyPlaceRectPosition()),o.unstamp(t),o.sortItemsByPosition(),r&&o.emitEvent("dragItemPositioned",[o,n]),!0)}},o.prototype.bindDraggabillyEvents=function(e){e.on("dragStart",this.handleDraggabilly.dragStart),e.on("dragMove",this.handleDraggabilly.dragMove),e.on("dragEnd",this.handleDraggabilly.dragEnd)},o.prototype.bindUIDraggableEvents=function(e){e.on("dragstart",this.handleUIDraggable.start).on("drag",this.handleUIDraggable.drag).on("dragstop",this.handleUIDraggable.stop)},o.Rect=r,o.Packer=i,o}typeof define=="function"&&define.amd?define("packery/packery",["classie/classie","get-size/get-size","outlayer/outlayer","./rect","./packer","./item"],t):e.Packery=t(e.classie,e.getSize,e.Outlayer,e.Packery.Rect,e.Packery.Packer,e.Packery.Item)}(window);var __bind=function(e,t){return function(){return e.apply(t,arguments)}};define("plugins/packery/packerytest",["jquery","get-style-property/get-style-property","packery/packery"],function(e,t,n){var r,i,s,o,u,a,f,l,c,h;return c=t("transition"),f=t("transform"),u=c&&f,s=!!t("perspective"),l={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"otransitionend",transition:"transitionend"}[c],a={WebkitTransform:"-webkit-transform",MozTransform:"-moz-transform",OTransform:"-o-transform",transform:"transform"}[f],h=s?function(e,t){return"translate3d( "+e+"px, "+t+"px, 0)"}:function(e,t){return"translate( "+e+"px, "+t+"px)"},o=n.prototype.layoutItems,n.prototype.layoutItems=function(e,t){return this.maxY=0,o.call(this,e,t)},n.Item.prototype.removeElem=function(){return e(this.element).addClass("hidden"),!1},n.prototype._getItems=function(e){var t,r,i,s,o,u;i=this._filterFindItemElements(e),s=[];for(o=0,u=i.length;o<u;o++)t=i[o],r=new n.Item(t,this),s.push(r);return s},r=function(){function t(){this.onResize=__bind(this.onResize,this),console.log("JJPackery"),this.members(),this.init(),this.start()}return t.prototype.members=function(){return this.$window=e(),this.$container=e(),this.$sizing=e(),this.$packeryEl=e(),this.packery=null,this.resizeTimeout=null,this.updateLayout=!0,this.fitInWindow=!0,this.rendered=0,this.onResizeLayout=!1,this.layoutIsComplete=!1,this.started=!1,this.itemDimensions=[],this.itemSelector=".packery-item",this.transitionDuration=".4s",this.factor=.3},t.prototype.randomizeDimensions=function(){var t,n,r;return n=1,r=.5,t=10,e(this.itemSelector,this.$packeryEl).each(function(i,s){var o,u,a,f;o=e(s);if(!o.hasClass("resizable"))return;return f=o.width(),a=o.height(),u=Math.min(n,Math.max(r,Math.random()*(n+r))),o.width(Math.floor(f*u/t*t)),o.height(Math.floor(a*u/t*t))})},t.prototype.init=function(){this.$window=e(window),this.$container=e(".packery-wrapper"),this.$sizing=e(".packery-test",this.$container),this.$packeryEl=e(".packery",this.$container);if(this.fitInWindow)return this.$packeryEl.addClass("fit-in-window").css("max-height",this.$window.height())},t.prototype.calcAndLayout=function(){if(this.packery&&this.updateLayout)return console.log("calc and relayout"),this.fitInWindow&&this.calc(),this.packery.layout()},t.prototype.setToCenter=function(){var e,t;return t=this.$window.height(),e=this.$packeryEl.height(),e<=t?this.$packeryEl.css("top",Math.floor((t-e)/2)):this.$packeryEl.css("top",0)},t.prototype.hiddenLayout=function(e){return this.onResizeLayout=!0,this.packery.layout(),this.onResizeLayout=!1},t.prototype.onResize=function(){this.fitInWindow&&(this.calc(),this.$packeryEl.css("max-height",this.$window.height())),this.layoutIsComplete||(console.log("not layoutIsComplete"),this.layoutIsComplete=!0,this.packery.layout()),this.packery.layout(),this.setToCenter();if(this.layoutIsComplete&&!this.started)return console.log("started"),this.started=!0,this.show()},t.prototype.getCenterPos=function(e){var t,n;return n=e.offset(),t={top:n.top+e.height()/2,left:n.left+e.width()/2}},t.prototype.getLineDistance=function(e,t){var n,r;return n=r=0,n=t.left-e.left,n*=n,r=t.top-e.top,r*=r,Math.sqrt(n+r)},t.prototype.applyRadialGravityEffect=function(){var t,n=this;return t=this.getCenterPos(this.$packeryEl),e.each(this.packery.getItemElements(),function(e,r){return n._applyRadialGravityEffectToElement(r,t)})},t.prototype._applyRadialGravityEffectToElement=function(t,n){var r,i,s,o,u,a,f,l,c;return r=e(t),o=this.getCenterPos(r),f={top:o.top,left:n.left},i=f.top-n.top,s=o.left-f.left,u=this.getLineDistance(n,o)*this.factor/200,c=Math.floor(i/Math.abs(i)*u*this.getLineDistance(n,f)),l=Math.floor(s/Math.abs(s)*u*this.getLineDistance(o,f)),a={"margin-top":c,"margin-left":l},e("> div",r).css(a),!0},t.prototype.initTooltips=function(){var t=this;return e.each(this.packery.getItemElements(),function(e,n){return t._initTooltip(n)}),!1},t.prototype._initTooltip=function(t){var n,r,i,s,o,u,a,f,l,c,h,p,d=this;l=!0,c=!0,i={},h=null,u=null,a=function(){return u&&clearTimeout(u),u=setTimeout(function(){if(l&&c)return n.add(i.tooltip).off("mouseleave.tooltip"),i.hide()},200)},n=e(t),r=e("section[role=tooltip-content]",n),f=-20,p=10,s=function(t,n){var r;return r=f,e(t.tooltip).hasClass("qtip-pos-rb")&&(r*=-1),Math.floor(r)},o=function(t,n){var r;return r=p,e(t.tooltip).hasClass("qtip-pos-rb")?r*=-1:n&&(r=0),Math.floor(r)};if(r.length)return n.qtip({content:{text:r.html()},show:{delay:500,event:"mouseenter",effect:function(t){var r,i,u,h,p=this;return n.addClass("has-tooltip"),r=e(this),i=n.outerHeight(!0),h=r.outerHeight(!0),u=!1,h>i+Math.abs(f*2)&&(n.add(r).addClass("switch-borders"),console.log("switch borders"),u=!0,r.hasClass("qtip-pos-rb")&&n.addClass("pos-rb")),r.stop(!0,!0).css({"margin-left":s(t,u)}).show().animate({"margin-left":o(t,u),opacity:1},200),t.tooltip&&e(t.tooltip).one("mouseenter.tooltip",function(){return c=!1}),n.add(t.tooltip).one("mouseleave.tooltip",function(t){return e(t.target).closest(".qtip").length?c=!0:l=!0,a()})}},hide:{event:!1,effect:function(t){return e(this).stop(!0,!0).animate({"margin-left":s(t),opacity:0},200,function(){return n.removeClass("switch-borders has-tooltip pos-rb"),e(this).hide().removeClass("switch-borders")})}},position:{at:"right bottom",my:"left bottom",viewport:this.$container,adjust:{method:"flip shift",x:0,y:10}}}),i=n.qtip("api"),e("> div > a",n).on("mouseleave",function(){return l=!0,a()})},t.prototype.update=function(){if(this.packery)return this.packery.layout()},t.prototype.destroy=function(){if(this.packery)return this.packery.destroy()},t.prototype.calc=function(t){var n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w;h=.7,i=.05,d=this.$window.height()*this.$window.width(),l=0,a=0,v=0,r=this.$packeryEl.find(".stamp"),r.each(function(t,n){var r;return r=e(n),v+=r.width()*r.height()}),g=this.packery.getItemElements();for(u in g)f=g[u],n=e(f),a+=n.width()*n.height();l=a+v;if(a/d>h+i){c=this.packery.getItemElements(),b=[];for(u in c)f=c[u],n=e(f),n.width(n.width()*h),b.push(n.height(n.height*h));return b}if(a/d<h-i){o=d/a-i,y=this.packery.items,w=[];for(u in y){f=y[u],s=f.initialDimensions;if(!s)continue;n=e(f.element),m=n.width(),p=Math.min(s.width,m*o),w.push(n.width(p))}return w}},t.prototype.saveItemDimensions=function(){var e,t,n;n=this.packery.items;for(e in n)t=n[e],t.initialDimensions={width:t.rect.width,height:t.rect.height};return!1},t.prototype.show=function(){return this.packery.options.transitionDuration=this.transitionDuration,this.saveItemDimensions(),this.setToCenter(),this.initTooltips(),this.applyRadialGravityEffect(),this.$container.addClass("loaded").addClass("has-gravity")},t.prototype.hideElement=function(e){var t;if(this.packery){t=this.packery.getItem(e);if(!t.isIgnored)return this.packery.ignore(e),t.remove(),this.packery.layout()}},t.prototype.showElement=function(t){var n;if(this.packery){e(t).removeClass("hidden"),n=this.packery.getItem(t);if(n.isIgnored)return this.packery.unignore(t),n.reveal(),this.packery.layout()}},t.prototype.start=function(){var t=this;return console.log("start method"),this.$container.imagesLoaded(function(){if(!t.$packeryEl.length)return;return t.randomizeDimensions(),t.packery=new n(t.$packeryEl[0],{containerStyle:null,itemSelector:t.itemSelector,gutter:0,stamped:e(".stamp, .badge"),transitionDuration:0,isResizeBound:!1,isInitLayout:!1}),t.packery.maxY=t.$window.height(),t.packery.on("layoutComplete",function(){return t.rendered++,t.rendered===1?console.log("hidden trigger"):t.layoutIsComplete=!0,!1}),t.$window.on("resize",function(){return t.resizeTimeout&&clearTimeout(t.resizeTimeout),t.resizeTimeout=setTimeout(t.onResize,200)}),t.onResize()})},t}(),i=function(){return console.error('JJPackeryMan/JJPackeryClass is deprecated! Use "new JJPackery()" instead!'),new r},window.JJPackeryClass=r,window.JJPackeryMan=i,r}),define("modules/JJPackery",["app","plugins/packery/packerytest"],function(e){var t;return t=e.module(),t.Views.Container=Backbone.View.extend({tagName:"section",className:"packery-wrapper",template:"packery-container",afterRender:function(){this.packery=new JJPackeryClass;if(this._afterRender)return this._afterRender()}}),t}),define("modules/Portfolio",["app","modules/JJPackery"],function(e,t){var n;return n=e.module(),n.Config={person_group_length:4,group_project_title:"Group project"},n.Views.PackeryContainer=t.Views.Container.extend({cleanup:function(){return Backbone.Events.off("search",this.handleSearch)},initialize:function(){return Backbone.Events.on("search",this.handleSearch,this)},handleSearch:function(e){return this.__manager__.hasRendered?this.triggerSearchOnChildren(e):(this.searchResults=e,this.doSearchAfterRender=!0)},triggerSearchOnChildren:function(e){var t=this;return console.log("search on children"),console.log(e),_.each(this.views[".packery"],function(n){var r,i,s;return s=n.model,e?(r=_.find(e,function(e){return e===n.model}),i=r?"showElement":"hideElement",t.packery[i](n.el)):t.packery.showElement(n.el)})},beforeRender:function(){var e,t,r,i,s;console.log("portfolio before render"),t=this.collection;if(t){s=[];for(r=0,i=t.length;r<i;r++)e=t[r],s.push(this.insertView(".packery",new n.Views.ListItem({model:e,linkTo:this.options.linkTo})));return s}},_afterRender:function(){if(this.doSearchAfterRender)return this.triggerSearchOnChildren(this.searchResults),this.doSearchAfterRender=!1,this.searchResults=null}}),n.Views.ListItem=Backbone.View.extend({tagName:"article",className:"packery-item resizable",template:"packery-list-item",doShow:function(){return console.log("showing %o",this.model),this.$el.removeClass("hidden")},doHide:function(){return console.log("hiding %o",this.model),this.$el.addClass("hidden")},serialize:function(){var e;return e=this.model?this.model.toJSON():{},e.Persons=_.sortBy(e.Persons,function(e){return e.Surname}),e.LinkTo=this.options.linkTo,e}}),n.Views.Detail=Backbone.View.extend({tagName:"article",className:"portfolio-detail",template:"portfolio-detail",beforeRender:function(){return this._codeEv=$.Event("code:kickoff",{bubbles:!1}),this._afterRenderEv=$.Event("portfoliodetail:rendered")},afterRender:function(){var e;return window.picturefill(),e=$(document),e.trigger(this._codeEv),e.trigger(this._afterRenderEv)},appropriateUrl:function(e,t){t==null&&(t=!1)},serialize:function(){var e,t,r,i,s,o,u,a=this;u=["Projects","ChildProjects","ParentProjects","Exhibitions","Workshops","Excursions"];for(s=0,o=u.length;s<o;s++)r=u[s],e=this.model.get(r),e&&e.each(function(e){return e.setTempUrlPrefix(a.ownedByPerson)});return t=this.model?this.model.toJSON():{},i=["Projects","ChildProjects","ParentProjects"],t.Persons=_.sortBy(t.Persons,function(e){return e.Surname}),parseInt(t.Persons.length)>parseInt(n.Config.person_group_length)&&(t.IsGroup=!0),t.combinedProjects=[],_.each(i,function(e){if(_.isArray(t[e]))return t.combinedProjects=t.combinedProjects.concat(t[e])}),console.log(t),t}}),Handlebars.registerHelper("nameSummary",function(e){var t,r,i;return t=n.Config,e.length<=t.person_group_length?(i="",r=e.length,_.each(e,function(e,t){i+='<a href="/about/'+e.UrlSlug+'/">'+e.FirstName+" "+(e.Surname?e.Surname:"")+"</a>";if(t<r-2)return i+=", ";if(t<r-1)return i+=" &amp; "}),i):t.group_project_title}),Handlebars.registerHelper("niceDate",function(e,t){var n;return!e.DateRangeNice&&!e.FrontendDate?!1:(n="",e.DateRangeNice?n+=e.DateRangeNice:e.FrontendDate&&(t?n+=e.FrontendDate.split(" ")[1]:n+=e.FrontendDate),n)}),Handlebars.registerHelper("teaserMeta",function(){var e,t;return t=Handlebars.helpers.niceDate(this,!0),this.ClassName==="Project"?(e=Handlebars.helpers.nameSummary(this.Persons),""+e+" // "+t):t}),Handlebars.registerHelper("SpaceAndLocation",function(){var e;e=[],this.Space&&e.push(this.Space),this.Location&&e.push(this.Location),e.join(", ");if(e)return"<p>"+e+"</p>"}),Handlebars.registerHelper("hrIfNeeded",function(){var e,t,n,r,i,s;e=!1,s=["combinedProjects","Exhibitions","Excursions","Workshops"];for(r=0,i=s.length;r<i;r++)n=s[r],this[n]&&this[n].length>0&&(e=!0);return t=this.IsGroup||this.Categories&&this.Categories.length>0?!0:!1,e&&t?"<hr/>":""}),Handlebars.registerHelper("portfoliolist",function(e,t,n){var r,i;return n||(n=t,t=""),r=0,i="<ul>",_.each(e,function(e){if(e.IsPublished)return i+='<li><a href="/'+e.TempUrlPrefix+"/"+e.UglyHash+'/">'+e.Title+"</a></li>",r++}),i+="</ul>",t+=r>1?"s":"",r?"<h4>"+t+"</h4>"+i:""}),Handlebars.registerHelper("personlist",function(e){var t;return t="<ul>",_.each(e,function(e){return t+='<li><a href="/about/'+e.UrlSlug+'/">'+e.FirstName+" "+(e.Surname?e.Surname:"")+"</a></li>"}),t+="</ul>","<h4>Contributors</h4>"+t}),Handlebars.registerHelper("commaSeparatedWebsites",function(e){var t;return t=[],_.each(e,function(e){return t.push('<a href="'+e.Link+'">'+e.Title+"</a>")}),t.join(", ")}),n}),define("modules/Person",["app","modules/JJPackery","modules/Portfolio"],function(e,t,n){var r;return r=e.module(),JJRestApi.Modules.extend("Person",function(e){return JJRestApi.extendModel("Person",{getLinkingSlug:function(){return this.get("IsEmployee")?"employee":this.get("IsStudent")?"student":this.get("IsAlumni")?"alumni":""},getFullName:function(){return this.get("FullName")?this.get("FullName"):(this.get("FirstName")?this.get("FirstName"):"")+" "+(this.get("Surname")?this.get("Surname"):"")}}),JJRestApi.extendCollection("Person",{comparator:function(e){return e.get("Surname")}})}),r.Views.PackeryContainer=t.Views.Container.extend({beforeRender:function(){var t,i,s,o,u,a,f,l,c,h,p,d,v;console.log("render person page with normal view"),i=[],u=this.model.relations,d=e.Config.ProjectTypes;for(a=0,c=d.length;a<c;a++){s=d[a];for(f=0,h=u.length;f<h;f++)o=u[f],o.collectionType===s&&(i=i.concat(this.model.get(o.key).models))}this.insertView(".packery",new r.Views.InfoItem({model:this.model})),v=[];for(l=0,p=i.length;l<p;l++)t=i[l],t.get("IsPublished")?v.push(this.insertView(".packery",new n.Views.ListItem({model:t,linkTo:"about/"+this.model.get("UrlSlug")}))):v.push(void 0);return v}}),r.Views.InfoItem=Backbone.View.extend({tagName:"article",className:"packery-item person-info",template:"person-info-item",events:{"click a.vcf-download":"downloadVcf"},downloadVcf:function(e){var t,n;return e.preventDefault(),n="BEGIN:VCARD\rVERSION:3.0\rCLASS:PUBLIC\rFN:"+this.model.get("FirstName")+" "+this.model.get("Surname")+"\rN:"+this.model.get("Surname")+";"+this.model.get("FirstName")+" ;;;\r",this.model.get("Email")&&(n+="EMAIL;TYPE=INTERNET:"+this.model.get("Email")+"\r"),this.model.get("Phone")&&(n+="TEL;TYPE=PREF:"+this.model.get("Phone")+"\r"),n+="END:VCARD",t="data:text/vcard,"+encodeURIComponent(n),window.location.href=t,!1},serialize:function(){if(this.model)return this.model.toJSON()}}),r.Views.Custom=Backbone.View.extend({tagName:"div",className:"custom-templ",initialize:function(e){if(e.template)return this.template=e.template},serialize:function(){return this.model?this.model.toJSON():{}},beforeRender:function(){return this._ev=$.Event("template:ready",{bubbles:!1})},afterRender:function(){return $(document).trigger(this._ev)}}),Handlebars.registerHelper("personMeta",function(){var e,t,n;return t="",n=[],e=!1,this.IsStudent&&n.push("Student"),this.IsAlumni&&n.push("Alumni"),this.IsEmployee&&n.push(this.JobTitle||"Employee"),this.IsExternal&&n.push("External"),n.length?(t+=n.join(", "),this.GraduationYear&&(t+=" // ",t+=this.MasterYear?this.MasterYear:this.GraduationYear),t):""}),Handlebars.registerHelper("website",function(){var e,t;return e=this.Link||"#",t=this.Title||e,'<a href="'+e+'">'+t+"</a>"}),r}),define("modules/Excursion",["app","modules/SuperProject"],function(e,t){var n;return n=e.module(),JJRestApi.Modules.extend("Excursion",function(e){return JJRestApi.extendModel("Excursion",t.Model,{foo:"bar"}),JJRestApi.extendCollection("Excursion",{foo:"bar"})}),n}),define("modules/Workshop",["app","modules/SuperProject"],function(e,t){var n;return n=e.module(),JJRestApi.Modules.extend("Workshop",function(e){return JJRestApi.extendModel("Workshop",t.Model,{foo:"bar"}),JJRestApi.extendCollection("Workshop",{foo:"bar"})}),n}),define("modules/Exhibition",["app","modules/SuperProject"],function(e,t){var n;return n=e.module(),JJRestApi.Modules.extend("Exhibition",function(e){return JJRestApi.extendModel("Exhibition",t.Model,{foo:"bar"}),JJRestApi.extendCollection("Exhibition",{foo:"bar"})}),n}),define("modules/CalendarEntry",["app"],function(e){var t;return t=e.module(),JJRestApi.Modules.extend("CalendarEntry",function(e){return JJRestApi.extendModel("CalendarEntry",{foo:"bar"}),JJRestApi.extendCollection("CalendarEntry",{foo:"bar"})}),t}),define("modules/PageError",["app"],function(e){var t;return t=e.module(),t.Views.FourOhFour=Backbone.View.extend({template:"404",tagName:"div",className:"page-error",serialize:function(){return{url:this.attributes["data-url"]}}}),t}),define("modules/Calendar",["app"],function(e){var t;return t=e.module(),t.Views.Container=Backbone.View.extend({id:"calendar-container",template:"calendar-container",initialize:function(e){return this.upcomingEvents=this.collection.where({IsUpcoming:!0})},serialize:function(){var e;return e={},this.upcomingEvents&&this.upcomingEvents.length&&(e.HasItems=!0),e},beforeRender:function(){var e,n,r,i,s;i=this.upcomingEvents,s=[];for(n=0,r=i.length;n<r;n++)e=i[n],s.push(this.insertView("#calendar-list",new t.Views.ListItem({model:e})));return s}}),t.Views.ListItem=Backbone.View.extend({tagName:"li",className:"calendar-list-item",template:"calendar-list-item",serialize:function(){return this.model?this.model.toJSON():{}}}),t.Views.Detail=Backbone.View.extend({tagName:"article",className:"portfolio-detail",template:"calendar-detail",afterRender:function(){return window.picturefill()},serialize:function(){return this.model?this.model.toJSON():{}}}),t}),define("modules/About",["app","modules/JJPackery"],function(e,t){var n;return n=e.module(),n.Views.PackeryContainer=t.Views.Container.extend({template:"about-packery",initialize:function(e){return this.groupImage=e.groupImage,this.persons=e.persons},beforeRender:function(){var e,t,r,i,s,o,u,a,f,l,c,h,p;if(this.persons){l=this.persons.students;for(i=0,u=l.length;i<u;i++)r=l[i],this.insertView("#student-list",new n.Views.PersonListItem({model:r}));c=this.persons.alumnis;for(s=0,a=c.length;s<a;s++)e=c[s],this.insertView("#alumni-list",new n.Views.PersonListItem({model:e}));h=this.persons.employees,p=[];for(o=0,f=h.length;o<f;o++)t=h[o],p.push(this.insertView(".packery",new n.Views.EmployeeItem({model:t})));return p}},_afterRender:function(){return $(document).trigger($.Event("about:rendered"))},serialize:function(){return{GroupImage:this.groupImage}}}),n.Views.PersonListItem=Backbone.View.extend({tagName:"li",template:"person-list-item",serialize:function(){return this.model.toJSON()}}),n.Views.EmployeeItem=Backbone.View.extend({tagName:"section",className:"person packery-item",template:"employee-item",serialize:function(){return this.model.toJSON()}}),n}),define("modules/NewProject",["app","modules/DataRetrieval"],function(e,t){var n;return n=e.module(),n.Views.NewProject=Backbone.View.extend({tagName:"div",template:"security/create-project",events:{"submit form.create-project":"createNewProject","click .project-type-list a":"setProjectType"},hideForm:function(){return this.$field.blur(),this.formError(""),this.$form.removeClass("active")},showForm:function(){return this.$submit.text("Create "+this.projectType),this.$field.attr("placeholder",this.projectType+" Title").removeAttr("disabled").val("").focus(),this.formError(""),this.$form.addClass("active")},formError:function(e){return e?this.$error.html(e).addClass("active"):this.$error.removeClass("active")},setProjectType:function(e){var t,n;return t=$(e.target),t.closest("ul").find(".active").not(t).removeClass("active").end().end().end().toggleClass("active"),t.hasClass("active")?(this.$list.addClass("active"),n=$(e.currentTarget).data("type"),n&&(this.projectType=n),this.showForm()):(this.$list.removeClass("active"),this.projectType=null,this.hideForm()),!1},afterRender:function(){var e=this;return this.$list=$("ul.project-type-list"),this.$form=$("form.create-project"),this.$field=$("input",this.$form),this.$error=$(".form-error",this.$form),this.$submit=$("button[type=submit]",this.$form),this.$field.on("keyup",function(){if(e.$error.hasClass("active")&&e.$field.val())return e.formError("")})},createNewProject:function(n){var r,i,s,o,u,a=this;n.preventDefault(),u=this.$field.val(),r="",u||(r="Please fill in a title!"),this.projectType||(r="Please choose the type of your project!");if(r)this.formError(r),this.$field.focus();else if(o=e.CurrentMemberPerson)this.$field.attr("disabled","disabled"),i=JJRestApi.Model(this.projectType),s=new i({Title:u,Persons:o,EditableByMember:!0}),console.log("CurrentMemberPerson %o",o),s.save(null,{success:function(){return a.$field.removeAttr("disabled"),s._isCompletelyFetched=!0,s._isFetchedWhenLoggedIn=!0,Backbone.history.navigate("/secured/edit/"+s.get("UglyHash")+"/",!0),t.addNewProjectToUserGallery(s),Backbone.Events.trigger("new:project",s)},error:function(e){var t;return t="<h1>"+e.status+": "+e.statusText+"</h1><p>"+e.responseText+"</p>",a.formError(t),a.$field.removeAttr("disabled")}});return!1}}),n}),define("modules/DocImage",["app"],function(e,t,n){var r;return r=e.module(),JJRestApi.Modules.extend("DocImage",function(e){return JJRestApi.extendModel("DocImage",{isVisibleForMember:function(){var e,t=this;return e=!1,_.each(["Projects","Workshops","Exhibitions","Excursions"],function(n){if(t.get(n).findWhere({EditableByMember:!0}))return e=!0}),e}}),JJRestApi.extendCollection("DocImage",{foo:"bar"})})});var __hasProp={}.hasOwnProperty,__extends=function(e,t){function r(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};define("modules/NMMarkdownParser",["app","modules/DataRetrieval","modules/DocImage"],function(e,t,n){var r,i,s,o;return r=function(e){function n(){return s=n.__super__.constructor.apply(this,arguments),s}return __extends(n,e),n.prototype.className="DocImage",n.prototype.rule=/\[img\s{1,}(.*?)\]/gi,n.prototype.parseFound=function(e){return parseInt(e)},n.prototype.isVisibleForMember=function(e){return _.each},n.prototype.getData=function(e){var n,r=this;return this.data=[],n=new $.Deferred,t.forMultipleDocImages(e).done(function(e){var t;return t=[],_.each(e,function(e){if(e.isVisibleForMember())return t.push(e)}),_.each(t,function(e){var t;return t=e.get("Urls")._1200.Url,r.data.push({id:e.id,tag:'<span><img src="'+t+'" /></span>'})}),n.resolve()}),n},n}(CustomMarkdownParser),i=function(e){function t(){return o=t.__super__.constructor.apply(this,arguments),o}return __extends(t,e),t.prototype.rule=/\[embed\s{1,}(.*?)\]/gi,t.prototype.url="/_md_/oembed/",t}(CustomMarkdownParser),window.ImageMarkdownParser=r,window.OEmbedMarkdownParser=i}),define("modules/ProjectEditor",["app","modules/DataRetrieval","modules/Auth","modules/Portfolio","modules/Website","modules/NMMarkdownParser"],function(e,t,n,r,i){var s;return s=e.module(),s.Inst=function(){function t(t){this.model=t,this.containerView=new s.Views.Container({model:this.model}),this.previewView=new s.Views.Preview({model:this.model}),this.mainView=new s.Views.Main({model:this.model}),this.modelJSON=_.extend(this.model.toJSON(),{CurrentMemberPerson:e.CurrentMemberPerson.toJSON()}),Backbone.Events.trigger("projectEdited",this.model),this.model.on("saved",this.modelHasSaved,this)}return t.prototype.kickOffRender=function(){return e.layout.setViewAndRenderMaybe("#project-editor",this.containerView)},t.prototype.getFilterID=function(){return""+this.model.get("ClassName")+"-"+this.model.id},t.prototype.toggleView=function(){return this.containerView.toggleView()},t.prototype.galleryImageRemoved=function(e){var t;t=this.model.get("PreviewImage");if(t&&t.id===e)return this.previewView.removePreviewImage()},t.prototype.modelHasSaved=function(){var e,t;return t=this.model.get("Title"),e='[data-editor-name="Title"]',this.previewView.$el.find(e).text(t),this.mainView.$el.find(e).text(t)},t.prototype.cleanup=function(){return this.model.off("saved",this.modelHasChanged)},t}(),s.Views.Container=Backbone.View.extend({tagName:"div",className:"editor-project-container",template:"security/editor-project-container",ACTIVE:"active",beforeRender:function(){return this.setView(".editor-project-main",e.ProjectEditor.mainView),this.setView(".editor-project-preview",e.ProjectEditor.previewView)},toggleView:function(){var e,t,n;n=this.views;for(e in n)t=n[e],t.editor&&t.editor.trigger("editor.closepopovers");return $(".editor-project-main, .editor-project-preview").toggleClass(this.ACTIVE)}}),s.Views.Preview=Backbone.View.extend({tagName:"article",template:"security/editor-project-preview",FILLED:"filled",cleanup:function(){return this.uploadZone.cleanup()},initDropzone:function(){var n=this;return e.ProjectEditor.PreviewImageZone=this.uploadZone=new JJSingleImageUploadZone(".preview-image",{url:e.Config.DocImageUrl,additionalData:{projectId:e.ProjectEditor.model.id,projectClass:e.ProjectEditor.model.get("ClassName")},getFromCache:function(e){return t.forDocImage(e)},responseHandler:function(r){var i,s;s=function(t,r){var i;i=t.get("Urls")._320,n.uploadZone.$dropzone.addClass(n.FILLED).html('<img src="'+i.Url+'" />'),_.indexOf(n.model.get("Images").getIDArray(),t.id)<0&&(i=[{FilterID:e.ProjectEditor.getFilterID(),UploadedToClass:"DocImage",id:t.id,url:r}],e.updateGalleryCache(i),Backbone.Events.trigger("DocImageAdded",i));if(n.model.get("PreviewImage")!==t)return n.model.set("PreviewImage",t),n.model.get("Images").add(t),n.model.rejectAndSave()};if(r instanceof Backbone.Model==1)return i=$("#editor-sidebar").find('li.DocImage img[data-id="'+r.id+'"]'),s(r,i.attr("src"));if(r.length)return t.forDocImage(r[0].id).done(function(e){return s(e,r[0].url)})}}),this},initEditor:function(){var e=this;return this.editor=new JJEditor($(".meta"),["InlineEditable","DateEditable","MarkdownEditable"]),this.editor.on("stateUpdate",function(t){var n,r,i,s;i=!1,s=t.ProjectPreview;for(n in s){r=s[n],n==="TeaserText"&&r&&(r=r.raw);if(!r)continue;e.model.get(n)!==r&&(i=!0,e.model.set(n,r))}if(i)return e.model.rejectAndSave()}),this},removePreviewImage:function(){return this.uploadZone.$dropzone.removeClass(this.FILLED).empty()},afterRender:function(){return this.initDropzone(),this.initEditor()},serialize:function(){return e.ProjectEditor.modelJSON}}),s.Views.Main=Backbone.View.extend({tagName:"article",template:"security/editor-project-main",initEditor:function(){var t,n=this;return this.editor=new JJEditor(this.$el,["InlineEditable","DateEditable","SplitMarkdownEditable","SelectEditable","SelectPersonEditable","SelectListEditable","SelectListConfirmEditable","ModalEditable"]),t=this.editor.getComponentByName("ProjectMain.Text").markdown,_.extend(t.options,{additionalPOSTData:{projectId:e.ProjectEditor.model.id,projectClass:e.ProjectEditor.model.get("ClassName")},uploadResponseHandler:function(t){return e.updateGalleryCache(t),Backbone.Events.trigger("DocImageAdded",t)}}),this.editor.on("editor.open-split-markdown",function(){return $("#layout").addClass("open-split-markdown")}),this.editor.on("editor.close-split-markdown",function(){return $("#layout").removeClass("open-split-markdown")}),this.editor.on("stateUpdate",function(e){return n.stateUpdate(e)}),this.editor.on("submit:ProjectMain.Website",function(e){var t,r;if(e.Title&&e.Link)return t=JJRestApi.Model("Website"),r=new t({Title:e.Title,Link:e.Link}),n.model.get("Websites").add(r),n.addWebsiteView(r,!0),n.model.save()}),this},stateUpdate:function(n){var r,i,s,o,u,a,f,l,c,h,p,d=this;console.group("STATE UPDATE"),console.log("this: %o",this),console.log("state: ",n.ProjectMain),c=!1,h=!1,p=n.ProjectMain;for(i in p){f=p[i];if(i==="Text")u=f.raw?f.raw:"",u!==this.model.get("Text")&&(c=!0,this.model.set("Text",u)),f.images&&_.each(f.images.ids,function(n,r){var i;i=!1,d.model.get("Images").each(function(e){if(e.id===n)return i=!0});if(!i)return t.forDocImage(n).done(function(t){var n,r;return d.model.get("Images").add(t),n=e.getFromGalleryCache("DocImage",t.id),r=[{FilterID:e.ProjectEditor.getFilterID(),UploadedToClass:"DocImage",id:t.id,url:n.url}],e.updateGalleryCache(r),Backbone.Events.trigger("DocImageAdded",r)})});else if(_.indexOf(["Excursion","Exhibition","Workshop","Project"],i)>=0)o=i==="Project"&&this.model.get("ClassName")==="Project"?"ChildProjects":i+"s",this.model.setRelCollByIds(o,f)&&(c=!0);else if(i==="Person")f.push(e.CurrentMemberPerson.id),this.model.setRelCollByIds("Persons",f)&&(h=!0,c=!0);else if(i==="Category")this.model.setRelCollByIds("Categories",f)&&(c=!0);else if(i==="BlockedEditors"||i==="Editors"){if(_.difference(f,e.ProjectEditor[i]).length>0||_.difference(e.ProjectEditor[i],f).length>0)e.ProjectEditor[i]=f,a={className:this.model.get("ClassName"),id:this.model.id,editors:f},r=e.ProjectEditor.ChangeEditorsPost,r&&r.readyState!==4&&r.abort(),s=e.ProjectEditor.ChangeEditorsPost=$.post(e.Config.ChangeEditorsUrl,a),s.done(function(t){if(_.difference(t,e.ProjectEditor[i]).length>0||_.difference(e.ProjectEditor[i],t).length>0)return console.log("change to confirmed"),e.ProjectEditor[i]=t,h=!0})}else i==="Title"&&this.model.get("Title")!==f&&(this.model.set("Title",f),c=!0)}console.groupEnd();if(c){l=this.model.rejectAndSave();if(l)return l.done(function(e){if(h)return d.populateEditorsSelectable(d.model.getEditorsKey(),!1)})}},populateSelectEditables:function(){var t,n,r,i,s,o,u,a,f,l,c=this;t={Person:function(t){var n,r,i;return r=[],n=e.CurrentMemberPerson.id,_.each(t,function(e){if(e.ID!==n)return r.push(e)}),i=_.without(c.model.get("Persons").getIDArray(),n),{source:r,values:i}},Category:function(e){return{source:e,values:c.model.get("Categories").getIDArray()}}},a=["Project","Excursion","Exhibition","Workshop"],r=function(e){return t[e]=function(t){var n,r;return n=[],_.each(t,function(t){if(c.model.get("ClassName")!==e||c.model.id!==t.ID)return n.push(t)}),r=c.model.idArrayOfRelationToClass(e),{source:n,values:r}}};for(i=0,o=a.length;i<o;i++)n=a[i],r(n);$.getJSON(e.Config.BasicListUrl).done(function(e){var n,r,i,s,o;_.isObject(e)&&(c.basicList=e),n=["select-list","select-person"],r=c.editor.getComponentsByType("select");for(s=0,o=n.length;s<o;s++)i=n[s],r=r.concat(c.editor.getComponentsByType(i));if(r&&c.basicList)return $.each(r,function(e,n){var r,i;r=n.getDataName();if(c.basicList[r]){t[r]&&(i=t[r](c.basicList[r]));if(i)return n.setSource(i.source,!0),n.setValue(i.values,!0)}})}),f=["BlockedEditors","Editors"],l=[];for(s=0,u=f.length;s<u;s++)n=f[s],l.push(function(t){var n;if(n=c.editor.getComponentByName("ProjectMain."+t))return $.getJSON(e.Config.GetEditorsUrl,{className:c.model.get("ClassName"),id:c.model.id}).done(function(n){if(_.isArray(n))return e.ProjectEditor[t]=n,c.populateEditorsSelectable(t)})}(n));return l},populateEditorsSelectable:function(t,n){var r,i,s;n==null&&(n=!0);if(s=this.editor.getComponentByName("ProjectMain."+t))return i=this.model.basicListWithoutCurrentMember("Persons"),r=_.map(i,function(e){return e.ID}),s.setSource(i,n),e.ProjectEditor[t]=_.intersection(e.ProjectEditor[t],r),s.setValue(e.ProjectEditor[t],n)},addWebsiteView:function(e,t){var n;return n=new i.Views.ListView({model:e}),this.insertView(".websites",n),t&&n.render(),!0},serialize:function(){return e.ProjectEditor.modelJSON},beforeRender:function(){var e=this;return this.model.get("Websites").each(function(t){return e.addWebsiteView(t)})},afterRender:function(){return this.initEditor(),this.populateSelectEditables()}}),s}),define("router",["app","modules/Auth","modules/Project","modules/Person","modules/Excursion","modules/Workshop","modules/Exhibition","modules/CalendarEntry","modules/PageError","modules/Portfolio","modules/Calendar","modules/About","modules/ProjectSearch","modules/DataRetrieval","modules/NewProject","modules/ProjectEditor"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v){var m;return m=Backbone.Router.extend({mainDeferred:null,pendingAjax:[],initialize:function(e){var t=this;return JJRestApi.Events.bind("dfdAjax",function(e){return t.pendingAjax.push(e)})},rejectAndHandle:function(n){var r,i=this;return e.isEditor=!1,e.ProjectEditor&&(e.ProjectEditor.cleanup(),e.ProjectEditor=null),n=n||{},e.handleLinks(),n.noFadeOut||(e.addLoadingClasses(),e.startSpinner()),r=this.mainDeferred,r&&r.reject(),_.each(this.pendingAjax,function(e){if(e.readyState!==4)return e.abort()}),this.pending=[],this.mainDeferred=$.Deferred(),this.mainDeferred.done(function(){return t.updateUserWidget(),i.mainDeferred=null,e.removeLoadingClasses(),e.stopSpinner()})},routes:{"":"index","about/":"showAboutPage","about/:nameSlug/":"showPersonPage","about/:nameSlug/:uglyHash/":"showPersonDetailed","portfolio/":"showPortfolio","portfolio/search/:searchTerm/":"showPortfolio","portfolio/:uglyHash/":"showPortfolioDetailed","calendar/":"showCalendar","calendar/:urlHash/":"showCalendarDetailed","login/":"showLoginForm","logout/":"doLogout","secured/edit/:uglyHash/":"showEditProjectPage","secured/new/":"showCreateProjectPage","*url/":"catchAllRoute"},index:function(t){var n,r,i,s,o=this;return i=this.rejectAndHandle(),r=e.Config,e.Cache.WholePortfolio&&(r.Featured.present.flag=!0),s=p.forProjectsOverview(r.Featured),n=p.forCalendar("upcoming"),$.when(s,n).done(function(){return i.resolve()}),i.done(function(){var t,n,r;return n=e.useLayout("index"),e.Cache.Featured||(e.Cache.Featured=o.getProjectTypeModels({IsFeatured:!0,IsPublished:!0})),r=e.Cache.Featured,o.showPackeryViewForModels(r,"portfolio",n),t=new l.Views.Container({collection:e.Collections.CalendarEntry}),n.setViewAndRenderMaybe("#calendar",t)})},showAboutPage:function(){var t,n,r;return n=this.rejectAndHandle(),t=p.forRandomGroupImage(),r=p.forPersonsOverview(),$.when(t,r).done(function(e){return n.resolve(e)}),n.done(function(t){var n,r,i,s;return r=e.useLayout("main",{customClass:"about"}),n=e.Collections.Person,i={students:n.where({IsStudent:!0}),alumnis:n.where({IsAlumni:!0}),employees:n.where({IsEmployee:!0})},s=new c.Views.PackeryContainer({groupImage:t,persons:i}),r.setViewAndRenderMaybe("",s)})},showPersonPage:function(t){var n,i=this;return n=this.rejectAndHandle(),p.forDetailedObject("Person",t).done(function(e){return n.resolve(e)}),n.done(function(t){var n,s,o;return t?(n=e.useLayout("main"),s="",t.get("Templates").each(function(e){if(!e.get("IsDetail"))return s=e.get("Url")}),o=s?new r.Views.Custom({model:t,template:s}):new r.Views.PackeryContainer({model:t}),n.setViewAndRenderMaybe("",o)):i.fourOhFour()})},showPersonDetailed:function(e,t){return this.showPortfolioDetailed(t,e)},showPortfolio:function(t){var n,r,i,s,o=this;return r=this.rejectAndHandle(),i=p.forCategories(),s=p.forProjectsOverview(e.Config.Portfolio),$.when(i,s).done(function(){return r.resolve()}),t&&console.info("searching for: %s",t),n=e.currentLayoutName==="portfolio"?!0:!1,r.done(function(){var r,i,s;return n||(r=e.useLayout("portfolio")),e.Cache.WholePortfolio||(e.Cache.WholePortfolio=o.getProjectTypeModels({IsPortfolio:!0,IsPublished:!0})),i=e.Cache.WholePortfolio,n||(o.showPackeryViewForModels(i,"portfolio",r),r.insertViewAndRenderMaybe("",new h.View({searchTerm:t}))),s=t?p.filterProjectTypesBySearchTerm(t):null,console.log("foobar"),console.log(s),Backbone.Events.trigger("search",s)})},showPortfolioDetailed:function(t,n){var i,s,o=this;return s=this.rejectAndHandle(),i=e.resolveClassTypeByHash(t),i?(p.forDetailedObject(i,t).done(function(e){return s.resolve(e)}),s.done(function(t){var i,s,u,a;return!t||!t.get("IsPublished")||!n&&!t.get("IsPortfolio")?o.fourOhFour():(s=e.useLayout("main",{customClass:"detail"}),a="",u=void 0,n&&(u=t.get("Persons").where({UrlSlug:n}),u.length&&u[0].get("Templates").each(function(e){if(e.get("IsDetail"))return a=e.get("Url")})),i=a?new r.Views.Custom({model:t,template:a}):new f.Views.Detail({model:t}),u&&(i.ownedByPerson=u[0]),s.setViewAndRenderMaybe("",i))})):(s.done(function(){return o.fourOhFour()}),s.resolve())},showCalendar:function(){return console.info("show whole calendar")},showCalendarDetailed:function(t){var n,r=this;return n=this.rejectAndHandle(),p.forDetailedObject("CalendarEntry",t).done(function(e){return n.resolve(e)}),n.done(function(t){var n,i;return t?(i=e.useLayout("main",{customClass:"detail"}),n=new l.Views.Detail({model:t}),i.setViewAndRenderMaybe("",n)):r.fourOhFour()})},showLoginForm:function(){var n;return n=this.rejectAndHandle(),console.info("login form. if logged in, redirect to dashboard"),t.performLoginCheck().done(function(){return n.resolve()}),n.done(function(){var n;return n=e.useLayout("auth"),n.setViewAndRenderMaybe("",new t.Views.Login)})},doLogout:function(){var n,r;return this.mainDfd&&(this.mainDfd.reject(),this.mainDfd=null),r=e.useLayout("auth"),n=$.Deferred(),e.CurrentMember?(r.setViewAndRenderMaybe("",new t.Views.Logout),n=t.logout()):n.resolve()},showCreateProjectPage:function(){var n,r=this;return n=this.rejectAndHandle(),t.performLoginCheck().done(function(){return e.CurrentMember.Email?n.resolve():r.fourOhFour()}),n.done(function(){var t;return t=e.useLayout("main"),t.setViewAndRenderMaybe("",new d.Views.NewProject)})},showEditProjectPage:function(n){var r,i,s=this;return i=this.rejectAndHandle(),e.isEditor=!0,r=e.resolveClassTypeByHash(n),t.canEdit({className:r,UglyHash:n}).fail(function(){return Backbone.history.navigate("/login/",!0)}).done(function(){return p.forDetailedObject(r,n,!0).done(function(e){return i.resolve(e)})}),i.fail(function(){return Backbone.history.navigate("/login/",!0)}).done(function(t){var n;return n=e.useLayout("editor"),e.ProjectEditor=new v.Inst(t),e.ProjectEditor.kickOffRender()})},catchAllRoute:function(e){return console.log("catch all route")},fourOhFour:function(){return this.rejectAndHandle().resolve().done(function(){var t,n;return n=e.useLayout("main"),t=new a.Views.FourOhFour({attributes:{"data-url":window.location.href}}),n.setViewAndRenderMaybe("",t)})},showPackeryViewForModels:function(e,t,n){var r;return r=new f.Views.PackeryContainer({collection:e,linkTo:t}),n.setViewAndRenderMaybe("#packery-container",r)},getProjectTypeModels:function(t){var n,r,i,s,o;r=[],o=e.Config.ProjectTypes;for(i=0,s=o.length;i<s;i++)n=o[i],r=r.concat(e.Collections[n].where(t));return r}}),m}),function(e){var t,n,r;return t={},e(window).on("resize",function(){var n,r,i;i=[];for(r in t)n=t[r],n&&e.isFunction(n)?i.push(n()):i.push(void 0);return i}),e.addOnWindowResize=function(n,r){if(e.isFunction(r))return t[n]=r},e.removeOnWindowResize=function(e){if(t[e])return delete t[e]},r=function(t){if(!t)return;return e.each(t,function(t,n){var r,i,s,o,u,a;i=e(n.parent),r=e(n.child,i);if(!r.length)return;a=i.width(),u=i.height(),o=r.outerWidth(!0),r.length>1?(s=0,r.each(function(){return s+=e(this).outerHeight(!0)})):s=r.height();if(n.resize==="child")return r.height(a/o*s);if(n.resize==="parent")return i.height(s)})},n=function(){var t;t=e("iframe","article.portfolio-detail");if(!t.length)return;return t.each(function(t,n){var r,i,s,o,u;r=e(n),s=r.attr("width"),i=r.attr("height");if(!s||!i)return;return u=r.width(),o=u/s,r.height(i*o)})},e(document).on("portfoliodetail:rendered",n),e.addOnWindowResize("iframe",n),e(document).on("about:rendered",function(){return r([{parent:".group-image",child:"img",resize:"child"},{parent:".statement",child:"p",resize:"parent"}])})}(jQuery),define("plugins/misc/misc",function(){}),require(["app","router","modules/Auth","modules/Project","modules/Person","modules/Excursion","modules/Workshop","modules/Exhibition","modules/CalendarEntry","modules/RecycleBin","plugins/misc/spin.min","plugins/misc/misc"],function(e,t,n,r,i,s,o,u,a,f,l,c){return Backbone.JJRelational.Config.work_with_store=!0,e.ajaxCount=0,e.Router=new t,e.Layout,e.PageInfos={},e.CategoriesFetched,e.Collections={},e.Cache={},e.Cache.UserGallery={fetched:{Projects:!1,Person:!1},images:{Person:[],Projects:[]}},e.CurrentMember={},e.CurrentMemberPerson=null,e.ProjectEditor=null,e.origin=window.location.origin?window.location.origin:window.location.protocol+"//"+window.location.host,console.log(e),e.Config={ProjectTypes:["Project","Excursion","Workshop","Exhibition"],StoreHooks:["Project","Excursion","Workshop","Exhibition","Person","CalendarEntry","DocImage","Category"],ClassEnc:{0:"Project",1:"Excursion",2:"Exhibition",3:"Workshop"},GalleryUrl:"imagery/gallery/",DocImageUrl:"imagery/images/docimage/",PersonImageUrl:"imagery/images/personimage/",BasicListUrl:"lists/all/",GetEditorsUrl:"api/v2/Editors/getEditors",ChangeEditorsUrl:"api/v2/Editors/changeEditors",ChangeCredentialsUrl:"api/v2/Auth/credentials/",UrlSuffixes:{about_persons:"?search=IsExternal:0"},Featured:{present:{flag:!1,types:[]},domName:function(e){return"featured-"+e.toLowerCase()},urlSuffix:"?"+JJRestApi.objToUrlString({search:{IsFeatured:1},context:"view.portfolio_init"})},Portfolio:{present:{flag:!1,types:[]},domName:function(e){return"portfolio-"+e.toLowerCase()},urlSuffix:"?"+JJRestApi.objToUrlString({search:{IsPortfolio:1},context:"view.portfolio_init"})},Calendar:{upcoming:{flag:!1,url:"api/v2/UpcomingEvents.json"},whole:{flag:!1}},Person:{about_present:!1,name:"about-persons",urlSuffix:"?"+JJRestApi.objToUrlString({search:{IsExternal:0},context:"view.about_init",sort:"Surname"})},Detail:{CalendarEntry:{where:function(e){return{UrlHash:e}},domName:"detailed-calendar-item",urlSuffix:function(e){return"?"+JJRestApi.objToUrlString({search:{UrlHash:e},limit:1})}},Person:{where:function(e){return{UrlSlug:e}},domName:"detailed-person-item",urlSuffix:function(e){return"?"+JJRestApi.objToUrlString({search:{UrlSlug:e},limit:1})}},Project:{where:function(e){return{UglyHash:e}},domName:"detailed-project-item",urlSuffix:function(e){return"?"+JJRestApi.objToUrlString({search:{UglyHash:e},limit:1})}},Excursion:{where:function(e){return{UglyHash:e}},domName:"detailed-excursion-item",urlSuffix:function(e){return"?"+JJRestApi.objToUrlString({search:{UglyHash:e},limit:1})}},Workshop:{where:function(e){return{UglyHash:e}},domName:"detailed-workshop-item",urlSuffix:function(e){return"?"+JJRestApi.objToUrlString({search:{UglyHash:e},limit:1})}},Exhibition:{where:function(e){return{UglyHash:e}},domName:"detailed-exhibition-item",urlSuffix:function(e){return"?"+JJRestApi.objToUrlString({search:{UglyHash:e},limit:1})}}},Spinner:{lines:13,length:6,width:2,radius:7,corners:1,rotate:0,direction:1,color:"#262626",speed:1,trail:70,shadow:!1,hwaccel:!1,className:"spinner",zIndex:2e9,top:"auto",left:"auto"}},e.bindListeners=function(){var t,n,r,i,s;s=e.Config.StoreHooks,n=function(t){return Backbone.JJStore.Events.bind("added:"+t,function(n){var r;r=e.Collections[t];if(r)return r.add(n)})};for(r=0,i=s.length;r<i;r++)t=s[r],n(t);return!0},e.handleFetchedModels=function(e,t,n){var r,i,s,o,u;n=n||{},r=JJRestApi.Model(e),t=_.isArray(t)?t:[t],u=[];for(s=0,o=t.length;s<o;s++)i=t[s],u.push(new r(i));return u},e.handleFetchedModel=function(e,t,n){var r;return n=n||{},r=JJRestApi.Model(e),new r(t)},e.handleLinks=function(){var e;return e=Backbone.history.fragment,e="/"+e.substring(0,e.indexOf("/")+1),$("#wrapper .badge").find("a").each(function(t,n){var r;r=$(n),r.removeClass("active");if(r.attr("href")===e)return r.addClass("active")})},e.updateGalleryCache=function(e){var t,n=this;return t=function(e,t){return e.push({id:t.id,tag:t.tag,url:t.url})},_.each(e,function(e){var r;if(r=e.UploadedToClass){r==="DocImage"&&_.each(n.Cache.UserGallery.images.Projects,function(n){if(n.FilterID===e.FilterID)return t(n.Images,e)});if(r==="PersonImage")return t(n.Cache.UserGallery.images.Person,e)}})},e.removeFromGalleryCache=function(e,t){var n=this;return e==="PersonImage"&&_.each(this.Cache.UserGallery.images.Person,function(e,r){if(e.id===t)return delete n.Cache.UserGallery.images.Person[r]}),e==="DocImage"&&_.each(this.Cache.UserGallery.images.Projects,function(e,r){return _.each(e.Images,function(e,i){if(e.id===t)return delete n.Cache.UserGallery.images.Projects[r].Images[i]})}),!0},e.getFromGalleryCache=function(e,t){var n,r=this;return n=null,e==="PersonImage"&&_.each(this.Cache.UserGallery.images.Person,function(e,i){if(e.id===t)return n=r.Cache.UserGallery.images.Person[i]}),e==="DocImage"&&_.each(this.Cache.UserGallery.images.Projects,function(e,i){return _.each(e.Images,function(e,s){if(e.id===t)return n=r.Cache.UserGallery.images.Projects[i].Images[s]})}),n},e.initialLoggedInCheck=function(){return JJRestApi.getFromDomOrApi("current-member",{noAjax:!0}).done(function(e){return n.handleUserServerResponse(e)})},e.setupSpinner=function(){return this.$body=$("body"),this.$main=$("#main"),this.spinner={inst:new l(e.Config.Spinner),target:document.getElementById("spinner-target")}},e.startSpinner=function(){var e;return e=this.spinner,$(e.target).addClass("active"),e.inst.spin(e.target)},e.stopSpinner=function(){var e;return e=this.spinner,$(e.target).removeClass("active"),e.inst.stop()},e.addLoadingClasses=function(){return this.$body.addClass("isLoading"),this.$main.addClass("loading")},e.removeLoadingClasses=function(){return this.$body.removeClass("isLoading"),this.$main.removeClass("loading")},e.resolveClassTypeByHash=function(e){return this.Config.ClassEnc[e.substr(0,1)]},e.wholePortfolioJSON=function(){var e,t,n,r,i;n=this.Cache.WholePortfolio;if(!this.Cache.WholePortfolioJSON){t=[];for(r=0,i=n.length;r<i;r++)e=n[r],t.push(e.toJSON());this.Cache.WholePortfolioJSON=t}return this.Cache.WholePortfolioJSON},e.bindListeners(),Backbone.View.prototype.showMessageAt=function(e,t,n){var r;return r=$('<p class="'+n+'">'+e+"</p>"),r.appendTo(t),setTimeout(function(){return r.fadeOut().remove()},2e3)},Backbone.__pendingSaveReqs=[],Backbone.JJRelationalModel.prototype.rejectAndSave=function(){var e,t,n=this;return Array.prototype.push.call(arguments,null,{success:function(e){return e.trigger("saved")}}),t=this.save.apply(this,arguments),e=!1,_.each(Backbone.__pendingSaveReqs,function(r){if(r.cid===n.cid)return e=!0,r.xhr&&r.xhr.readyState!==4&&r.xhr.abort(),r.xhr=t}),e||Backbone.__pendingSaveReqs.push({cid:this.cid,xhr:t}),t},Handlebars.registerHelper("stringCompare",function(e,t,n){return e===t?n.fn(this):n.inverse(this)}),Handlebars.registerHelper("stringDiff",function(e,t,n){return e!==t?n.fn(this):n.inverse(this)}),Handlebars.registerHelper("console",function(e){return console.log(e),"logging..."}),$(function(){return e.$body=$("body"),jQuery.event.props.push("dataTransfer"),$(document).bind("ajaxSend",function(t,n,r){if(r.type!=="GET")return e.ajaxCount++,e.$body.addClass("requesting")}),$(document).bind("ajaxComplete",function(t,n,r){if(r.type!=="GET"){e.ajaxCount--;if(e.ajaxCount===0)return e.$body.removeClass("requesting")}}),$(document).on("dragenter dragover dragleave drop",function(e){return e.type==="dragenter"||e.type==="dragover"?$.fireGlobalDragEvent("dragstart",e.target,"file"):$.fireGlobalDragEvent(e.type,e.target,"file"),e.preventDefault()}),f.setup(),e.setupSpinner(),JJRestApi.hookSecurityToken(),JJRestApi.bootstrapWithStructure().done(function(){var t;return t=function(t){var n,r,i,s,o;o=[];for(i=0,s=t.length;i<s;i++)r=t[i],n=JJRestApi.Collection(r),o.push(e.Collections[r]=new n);return o},t(e.Config.StoreHooks),e.initialLoggedInCheck(),Backbone.history.start({pushState:!0})})}),$(document).on("click","a:not([data-bypass])",function(e){var t,n;t=$(this).attr("href"),n=this.protocol+"//";if(t&&t.slice(0,n.length)!==n&&t.indexOf("javascript:")!==0)return e.preventDefault(),Backbone.history.navigate(t,!0)})}),define("main",function(){}),require.config({deps:["main"],paths:{libs:"../assets/js/libs",plugins:"../assets/js/plugins",bower:"../bower_components",responsiveimage:"../../responsive-image/thirdparty/picturefill",jquery:"../bower_components/jquery/jquery",underscore:"../bower_components/underscore/underscore",backbone:"../bower_components/backbone/backbone",handlebars:"../bower_components/handlebars/handlebars",layoutmanager:"../bower_components/layoutmanager/backbone.layoutmanager",classie:"../bower_components/classie","doc-ready":"../bower_components/doc-ready",eventEmitter:"../bower_components/eventEmitter",eventie:"../bower_components/eventie","get-size":"../bower_components/get-size","get-style-property":"../bower_components/get-style-property","matches-selector":"../bower_components/matches-selector",outlayer:"../bower_components/outlayer",packery:"../bower_components/packery/js"},shim:{jquery:{exports:"$"},backbone:{deps:["underscore","jquery"],exports:"Backbone"},underscore:{exports:"_"},handlebars:{exports:"Handlebars"},"plugins/tooltip/jquery.qtip":["jquery"],"plugins/packery/packerytest":["jquery","plugins/tooltip/jquery.qtip"],"modules/JJPackery":["plugins/packery/packerytest"],"responsiveimage/picturefill":["responsiveimage/external/matchmedia"],"plugins/misc/spin.min":["jquery"],"plugins/misc/misc":["jquery"],"plugins/misc/jquery.list":["jquery"],"plugins/editor/jquery.jjfileupload":["jquery"],"plugins/editor/jquery.tabby":["jquery"],"plugins/misc/zebra_datepicker.src":["jquery"],"plugins/editor/jquery.editor-sidebar":["plugins/misc/misc"],"plugins/editor/jquery.jjdropzone":["plugins/editor/jquery.jjfileupload"],"plugins/editor/jquery.jjmarkdown":["plugins/editor/jquery.jjdropzone","plugins/editor/jquery.tabby","plugins/editor/jquery.jjfileupload","plugins/editor/marked_jjedit"],"plugins/editor/jquery.editor-popover":["plugins/tooltip/jquery.qtip","plugins/editor/jquery.jjmarkdown","plugins/misc/zebra_datepicker.src"],layoutmanager:["backbone"],"plugins/backbone.JJRelational":["backbone"],"plugins/backbone.JJRestApi":["backbone"],"modules/NMMarkdownParser":["plugins/editor/jquery.jjmarkdown"],"bower/jquery-ui/ui/jquery.ui.autocomplete":["bower/jquery-ui/ui/jquery.ui.widget"],"bower/jquery-ui/ui/jquery.ui.menu":["bower/jquery-ui/ui/jquery.ui.widget"],"plugins/visualsearch/visualsearch":["layoutmanager","bower/jquery-ui/ui/jquery.ui.core","bower/jquery-ui/ui/jquery.ui.autocomplete","bower/jquery-ui/ui/jquery.ui.menu"]}}),define("config",function(){});
this["JST"] = this["JST"] || {};

this["JST"]["app/templates/404.html"] = Handlebars.template(function (Handlebars,depth0,helpers,partials,data) {
  this.compilerInfo = [4,'>= 1.0.0'];
helpers = this.merge(helpers, Handlebars.helpers); data = data || {};
  var buffer = "", stack1, functionType="function", escapeExpression=this.escapeExpression;


  buffer += "<div style=\"margin-top:300px\">\n	<h2>Your lucky numbers for today: 4, 0, 4</h2>\n	<p>A billion pages on the web, and you chose: ";
  if (stack1 = helpers.url) { stack1 = stack1.call(depth0, {hash:{},data:data}); }
  else { stack1 = depth0.url; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }
  buffer += escapeExpression(stack1)
    + ".<br/>Try again</p>\n</div>";
  return buffer;
  });

this["JST"]["app/templates/about-packery.html"] = Handlebars.template(function (Handlebars,depth0,helpers,partials,data) {
  this.compilerInfo = [4,'>= 1.0.0'];
helpers = this.merge(helpers, Handlebars.helpers); data = data || {};
  var buffer = "", stack1, functionType="function", escapeExpression=this.escapeExpression, self=this;

function program1(depth0,data) {
  
  var buffer = "", stack1, stack2;
  buffer += "\n		<section class=\"packery-item group-image\">\n			<div>\n				";
  stack2 = helpers['with'].call(depth0, ((stack1 = ((stack1 = depth0.GroupImage),stack1 == null || stack1 === false ? stack1 : stack1.Urls)),stack1 == null || stack1 === false ? stack1 : stack1._768), {hash:{},inverse:self.noop,fn:self.program(2, program2, data),data:data});
  if(stack2 || stack2 === 0) { buffer += stack2; }
  buffer += "\n			<div>\n		</section>\n		";
  return buffer;
  }
function program2(depth0,data) {
  
  var buffer = "", stack1;
  buffer += "\n					<img src=\"";
  if (stack1 = helpers.Url) { stack1 = stack1.call(depth0, {hash:{},data:data}); }
  else { stack1 = depth0.Url; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }
  buffer += escapeExpression(stack1)
    + "\" width=\"";
  if (stack1 = helpers.Width) { stack1 = stack1.call(depth0, {hash:{},data:data}); }
  else { stack1 = depth0.Width; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }
  buffer += escapeExpression(stack1)
    + "\" height=\"";
  if (stack1 = helpers.Height) { stack1 = stack1.call(depth0, {hash:{},data:data}); }
  else { stack1 = depth0.Height; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }
  buffer += escapeExpression(stack1)
    + "\" />\n				";
  return buffer;
  }

  buffer += "<!-- section class=\"packery-wrapper\" -->\n<div class=\"packery-test about\">\n	<div class=\"packery\">\n\n		<!-- left top -->\n		<div class=\"stamp corner left top\"></div>\n		<div class=\"stamp top\"></div>\n		<div class=\"stamp left\"></div>\n\n		<!-- top center -->\n		<div class=\"stamp top center\"></div>\n\n		<!-- right top -->\n		<!--<div class=\"stamp corner right top\"></div>\n		<div class=\"stamp top right\"></div>\n		<div class=\"stamp right\"></div>-->\n\n		<!-- left center -->\n		<!--<div class=\"stamp left center\"></div>-->\n\n		<!-- left bottom -->\n		<!--<div class=\"stamp corner left bottom\"></div>\n		<div class=\"stamp bottom\"></div>\n		<div class=\"stamp left bottom\"></div>\n\n		<div class=\"stamp corner right bottom\"></div>\n		<div class=\"stamp bottom right-left\"></div>\n		<div class=\"stamp right bottom\"></div>-->	\n\n		";
  stack1 = helpers['if'].call(depth0, depth0.GroupImage, {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});
  if(stack1 || stack1 === 0) { buffer += stack1; }
  buffer += "\n\n		<section class=\"statement packery-item\">\n			<div>\n				<p>The class <cite>New Media</cite> within the course <cite>Visual Communication</cite> at the <cite>School of Art and Design Kassel</cite> walks a fine line between art, design, provocation and study. The main focus lies on the media consumption of society and its perpetual obsession with technological progress, change and transformation; established processes and methods are permanently questioned and modified.</p>\n				<p>The students in the class <cite>New Media</cite> see themselves as researchers, artists, designers and developers at the same time.</p>\n				<p>Realising and publicly defending a deeply personal idea means also being able to realise the ideas of others. An outstanding developer of own concepts and ideas will have the ability to implement external ideas and concepts as well.</p>\n				<p>There is no need to train service providers for an existing industry, but personalities who by discourse acquired skills which are constantly expanded and established – for oneself and others.</p>\n				<p>By use of the Internet and support of the group these skills are exchanged, discussed and broadened self-educatedly. This provides a topicality and relevance which eludes institutions.</p>\n				<p>To study “New Media” is to be an author. To learn from oneself, to learn seeing, speaking and thinking. To develop a culture of debate. To work on projects together. To mix media and ideas, to fail and learn from it. The aim is to shape a personal position and methodology.</p>\n			</div>\n		</section>\n\n		<section class=\"students packery-item\">\n			<div>\n				<h1>Students</h1>\n				<ul id=\"student-list\"></ul>\n			</div>\n		</section>\n		<section class=\"alumni packery-item\">\n			<div>\n				<h1>Alumni</h1>\n				<ul id=\"alumni-list\"></ul>\n			</div>\n		</section>\n	</div>\n</div>\n\n<!-- /section -->";
  return buffer;
  });

this["JST"]["app/templates/calendar-container.html"] = Handlebars.template(function (Handlebars,depth0,helpers,partials,data) {
  this.compilerInfo = [4,'>= 1.0.0'];
helpers = this.merge(helpers, Handlebars.helpers); data = data || {};
  var buffer = "", stack1, self=this;

function program1(depth0,data) {
  
  
  return "\n	<h2>Calendar</h2>\n	<ul id=\"calendar-list\">\n\n	</ul>\n";
  }

  buffer += "<!-- div -->\n";
  stack1 = helpers['if'].call(depth0, depth0.HasItems, {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});
  if(stack1 || stack1 === 0) { buffer += stack1; }
  buffer += "\n<!-- /div -->";
  return buffer;
  });

this["JST"]["app/templates/calendar-detail.html"] = Handlebars.template(function (Handlebars,depth0,helpers,partials,data) {
  this.compilerInfo = [4,'>= 1.0.0'];
helpers = this.merge(helpers, Handlebars.helpers); data = data || {};
  var buffer = "", stack1, stack2, options, helperMissing=helpers.helperMissing, functionType="function", escapeExpression=this.escapeExpression, self=this;

function program1(depth0,data) {
  
  var buffer = "", stack1, stack2, options;
  buffer += "\n		<p>";
  options = {hash:{},data:data};
  stack2 = ((stack1 = helpers.commaSeparatedWebsites || depth0.commaSeparatedWebsites),stack1 ? stack1.call(depth0, depth0.Websites, options) : helperMissing.call(depth0, "commaSeparatedWebsites", depth0.Websites, options));
  if(stack2 || stack2 === 0) { buffer += stack2; }
  buffer += "</p>\n	";
  return buffer;
  }

function program3(depth0,data) {
  
  var buffer = "", stack1, stack2, options;
  buffer += "\n		";
  options = {hash:{},data:data};
  stack2 = ((stack1 = helpers.portfoliolist || depth0.portfoliolist),stack1 ? stack1.call(depth0, depth0.combinedProjects, "Project", options) : helperMissing.call(depth0, "portfoliolist", depth0.combinedProjects, "Project", options));
  if(stack2 || stack2 === 0) { buffer += stack2; }
  buffer += "\n	";
  return buffer;
  }

function program5(depth0,data) {
  
  var buffer = "", stack1, stack2, options;
  buffer += "\n		";
  options = {hash:{},data:data};
  stack2 = ((stack1 = helpers.portfoliolist || depth0.portfoliolist),stack1 ? stack1.call(depth0, depth0.Exhibitions, "Exhibition", options) : helperMissing.call(depth0, "portfoliolist", depth0.Exhibitions, "Exhibition", options));
  if(stack2 || stack2 === 0) { buffer += stack2; }
  buffer += "\n	";
  return buffer;
  }

function program7(depth0,data) {
  
  var buffer = "", stack1, stack2, options;
  buffer += "\n		";
  options = {hash:{},data:data};
  stack2 = ((stack1 = helpers.portfoliolist || depth0.portfoliolist),stack1 ? stack1.call(depth0, depth0.Workshops, "Workshop", options) : helperMissing.call(depth0, "portfoliolist", depth0.Workshops, "Workshop", options));
  if(stack2 || stack2 === 0) { buffer += stack2; }
  buffer += "\n	";
  return buffer;
  }

function program9(depth0,data) {
  
  var buffer = "", stack1, stack2, options;
  buffer += "\n		";
  options = {hash:{},data:data};
  stack2 = ((stack1 = helpers.portfoliolist || depth0.portfoliolist),stack1 ? stack1.call(depth0, depth0.Excursions, "Excursion", options) : helperMissing.call(depth0, "portfoliolist", depth0.Excursions, "Excursion", options));
  if(stack2 || stack2 === 0) { buffer += stack2; }
  buffer += "\n	";
  return buffer;
  }

  buffer += "<!-- article class=\"portfolio-detail\" -->\n<header>\n	<h1>";
  if (stack1 = helpers.Title) { stack1 = stack1.call(depth0, {hash:{},data:data}); }
  else { stack1 = depth0.Title; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }
  buffer += escapeExpression(stack1)
    + "</h1>\n	<p>";
  options = {hash:{},data:data};
  buffer += escapeExpression(((stack1 = helpers.niceDate || depth0.niceDate),stack1 ? stack1.call(depth0, depth0, options) : helperMissing.call(depth0, "niceDate", depth0, options)))
    + "</p>\n	";
  stack2 = helpers['if'].call(depth0, depth0.Websites, {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});
  if(stack2 || stack2 === 0) { buffer += stack2; }
  buffer += "\n</header>\n<section>\n	";
  if (stack2 = helpers.MarkdownedText) { stack2 = stack2.call(depth0, {hash:{},data:data}); }
  else { stack2 = depth0.MarkdownedText; stack2 = typeof stack2 === functionType ? stack2.apply(depth0) : stack2; }
  if(stack2 || stack2 === 0) { buffer += stack2; }
  buffer += "\n</section>\n<aside>\n	";
  stack2 = helpers['if'].call(depth0, depth0.combinedProjects, {hash:{},inverse:self.noop,fn:self.program(3, program3, data),data:data});
  if(stack2 || stack2 === 0) { buffer += stack2; }
  buffer += "\n\n	";
  stack2 = helpers['if'].call(depth0, depth0.Exhibitions, {hash:{},inverse:self.noop,fn:self.program(5, program5, data),data:data});
  if(stack2 || stack2 === 0) { buffer += stack2; }
  buffer += "\n	\n	";
  stack2 = helpers['if'].call(depth0, depth0.Workshops, {hash:{},inverse:self.noop,fn:self.program(7, program7, data),data:data});
  if(stack2 || stack2 === 0) { buffer += stack2; }
  buffer += "\n	\n	";
  stack2 = helpers['if'].call(depth0, depth0.Excursions, {hash:{},inverse:self.noop,fn:self.program(9, program9, data),data:data});
  if(stack2 || stack2 === 0) { buffer += stack2; }
  buffer += "\n</aside>\n<!-- /article -->";
  return buffer;
  });

this["JST"]["app/templates/calendar-list-item.html"] = Handlebars.template(function (Handlebars,depth0,helpers,partials,data) {
  this.compilerInfo = [4,'>= 1.0.0'];
helpers = this.merge(helpers, Handlebars.helpers); data = data || {};
  var buffer = "", stack1, functionType="function", escapeExpression=this.escapeExpression;


  buffer += "<!-- li class=\"upcoming-calendar-list-item\" -->\n<a href=\"/calendar/";
  if (stack1 = helpers.UrlHash) { stack1 = stack1.call(depth0, {hash:{},data:data}); }
  else { stack1 = depth0.UrlHash; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }
  buffer += escapeExpression(stack1)
    + "/\">\n	<time datetime=\"\">";
  if (stack1 = helpers.DateRangeNice) { stack1 = stack1.call(depth0, {hash:{},data:data}); }
  else { stack1 = depth0.DateRangeNice; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }
  buffer += escapeExpression(stack1)
    + "</time>\n	";
  if (stack1 = helpers.Title) { stack1 = stack1.call(depth0, {hash:{},data:data}); }
  else { stack1 = depth0.Title; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }
  buffer += escapeExpression(stack1)
    + "\n</a>\n<!-- /li -->";
  return buffer;
  });

this["JST"]["app/templates/employee-item.html"] = Handlebars.template(function (Handlebars,depth0,helpers,partials,data) {
  this.compilerInfo = [4,'>= 1.0.0'];
helpers = this.merge(helpers, Handlebars.helpers); data = data || {};
  var buffer = "", stack1, functionType="function", escapeExpression=this.escapeExpression, self=this;

function program1(depth0,data) {
  
  var buffer = "", stack1, stack2;
  buffer += "\n			";
  stack2 = helpers['with'].call(depth0, ((stack1 = ((stack1 = depth0.Image),stack1 == null || stack1 === false ? stack1 : stack1.Urls)),stack1 == null || stack1 === false ? stack1 : stack1._320), {hash:{},inverse:self.noop,fn:self.programWithDepth(2, program2, data, depth0),data:data});
  if(stack2 || stack2 === 0) { buffer += stack2; }
  buffer += "\n		";
  return buffer;
  }
function program2(depth0,data,depth1) {
  
  var buffer = "", stack1, stack2;
  buffer += "\n				<a href=\"/about/"
    + escapeExpression(((stack1 = depth1.UrlSlug),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))
    + "/\"><img src=\"";
  if (stack2 = helpers.Url) { stack2 = stack2.call(depth0, {hash:{},data:data}); }
  else { stack2 = depth0.Url; stack2 = typeof stack2 === functionType ? stack2.apply(depth0) : stack2; }
  buffer += escapeExpression(stack2)
    + "\" /></a>\n			";
  return buffer;
  }

  buffer += "<!-- section class=\"person gravity-item\" -->\n<div>\n	<div class=\"img\">\n		";
  stack1 = helpers['if'].call(depth0, depth0.Image, {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});
  if(stack1 || stack1 === 0) { buffer += stack1; }
  buffer += "\n	</div>\n	<h1><a href=\"/about/";
  if (stack1 = helpers.UrlSlug) { stack1 = stack1.call(depth0, {hash:{},data:data}); }
  else { stack1 = depth0.UrlSlug; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }
  buffer += escapeExpression(stack1)
    + "/\">";
  if (stack1 = helpers.FirstName) { stack1 = stack1.call(depth0, {hash:{},data:data}); }
  else { stack1 = depth0.FirstName; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }
  buffer += escapeExpression(stack1)
    + " ";
  if (stack1 = helpers.Surname) { stack1 = stack1.call(depth0, {hash:{},data:data}); }
  else { stack1 = depth0.Surname; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }
  buffer += escapeExpression(stack1)
    + "</a></h1>\n	<p>";
  if (stack1 = helpers.JobTitle) { stack1 = stack1.call(depth0, {hash:{},data:data}); }
  else { stack1 = depth0.JobTitle; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }
  buffer += escapeExpression(stack1)
    + "</p>\n</div>\n<!-- /section -->";
  return buffer;
  });

this["JST"]["app/templates/layouts/auth.html"] = Handlebars.template(function (Handlebars,depth0,helpers,partials,data) {
  this.compilerInfo = [4,'>= 1.0.0'];
helpers = this.merge(helpers, Handlebars.helpers); data = data || {};
  var buffer = "";


  return buffer;
  });

this["JST"]["app/templates/layouts/editor.html"] = Handlebars.template(function (Handlebars,depth0,helpers,partials,data) {
  this.compilerInfo = [4,'>= 1.0.0'];
helpers = this.merge(helpers, Handlebars.helpers); data = data || {};
  


  return "<section id=\"project-editor\"></section>";
  });

this["JST"]["app/templates/layouts/index.html"] = Handlebars.template(function (Handlebars,depth0,helpers,partials,data) {
  this.compilerInfo = [4,'>= 1.0.0'];
helpers = this.merge(helpers, Handlebars.helpers); data = data || {};
  


  return "<div id=\"packery-container\"></div>\n<section id=\"calendar\" class=\"calendar\"></section>";
  });

this["JST"]["app/templates/layouts/main.html"] = Handlebars.template(function (Handlebars,depth0,helpers,partials,data) {
  this.compilerInfo = [4,'>= 1.0.0'];
helpers = this.merge(helpers, Handlebars.helpers); data = data || {};
  var buffer = "";


  return buffer;
  });

this["JST"]["app/templates/layouts/portfolio.html"] = Handlebars.template(function (Handlebars,depth0,helpers,partials,data) {
  this.compilerInfo = [4,'>= 1.0.0'];
helpers = this.merge(helpers, Handlebars.helpers); data = data || {};
  


  return "<div id=\"packery-container\"></div>";
  });

this["JST"]["app/templates/packery-container.html"] = Handlebars.template(function (Handlebars,depth0,helpers,partials,data) {
  this.compilerInfo = [4,'>= 1.0.0'];
helpers = this.merge(helpers, Handlebars.helpers); data = data || {};
  


  return "<!-- section class=\"packery-wrapper\" -->\n<div class=\"packery-test\">\n	<div class=\"packery\">\n\n		<!-- left top -->\n		<div class=\"stamp corner left top\"></div>\n		<div class=\"stamp top\"></div>\n		<div class=\"stamp left\"></div>\n\n		<!-- top center -->\n		<div class=\"stamp top center\"></div>\n\n		<!-- right top -->\n		<div class=\"stamp corner right top\"></div>\n		<div class=\"stamp top right\"></div>\n		<div class=\"stamp right\"></div>\n\n		<!-- left center -->\n		<div class=\"stamp left center\"></div>\n\n		<!-- left bottom -->\n		<div class=\"stamp corner left bottom\"></div>\n		<div class=\"stamp bottom\"></div>\n		<div class=\"stamp left bottom\"></div>\n\n		<div class=\"stamp corner right bottom\"></div>\n		<div class=\"stamp bottom right-left\"></div>\n		<div class=\"stamp right bottom\"></div>\n		\n	</div>\n</div>\n<!-- /section -->";
  });

this["JST"]["app/templates/packery-list-item.html"] = Handlebars.template(function (Handlebars,depth0,helpers,partials,data) {
  this.compilerInfo = [4,'>= 1.0.0'];
helpers = this.merge(helpers, Handlebars.helpers); data = data || {};
  var buffer = "", stack1, functionType="function", escapeExpression=this.escapeExpression, self=this;

function program1(depth0,data) {
  
  var buffer = "", stack1, stack2;
  buffer += "\n			";
  stack2 = helpers['with'].call(depth0, ((stack1 = ((stack1 = depth0.PreviewImage),stack1 == null || stack1 === false ? stack1 : stack1.Urls)),stack1 == null || stack1 === false ? stack1 : stack1._320), {hash:{},inverse:self.noop,fn:self.program(2, program2, data),data:data});
  if(stack2 || stack2 === 0) { buffer += stack2; }
  buffer += "\n		";
  return buffer;
  }
function program2(depth0,data) {
  
  var buffer = "", stack1;
  buffer += "\n				<div><img src=\"";
  if (stack1 = helpers.Url) { stack1 = stack1.call(depth0, {hash:{},data:data}); }
  else { stack1 = depth0.Url; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }
  buffer += escapeExpression(stack1)
    + "\" width=\"";
  if (stack1 = helpers.Width) { stack1 = stack1.call(depth0, {hash:{},data:data}); }
  else { stack1 = depth0.Width; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }
  buffer += escapeExpression(stack1)
    + "\" height=\"";
  if (stack1 = helpers.Height) { stack1 = stack1.call(depth0, {hash:{},data:data}); }
  else { stack1 = depth0.Height; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }
  buffer += escapeExpression(stack1)
    + "\"/></div>\n			";
  return buffer;
  }

function program4(depth0,data) {
  
  var buffer = "", stack1, stack2;
  buffer += "\n		<a href=\"/";
  if (stack1 = helpers.LinkTo) { stack1 = stack1.call(depth0, {hash:{},data:data}); }
  else { stack1 = depth0.LinkTo; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }
  buffer += escapeExpression(stack1)
    + "/";
  if (stack1 = helpers.UglyHash) { stack1 = stack1.call(depth0, {hash:{},data:data}); }
  else { stack1 = depth0.UglyHash; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }
  buffer += escapeExpression(stack1)
    + "/\">\n			";
  stack2 = helpers['with'].call(depth0, ((stack1 = ((stack1 = depth0.PreviewImage),stack1 == null || stack1 === false ? stack1 : stack1.Urls)),stack1 == null || stack1 === false ? stack1 : stack1._320), {hash:{},inverse:self.noop,fn:self.program(5, program5, data),data:data});
  if(stack2 || stack2 === 0) { buffer += stack2; }
  buffer += "\n		</a>\n	";
  return buffer;
  }
function program5(depth0,data) {
  
  var buffer = "", stack1;
  buffer += "\n				<img src=\"";
  if (stack1 = helpers.Url) { stack1 = stack1.call(depth0, {hash:{},data:data}); }
  else { stack1 = depth0.Url; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }
  buffer += escapeExpression(stack1)
    + "\" width=\"";
  if (stack1 = helpers.Width) { stack1 = stack1.call(depth0, {hash:{},data:data}); }
  else { stack1 = depth0.Width; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }
  buffer += escapeExpression(stack1)
    + "\" height=\"";
  if (stack1 = helpers.Height) { stack1 = stack1.call(depth0, {hash:{},data:data}); }
  else { stack1 = depth0.Height; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }
  buffer += escapeExpression(stack1)
    + "\"/>\n			";
  return buffer;
  }

  buffer += "<!-- article class=\"gravity-item\" -->\n<div>\n<!--<a href=\"/";
  if (stack1 = helpers.LinkTo) { stack1 = stack1.call(depth0, {hash:{},data:data}); }
  else { stack1 = depth0.LinkTo; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }
  buffer += escapeExpression(stack1)
    + "/";
  if (stack1 = helpers.UglyHash) { stack1 = stack1.call(depth0, {hash:{},data:data}); }
  else { stack1 = depth0.UglyHash; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }
  buffer += escapeExpression(stack1)
    + "/\">\n	<div>\n		<p>";
  if (stack1 = helpers.Title) { stack1 = stack1.call(depth0, {hash:{},data:data}); }
  else { stack1 = depth0.Title; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }
  buffer += escapeExpression(stack1)
    + "</p>\n		";
  stack1 = helpers['if'].call(depth0, depth0.PreviewImage, {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});
  if(stack1 || stack1 === 0) { buffer += stack1; }
  buffer += "\n	</div>\n</a>-->\n	";
  stack1 = helpers['if'].call(depth0, depth0.PreviewImage, {hash:{},inverse:self.noop,fn:self.program(4, program4, data),data:data});
  if(stack1 || stack1 === 0) { buffer += stack1; }
  buffer += "\n	<section role=\"tooltip-content\">\n		<header>\n			<h1>\n				<a href=\"/";
  if (stack1 = helpers.LinkTo) { stack1 = stack1.call(depth0, {hash:{},data:data}); }
  else { stack1 = depth0.LinkTo; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }
  buffer += escapeExpression(stack1)
    + "/";
  if (stack1 = helpers.UglyHash) { stack1 = stack1.call(depth0, {hash:{},data:data}); }
  else { stack1 = depth0.UglyHash; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }
  buffer += escapeExpression(stack1)
    + "/\">";
  if (stack1 = helpers.Title) { stack1 = stack1.call(depth0, {hash:{},data:data}); }
  else { stack1 = depth0.Title; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }
  buffer += escapeExpression(stack1)
    + "</a>\n			</h1>\n			<p>";
  if (stack1 = helpers.teaserMeta) { stack1 = stack1.call(depth0, {hash:{},data:data}); }
  else { stack1 = depth0.teaserMeta; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }
  if(stack1 || stack1 === 0) { buffer += stack1; }
  buffer += "</p>\n		</header>\n		<p>\n			";
  if (stack1 = helpers.MarkdownedTeaser) { stack1 = stack1.call(depth0, {hash:{},data:data}); }
  else { stack1 = depth0.MarkdownedTeaser; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }
  if(stack1 || stack1 === 0) { buffer += stack1; }
  buffer += "\n		</p>\n		<a href=\"/";
  if (stack1 = helpers.LinkTo) { stack1 = stack1.call(depth0, {hash:{},data:data}); }
  else { stack1 = depth0.LinkTo; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }
  buffer += escapeExpression(stack1)
    + "/";
  if (stack1 = helpers.UglyHash) { stack1 = stack1.call(depth0, {hash:{},data:data}); }
  else { stack1 = depth0.UglyHash; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }
  buffer += escapeExpression(stack1)
    + "/\" class=\"btn\">Read More</a>\n	</section>\n<div>\n<!-- /article -->";
  return buffer;
  });

this["JST"]["app/templates/person-info-item.html"] = Handlebars.template(function (Handlebars,depth0,helpers,partials,data) {
  this.compilerInfo = [4,'>= 1.0.0'];
helpers = this.merge(helpers, Handlebars.helpers); data = data || {};
  var buffer = "", stack1, stack2, functionType="function", escapeExpression=this.escapeExpression, self=this;

function program1(depth0,data) {
  
  var buffer = "", stack1, stack2;
  buffer += "\n			";
  stack2 = helpers['with'].call(depth0, ((stack1 = ((stack1 = depth0.Image),stack1 == null || stack1 === false ? stack1 : stack1.Urls)),stack1 == null || stack1 === false ? stack1 : stack1._320), {hash:{},inverse:self.noop,fn:self.program(2, program2, data),data:data});
  if(stack2 || stack2 === 0) { buffer += stack2; }
  buffer += "\n		";
  return buffer;
  }
function program2(depth0,data) {
  
  var buffer = "", stack1;
  buffer += "\n				<img src=\"";
  if (stack1 = helpers.Url) { stack1 = stack1.call(depth0, {hash:{},data:data}); }
  else { stack1 = depth0.Url; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }
  buffer += escapeExpression(stack1)
    + "\" width=\"";
  if (stack1 = helpers.Width) { stack1 = stack1.call(depth0, {hash:{},data:data}); }
  else { stack1 = depth0.Width; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }
  buffer += escapeExpression(stack1)
    + "\" height=\"";
  if (stack1 = helpers.Height) { stack1 = stack1.call(depth0, {hash:{},data:data}); }
  else { stack1 = depth0.Height; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }
  buffer += escapeExpression(stack1)
    + "\" alt=\"\">\n			";
  return buffer;
  }

function program4(depth0,data) {
  
  var buffer = "", stack1;
  buffer += "\n				<p><a href=\"mailto:";
  if (stack1 = helpers.Email) { stack1 = stack1.call(depth0, {hash:{},data:data}); }
  else { stack1 = depth0.Email; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }
  buffer += escapeExpression(stack1)
    + "\">";
  if (stack1 = helpers.Email) { stack1 = stack1.call(depth0, {hash:{},data:data}); }
  else { stack1 = depth0.Email; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }
  buffer += escapeExpression(stack1)
    + "</a></p>\n			";
  return buffer;
  }

function program6(depth0,data) {
  
  var buffer = "", stack1;
  buffer += "\n				<p>";
  if (stack1 = helpers.Phone) { stack1 = stack1.call(depth0, {hash:{},data:data}); }
  else { stack1 = depth0.Phone; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }
  buffer += escapeExpression(stack1)
    + " <a class=\"vcf-download\" href=\"#\">(Download vcf)</a></p>\n			";
  return buffer;
  }

function program8(depth0,data) {
  
  var buffer = "", stack1;
  buffer += "\n			<ul class=\"websites\">\n				";
  stack1 = helpers.each.call(depth0, depth0.Websites, {hash:{},inverse:self.noop,fn:self.program(9, program9, data),data:data});
  if(stack1 || stack1 === 0) { buffer += stack1; }
  buffer += "\n			</ul>\n		";
  return buffer;
  }
function program9(depth0,data) {
  
  var buffer = "", stack1;
  buffer += "\n					<li>";
  if (stack1 = helpers.website) { stack1 = stack1.call(depth0, {hash:{},data:data}); }
  else { stack1 = depth0.website; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }
  if(stack1 || stack1 === 0) { buffer += stack1; }
  buffer += "</li>\n				";
  return buffer;
  }

  buffer += "<!-- article class=\"person-info\" -->\n<div>\n	<section>\n		";
  stack2 = helpers['if'].call(depth0, ((stack1 = ((stack1 = depth0.Image),stack1 == null || stack1 === false ? stack1 : stack1.Urls)),stack1 == null || stack1 === false ? stack1 : stack1._320), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});
  if(stack2 || stack2 === 0) { buffer += stack2; }
  buffer += "\n	</section>\n\n	<section>\n		<header>\n			<p>";
  if (stack2 = helpers.personMeta) { stack2 = stack2.call(depth0, {hash:{},data:data}); }
  else { stack2 = depth0.personMeta; stack2 = typeof stack2 === functionType ? stack2.apply(depth0) : stack2; }
  buffer += escapeExpression(stack2)
    + "</p>\n			<h1>";
  if (stack2 = helpers.FirstName) { stack2 = stack2.call(depth0, {hash:{},data:data}); }
  else { stack2 = depth0.FirstName; stack2 = typeof stack2 === functionType ? stack2.apply(depth0) : stack2; }
  buffer += escapeExpression(stack2)
    + " ";
  if (stack2 = helpers.Surname) { stack2 = stack2.call(depth0, {hash:{},data:data}); }
  else { stack2 = depth0.Surname; stack2 = typeof stack2 === functionType ? stack2.apply(depth0) : stack2; }
  buffer += escapeExpression(stack2)
    + "</h1>\n			";
  stack2 = helpers['if'].call(depth0, depth0.Email, {hash:{},inverse:self.noop,fn:self.program(4, program4, data),data:data});
  if(stack2 || stack2 === 0) { buffer += stack2; }
  buffer += "\n			";
  stack2 = helpers['if'].call(depth0, depth0.Phone, {hash:{},inverse:self.noop,fn:self.program(6, program6, data),data:data});
  if(stack2 || stack2 === 0) { buffer += stack2; }
  buffer += "\n		</header>\n\n		";
  if (stack2 = helpers.MarkdownedBio) { stack2 = stack2.call(depth0, {hash:{},data:data}); }
  else { stack2 = depth0.MarkdownedBio; stack2 = typeof stack2 === functionType ? stack2.apply(depth0) : stack2; }
  if(stack2 || stack2 === 0) { buffer += stack2; }
  buffer += "\n\n		";
  stack2 = helpers['if'].call(depth0, depth0.Websites, {hash:{},inverse:self.noop,fn:self.program(8, program8, data),data:data});
  if(stack2 || stack2 === 0) { buffer += stack2; }
  buffer += "\n	</section>\n</div>\n<!-- /article -->";
  return buffer;
  });

this["JST"]["app/templates/person-list-item.html"] = Handlebars.template(function (Handlebars,depth0,helpers,partials,data) {
  this.compilerInfo = [4,'>= 1.0.0'];
helpers = this.merge(helpers, Handlebars.helpers); data = data || {};
  var buffer = "", stack1, functionType="function", escapeExpression=this.escapeExpression;


  buffer += "<!-- li -->\n<a href=\"/about/";
  if (stack1 = helpers.UrlSlug) { stack1 = stack1.call(depth0, {hash:{},data:data}); }
  else { stack1 = depth0.UrlSlug; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }
  buffer += escapeExpression(stack1)
    + "/\">\n	";
  if (stack1 = helpers.FirstName) { stack1 = stack1.call(depth0, {hash:{},data:data}); }
  else { stack1 = depth0.FirstName; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }
  buffer += escapeExpression(stack1)
    + " ";
  if (stack1 = helpers.Surname) { stack1 = stack1.call(depth0, {hash:{},data:data}); }
  else { stack1 = depth0.Surname; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }
  buffer += escapeExpression(stack1)
    + "\n</a>\n<!-- /li -->";
  return buffer;
  });

this["JST"]["app/templates/portfolio-detail.html"] = Handlebars.template(function (Handlebars,depth0,helpers,partials,data) {
  this.compilerInfo = [4,'>= 1.0.0'];
helpers = this.merge(helpers, Handlebars.helpers); data = data || {};
  var buffer = "", stack1, stack2, options, functionType="function", helperMissing=helpers.helperMissing, self=this, escapeExpression=this.escapeExpression;

function program1(depth0,data) {
  
  var buffer = "", stack1;
  buffer += "\n		";
  if (stack1 = helpers.SpaceAndLocation) { stack1 = stack1.call(depth0, {hash:{},data:data}); }
  else { stack1 = depth0.SpaceAndLocation; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }
  if(stack1 || stack1 === 0) { buffer += stack1; }
  buffer += "\n	";
  return buffer;
  }

function program3(depth0,data) {
  
  var buffer = "", stack1, stack2, options;
  buffer += "\n		<p>";
  options = {hash:{},data:data};
  stack2 = ((stack1 = helpers.commaSeparatedWebsites || depth0.commaSeparatedWebsites),stack1 ? stack1.call(depth0, depth0.Websites, options) : helperMissing.call(depth0, "commaSeparatedWebsites", depth0.Websites, options));
  if(stack2 || stack2 === 0) { buffer += stack2; }
  buffer += "</p>\n	";
  return buffer;
  }

function program5(depth0,data) {
  
  var buffer = "", stack1;
  buffer += "\n		";
  stack1 = helpers['if'].call(depth0, depth0.Exhibitions, {hash:{},inverse:self.noop,fn:self.program(6, program6, data),data:data});
  if(stack1 || stack1 === 0) { buffer += stack1; }
  buffer += "\n		";
  stack1 = helpers['if'].call(depth0, depth0.Workshops, {hash:{},inverse:self.noop,fn:self.program(8, program8, data),data:data});
  if(stack1 || stack1 === 0) { buffer += stack1; }
  buffer += "\n		";
  stack1 = helpers['if'].call(depth0, depth0.Excursions, {hash:{},inverse:self.noop,fn:self.program(10, program10, data),data:data});
  if(stack1 || stack1 === 0) { buffer += stack1; }
  buffer += "\n		";
  stack1 = helpers['if'].call(depth0, depth0.combinedProjects, {hash:{},inverse:self.noop,fn:self.program(12, program12, data),data:data});
  if(stack1 || stack1 === 0) { buffer += stack1; }
  buffer += "\n	";
  return buffer;
  }
function program6(depth0,data) {
  
  var stack1, stack2, options;
  options = {hash:{},data:data};
  stack2 = ((stack1 = helpers.portfoliolist || depth0.portfoliolist),stack1 ? stack1.call(depth0, depth0.Exhibitions, "Exhibition", options) : helperMissing.call(depth0, "portfoliolist", depth0.Exhibitions, "Exhibition", options));
  if(stack2 || stack2 === 0) { return stack2; }
  else { return ''; }
  }

function program8(depth0,data) {
  
  var stack1, stack2, options;
  options = {hash:{},data:data};
  stack2 = ((stack1 = helpers.portfoliolist || depth0.portfoliolist),stack1 ? stack1.call(depth0, depth0.Workshops, "Workshop", options) : helperMissing.call(depth0, "portfoliolist", depth0.Workshops, "Workshop", options));
  if(stack2 || stack2 === 0) { return stack2; }
  else { return ''; }
  }

function program10(depth0,data) {
  
  var stack1, stack2, options;
  options = {hash:{},data:data};
  stack2 = ((stack1 = helpers.portfoliolist || depth0.portfoliolist),stack1 ? stack1.call(depth0, depth0.Excursions, "Excursion", options) : helperMissing.call(depth0, "portfoliolist", depth0.Excursions, "Excursion", options));
  if(stack2 || stack2 === 0) { return stack2; }
  else { return ''; }
  }

function program12(depth0,data) {
  
  var stack1, stack2, options;
  options = {hash:{},data:data};
  stack2 = ((stack1 = helpers.portfoliolist || depth0.portfoliolist),stack1 ? stack1.call(depth0, depth0.combinedProjects, "Project", options) : helperMissing.call(depth0, "portfoliolist", depth0.combinedProjects, "Project", options));
  if(stack2 || stack2 === 0) { return stack2; }
  else { return ''; }
  }

function program14(depth0,data) {
  
  var buffer = "", stack1;
  buffer += "\n		";
  stack1 = helpers['if'].call(depth0, depth0.combinedProjects, {hash:{},inverse:self.noop,fn:self.program(12, program12, data),data:data});
  if(stack1 || stack1 === 0) { buffer += stack1; }
  buffer += "\n		";
  stack1 = helpers['if'].call(depth0, depth0.Workshops, {hash:{},inverse:self.noop,fn:self.program(8, program8, data),data:data});
  if(stack1 || stack1 === 0) { buffer += stack1; }
  buffer += "\n		";
  stack1 = helpers['if'].call(depth0, depth0.Excursions, {hash:{},inverse:self.noop,fn:self.program(10, program10, data),data:data});
  if(stack1 || stack1 === 0) { buffer += stack1; }
  buffer += "\n	";
  return buffer;
  }

function program16(depth0,data) {
  
  var buffer = "", stack1;
  buffer += "\n		";
  stack1 = helpers['if'].call(depth0, depth0.Exhibitions, {hash:{},inverse:self.noop,fn:self.program(6, program6, data),data:data});
  if(stack1 || stack1 === 0) { buffer += stack1; }
  buffer += "\n		";
  stack1 = helpers['if'].call(depth0, depth0.Workshops, {hash:{},inverse:self.noop,fn:self.program(8, program8, data),data:data});
  if(stack1 || stack1 === 0) { buffer += stack1; }
  buffer += "\n		";
  stack1 = helpers['if'].call(depth0, depth0.combinedProjects, {hash:{},inverse:self.noop,fn:self.program(12, program12, data),data:data});
  if(stack1 || stack1 === 0) { buffer += stack1; }
  buffer += "\n	";
  return buffer;
  }

function program18(depth0,data) {
  
  var buffer = "", stack1;
  buffer += "\n		";
  stack1 = helpers['if'].call(depth0, depth0.Exhibitions, {hash:{},inverse:self.noop,fn:self.program(6, program6, data),data:data});
  if(stack1 || stack1 === 0) { buffer += stack1; }
  buffer += "\n		";
  stack1 = helpers['if'].call(depth0, depth0.Excursions, {hash:{},inverse:self.noop,fn:self.program(10, program10, data),data:data});
  if(stack1 || stack1 === 0) { buffer += stack1; }
  buffer += "\n		";
  stack1 = helpers['if'].call(depth0, depth0.combinedProjects, {hash:{},inverse:self.noop,fn:self.program(12, program12, data),data:data});
  if(stack1 || stack1 === 0) { buffer += stack1; }
  buffer += "\n	";
  return buffer;
  }

function program20(depth0,data) {
  
  var buffer = "", stack1;
  buffer += "\n		<h4>Categories</h4>\n		<ul>\n		";
  stack1 = helpers.each.call(depth0, depth0.Categories, {hash:{},inverse:self.noop,fn:self.program(21, program21, data),data:data});
  if(stack1 || stack1 === 0) { buffer += stack1; }
  buffer += "\n		</ul>\n	";
  return buffer;
  }
function program21(depth0,data) {
  
  var buffer = "", stack1;
  buffer += "\n			<li><a href=\"/portfolio/search/Category:";
  if (stack1 = helpers.Title) { stack1 = stack1.call(depth0, {hash:{},data:data}); }
  else { stack1 = depth0.Title; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }
  buffer += escapeExpression(stack1)
    + "/\">";
  if (stack1 = helpers.Title) { stack1 = stack1.call(depth0, {hash:{},data:data}); }
  else { stack1 = depth0.Title; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }
  buffer += escapeExpression(stack1)
    + "</a></li>\n		";
  return buffer;
  }

function program23(depth0,data) {
  
  var buffer = "", stack1, stack2, options;
  buffer += "\n		";
  options = {hash:{},data:data};
  stack2 = ((stack1 = helpers.personlist || depth0.personlist),stack1 ? stack1.call(depth0, depth0.Persons, options) : helperMissing.call(depth0, "personlist", depth0.Persons, options));
  if(stack2 || stack2 === 0) { buffer += stack2; }
  buffer += "\n	";
  return buffer;
  }

function program25(depth0,data) {
  
  var buffer = "", stack1;
  buffer += "\n<script type=\"text/javascript\">\n	$(document).one('code:kickoff', function (e) {\n		";
  if (stack1 = helpers.Code) { stack1 = stack1.call(depth0, {hash:{},data:data}); }
  else { stack1 = depth0.Code; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }
  if(stack1 || stack1 === 0) { buffer += stack1; }
  buffer += "\n\n		e.stopImmediatePropagation();\n	});\n</script>\n";
  return buffer;
  }

  buffer += "<!-- article class=\"portfolio-detail\" -->\n<header>\n	<h1>";
  if (stack1 = helpers.Title) { stack1 = stack1.call(depth0, {hash:{},data:data}); }
  else { stack1 = depth0.Title; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }
  buffer += escapeExpression(stack1)
    + "</h1>\n	<p>\n		";
  options = {hash:{},data:data};
  stack2 = ((stack1 = helpers.nameSummary || depth0.nameSummary),stack1 ? stack1.call(depth0, depth0.Persons, options) : helperMissing.call(depth0, "nameSummary", depth0.Persons, options));
  if(stack2 || stack2 === 0) { buffer += stack2; }
  buffer += "\n	</p>\n	<p>";
  options = {hash:{},data:data};
  buffer += escapeExpression(((stack1 = helpers.niceDate || depth0.niceDate),stack1 ? stack1.call(depth0, depth0, true, options) : helperMissing.call(depth0, "niceDate", depth0, true, options)))
    + "</p>\n	";
  options = {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data};
  stack2 = ((stack1 = helpers.stringDiff || depth0.stringDiff),stack1 ? stack1.call(depth0, "Project", depth0.ClassName, options) : helperMissing.call(depth0, "stringDiff", "Project", depth0.ClassName, options));
  if(stack2 || stack2 === 0) { buffer += stack2; }
  buffer += "\n	";
  stack2 = helpers['if'].call(depth0, depth0.Websites, {hash:{},inverse:self.noop,fn:self.program(3, program3, data),data:data});
  if(stack2 || stack2 === 0) { buffer += stack2; }
  buffer += "\n</header>\n<section>\n	";
  if (stack2 = helpers.MarkdownedText) { stack2 = stack2.call(depth0, {hash:{},data:data}); }
  else { stack2 = depth0.MarkdownedText; stack2 = typeof stack2 === functionType ? stack2.apply(depth0) : stack2; }
  if(stack2 || stack2 === 0) { buffer += stack2; }
  buffer += "\n</section>\n<aside>\n	\n	";
  options = {hash:{},inverse:self.noop,fn:self.program(5, program5, data),data:data};
  stack2 = ((stack1 = helpers.stringCompare || depth0.stringCompare),stack1 ? stack1.call(depth0, "Project", depth0.ClassName, options) : helperMissing.call(depth0, "stringCompare", "Project", depth0.ClassName, options));
  if(stack2 || stack2 === 0) { buffer += stack2; }
  buffer += "\n\n	";
  options = {hash:{},inverse:self.noop,fn:self.program(14, program14, data),data:data};
  stack2 = ((stack1 = helpers.stringCompare || depth0.stringCompare),stack1 ? stack1.call(depth0, "Exhibition", depth0.ClassName, options) : helperMissing.call(depth0, "stringCompare", "Exhibition", depth0.ClassName, options));
  if(stack2 || stack2 === 0) { buffer += stack2; }
  buffer += "\n\n	";
  options = {hash:{},inverse:self.noop,fn:self.program(16, program16, data),data:data};
  stack2 = ((stack1 = helpers.stringCompare || depth0.stringCompare),stack1 ? stack1.call(depth0, "Excursion", depth0.ClassName, options) : helperMissing.call(depth0, "stringCompare", "Excursion", depth0.ClassName, options));
  if(stack2 || stack2 === 0) { buffer += stack2; }
  buffer += "\n\n	";
  options = {hash:{},inverse:self.noop,fn:self.program(18, program18, data),data:data};
  stack2 = ((stack1 = helpers.stringCompare || depth0.stringCompare),stack1 ? stack1.call(depth0, "Workshop", depth0.ClassName, options) : helperMissing.call(depth0, "stringCompare", "Workshop", depth0.ClassName, options));
  if(stack2 || stack2 === 0) { buffer += stack2; }
  buffer += "\n\n	";
  if (stack2 = helpers.hrIfNeeded) { stack2 = stack2.call(depth0, {hash:{},data:data}); }
  else { stack2 = depth0.hrIfNeeded; stack2 = typeof stack2 === functionType ? stack2.apply(depth0) : stack2; }
  if(stack2 || stack2 === 0) { buffer += stack2; }
  buffer += "\n\n	";
  stack2 = helpers['if'].call(depth0, depth0.Categories, {hash:{},inverse:self.noop,fn:self.program(20, program20, data),data:data});
  if(stack2 || stack2 === 0) { buffer += stack2; }
  buffer += "\n\n	";
  stack2 = helpers['if'].call(depth0, depth0.IsGroup, {hash:{},inverse:self.noop,fn:self.program(23, program23, data),data:data});
  if(stack2 || stack2 === 0) { buffer += stack2; }
  buffer += "\n</aside>\n\n<!--";
  stack2 = helpers['if'].call(depth0, depth0.Code, {hash:{},inverse:self.noop,fn:self.program(25, program25, data),data:data});
  if(stack2 || stack2 === 0) { buffer += stack2; }
  buffer += "-->\n\n<!-- /article -->";
  return buffer;
  });

this["JST"]["app/templates/searchbar.html"] = Handlebars.template(function (Handlebars,depth0,helpers,partials,data) {
  this.compilerInfo = [4,'>= 1.0.0'];
helpers = this.merge(helpers, Handlebars.helpers); data = data || {};
  var buffer = "", stack1, functionType="function", escapeExpression=this.escapeExpression, self=this;

function program1(depth0,data) {
  
  var buffer = "", stack1;
  buffer += "\n		<ul>\n			";
  stack1 = helpers.each.call(depth0, depth0.Categories, {hash:{},inverse:self.noop,fn:self.program(2, program2, data),data:data});
  if(stack1 || stack1 === 0) { buffer += stack1; }
  buffer += "\n		</ul>\n	";
  return buffer;
  }
function program2(depth0,data) {
  
  var buffer = "", stack1;
  buffer += "\n				<li><a href=\"#\" data-title=\"";
  if (stack1 = helpers.Title) { stack1 = stack1.call(depth0, {hash:{},data:data}); }
  else { stack1 = depth0.Title; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }
  buffer += escapeExpression(stack1)
    + "\" data-id=\"";
  if (stack1 = helpers.ID) { stack1 = stack1.call(depth0, {hash:{},data:data}); }
  else { stack1 = depth0.ID; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }
  buffer += escapeExpression(stack1)
    + "\">";
  if (stack1 = helpers.Title) { stack1 = stack1.call(depth0, {hash:{},data:data}); }
  else { stack1 = depth0.Title; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }
  buffer += escapeExpression(stack1)
    + "</a></li>\n			";
  return buffer;
  }

  buffer += "<!-- div id=\"projectsearch\" -->\n<section class=\"category-filter active\">\n	";
  stack1 = helpers['if'].call(depth0, depth0.Categories, {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});
  if(stack1 || stack1 === 0) { buffer += stack1; }
  buffer += "\n	<a href=\"#\" data-bypass class=\"btn\">Switch to Search</a>	\n</section>\n<section class=\"search\">\n  <div class=\"visualsearch\"></div>\n  <a href=\"#\" data-bypass class=\"btn\">Switch to Filters</a>\n</section>\n<!-- /div -->";
  return buffer;
  });

this["JST"]["app/templates/security/create-project.html"] = Handlebars.template(function (Handlebars,depth0,helpers,partials,data) {
  this.compilerInfo = [4,'>= 1.0.0'];
helpers = this.merge(helpers, Handlebars.helpers); data = data || {};
  


  return "<ul class=\"project-type-list\">\n	<li>\n		<a href=\"#\" data-type=\"Excursion\" class=\"excursion\">Excursion</a>\n	</li>\n\n	<li>\n		<a href=\"#\" data-type=\"Exhibition\" class=\"exhibition\">Exhibition</a>\n	</li>\n\n	<li>\n		<a href=\"#\" data-type=\"Project\" class=\"project\">Project</a>\n	</li>\n\n	<li>\n		<a href=\"#\" data-type=\"Workshop\" class=\"workshop\">Workshop</a>\n	</li>\n</ul>\n\n<form class=\"create-project\">\n	<input type=\"text\" name=\"title\" placeholder=\"Title\" autocomplete=\"off\" />\n	<button class=\"btn\" type=\"submit\">Create</button>\n	<div class=\"form-error\">Foo bar!</div>\n</form>\n";
  });

this["JST"]["app/templates/security/editor-project-container.html"] = Handlebars.template(function (Handlebars,depth0,helpers,partials,data) {
  this.compilerInfo = [4,'>= 1.0.0'];
helpers = this.merge(helpers, Handlebars.helpers); data = data || {};
  


  return "<section class=\"editor-project-preview overview active\">\n</section>\n\n<section class=\"editor-project-main detail\">\n</section>\n";
  });

this["JST"]["app/templates/security/editor-project-main.html"] = Handlebars.template(function (Handlebars,depth0,helpers,partials,data) {
  this.compilerInfo = [4,'>= 1.0.0'];
helpers = this.merge(helpers, Handlebars.helpers); data = data || {};
  var buffer = "", stack1, stack2, options, functionType="function", escapeExpression=this.escapeExpression, self=this, helperMissing=helpers.helperMissing;

function program1(depth0,data) {
  
  var buffer = "", stack1;
  buffer += "\n			";
  stack1 = helpers['with'].call(depth0, depth0.CurrentMemberPerson, {hash:{},inverse:self.noop,fn:self.program(2, program2, data),data:data});
  if(stack1 || stack1 === 0) { buffer += stack1; }
  buffer += "\n		";
  return buffer;
  }
function program2(depth0,data) {
  
  var buffer = "", stack1;
  buffer += "\n				";
  if (stack1 = helpers.FirstName) { stack1 = stack1.call(depth0, {hash:{},data:data}); }
  else { stack1 = depth0.FirstName; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }
  buffer += escapeExpression(stack1)
    + " ";
  if (stack1 = helpers.Surname) { stack1 = stack1.call(depth0, {hash:{},data:data}); }
  else { stack1 = depth0.Surname; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }
  buffer += escapeExpression(stack1)
    + "\n			";
  return buffer;
  }

function program4(depth0,data) {
  
  
  return "\n		Group project\n	";
  }

function program6(depth0,data) {
  
  var buffer = "", stack1, stack2, options;
  buffer += "\n		";
  options = {hash:{},data:data};
  stack2 = ((stack1 = helpers.nameSummary || depth0.nameSummary),stack1 ? stack1.call(depth0, depth0.Persons, options) : helperMissing.call(depth0, "nameSummary", depth0.Persons, options));
  if(stack2 || stack2 === 0) { buffer += stack2; }
  buffer += "\n	";
  return buffer;
  }

function program8(depth0,data) {
  
  
  return "\n		<h1>Categories</h1>\n		<ul data-editor-type=\"select-list\" data-editor-name=\"Category\" data-editor-placeholder=\"Add...\"></ul>\n	";
  }

function program10(depth0,data) {
  
  
  return "\n		<h1>Exhibitions</h1>\n		<ul data-editor-type=\"select-list\" data-editor-name=\"Exhibition\" data-editor-placeholder=\"Add…\"></ul>\n	";
  }

function program12(depth0,data) {
  
  
  return "\n		<h1>Workshops</h1>\n		<ul data-editor-type=\"select-list\" data-editor-name=\"Workshop\" data-editor-placeholder=\"Add…\"></ul>\n	";
  }

function program14(depth0,data) {
  
  
  return "\n		<h1>Excursions</h1>\n		<ul data-editor-type=\"select-list\" data-editor-name=\"Excursion\" data-editor-placeholder=\"Add…\"></ul>\n	";
  }

function program16(depth0,data) {
  
  
  return "\n		<h1>Blocked editors</h1>\n		<ul data-editor-type=\"select-list-confirm\" data-editor-name=\"BlockedEditors\" data-editor-placeholder=\"Add…\" data-editor-confirm=\"Blocked Editors confirm text\"></ul>\n	";
  }

function program18(depth0,data) {
  
  
  return "\n		<h1>Additional editors</h1>\n		<ul data-editor-type=\"select-list\" data-editor-name=\"Editors\" data-editor-placeholder=\"Add…\" data-editor-confirm=\"Editors confirm text\"></ul>\n	";
  }

  buffer += "<!-- article -->\n<header data-editor-scope=\"\\ProjectMain\">\n	<h1 data-editor-type=\"inline\" data-editor-name=\"Title\" data-editor-placeholder=\"Title\">";
  if (stack1 = helpers.Title) { stack1 = stack1.call(depth0, {hash:{},data:data}); }
  else { stack1 = depth0.Title; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }
  buffer += escapeExpression(stack1)
    + "</h1>\n	<div class=\"persons\">\n		";
  stack1 = helpers['if'].call(depth0, depth0.CurrentMemberPerson, {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});
  if(stack1 || stack1 === 0) { buffer += stack1; }
  buffer += "\n		<div data-editor-type=\"select-person\" data-editor-name=\"Person\" data-editor-placeholder=\"Add Collaborators…\"></div>\n	</div>\n	\n	<!--<p>\n	";
  stack1 = helpers['if'].call(depth0, depth0.IsGroup, {hash:{},inverse:self.program(6, program6, data),fn:self.program(4, program4, data),data:data});
  if(stack1 || stack1 === 0) { buffer += stack1; }
  buffer += "\n	</p>-->\n</header>\n<section data-editor-scope=\"\\ProjectMain\">\n\n	<div data-editor-type=\"markdown-split\" data-editor-name=\"Text\" data-editor-options='{\"customParsers\": {\"images\": \"ImageMarkdownParser\", \"embed\": \"OEmbedMarkdownParser\"}}'>";
  if (stack1 = helpers.Text) { stack1 = stack1.call(depth0, {hash:{},data:data}); }
  else { stack1 = depth0.Text; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }
  buffer += escapeExpression(stack1)
    + "</div>\n\n</section>\n<aside data-editor-scope=\"\\ProjectMain\">\n	<div>\n		<h3>Websites</h3>\n			<ul class=\"websites\">\n			</ul>\n			<button data-editor-type=\"modal\" data-editor-name=\"Website\" data-editor-fields='{\"Title\": {\"type\": \"text\"}, \"Link\": {\"type\": \"text\"}}' class=\"btn\" data-editor-placeholder=\"Add Website\">Add Website</button>\n	</div>\n\n	";
  options = {hash:{},inverse:self.noop,fn:self.program(8, program8, data),data:data};
  stack2 = ((stack1 = helpers.stringCompare || depth0.stringCompare),stack1 ? stack1.call(depth0, "Project", depth0.ClassName, options) : helperMissing.call(depth0, "stringCompare", "Project", depth0.ClassName, options));
  if(stack2 || stack2 === 0) { buffer += stack2; }
  buffer += "\n\n	<h1>Projects</h1>\n	<ul data-editor-type=\"select-list\" data-editor-name=\"Project\" data-editor-placeholder=\"Add…\"></ul>\n\n	";
  options = {hash:{},inverse:self.noop,fn:self.program(10, program10, data),data:data};
  stack2 = ((stack1 = helpers.stringDiff || depth0.stringDiff),stack1 ? stack1.call(depth0, "Exhibition", depth0.ClassName, options) : helperMissing.call(depth0, "stringDiff", "Exhibition", depth0.ClassName, options));
  if(stack2 || stack2 === 0) { buffer += stack2; }
  buffer += "\n\n	";
  options = {hash:{},inverse:self.noop,fn:self.program(12, program12, data),data:data};
  stack2 = ((stack1 = helpers.stringDiff || depth0.stringDiff),stack1 ? stack1.call(depth0, "Workshop", depth0.ClassName, options) : helperMissing.call(depth0, "stringDiff", "Workshop", depth0.ClassName, options));
  if(stack2 || stack2 === 0) { buffer += stack2; }
  buffer += "\n\n	";
  options = {hash:{},inverse:self.noop,fn:self.program(14, program14, data),data:data};
  stack2 = ((stack1 = helpers.stringDiff || depth0.stringDiff),stack1 ? stack1.call(depth0, "Excursion", depth0.ClassName, options) : helperMissing.call(depth0, "stringDiff", "Excursion", depth0.ClassName, options));
  if(stack2 || stack2 === 0) { buffer += stack2; }
  buffer += "\n\n	<hr />\n\n	";
  options = {hash:{},inverse:self.program(18, program18, data),fn:self.program(16, program16, data),data:data};
  stack2 = ((stack1 = helpers.stringCompare || depth0.stringCompare),stack1 ? stack1.call(depth0, "Project", depth0.ClassName, options) : helperMissing.call(depth0, "stringCompare", "Project", depth0.ClassName, options));
  if(stack2 || stack2 === 0) { buffer += stack2; }
  buffer += "\n\n</aside>\n\n<!-- /article -->";
  return buffer;
  });

this["JST"]["app/templates/security/editor-project-preview.html"] = Handlebars.template(function (Handlebars,depth0,helpers,partials,data) {
  this.compilerInfo = [4,'>= 1.0.0'];
helpers = this.merge(helpers, Handlebars.helpers); data = data || {};
  var buffer = "", stack1, stack2, options, functionType="function", escapeExpression=this.escapeExpression, self=this, helperMissing=helpers.helperMissing;

function program1(depth0,data) {
  
  
  return "filled";
  }

function program3(depth0,data) {
  
  var buffer = "", stack1, stack2;
  buffer += "\n		";
  stack2 = helpers['with'].call(depth0, ((stack1 = ((stack1 = depth0.PreviewImage),stack1 == null || stack1 === false ? stack1 : stack1.Urls)),stack1 == null || stack1 === false ? stack1 : stack1._320), {hash:{},inverse:self.noop,fn:self.program(4, program4, data),data:data});
  if(stack2 || stack2 === 0) { buffer += stack2; }
  buffer += "\n	";
  return buffer;
  }
function program4(depth0,data) {
  
  var buffer = "", stack1;
  buffer += "\n			<img src=\"";
  if (stack1 = helpers.Url) { stack1 = stack1.call(depth0, {hash:{},data:data}); }
  else { stack1 = depth0.Url; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }
  buffer += escapeExpression(stack1)
    + "\" />\n		";
  return buffer;
  }

function program6(depth0,data) {
  
  var buffer = "", stack1, options;
  buffer += "\n			<p><span data-editor-type=\"date\" data-editor-name=\"Date\" data-editor-options='{ \"contentFormat\": \"M Y\"}'>";
  options = {hash:{},data:data};
  buffer += escapeExpression(((stack1 = helpers.niceDate || depth0.niceDate),stack1 ? stack1.call(depth0, depth0, options) : helperMissing.call(depth0, "niceDate", depth0, options)))
    + "</span></p>\n		";
  return buffer;
  }

function program8(depth0,data) {
  
  var buffer = "", stack1, options;
  buffer += "\n			<p>\n				<span data-editor-type=\"date\" data-editor-name=\"StartDate\" data-editor-options='{\"format\": \"d. M Y\"}'>";
  if (stack1 = helpers.StartDate) { stack1 = stack1.call(depth0, {hash:{},data:data}); }
  else { stack1 = depth0.StartDate; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }
  buffer += escapeExpression(stack1)
    + "</span> -\n				<span data-editor-type=\"date\" data-editor-name=\"EndDate\" data-editor-options='{\"format\": \"d. M Y\"}'>";
  if (stack1 = helpers.EndDate) { stack1 = stack1.call(depth0, {hash:{},data:data}); }
  else { stack1 = depth0.EndDate; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }
  buffer += escapeExpression(stack1)
    + "</span>\n			</p>\n			<p class=\"nice-date\">";
  options = {hash:{},data:data};
  buffer += escapeExpression(((stack1 = helpers.niceDate || depth0.niceDate),stack1 ? stack1.call(depth0, depth0, options) : helperMissing.call(depth0, "niceDate", depth0, options)))
    + "</p>\n		";
  return buffer;
  }

function program10(depth0,data) {
  
  var buffer = "", stack1;
  buffer += "\n			<p><span data-editor-type=\"inline\" data-editor-name=\"Space\" data-editor-placeholder=\"Space\">";
  if (stack1 = helpers.Space) { stack1 = stack1.call(depth0, {hash:{},data:data}); }
  else { stack1 = depth0.Space; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }
  buffer += escapeExpression(stack1)
    + "</span></p>\n			<p><span data-editor-type=\"inline\" data-editor-name=\"Location\" data-editor-placeholder=\"Location\">";
  if (stack1 = helpers.Location) { stack1 = stack1.call(depth0, {hash:{},data:data}); }
  else { stack1 = depth0.Location; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }
  buffer += escapeExpression(stack1)
    + "</span></p>\n		";
  return buffer;
  }

  buffer += "<div class=\"preview-image ";
  stack1 = helpers['if'].call(depth0, depth0.PreviewImage, {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});
  if(stack1 || stack1 === 0) { buffer += stack1; }
  buffer += "\">\n	";
  stack1 = helpers['if'].call(depth0, depth0.PreviewImage, {hash:{},inverse:self.noop,fn:self.program(3, program3, data),data:data});
  if(stack1 || stack1 === 0) { buffer += stack1; }
  buffer += "\n</div>\n<div class=\"meta\" data-editor-scope=\"\\ProjectPreview\">\n	<header>\n		<h1 data-editor-type=\"inline\" data-editor-name=\"Title\" data-editor-placeholder=\"Title\">";
  if (stack1 = helpers.Title) { stack1 = stack1.call(depth0, {hash:{},data:data}); }
  else { stack1 = depth0.Title; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }
  buffer += escapeExpression(stack1)
    + "</h1>\n		";
  options = {hash:{},inverse:self.program(8, program8, data),fn:self.program(6, program6, data),data:data};
  stack2 = ((stack1 = helpers.stringCompare || depth0.stringCompare),stack1 ? stack1.call(depth0, "Project", depth0.ClassName, options) : helperMissing.call(depth0, "stringCompare", "Project", depth0.ClassName, options));
  if(stack2 || stack2 === 0) { buffer += stack2; }
  buffer += "\n		";
  options = {hash:{},inverse:self.noop,fn:self.program(10, program10, data),data:data};
  stack2 = ((stack1 = helpers.stringDiff || depth0.stringDiff),stack1 ? stack1.call(depth0, "Project", depth0.ClassName, options) : helperMissing.call(depth0, "stringDiff", "Project", depth0.ClassName, options));
  if(stack2 || stack2 === 0) { buffer += stack2; }
  buffer += "\n	</header>\n	<p data-editor-type=\"markdown\" data-editor-name=\"TeaserText\" data-editor-placeholder=\"Teaser\" data-editor-options='{\"customParsers\": {}, \"position\": {\"my\": \"right top\", \"at\": \"right bottom\", \"adjust\": {\"x\": 0, \"y\": 10}}, \"repositionOnChange\": true, \"charlimit\": 156}'>";
  if (stack2 = helpers.TeaserText) { stack2 = stack2.call(depth0, {hash:{},data:data}); }
  else { stack2 = depth0.TeaserText; stack2 = typeof stack2 === functionType ? stack2.apply(depth0) : stack2; }
  buffer += escapeExpression(stack2)
    + "</p>\n</div>";
  return buffer;
  });

this["JST"]["app/templates/security/editor-sidebar-gallery-image.html"] = Handlebars.template(function (Handlebars,depth0,helpers,partials,data) {
  this.compilerInfo = [4,'>= 1.0.0'];
helpers = this.merge(helpers, Handlebars.helpers); data = data || {};
  var buffer = "", stack1, functionType="function", escapeExpression=this.escapeExpression;


  buffer += "<a href=\"#\" data-bypass=\"\" data-md-tag=\"\\[img ";
  if (stack1 = helpers.id) { stack1 = stack1.call(depth0, {hash:{},data:data}); }
  else { stack1 = depth0.id; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }
  buffer += escapeExpression(stack1)
    + "\\]\" data-id=\"";
  if (stack1 = helpers.id) { stack1 = stack1.call(depth0, {hash:{},data:data}); }
  else { stack1 = depth0.id; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }
  buffer += escapeExpression(stack1)
    + "\"><img src=\"";
  if (stack1 = helpers.url) { stack1 = stack1.call(depth0, {hash:{},data:data}); }
  else { stack1 = depth0.url; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }
  buffer += escapeExpression(stack1)
    + "\" alt=\"\" data-id=\"";
  if (stack1 = helpers.id) { stack1 = stack1.call(depth0, {hash:{},data:data}); }
  else { stack1 = depth0.id; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }
  buffer += escapeExpression(stack1)
    + "\" data-md-tag=\"\\[img ";
  if (stack1 = helpers.id) { stack1 = stack1.call(depth0, {hash:{},data:data}); }
  else { stack1 = depth0.id; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }
  buffer += escapeExpression(stack1)
    + "\\]\"></a>";
  return buffer;
  });

this["JST"]["app/templates/security/editor-sidebar-gallery.html"] = Handlebars.template(function (Handlebars,depth0,helpers,partials,data) {
  this.compilerInfo = [4,'>= 1.0.0'];
helpers = this.merge(helpers, Handlebars.helpers); data = data || {};
  var buffer = "", stack1, functionType="function", escapeExpression=this.escapeExpression, self=this;

function program1(depth0,data) {
  
  var buffer = "", stack1;
  buffer += "\n		<select class=\"filter\">\n			<option value=\"\">--- Choose Project ---</option>\n			";
  stack1 = helpers.each.call(depth0, depth0.Projects, {hash:{},inverse:self.noop,fn:self.program(2, program2, data),data:data});
  if(stack1 || stack1 === 0) { buffer += stack1; }
  buffer += "\n		</select>\n	";
  return buffer;
  }
function program2(depth0,data) {
  
  var buffer = "", stack1;
  buffer += "\n				<option value=\"";
  if (stack1 = helpers.FilterID) { stack1 = stack1.call(depth0, {hash:{},data:data}); }
  else { stack1 = depth0.FilterID; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }
  buffer += escapeExpression(stack1)
    + "\">";
  if (stack1 = helpers.Title) { stack1 = stack1.call(depth0, {hash:{},data:data}); }
  else { stack1 = depth0.Title; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }
  buffer += escapeExpression(stack1)
    + "</option>\n			";
  return buffer;
  }

function program4(depth0,data) {
  
  var buffer = "", stack1;
  buffer += "\n		";
  stack1 = helpers.each.call(depth0, depth0.Projects, {hash:{},inverse:self.noop,fn:self.program(5, program5, data),data:data});
  if(stack1 || stack1 === 0) { buffer += stack1; }
  buffer += "\n	";
  return buffer;
  }
function program5(depth0,data) {
  
  var buffer = "", stack1;
  buffer += "\n			<header>\n				<h2>";
  if (stack1 = helpers.Title) { stack1 = stack1.call(depth0, {hash:{},data:data}); }
  else { stack1 = depth0.Title; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }
  buffer += escapeExpression(stack1)
    + "</h2>\n			</header>\n			<section data-filter-id=\"";
  if (stack1 = helpers.FilterID) { stack1 = stack1.call(depth0, {hash:{},data:data}); }
  else { stack1 = depth0.FilterID; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }
  buffer += escapeExpression(stack1)
    + "\">\n				<ul class=\"image-list\"></ul>\n					"
    + "\n			</section>\n		";
  return buffer;
  }

  buffer += "<div id=\"uploadzone\"></div>\n<header class=\"editor-header\">\n	<h1>Images</h1>\n	";
  stack1 = helpers['if'].call(depth0, depth0.Projects, {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});
  if(stack1 || stack1 === 0) { buffer += stack1; }
  buffer += "\n</header>\n<section class=\"editor-sidebar-content scrollbox\">\n	";
  stack1 = helpers['if'].call(depth0, depth0.Projects, {hash:{},inverse:self.noop,fn:self.program(4, program4, data),data:data});
  if(stack1 || stack1 === 0) { buffer += stack1; }
  buffer += "\n</section>";
  return buffer;
  });

this["JST"]["app/templates/security/editor-sidebar-person-image.html"] = Handlebars.template(function (Handlebars,depth0,helpers,partials,data) {
  this.compilerInfo = [4,'>= 1.0.0'];
helpers = this.merge(helpers, Handlebars.helpers); data = data || {};
  var buffer = "", stack1, functionType="function", escapeExpression=this.escapeExpression;


  buffer += "<a href=\"#\" data-bypass data-id=\"";
  if (stack1 = helpers.id) { stack1 = stack1.call(depth0, {hash:{},data:data}); }
  else { stack1 = depth0.id; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }
  buffer += escapeExpression(stack1)
    + "\"><img src=\"";
  if (stack1 = helpers.url) { stack1 = stack1.call(depth0, {hash:{},data:data}); }
  else { stack1 = depth0.url; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }
  buffer += escapeExpression(stack1)
    + "\" alt=\"\"></a>";
  return buffer;
  });

this["JST"]["app/templates/security/editor-sidebar-project-item.html"] = Handlebars.template(function (Handlebars,depth0,helpers,partials,data) {
  this.compilerInfo = [4,'>= 1.0.0'];
helpers = this.merge(helpers, Handlebars.helpers); data = data || {};
  var buffer = "", stack1, functionType="function", escapeExpression=this.escapeExpression;


  buffer += "<a href=\"/secured/edit/";
  if (stack1 = helpers.UglyHash) { stack1 = stack1.call(depth0, {hash:{},data:data}); }
  else { stack1 = depth0.UglyHash; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }
  buffer += escapeExpression(stack1)
    + "/\">";
  if (stack1 = helpers.Title) { stack1 = stack1.call(depth0, {hash:{},data:data}); }
  else { stack1 = depth0.Title; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }
  buffer += escapeExpression(stack1)
    + "</a>";
  return buffer;
  });

this["JST"]["app/templates/security/editor-sidebar-user.html"] = Handlebars.template(function (Handlebars,depth0,helpers,partials,data) {
  this.compilerInfo = [4,'>= 1.0.0'];
helpers = this.merge(helpers, Handlebars.helpers); data = data || {};
  var buffer = "", stack1, functionType="function", escapeExpression=this.escapeExpression, self=this;

function program1(depth0,data) {
  
  var buffer = "", stack1;
  buffer += "<img src=\""
    + escapeExpression(((stack1 = ((stack1 = depth0.CurrentImage),stack1 == null || stack1 === false ? stack1 : stack1.url)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))
    + "\">";
  return buffer;
  }

function program3(depth0,data) {
  
  var buffer = "", stack1;
  buffer += "<h1>";
  stack1 = helpers['with'].call(depth0, depth0.Person, {hash:{},inverse:self.noop,fn:self.program(4, program4, data),data:data});
  if(stack1 || stack1 === 0) { buffer += stack1; }
  buffer += "</h1>";
  return buffer;
  }
function program4(depth0,data) {
  
  var buffer = "", stack1;
  buffer += "<a href=\"/about/";
  if (stack1 = helpers.UrlSlug) { stack1 = stack1.call(depth0, {hash:{},data:data}); }
  else { stack1 = depth0.UrlSlug; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }
  buffer += escapeExpression(stack1)
    + "/\">";
  if (stack1 = helpers.FirstName) { stack1 = stack1.call(depth0, {hash:{},data:data}); }
  else { stack1 = depth0.FirstName; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }
  buffer += escapeExpression(stack1)
    + " ";
  if (stack1 = helpers.Surname) { stack1 = stack1.call(depth0, {hash:{},data:data}); }
  else { stack1 = depth0.Surname; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }
  buffer += escapeExpression(stack1)
    + "</a>";
  return buffer;
  }

function program6(depth0,data) {
  
  var buffer = "", stack1;
  buffer += "<p class=\"email\">"
    + escapeExpression(((stack1 = ((stack1 = depth0.Member),stack1 == null || stack1 === false ? stack1 : stack1.Email)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))
    + "</p>";
  return buffer;
  }

  buffer += "<header class=\"editor-header hideable\">\n	<div class=\"img\" id=\"current-person-image\">\n		";
  stack1 = helpers['if'].call(depth0, depth0.CurrentImage, {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});
  if(stack1 || stack1 === 0) { buffer += stack1; }
  buffer += "\n	</div>\n	<hgroup>\n		";
  stack1 = helpers['if'].call(depth0, depth0.Person, {hash:{},inverse:self.noop,fn:self.program(3, program3, data),data:data});
  if(stack1 || stack1 === 0) { buffer += stack1; }
  buffer += "\n\n		";
  stack1 = helpers['if'].call(depth0, depth0.Member, {hash:{},inverse:self.noop,fn:self.program(6, program6, data),data:data});
  if(stack1 || stack1 === 0) { buffer += stack1; }
  buffer += "\n	</hgroup>\n</header>\n<section class=\"editor-sidebar-content scrollbox\">\n	<header>\n		<h2>Person Images</h2>\n	</header>\n	<section>\n		<ul class=\"image-list\">\n		</ul>\n	</section>\n\n	<header>\n		<h2>Projects</h2>\n	</header>\n	<section>\n		<ul class=\"project-list\">\n		</ul>\n		<div>\n			<a class=\"btn new-project\" href=\"/secured/new/\">Create Project</a>\n		</div>\n	</section>\n\n	<header>\n		<h2>Personal Information</h2>\n	</header>\n	<section class=\"meta-info\" data-editor-scope=\"\\CurrentPerson\">\n		<div id=\"bio\">\n			<h3>Bio</h3>\n			<div data-editor-type=\"markdown\" data-editor-name=\"Bio\" data-editor-placeholder=\"your shitty life!\" data-editor-options='{\"customParsers\":{}, \"position\":{\"my\": \"right top\", \"at\": \"left top\", \"adjust\": {\"x\": -24, \"y\": -15}}}'>"
    + escapeExpression(((stack1 = ((stack1 = depth0.Person),stack1 == null || stack1 === false ? stack1 : stack1.Bio)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))
    + "</div>\n		</div>\n		<div>\n			<h3>Phone</h3>\n			<p data-editor-type=\"inline\" data-editor-name=\"Phone\">"
    + escapeExpression(((stack1 = ((stack1 = depth0.Person),stack1 == null || stack1 === false ? stack1 : stack1.Phone)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))
    + "</p>\n		</div>\n		<div>\n			<h3>Email</h3>\n			<p data-editor-type=\"inline\" data-editor-name=\"Email\">"
    + escapeExpression(((stack1 = ((stack1 = depth0.Person),stack1 == null || stack1 === false ? stack1 : stack1.Email)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))
    + "</p>\n		</div>\n	</section>\n\n	<header>\n		<h2>Websites</h2>\n	</header>\n	<section class=\"meta-info\" data-editor-scope=\"\\CurrentPerson\">\n		<div>\n			<ul class=\"websites website-list\">\n			</ul>\n			<a data-editor-type=\"modal\" data-editor-name=\"Website\" data-editor-fields='{\"Title\": {\"type\": \"text\"}, \"Link\": {\"type\": \"text\", \"placeholder\": \"http://\"}}' data-editor-options='{\"position\":{\"my\": \"right top\", \"at\": \"left top\", \"adjust\": {\"x\": -24, \"y\": -20}}}' class=\"btn\" href=\"#\" data-bypass data-editor-placeholder=\"Add Website\"></a>\n		</div>\n	</section>\n\n	<header>\n		<h2>Settings</h2>\n	</header>\n	<section>\n		<form class=\"user-settings\">\n			<input name=\"email\" type=\"email\" placeholder=\"Email\" value=\""
    + escapeExpression(((stack1 = ((stack1 = depth0.Member),stack1 == null || stack1 === false ? stack1 : stack1.Email)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))
    + "\" required>\n			<input name=\"password\" type=\"password\" placeholder=\"Password\">\n			<input name=\"passwordconfirmed\" type=\"password\" placeholder=\"Confirm Password\">\n\n			<button class=\"btn\" type=\"submit\">Update Settings</button>\n		</form>\n	</section>\n</section>";
  return buffer;
  });

this["JST"]["app/templates/security/editor-sidebar.html"] = Handlebars.template(function (Handlebars,depth0,helpers,partials,data) {
  this.compilerInfo = [4,'>= 1.0.0'];
helpers = this.merge(helpers, Handlebars.helpers); data = data || {};
  


  return "<nav>\n	<ul>\n		<li>\n			<a href=\"#\" data-editor-sidebar-content=\"user\" class=\"icon-user\"><span>User</span></a>\n		</li>\n		<li>\n			<a href=\"/logout/\" class=\"icon-logout\"><span>Logout</span></a>\n		</li>\n	</ul>\n	<ul>\n		<li>\n			<a href=\"#\" data-editor-sidebar-content=\"gallery\" class=\"icon-editor\"><span>Editor</span></a>\n		</li>\n		<li>\n			<a href=\"#\" class=\"icon-switch\"><span>Switch view</span></a>\n		</li>\n		<li>\n			<a href=\"#\" class=\"icon-publish\"><span>Publish</span></a>\n		</li>\n	</ul>\n</nav>\n\n<div id=\"editor-sidebar-spinner\"></div>\n<div id=\"editor-sidebar-container\"></div>";
  });

this["JST"]["app/templates/security/logging-out.html"] = Handlebars.template(function (Handlebars,depth0,helpers,partials,data) {
  this.compilerInfo = [4,'>= 1.0.0'];
helpers = this.merge(helpers, Handlebars.helpers); data = data || {};
  var stack1, functionType="function", escapeExpression=this.escapeExpression, self=this;

function program1(depth0,data) {
  
  var buffer = "", stack1;
  buffer += "\n	<section class=\"logging-out\">\n		<a href=\"/\" class=\"logo\"><span></span></a>\n\n		<p>Logging out <strong>";
  if (stack1 = helpers.Email) { stack1 = stack1.call(depth0, {hash:{},data:data}); }
  else { stack1 = depth0.Email; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }
  buffer += escapeExpression(stack1)
    + "</strong>...</p>\n	</section>\n";
  return buffer;
  }

  stack1 = helpers['if'].call(depth0, depth0.Email, {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});
  if(stack1 || stack1 === 0) { return stack1; }
  else { return ''; }
  });

this["JST"]["app/templates/security/login-form.html"] = Handlebars.template(function (Handlebars,depth0,helpers,partials,data) {
  this.compilerInfo = [4,'>= 1.0.0'];
helpers = this.merge(helpers, Handlebars.helpers); data = data || {};
  var buffer = "", stack1, functionType="function", escapeExpression=this.escapeExpression, self=this;

function program1(depth0,data) {
  
  var buffer = "", stack1;
  buffer += "\n		<p>\n			You are logged in as <strong>";
  if (stack1 = helpers.Email) { stack1 = stack1.call(depth0, {hash:{},data:data}); }
  else { stack1 = depth0.Email; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }
  buffer += escapeExpression(stack1)
    + "</strong>.\n		</p>\n		<a href=\"/logout/\" class=\"btn\">Logout?</a>\n	";
  return buffer;
  }

function program3(depth0,data) {
  
  
  return "\n\n	<form>\n		<label for=\"login-email\">\n			<span>E-Mail</span>\n			<input type=\"text\" name=\"email\" placeholder=\"E-Mail\" id=\"login-email\" />\n		</label>\n		\n		<label for=\"login-password\">\n			<span>Password</span>\n			<input type=\"password\" name=\"password\" placeholder=\"Password\" id=\"login-password\" />\n		</label>\n		\n		<label for=\"login-remember\">\n			<input type=\"checkbox\" name=\"remember\" id=\"login-remember\" /> Remember me next time\n		</label>\n\n		<button class=\"doLogin btn\" type=\"submit\">\n			Log in\n		</button>\n	</form>\n	";
  }

  buffer += "<section class=\"login\">\n	<a href=\"/\" class=\"logo\"><span></span></a>\n\n	";
  stack1 = helpers['if'].call(depth0, depth0.Email, {hash:{},inverse:self.program(3, program3, data),fn:self.program(1, program1, data),data:data});
  if(stack1 || stack1 === 0) { buffer += stack1; }
  buffer += "\n</section>";
  return buffer;
  });

this["JST"]["app/templates/website-list-item.html"] = Handlebars.template(function (Handlebars,depth0,helpers,partials,data) {
  this.compilerInfo = [4,'>= 1.0.0'];
helpers = this.merge(helpers, Handlebars.helpers); data = data || {};
  var buffer = "", stack1, functionType="function", escapeExpression=this.escapeExpression;


  buffer += "<!-- li class=\"website-item\" -->\n<a href=\"";
  if (stack1 = helpers.Link) { stack1 = stack1.call(depth0, {hash:{},data:data}); }
  else { stack1 = depth0.Link; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }
  buffer += escapeExpression(stack1)
    + "\">";
  if (stack1 = helpers.Title) { stack1 = stack1.call(depth0, {hash:{},data:data}); }
  else { stack1 = depth0.Title; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }
  buffer += escapeExpression(stack1)
    + "</a>\n<!-- /li -->";
  return buffer;
  });