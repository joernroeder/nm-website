var requirejs,require,define;(function(e){function o(e,t){if(e&&e.charAt(0)==="."&&t){t=t.split("/"),t=t.slice(0,t.length-1),e=t.concat(e.split("/"));var n,r;for(n=0;r=e[n];n++)if(r===".")e.splice(n,1),n-=1;else if(r===".."){if(n===1&&(e[2]===".."||e[0]===".."))break;n>0&&(e.splice(n-1,2),n-=2)}e=e.join("/")}return e}function u(t,n){return function(){return s.apply(e,r.call(arguments,0).concat([t,n]))}}function a(e){return function(t){return o(t,e)}}function f(e){return function(n){t[e]=n}}function l(r){if(n.hasOwnProperty(r)){var s=n[r];delete n[r],i.apply(e,s)}return t[r]}function c(e,t){var n,r,i=e.indexOf("!");return i!==-1?(n=o(e.slice(0,i),t),e=e.slice(i+1),r=l(n),r&&r.normalize?e=r.normalize(e,a(t)):e=o(e,t)):e=o(e,t),{f:n?n+"!"+e:e,n:e,p:r}}var t={},n={},r=[].slice,i,s;if(typeof define=="function")return;i=function(r,i,s,o){var a=[],h,p,d,v,m,g;o||(o=r);if(typeof s=="function"){!i.length&&s.length&&(i=["require","exports","module"]);for(v=0;v<i.length;v++){g=c(i[v],o),d=g.f;if(d==="require")a[v]=u(r);else if(d==="exports")a[v]=t[r]={},h=!0;else if(d==="module")p=a[v]={id:r,uri:"",exports:t[r]};else if(t.hasOwnProperty(d)||n.hasOwnProperty(d))a[v]=l(d);else{if(!g.p)throw r+" missing "+d;g.p.load(g.n,u(o,!0),f(d),{}),a[v]=t[d]}}m=s.apply(t[r],a),r&&(p&&p.exports!==e?t[r]=p.exports:h||(t[r]=m))}else r&&(t[r]=s)},requirejs=s=function(t,n,r,o){return typeof t=="string"?l(c(t,n).f):(t.splice||(n.splice?(t=n,n=arguments[2]):t=[]),o?i(e,t,n,r):setTimeout(function(){i(e,t,n,r)},15),s)},s.config=function(){return s},require||(require=s),define=function(e,t,r){t.splice||(r=t,t=[]),define.unordered?n[e]=[e,t,r]:i(e,t,r)},define.amd={jQuery:!0}})(),this.JST=this.JST||{},this.JST["app/templates/404.html"]=function(obj){var __p="",print=function(){__p+=Array.prototype.join.call(arguments,"")};with(obj||{})__p+='<div style="margin-top:300px">\n	<h2>Your lucky numbers for today: 4, 0, 4</h2>\n	<p>A billion pages on the web, and you chose: {{url}}.<br/>Try again</p>\n</div>';return __p},this.JST["app/templates/about-gravity.html"]=function(obj){var __p="",print=function(){__p+=Array.prototype.join.call(arguments,"")};with(obj||{})__p+='<!-- section class="gravity" -->\n{{#if GroupImage}}\n<section class="gravity-item group-image">\n	{{#with GroupImage.Urls._768}}\n		<img src="{{Url}}" width="{{Width}}" height="{{Height}}" />\n	{{/with}}\n</section>\n{{/if}}\n\n<section class="students gravity-item">\n	<h1>Students</h1>\n	<ul id="student-list"></ul>\n</section>\n<section class="alumni gravity-item">\n	<h1>Alumni</h1>\n	<ul id="alumni-list"></ul>\n</section>\n<section class="statement gravity-item">\n	<p>The class <cite>New Media</cite> within the course <cite>Visual Communication</cite> at the <cite>School of Art and Design Kassel</cite> walks a fine line between art, design, provocation and study. The main focus lies on the media consumption of society and its perpetual obsession with technological progress, change and transformation; established processes and methods are permanently questioned and modified.</p>\n	<p>The students in the class <cite>New Media</cite> see themselves as researchers, artists, designers and developers at the same time.</p>\n	<p>Realising and publicly defending a deeply personal idea means also being able to realise the ideas of others. An outstanding developer of own concepts and ideas will have the ability to implement external ideas and concepts as well.</p>\n	<p>There is no need to train service providers for an existing industry, but personalities who by discourse acquired skills which are constantly expanded and established – for oneself and others.</p>\n	<p>By use of the Internet and support of the group these skills are exchanged, discussed and broadened self-educatedly. This provides a topicality and relevance which eludes institutions.</p>\n	<p>To study “New Media” is to be an author. To learn from oneself, to learn seeing, speaking and thinking. To develop a culture of debate. To work on projects together. To mix media and ideas, to fail and learn from it. The aim is to shape a personal position and methodology.</p>\n</section>\n<!-- /section -->';return __p},this.JST["app/templates/calendar-container.html"]=function(obj){var __p="",print=function(){__p+=Array.prototype.join.call(arguments,"")};with(obj||{})__p+='<!-- div -->\n{{#if HasItems}}\n	<h2>Calendar</h2>\n	<ul id="calendar-list">\n\n	</ul>\n{{/if}}\n<!-- /div -->';return __p},this.JST["app/templates/calendar-detail.html"]=function(obj){var __p="",print=function(){__p+=Array.prototype.join.call(arguments,"")};with(obj||{})__p+='<!-- article class="portfolio-detail" -->\n<header>\n	<h1>{{Title}}</h1>\n	<p>{{niceDate this}}</p>\n	{{#if Websites}}\n		<p>{{{commaSeparatedWebsites Websites}}}</p>\n	{{/if}}\n</header>\n<section>\n	{{{MarkdownedText}}}\n</section>\n<aside>\n	{{#if combinedProjects}}\n		{{{portfoliolist combinedProjects "Project"}}}\n	{{/if}}\n\n	{{#if Exhibitions}}\n		{{{portfoliolist Exhibitions "Exhibition"}}}\n	{{/if}}\n	\n	{{#if Workshops}}\n		{{{portfoliolist Workshops "Workshop"}}}\n	{{/if}}\n	\n	{{#if Excursions}}\n		{{{portfoliolist Excursions "Excursion"}}}\n	{{/if}}\n</aside>\n<!-- /article -->';return __p},this.JST["app/templates/calendar-list-item.html"]=function(obj){var __p="",print=function(){__p+=Array.prototype.join.call(arguments,"")};with(obj||{})__p+='<!-- li class="upcoming-calendar-list-item" -->\n<a href="/calendar/{{ UrlHash }}/">\n	<time datetime="">{{ DateRangeNice }}</time>\n	{{ Title }}\n</a>\n<!-- /li -->';return __p},this.JST["app/templates/employee-item.html"]=function(obj){var __p="",print=function(){__p+=Array.prototype.join.call(arguments,"")};with(obj||{})__p+='<!-- section class="person gravity-item" -->\n	<div class="img">\n		{{#if Image}}\n			{{#with Image.Urls._320}}\n				<a href="/about/{{../UrlSlug}}/"><img src="{{Url}}" /></a>\n			{{/with}}\n		{{/if}}\n	</div>\n	<h1><a href="/about/{{UrlSlug}}/">{{FirstName}} {{Surname}}</a></h1>\n	<p>{{JobTitle}}</p>\n\n<!-- /section -->';return __p},this.JST["app/templates/gravity-list-item.html"]=function(obj){var __p="",print=function(){__p+=Array.prototype.join.call(arguments,"")};with(obj||{})__p+='<!-- article class="gravity-item" -->\n<!--<a href="/{{LinkTo}}/{{UglyHash}}/">\n	<div>\n		<p>{{ Title }}</p>\n		{{#if PreviewImage}}\n			{{#with PreviewImage.Urls._320}}\n				<div><img src="{{Url}}" width="{{Width}}" height="{{Height}}"/></div>\n			{{/with}}\n		{{/if}}\n	</div>\n</a>-->\n	{{#if PreviewImage}}\n		<a href="/{{LinkTo}}/{{UglyHash}}/">\n			{{#with PreviewImage.Urls._320}}\n				<img src="{{Url}}" width="{{Width}}" height="{{Height}}"/>\n			{{/with}}\n		</a>\n	{{/if}}\n	<section role="tooltip-content">\n		<header>\n			<h1>\n				<a href="/{{LinkTo}}/{{UglyHash}}/">{{Title}}</a>\n			</h1>\n			<p>{{{teaserMeta}}}</p>\n		</header>\n		<p>\n			{{{MarkdownedTeaser}}}\n		</p>\n		<a href="/{{LinkTo}}/{{UglyHash}}/" class="btn">Read More</a>\n	</section>\n<!-- /article -->';return __p},this.JST["app/templates/layouts/editor.html"]=function(obj){var __p="",print=function(){__p+=Array.prototype.join.call(arguments,"")};with(obj||{})__p+='<section id="project-editor"></section>';return __p},this.JST["app/templates/layouts/index.html"]=function(obj){var __p="",print=function(){__p+=Array.prototype.join.call(arguments,"")};with(obj||{})__p+='<div id="gravity-container"></div>\n<section id="calendar" class="calendar"></section>';return __p},this.JST["app/templates/layouts/main.html"]=function(obj){var __p="",print=function(){__p+=Array.prototype.join.call(arguments,"")};with(obj||{})__p+="";return __p},this.JST["app/templates/layouts/portfolio.html"]=function(obj){var __p="",print=function(){__p+=Array.prototype.join.call(arguments,"")};with(obj||{})__p+='<div id="gravity-container"></div>';return __p},this.JST["app/templates/person-info-item.html"]=function(obj){var __p="",print=function(){__p+=Array.prototype.join.call(arguments,"")};with(obj||{})__p+='<section>\n	{{#if Image.Urls._320}}\n		<a href="/about/{{UrlSlug}}/">\n		{{#with Image.Urls._320}}\n			<img src="{{Url}}" width="{{Width}}" height="{{Height}}" alt="">\n		{{/with}}\n		</a>\n	{{/if}}\n</section>\n\n<section>\n	<header>\n		<p>{{personMeta}}</p>\n		<h1>{{FirstName}} {{Surname}}</h1>\n	</header>\n\n	{{{MarkdownedBio}}}\n\n	{{#if Websites}}\n		<ul class="websites">\n			{{#each Websites}}\n				<li>{{{website}}}</li>\n			{{/each}}\n		</ul>\n	{{/if}}\n</section>';return __p},this.JST["app/templates/person-list-item.html"]=function(obj){var __p="",print=function(){__p+=Array.prototype.join.call(arguments,"")};with(obj||{})__p+='<!-- li -->\n<a href="/about/{{UrlSlug}}/">\n	{{FirstName}} {{Surname}}\n</a>\n<!-- /li -->';return __p},this.JST["app/templates/portfolio-detail.html"]=function(obj){var __p="",print=function(){__p+=Array.prototype.join.call(arguments,"")};with(obj||{})__p+='<!-- article class="portfolio-detail" -->\n<header>\n	<h1>{{Title}}</h1>\n	<p>\n	{{#if IsGroup}}\n		Group project\n	{{else}}\n		{{{nameSummary Persons}}}\n	{{/if}}\n	</p>\n	<p>{{niceDate this}}</p>\n	{{#if Websites}}\n		<p>{{{commaSeparatedWebsites Websites}}}</p>\n	{{/if}}\n</header>\n<section>\n	{{{MarkdownedText}}}\n</section>\n<aside>\n	{{#if Categories}}\n		<h4>Categories</h4>\n		<ul>\n		{{#each Categories}}\n			<li><a href="/portfolio/search/Category:{{ID}}/">{{Title}}</a></li>\n		{{/each}}\n		</ul>\n	{{/if}}\n\n	{{#if combinedProjects}}\n		{{{portfoliolist combinedProjects "Project"}}}\n	{{/if}}\n\n	{{#if Exhibitions}}\n		{{{portfoliolist Exhibitions "Exhibition"}}}\n	{{/if}}\n	\n	{{#if Workshops}}\n		{{{portfoliolist Workshops "Workshop"}}}\n	{{/if}}\n	\n	{{#if Excursions}}\n		{{{portfoliolist Excursions "Excursion"}}}\n	{{/if}}\n</aside>\n\n{{#if Code}}\n<script type="text/javascript">\n	$(document).one(\'code:kickoff\', function (e) {\n		{{{Code}}}\n\n		e.stopImmediatePropagation();\n	});\n</script>\n{{/if}}\n\n<!-- /article -->';return __p},this.JST["app/templates/security/create-project.html"]=function(obj){var __p="",print=function(){__p+=Array.prototype.join.call(arguments,"")};with(obj||{})__p+='<ul class="project-type-list">\n	<li>\n		<a href="#" data-type="Excursion" class="excursion">Excursion</a>\n	</li>\n\n	<li>\n		<a href="#" data-type="Exhibition" class="exhibition">Exhibition</a>\n	</li>\n\n	<li>\n		<a href="#" data-type="Project" class="project">Project</a>\n	</li>\n\n	<li>\n		<a href="#" data-type="Workshop" class="workshop">Workshop</a>\n	</li>\n</ul>\n\n<form class="create-project">\n	<input type="text" name="title" placeholder="Title" autocomplete="off" />\n	<button class="btn" type="submit">Create</button>\n	<div class="form-error">Foo bar!</div>\n</form>\n';return __p},this.JST["app/templates/security/editor-project-container.html"]=function(obj){var __p="",print=function(){__p+=Array.prototype.join.call(arguments,"")};with(obj||{})__p+='<section class="editor-project-preview overview active">\n</section>\n\n<section class="editor-project-main detail">\n</section>\n';return __p},this.JST["app/templates/security/editor-project-main.html"]=function(obj){var __p="",print=function(){__p+=Array.prototype.join.call(arguments,"")};with(obj||{})__p+='<!-- article -->\n<header data-editor-scope="\\ProjectMain">\n	<h1 data-editor-type="inline" data-editor-name="Title" data-editor-placeholder="Title">{{Title}}</h1>\n	<div class="persons">\n		{{#if CurrentMemberPerson}}\n			{{#with CurrentMemberPerson}}\n				{{FirstName}} {{Surname}}\n			{{/with}}\n		{{/if}}\n		<div data-editor-type="select-person" data-editor-name="Person" data-editor-placeholder="Add Collaborators…"></div>\n	</div>\n	\n	<!--<p>\n	{{#if IsGroup}}\n		Group project\n	{{else}}\n		{{{nameSummary Persons}}}\n	{{/if}}\n	</p>-->\n	<p>{{niceDate this}}</p>\n	{{#if Websites}}\n		<p>{{{commaSeparatedWebsites Websites}}}</p>\n	{{/if}}\n</header>\n<section data-editor-scope="\\ProjectMain">\n\n	<div data-editor-type="markdown-split" data-editor-name="Text" data-editor-options=\'{"customParsers": {"images": "ImageMarkdownParser", "embed": "OEmbedMarkdownParser"}}\'>{{Text}}</div>\n\n</section>\n<aside data-editor-scope="\\ProjectMain">\n	{{#stringCompare "Project" ClassName}}\n		<h1>Categories</h1>\n		<ul data-editor-type="select-list" data-editor-name="Category" data-editor-placeholder="Add..."></ul>\n	{{/stringCompare}}\n\n	<h1>Projects</h1>\n	<ul data-editor-type="select-list" data-editor-name="Project" data-editor-placeholder="Add…"></ul>\n\n	{{#stringDiff "Exhibition" ClassName}}\n		<h1>Exhibitions</h1>\n		<ul data-editor-type="select-list" data-editor-name="Exhibition" data-editor-placeholder="Add…"></ul>\n	{{/stringDiff}}\n\n	{{#stringDiff "Workshop" ClassName}}\n		<h1>Workshops</h1>\n		<ul data-editor-type="select-list" data-editor-name="Workshop" data-editor-placeholder="Add…"></ul>\n	{{/stringDiff}}\n\n	{{#stringDiff "Excursion" ClassName}}\n		<h1>Excursions</h1>\n		<ul data-editor-type="select-list" data-editor-name="Excursion" data-editor-placeholder="Add…"></ul>\n	{{/stringDiff}}\n\n</aside>\n\n<!-- /article -->';return __p},this.JST["app/templates/security/editor-project-preview.html"]=function(obj){var __p="",print=function(){__p+=Array.prototype.join.call(arguments,"")};with(obj||{})__p+='<div class="preview-image {{#if PreviewImage}}filled{{/if}}">\n	{{#if PreviewImage}}\n		{{#with PreviewImage.Urls._320}}\n			<img src="{{Url}}" />\n		{{/with}}\n	{{/if}}\n</div>\n<div class="meta" data-editor-scope="\\ProjectPreview">\n	<header>\n		<h1 data-editor-type="inline" data-editor-name="Title" data-editor-placeholder="Title">{{Title}}</h1>\n		{{#stringCompare "Project" ClassName}}\n			<p><span data-editor-type="date" data-editor-name="Date" data-editor-options=\'{ "contentFormat": "M Y"}\'>{{niceDate this}}</span></p>\n		{{else}}\n			<p>\n				<span data-editor-type="date" data-editor-name="StartDate" data-editor-options=\'{"format": "d. M Y"}\'>{{StartDate}}</span> -\n				<span data-editor-type="date" data-editor-name="EndDate" data-editor-options=\'{"format": "d. M Y"}\'>{{EndDate}}</span>\n			</p>\n			<p class="nice-date">{{niceDate this}}</p>\n		{{/stringCompare}}\n	</header>\n	<p data-editor-type="markdown" data-editor-name="TeaserText" data-editor-placeholder="Teaser" data-editor-options=\'{"customParsers": {}, "position": {"my": "right top", "at": "right bottom", "adjust": {"x": 0, "y": 10}}, "repositionOnChange": true, "charlimit": 156}\'>{{TeaserText}}</p>\n</div>';return __p},this.JST["app/templates/security/editor-sidebar-gallery-image.html"]=function(obj){var __p="",print=function(){__p+=Array.prototype.join.call(arguments,"")};with(obj||{})__p+='<a href="#" data-bypass="" data-md-tag="\\[img {{id}}\\]" data-id="{{id}}"><img src="{{url}}" alt="" data-id="{{id}}" data-md-tag="\\[img {{id}}\\]"></a>';return __p},this.JST["app/templates/security/editor-sidebar-gallery.html"]=function(obj){var __p="",print=function(){__p+=Array.prototype.join.call(arguments,"")};with(obj||{})__p+='<div id="uploadzone"></div>\n<header class="editor-header">\n	<h1>Images</h1>\n	{{#if Projects}}\n		<select class="filter">\n			<option value="">--- Choose Project ---</option>\n			{{#each Projects}}\n				<option value="{{FilterID}}">{{Title}}</option>\n			{{/each}}\n		</select>\n	{{/if}}\n</header>\n<section class="editor-sidebar-content scrollbox">\n	{{#if Projects}}\n		{{#each Projects}}\n			<header>\n				<h2>{{Title}}</h2>\n			</header>\n			<section data-filter-id="{{FilterID}}">\n				<ul class="image-list"></ul>\n					{{!-- Drop Zone --}}\n			</section>\n		{{/each}}\n	{{/if}}\n</section>';return __p},this.JST["app/templates/security/editor-sidebar-person-image.html"]=function(obj){var __p="",print=function(){__p+=Array.prototype.join.call(arguments,"")};with(obj||{})__p+='<a href="#" data-bypass data-id="{{id}}"><img src="{{url}}" alt=""></a>';return __p},this.JST["app/templates/security/editor-sidebar-project-item.html"]=function(obj){var __p="",print=function(){__p+=Array.prototype.join.call(arguments,"")};with(obj||{})__p+='<a href="/secured/edit/{{UglyHash}}/">{{Title}}</a>';return __p},this.JST["app/templates/security/editor-sidebar-user.html"]=function(obj){var __p="",print=function(){__p+=Array.prototype.join.call(arguments,"")};with(obj||{})__p+='<header class="editor-header hideable">\n	<div class="img" id="current-person-image">\n		{{#if CurrentImage}}<img src="{{CurrentImage.url}}">{{/if}}\n	</div>\n	<hgroup>\n		{{#if Person}}<h1>{{#with Person}}<a href="/about/{{UrlSlug}}/">{{FirstName}} {{Surname}}</a>{{/with}}</h1>{{/if}}\n\n		{{#if Member}}<p class="email">{{Member.Email}}</p>{{/if}}\n	</hgroup>\n</header>\n<section class="editor-sidebar-content scrollbox">\n	<header>\n		<h2>Person Images</h2>\n	</header>\n	<section>\n		<ul class="image-list">\n		</ul>\n	</section>\n\n	<header>\n		<h2>Projects</h2>\n	</header>\n	<section>\n		<ul class="project-list">\n		</ul>\n		<div>\n			<a class="btn" href="/secured/new/">New Project...</a>\n		</div>\n	</section>\n\n	<header>\n		<h2>Personal Information</h2>\n	</header>\n	<section class="meta-info" data-editor-scope="\\CurrentPerson">\n		<div id="bio">\n			<h3>Bio</h3>\n			<div data-editor-type="markdown" data-editor-name="Bio" data-editor-placeholder="your shitty life!" data-editor-options=\'{"customParsers":{}, "position":{"my": "right top", "at": "left top", "adjust": {"x": -24, "y": -15}}}\'>{{Person.Bio}}</div>\n		</div>\n		<div>\n			<h3>Phone</h3>\n			<p data-editor-type="inline" data-editor-placeholder="Phone" data-editor-name="Phone">{{Person.Phone}}</p>\n		</div>\n		<div>\n			<h3>Email</h3>\n			<p data-editor-type="inline" data-editor-email="Email" data-editor-name="Email">{{Person.Email}}</p>\n		</div>\n	</section>\n\n	<header>\n		<h2>Settings</h2>\n	</header>\n	<section>\n		<form class="user-settings">\n			<input name="email" type="email" placeholder="Email" value="{{Member.Email}}" required>\n			<input name="password" type="password" placeholder="Password">\n			<input name="passwordconfirmed" type="password" placeholder="Confirm Password">\n\n			<button class="btn" type="submit">Update Settings</button>\n		</form>\n	</section>\n</section>';return __p},this.JST["app/templates/security/editor-sidebar.html"]=function(obj){var __p="",print=function(){__p+=Array.prototype.join.call(arguments,"")};with(obj||{})__p+='<nav>\n	<ul>\n		<li>\n			<a href="#" data-editor-sidebar-content="user" class="icon-user"><span>User</span></a>\n		</li>\n		<li>\n			<a href="/logout/" class="icon-logout"><span>Logout</span></a>\n		</li>\n	</ul>\n	<ul>\n		<li>\n			<a href="#" data-editor-sidebar-content="gallery" class="icon-editor"><span>Editor</span></a>\n		</li>\n		<li>\n			<a href="#" class="icon-switch"><span>Switch view</span></a>\n		</li>\n		<li>\n			<a href="#" class="icon-publish"><span>Publish</span></a>\n		</li>\n	</ul>\n</nav>\n\n<div id="editor-sidebar-spinner"></div>\n<div id="editor-sidebar-container"></div>';return __p},this.JST["app/templates/security/logging-out.html"]=function(obj){var __p="",print=function(){__p+=Array.prototype.join.call(arguments,"")};with(obj||{})__p+='<div style="margin-top: 600px">\n	<p>Logging out <strong>{{Email}}</strong>...</p>\n</div>';return __p},this.JST["app/templates/security/login-form.html"]=function(obj){var __p="",print=function(){__p+=Array.prototype.join.call(arguments,"")};with(obj||{})__p+='<form style="margin-top:400px;">\n	<div><input type="text" name="email" placeholder="Email" /></div>\n	<div><input type="password" name="password" placeholder="Password" /></div>\n	<div><input type="checkbox" name="remember" /> Remember me next time</div>\n	<button class="doLogin" type="submit">Log in</button>\n	{{#if Email}}\n		<p>You are logged in as <strong>{{Email}}</strong>. <a href="/logout/">Logout?</a></p>\n	{{else}}\n		<p>You are not logged in.</p>\n	{{/if}}\n</form>';return __p},function(e,t){function P(e){var t=e.length,n=b.type(e);return b.isWindow(e)?!1:1===e.nodeType&&t?!0:"array"===n||"function"!==n&&(0===t||"number"==typeof t&&t>0&&t-1 in e)}function B(e){var t=H[e]={};return b.each(e.match(E)||[],function(e,n){t[n]=!0}),t}function I(e,n,r,i){if(b.acceptData(e)){var s,o,u=b.expando,a="string"==typeof n,f=e.nodeType,c=f?b.cache:e,h=f?e[u]:e[u]&&u;if(h&&c[h]&&(i||c[h].data)||!a||r!==t)return h||(f?e[u]=h=l.pop()||b.guid++:h=u),c[h]||(c[h]={},f||(c[h].toJSON=b.noop)),("object"==typeof n||"function"==typeof n)&&(i?c[h]=b.extend(c[h],n):c[h].data=b.extend(c[h].data,n)),s=c[h],i||(s.data||(s.data={}),s=s.data),r!==t&&(s[b.camelCase(n)]=r),a?(o=s[n],null==o&&(o=s[b.camelCase(n)])):o=s,o}}function q(e,t,n){if(b.acceptData(e)){var r,i,s,o=e.nodeType,u=o?b.cache:e,a=o?e[b.expando]:b.expando;if(u[a]){if(t&&(s=n?u[a]:u[a].data)){b.isArray(t)?t=t.concat(b.map(t,b.camelCase)):t in s?t=[t]:(t=b.camelCase(t),t=t in s?[t]:t.split(" "));for(r=0,i=t.length;i>r;r++)delete s[t[r]];if(!(n?U:b.isEmptyObject)(s))return}(n||(delete u[a].data,U(u[a])))&&(o?b.cleanData([e],!0):b.support.deleteExpando||u!=u.window?delete u[a]:u[a]=null)}}}function R(e,n,r){if(r===t&&1===e.nodeType){var i="data-"+n.replace(F,"-$1").toLowerCase();if(r=e.getAttribute(i),"string"==typeof r){try{r="true"===r?!0:"false"===r?!1:"null"===r?null:+r+""===r?+r:j.test(r)?b.parseJSON(r):r}catch(s){}b.data(e,n,r)}else r=t}return r}function U(e){var t;for(t in e)if(("data"!==t||!b.isEmptyObject(e[t]))&&"toJSON"!==t)return!1;return!0}function it(){return!0}function st(){return!1}function ct(e,t){do e=e[t];while(e&&1!==e.nodeType);return e}function ht(e,t,n){if(t=t||0,b.isFunction(t))return b.grep(e,function(e,r){var i=!!t.call(e,r,e);return i===n});if(t.nodeType)return b.grep(e,function(e){return e===t===n});if("string"==typeof t){var r=b.grep(e,function(e){return 1===e.nodeType});if(at.test(t))return b.filter(t,r,!n);t=b.filter(t,r)}return b.grep(e,function(e){return b.inArray(e,t)>=0===n})}function pt(e){var t=dt.split("|"),n=e.createDocumentFragment();if(n.createElement)while(t.length)n.createElement(t.pop());return n}function Mt(e,t){return e.getElementsByTagName(t)[0]||e.appendChild(e.ownerDocument.createElement(t))}function _t(e){var t=e.getAttributeNode("type");return e.type=(t&&t.specified)+"/"+e.type,e}function Dt(e){var t=Ct.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function Pt(e,t){var n,r=0;for(;null!=(n=e[r]);r++)b._data(n,"globalEval",!t||b._data(t[r],"globalEval"))}function Ht(e,t){if(1===t.nodeType&&b.hasData(e)){var n,r,i,s=b._data(e),o=b._data(t,s),u=s.events;if(u){delete o.handle,o.events={};for(n in u)for(r=0,i=u[n].length;i>r;r++)b.event.add(t,n,u[n][r])}o.data&&(o.data=b.extend({},o.data))}}function Bt(e,t){var n,r,i;if(1===t.nodeType){if(n=t.nodeName.toLowerCase(),!b.support.noCloneEvent&&t[b.expando]){i=b._data(t);for(r in i.events)b.removeEvent(t,r,i.handle);t.removeAttribute(b.expando)}"script"===n&&t.text!==e.text?(_t(t).text=e.text,Dt(t)):"object"===n?(t.parentNode&&(t.outerHTML=e.outerHTML),b.support.html5Clone&&e.innerHTML&&!b.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):"input"===n&&xt.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):"option"===n?t.defaultSelected=t.selected=e.defaultSelected:("input"===n||"textarea"===n)&&(t.defaultValue=e.defaultValue)}}function jt(e,n){var r,s,o=0,u=typeof e.getElementsByTagName!==i?e.getElementsByTagName(n||"*"):typeof e.querySelectorAll!==i?e.querySelectorAll(n||"*"):t;if(!u)for(u=[],r=e.childNodes||e;null!=(s=r[o]);o++)!n||b.nodeName(s,n)?u.push(s):b.merge(u,jt(s,n));return n===t||n&&b.nodeName(e,n)?b.merge([e],u):u}function Ft(e){xt.test(e.type)&&(e.defaultChecked=e.checked)}function tn(e,t){if(t in e)return t;var n=t.charAt(0).toUpperCase()+t.slice(1),r=t,i=en.length;while(i--)if(t=en[i]+n,t in e)return t;return r}function nn(e,t){return e=t||e,"none"===b.css(e,"display")||!b.contains(e.ownerDocument,e)}function rn(e,t){var n,r,i,s=[],o=0,u=e.length;for(;u>o;o++)r=e[o],r.style&&(s[o]=b._data(r,"olddisplay"),n=r.style.display,t?(s[o]||"none"!==n||(r.style.display=""),""===r.style.display&&nn(r)&&(s[o]=b._data(r,"olddisplay",an(r.nodeName)))):s[o]||(i=nn(r),(n&&"none"!==n||!i)&&b._data(r,"olddisplay",i?n:b.css(r,"display"))));for(o=0;u>o;o++)r=e[o],r.style&&(t&&"none"!==r.style.display&&""!==r.style.display||(r.style.display=t?s[o]||"":"none"));return e}function sn(e,t,n){var r=$t.exec(t);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):t}function on(e,t,n,r,i){var s=n===(r?"border":"content")?4:"width"===t?1:0,o=0;for(;4>s;s+=2)"margin"===n&&(o+=b.css(e,n+Zt[s],!0,i)),r?("content"===n&&(o-=b.css(e,"padding"+Zt[s],!0,i)),"margin"!==n&&(o-=b.css(e,"border"+Zt[s]+"Width",!0,i))):(o+=b.css(e,"padding"+Zt[s],!0,i),"padding"!==n&&(o+=b.css(e,"border"+Zt[s]+"Width",!0,i)));return o}function un(e,t,n){var r=!0,i="width"===t?e.offsetWidth:e.offsetHeight,s=qt(e),o=b.support.boxSizing&&"border-box"===b.css(e,"boxSizing",!1,s);if(0>=i||null==i){if(i=Rt(e,t,s),(0>i||null==i)&&(i=e.style[t]),Jt.test(i))return i;r=o&&(b.support.boxSizingReliable||i===e.style[t]),i=parseFloat(i)||0}return i+on(e,t,n||(o?"border":"content"),r,s)+"px"}function an(e){var t=s,n=Qt[e];return n||(n=fn(e,t),"none"!==n&&n||(It=(It||b("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(t.documentElement),t=(It[0].contentWindow||It[0].contentDocument).document,t.write("<!doctype html><html><body>"),t.close(),n=fn(e,t),It.detach()),Qt[e]=n),n}function fn(e,t){var n=b(t.createElement(e)).appendTo(t.body),r=b.css(n[0],"display");return n.remove(),r}function vn(e,t,n,r){var i;if(b.isArray(t))b.each(t,function(t,i){n||cn.test(e)?r(e,i):vn(e+"["+("object"==typeof i?t:"")+"]",i,n,r)});else if(n||"object"!==b.type(t))r(e,t);else for(i in t)vn(e+"["+i+"]",t[i],n,r)}function _n(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,i=0,s=t.toLowerCase().match(E)||[];if(b.isFunction(n))while(r=s[i++])"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function Dn(e,n,r,i){function u(a){var f;return s[a]=!0,b.each(e[a]||[],function(e,a){var l=a(n,r,i);return"string"!=typeof l||o||s[l]?o?!(f=l):t:(n.dataTypes.unshift(l),u(l),!1)}),f}var s={},o=e===An;return u(n.dataTypes[0])||!s["*"]&&u("*")}function Pn(e,n){var r,i,s=b.ajaxSettings.flatOptions||{};for(i in n)n[i]!==t&&((s[i]?e:r||(r={}))[i]=n[i]);return r&&b.extend(!0,e,r),e}function Hn(e,n,r){var i,s,o,u,a=e.contents,f=e.dataTypes,l=e.responseFields;for(u in l)u in r&&(n[l[u]]=r[u]);while("*"===f[0])f.shift(),s===t&&(s=e.mimeType||n.getResponseHeader("Content-Type"));if(s)for(u in a)if(a[u]&&a[u].test(s)){f.unshift(u);break}if(f[0]in r)o=f[0];else{for(u in r){if(!f[0]||e.converters[u+" "+f[0]]){o=u;break}i||(i=u)}o=o||i}return o?(o!==f[0]&&f.unshift(o),r[o]):t}function Bn(e,t){var n,r,i,s,o={},u=0,a=e.dataTypes.slice(),f=a[0];if(e.dataFilter&&(t=e.dataFilter(t,e.dataType)),a[1])for(i in e.converters)o[i.toLowerCase()]=e.converters[i];for(;r=a[++u];)if("*"!==r){if("*"!==f&&f!==r){if(i=o[f+" "+r]||o["* "+r],!i)for(n in o)if(s=n.split(" "),s[1]===r&&(i=o[f+" "+s[0]]||o["* "+s[0]])){i===!0?i=o[n]:o[n]!==!0&&(r=s[0],a.splice(u--,0,r));break}if(i!==!0)if(i&&e["throws"])t=i(t);else try{t=i(t)}catch(l){return{state:"parsererror",error:i?l:"No conversion from "+f+" to "+r}}}f=r}return{state:"success",data:t}}function zn(){try{return new e.XMLHttpRequest}catch(t){}}function Wn(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function Yn(){return setTimeout(function(){Xn=t}),Xn=b.now()}function Zn(e,t){b.each(t,function(t,n){var r=(Gn[t]||[]).concat(Gn["*"]),i=0,s=r.length;for(;s>i;i++)if(r[i].call(e,t,n))return})}function er(e,t,n){var r,i,s=0,o=Qn.length,u=b.Deferred().always(function(){delete a.elem}),a=function(){if(i)return!1;var t=Xn||Yn(),n=Math.max(0,f.startTime+f.duration-t),r=n/f.duration||0,s=1-r,o=0,a=f.tweens.length;for(;a>o;o++)f.tweens[o].run(s);return u.notifyWith(e,[f,s,n]),1>s&&a?n:(u.resolveWith(e,[f]),!1)},f=u.promise({elem:e,props:b.extend({},t),opts:b.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:Xn||Yn(),duration:n.duration,tweens:[],createTween:function(t,n){var r=b.Tween(e,f.opts,t,n,f.opts.specialEasing[t]||f.opts.easing);return f.tweens.push(r),r},stop:function(t){var n=0,r=t?f.tweens.length:0;if(i)return this;for(i=!0;r>n;n++)f.tweens[n].run(1);return t?u.resolveWith(e,[f,t]):u.rejectWith(e,[f,t]),this}}),l=f.props;for(tr(l,f.opts.specialEasing);o>s;s++)if(r=Qn[s].call(f,e,l,f.opts))return r;return Zn(f,l),b.isFunction(f.opts.start)&&f.opts.start.call(e,f),b.fx.timer(b.extend(a,{elem:e,anim:f,queue:f.opts.queue})),f.progress(f.opts.progress).done(f.opts.done,f.opts.complete).fail(f.opts.fail).always(f.opts.always)}function tr(e,t){var n,r,i,s,o;for(i in e)if(r=b.camelCase(i),s=t[r],n=e[i],b.isArray(n)&&(s=n[1],n=e[i]=n[0]),i!==r&&(e[r]=n,delete e[i]),o=b.cssHooks[r],o&&"expand"in o){n=o.expand(n),delete e[r];for(i in n)i in e||(e[i]=n[i],t[i]=s)}else t[r]=s}function nr(e,t,n){var r,i,s,o,u,a,f,l,c,h=this,p=e.style,d={},v=[],m=e.nodeType&&nn(e);n.queue||(l=b._queueHooks(e,"fx"),null==l.unqueued&&(l.unqueued=0,c=l.empty.fire,l.empty.fire=function(){l.unqueued||c()}),l.unqueued++,h.always(function(){h.always(function(){l.unqueued--,b.queue(e,"fx").length||l.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],"inline"===b.css(e,"display")&&"none"===b.css(e,"float")&&(b.support.inlineBlockNeedsLayout&&"inline"!==an(e.nodeName)?p.zoom=1:p.display="inline-block")),n.overflow&&(p.overflow="hidden",b.support.shrinkWrapBlocks||h.always(function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]}));for(i in t)if(o=t[i],$n.exec(o)){if(delete t[i],a=a||"toggle"===o,o===(m?"hide":"show"))continue;v.push(i)}if(s=v.length){u=b._data(e,"fxshow")||b._data(e,"fxshow",{}),"hidden"in u&&(m=u.hidden),a&&(u.hidden=!m),m?b(e).show():h.done(function(){b(e).hide()}),h.done(function(){var t;b._removeData(e,"fxshow");for(t in d)b.style(e,t,d[t])});for(i=0;s>i;i++)r=v[i],f=h.createTween(r,m?u[r]:0),d[r]=u[r]||b.style(e,r),r in u||(u[r]=f.start,m&&(f.end=f.start,f.start="width"===r||"height"===r?1:0))}}function rr(e,t,n,r,i){return new rr.prototype.init(e,t,n,r,i)}function ir(e,t){var n,r={height:e},i=0;for(t=t?1:0;4>i;i+=2-t)n=Zt[i],r["margin"+n]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}function sr(e){return b.isWindow(e)?e:9===e.nodeType?e.defaultView||e.parentWindow:!1}var n,r,i=typeof t,s=e.document,o=e.location,u=e.jQuery,a=e.$,f={},l=[],c="1.9.1",h=l.concat,p=l.push,d=l.slice,v=l.indexOf,m=f.toString,g=f.hasOwnProperty,y=c.trim,b=function(e,t){return new b.fn.init(e,t,r)},w=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,E=/\S+/g,S=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,x=/^(?:(<[\w\W]+>)[^>]*|#([\w-]*))$/,T=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,N=/^[\],:{}\s]*$/,C=/(?:^|:|,)(?:\s*\[)+/g,k=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,L=/"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g,A=/^-ms-/,O=/-([\da-z])/gi,M=function(e,t){return t.toUpperCase()},_=function(e){(s.addEventListener||"load"===e.type||"complete"===s.readyState)&&(D(),b.ready())},D=function(){s.addEventListener?(s.removeEventListener("DOMContentLoaded",_,!1),e.removeEventListener("load",_,!1)):(s.detachEvent("onreadystatechange",_),e.detachEvent("onload",_))};b.fn=b.prototype={jquery:c,constructor:b,init:function(e,n,r){var i,o;if(!e)return this;if("string"==typeof e){if(i="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:x.exec(e),!i||!i[1]&&n)return!n||n.jquery?(n||r).find(e):this.constructor(n).find(e);if(i[1]){if(n=n instanceof b?n[0]:n,b.merge(this,b.parseHTML(i[1],n&&n.nodeType?n.ownerDocument||n:s,!0)),T.test(i[1])&&b.isPlainObject(n))for(i in n)b.isFunction(this[i])?this[i](n[i]):this.attr(i,n[i]);return this}if(o=s.getElementById(i[2]),o&&o.parentNode){if(o.id!==i[2])return r.find(e);this.length=1,this[0]=o}return this.context=s,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):b.isFunction(e)?r.ready(e):(e.selector!==t&&(this.selector=e.selector,this.context=e.context),b.makeArray(e,this))},selector:"",length:0,size:function(){return this.length},toArray:function(){return d.call(this)},get:function(e){return null==e?this.toArray():0>e?this[this.length+e]:this[e]},pushStack:function(e){var t=b.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return b.each(this,e,t)},ready:function(e){return b.ready.promise().done(e),this},slice:function(){return this.pushStack(d.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(0>e?t:0);return this.pushStack(n>=0&&t>n?[this[n]]:[])},map:function(e){return this.pushStack(b.map(this,function(t,n){return e.call(t,n,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:p,sort:[].sort,splice:[].splice},b.fn.init.prototype=b.fn,b.extend=b.fn.extend=function(){var e,n,r,i,s,o,u=arguments[0]||{},a=1,f=arguments.length,l=!1;for("boolean"==typeof u&&(l=u,u=arguments[1]||{},a=2),"object"==typeof u||b.isFunction(u)||(u={}),f===a&&(u=this,--a);f>a;a++)if(null!=(s=arguments[a]))for(i in s)e=u[i],r=s[i],u!==r&&(l&&r&&(b.isPlainObject(r)||(n=b.isArray(r)))?(n?(n=!1,o=e&&b.isArray(e)?e:[]):o=e&&b.isPlainObject(e)?e:{},u[i]=b.extend(l,o,r)):r!==t&&(u[i]=r));return u},b.extend({noConflict:function(t){return e.$===b&&(e.$=a),t&&e.jQuery===b&&(e.jQuery=u),b},isReady:!1,readyWait:1,holdReady:function(e){e?b.readyWait++:b.ready(!0)},ready:function(e){if(e===!0?!--b.readyWait:!b.isReady){if(!s.body)return setTimeout(b.ready);b.isReady=!0,e!==!0&&--b.readyWait>0||(n.resolveWith(s,[b]),b.fn.trigger&&b(s).trigger("ready").off("ready"))}},isFunction:function(e){return"function"===b.type(e)},isArray:Array.isArray||function(e){return"array"===b.type(e)},isWindow:function(e){return null!=e&&e==e.window},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?f[m.call(e)]||"object":typeof e},isPlainObject:function(e){if(!e||"object"!==b.type(e)||e.nodeType||b.isWindow(e))return!1;try{if(e.constructor&&!g.call(e,"constructor")&&!g.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}var r;for(r in e);return r===t||g.call(e,r)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},error:function(e){throw Error(e)},parseHTML:function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||s;var r=T.exec(e),i=!n&&[];return r?[t.createElement(r[1])]:(r=b.buildFragment([e],t,i),i&&b(i).remove(),b.merge([],r.childNodes))},parseJSON:function(n){return e.JSON&&e.JSON.parse?e.JSON.parse(n):null===n?n:"string"==typeof n&&(n=b.trim(n),n&&N.test(n.replace(k,"@").replace(L,"]").replace(C,"")))?Function("return "+n)():(b.error("Invalid JSON: "+n),t)},parseXML:function(n){var r,i;if(!n||"string"!=typeof n)return null;try{e.DOMParser?(i=new DOMParser,r=i.parseFromString(n,"text/xml")):(r=new ActiveXObject("Microsoft.XMLDOM"),r.async="false",r.loadXML(n))}catch(s){r=t}return r&&r.documentElement&&!r.getElementsByTagName("parsererror").length||b.error("Invalid XML: "+n),r},noop:function(){},globalEval:function(t){t&&b.trim(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(A,"ms-").replace(O,M)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,n){var r,i=0,s=e.length,o=P(e);if(n){if(o){for(;s>i;i++)if(r=t.apply(e[i],n),r===!1)break}else for(i in e)if(r=t.apply(e[i],n),r===!1)break}else if(o){for(;s>i;i++)if(r=t.call(e[i],i,e[i]),r===!1)break}else for(i in e)if(r=t.call(e[i],i,e[i]),r===!1)break;return e},trim:y&&!y.call("﻿ ")?function(e){return null==e?"":y.call(e)}:function(e){return null==e?"":(e+"").replace(S,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(P(Object(e))?b.merge(n,"string"==typeof e?[e]:e):p.call(n,e)),n},inArray:function(e,t,n){var r;if(t){if(v)return v.call(t,e,n);for(r=t.length,n=n?0>n?Math.max(0,r+n):n:0;r>n;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,n){var r=n.length,i=e.length,s=0;if("number"==typeof r)for(;r>s;s++)e[i++]=n[s];else while(n[s]!==t)e[i++]=n[s++];return e.length=i,e},grep:function(e,t,n){var r,i=[],s=0,o=e.length;for(n=!!n;o>s;s++)r=!!t(e[s],s),n!==r&&i.push(e[s]);return i},map:function(e,t,n){var r,i=0,s=e.length,o=P(e),u=[];if(o)for(;s>i;i++)r=t(e[i],i,n),null!=r&&(u[u.length]=r);else for(i in e)r=t(e[i],i,n),null!=r&&(u[u.length]=r);return h.apply([],u)},guid:1,proxy:function(e,n){var r,i,s;return"string"==typeof n&&(s=e[n],n=e,e=s),b.isFunction(e)?(r=d.call(arguments,2),i=function(){return e.apply(n||this,r.concat(d.call(arguments)))},i.guid=e.guid=e.guid||b.guid++,i):t},access:function(e,n,r,i,s,o,u){var a=0,f=e.length,l=null==r;if("object"===b.type(r)){s=!0;for(a in r)b.access(e,n,a,r[a],!0,o,u)}else if(i!==t&&(s=!0,b.isFunction(i)||(u=!0),l&&(u?(n.call(e,i),n=null):(l=n,n=function(e,t,n){return l.call(b(e),n)})),n))for(;f>a;a++)n(e[a],r,u?i:i.call(e[a],a,n(e[a],r)));return s?e:l?n.call(e):f?n(e[0],r):o},now:function(){return(new Date).getTime()}}),b.ready.promise=function(t){if(!n)if(n=b.Deferred(),"complete"===s.readyState)setTimeout(b.ready);else if(s.addEventListener)s.addEventListener("DOMContentLoaded",_,!1),e.addEventListener("load",_,!1);else{s.attachEvent("onreadystatechange",_),e.attachEvent("onload",_);var r=!1;try{r=null==e.frameElement&&s.documentElement}catch(i){}r&&r.doScroll&&function o(){if(!b.isReady){try{r.doScroll("left")}catch(e){return setTimeout(o,50)}D(),b.ready()}}()}return n.promise(t)},b.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){f["[object "+t+"]"]=t.toLowerCase()}),r=b(s);var H={};b.Callbacks=function(e){e="string"==typeof e?H[e]||B(e):b.extend({},e);var n,r,i,s,o,u,a=[],f=!e.once&&[],l=function(t){for(r=e.memory&&t,i=!0,o=u||0,u=0,s=a.length,n=!0;a&&s>o;o++)if(a[o].apply(t[0],t[1])===!1&&e.stopOnFalse){r=!1;break}n=!1,a&&(f?f.length&&l(f.shift()):r?a=[]:c.disable())},c={add:function(){if(a){var t=a.length;(function i(t){b.each(t,function(t,n){var r=b.type(n);"function"===r?e.unique&&c.has(n)||a.push(n):n&&n.length&&"string"!==r&&i(n)})})(arguments),n?s=a.length:r&&(u=t,l(r))}return this},remove:function(){return a&&b.each(arguments,function(e,t){var r;while((r=b.inArray(t,a,r))>-1)a.splice(r,1),n&&(s>=r&&s--,o>=r&&o--)}),this},has:function(e){return e?b.inArray(e,a)>-1:!!a&&!!a.length},empty:function(){return a=[],this},disable:function(){return a=f=r=t,this},disabled:function(){return!a},lock:function(){return f=t,r||c.disable(),this},locked:function(){return!f},fireWith:function(e,t){return t=t||[],t=[e,t.slice?t.slice():t],!a||i&&!f||(n?f.push(t):l(t)),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!i}};return c},b.extend({Deferred:function(e){var t=[["resolve","done",b.Callbacks("once memory"),"resolved"],["reject","fail",b.Callbacks("once memory"),"rejected"],["notify","progress",b.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var e=arguments;return b.Deferred(function(n){b.each(t,function(t,s){var o=s[0],u=b.isFunction(e[t])&&e[t];i[s[1]](function(){var e=u&&u.apply(this,arguments);e&&b.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[o+"With"](this===r?n.promise():this,u?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?b.extend(e,r):r}},i={};return r.pipe=r.then,b.each(t,function(e,s){var o=s[2],u=s[3];r[s[1]]=o.add,u&&o.add(function(){n=u},t[1^e][2].disable,t[2][2].lock),i[s[0]]=function(){return i[s[0]+"With"](this===i?r:this,arguments),this},i[s[0]+"With"]=o.fireWith}),r.promise(i),e&&e.call(i,i),i},when:function(e){var t=0,n=d.call(arguments),r=n.length,i=1!==r||e&&b.isFunction(e.promise)?r:0,s=1===i?e:b.Deferred(),o=function(e,t,n){return function(r){t[e]=this,n[e]=arguments.length>1?d.call(arguments):r,n===u?s.notifyWith(t,n):--i||s.resolveWith(t,n)}},u,a,f;if(r>1)for(u=Array(r),a=Array(r),f=Array(r);r>t;t++)n[t]&&b.isFunction(n[t].promise)?n[t].promise().done(o(t,f,n)).fail(s.reject).progress(o(t,a,u)):--i;return i||s.resolveWith(f,n),s.promise()}}),b.support=function(){var t,n,r,o,u,a,f,l,c,h,p=s.createElement("div");if(p.setAttribute("className","t"),p.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",n=p.getElementsByTagName("*"),r=p.getElementsByTagName("a")[0],!n||!r||!n.length)return{};u=s.createElement("select"),f=u.appendChild(s.createElement("option")),o=p.getElementsByTagName("input")[0],r.style.cssText="top:1px;float:left;opacity:.5",t={getSetAttribute:"t"!==p.className,leadingWhitespace:3===p.firstChild.nodeType,tbody:!p.getElementsByTagName("tbody").length,htmlSerialize:!!p.getElementsByTagName("link").length,style:/top/.test(r.getAttribute("style")),hrefNormalized:"/a"===r.getAttribute("href"),opacity:/^0.5/.test(r.style.opacity),cssFloat:!!r.style.cssFloat,checkOn:!!o.value,optSelected:f.selected,enctype:!!s.createElement("form").enctype,html5Clone:"<:nav></:nav>"!==s.createElement("nav").cloneNode(!0).outerHTML,boxModel:"CSS1Compat"===s.compatMode,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,boxSizingReliable:!0,pixelPosition:!1},o.checked=!0,t.noCloneChecked=o.cloneNode(!0).checked,u.disabled=!0,t.optDisabled=!f.disabled;try{delete p.test}catch(d){t.deleteExpando=!1}o=s.createElement("input"),o.setAttribute("value",""),t.input=""===o.getAttribute("value"),o.value="t",o.setAttribute("type","radio"),t.radioValue="t"===o.value,o.setAttribute("checked","t"),o.setAttribute("name","t"),a=s.createDocumentFragment(),a.appendChild(o),t.appendChecked=o.checked,t.checkClone=a.cloneNode(!0).cloneNode(!0).lastChild.checked,p.attachEvent&&(p.attachEvent("onclick",function(){t.noCloneEvent=!1}),p.cloneNode(!0).click());for(h in{submit:!0,change:!0,focusin:!0})p.setAttribute(l="on"+h,"t"),t[h+"Bubbles"]=l in e||p.attributes[l].expando===!1;return p.style.backgroundClip="content-box",p.cloneNode(!0).style.backgroundClip="",t.clearCloneStyle="content-box"===p.style.backgroundClip,b(function(){var n,r,o,u="padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;",a=s.getElementsByTagName("body")[0];a&&(n=s.createElement("div"),n.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",a.appendChild(n).appendChild(p),p.innerHTML="<table><tr><td></td><td>t</td></tr></table>",o=p.getElementsByTagName("td"),o[0].style.cssText="padding:0;margin:0;border:0;display:none",c=0===o[0].offsetHeight,o[0].style.display="",o[1].style.display="none",t.reliableHiddenOffsets=c&&0===o[0].offsetHeight,p.innerHTML="",p.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",t.boxSizing=4===p.offsetWidth,t.doesNotIncludeMarginInBodyOffset=1!==a.offsetTop,e.getComputedStyle&&(t.pixelPosition="1%"!==(e.getComputedStyle(p,null)||{}).top,t.boxSizingReliable="4px"===(e.getComputedStyle(p,null)||{width:"4px"}).width,r=p.appendChild(s.createElement("div")),r.style.cssText=p.style.cssText=u,r.style.marginRight=r.style.width="0",p.style.width="1px",t.reliableMarginRight=!parseFloat((e.getComputedStyle(r,null)||{}).marginRight)),typeof p.style.zoom!==i&&(p.innerHTML="",p.style.cssText=u+"width:1px;padding:1px;display:inline;zoom:1",t.inlineBlockNeedsLayout=3===p.offsetWidth,p.style.display="block",p.innerHTML="<div></div>",p.firstChild.style.width="5px",t.shrinkWrapBlocks=3!==p.offsetWidth,t.inlineBlockNeedsLayout&&(a.style.zoom=1)),a.removeChild(n),n=p=o=r=null)}),n=u=a=f=r=o=null,t}();var j=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,F=/([A-Z])/g;b.extend({cache:{},expando:"jQuery"+(c+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(e){return e=e.nodeType?b.cache[e[b.expando]]:e[b.expando],!!e&&!U(e)},data:function(e,t,n){return I(e,t,n)},removeData:function(e,t){return q(e,t)},_data:function(e,t,n){return I(e,t,n,!0)},_removeData:function(e,t){return q(e,t,!0)},acceptData:function(e){if(e.nodeType&&1!==e.nodeType&&9!==e.nodeType)return!1;var t=e.nodeName&&b.noData[e.nodeName.toLowerCase()];return!t||t!==!0&&e.getAttribute("classid")===t}}),b.fn.extend({data:function(e,n){var r,i,s=this[0],o=0,u=null;if(e===t){if(this.length&&(u=b.data(s),1===s.nodeType&&!b._data(s,"parsedAttrs"))){for(r=s.attributes;r.length>o;o++)i=r[o].name,i.indexOf("data-")||(i=b.camelCase(i.slice(5)),R(s,i,u[i]));b._data(s,"parsedAttrs",!0)}return u}return"object"==typeof e?this.each(function(){b.data(this,e)}):b.access(this,function(n){return n===t?s?R(s,e,b.data(s,e)):null:(this.each(function(){b.data(this,e,n)}),t)},null,n,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){b.removeData(this,e)})}}),b.extend({queue:function(e,n,r){var i;return e?(n=(n||"fx")+"queue",i=b._data(e,n),r&&(!i||b.isArray(r)?i=b._data(e,n,b.makeArray(r)):i.push(r)),i||[]):t},dequeue:function(e,t){t=t||"fx";var n=b.queue(e,t),r=n.length,i=n.shift(),s=b._queueHooks(e,t),o=function(){b.dequeue(e,t)};"inprogress"===i&&(i=n.shift(),r--),s.cur=i,i&&("fx"===t&&n.unshift("inprogress"),delete s.stop,i.call(e,o,s)),!r&&s&&s.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return b._data(e,n)||b._data(e,n,{empty:b.Callbacks("once memory").add(function(){b._removeData(e,t+"queue"),b._removeData(e,n)})})}}),b.fn.extend({queue:function(e,n){var r=2;return"string"!=typeof e&&(n=e,e="fx",r--),r>arguments.length?b.queue(this[0],e):n===t?this:this.each(function(){var t=b.queue(this,e,n);b._queueHooks(this,e),"fx"===e&&"inprogress"!==t[0]&&b.dequeue(this,e)})},dequeue:function(e){return this.each(function(){b.dequeue(this,e)})},delay:function(e,t){return e=b.fx?b.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,n){var r,i=1,s=b.Deferred(),o=this,u=this.length,a=function(){--i||s.resolveWith(o,[o])};"string"!=typeof e&&(n=e,e=t),e=e||"fx";while(u--)r=b._data(o[u],e+"queueHooks"),r&&r.empty&&(i++,r.empty.add(a));return a(),s.promise(n)}});var z,W,X=/[\t\r\n]/g,V=/\r/g,$=/^(?:input|select|textarea|button|object)$/i,J=/^(?:a|area)$/i,K=/^(?:checked|selected|autofocus|autoplay|async|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped)$/i,Q=/^(?:checked|selected)$/i,G=b.support.getSetAttribute,Y=b.support.input;b.fn.extend({attr:function(e,t){return b.access(this,b.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){b.removeAttr(this,e)})},prop:function(e,t){return b.access(this,b.prop,e,t,arguments.length>1)},removeProp:function(e){return e=b.propFix[e]||e,this.each(function(){try{this[e]=t,delete this[e]}catch(n){}})},addClass:function(e){var t,n,r,i,s,o=0,u=this.length,a="string"==typeof e&&e;if(b.isFunction(e))return this.each(function(t){b(this).addClass(e.call(this,t,this.className))});if(a)for(t=(e||"").match(E)||[];u>o;o++)if(n=this[o],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(X," "):" ")){s=0;while(i=t[s++])0>r.indexOf(" "+i+" ")&&(r+=i+" ");n.className=b.trim(r)}return this},removeClass:function(e){var t,n,r,i,s,o=0,u=this.length,a=0===arguments.length||"string"==typeof e&&e;if(b.isFunction(e))return this.each(function(t){b(this).removeClass(e.call(this,t,this.className))});if(a)for(t=(e||"").match(E)||[];u>o;o++)if(n=this[o],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(X," "):"")){s=0;while(i=t[s++])while(r.indexOf(" "+i+" ")>=0)r=r.replace(" "+i+" "," ");n.className=e?b.trim(r):""}return this},toggleClass:function(e,t){var n=typeof e,r="boolean"==typeof t;return b.isFunction(e)?this.each(function(n){b(this).toggleClass(e.call(this,n,this.className,t),t)}):this.each(function(){if("string"===n){var s,o=0,u=b(this),a=t,f=e.match(E)||[];while(s=f[o++])a=r?a:!u.hasClass(s),u[a?"addClass":"removeClass"](s)}else(n===i||"boolean"===n)&&(this.className&&b._data(this,"__className__",this.className),this.className=this.className||e===!1?"":b._data(this,"__className__")||"")})},hasClass:function(e){var t=" "+e+" ",n=0,r=this.length;for(;r>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(X," ").indexOf(t)>=0)return!0;return!1},val:function(e){var n,r,i,s=this[0];if(arguments.length)return i=b.isFunction(e),this.each(function(n){var s,o=b(this);1===this.nodeType&&(s=i?e.call(this,n,o.val()):e,null==s?s="":"number"==typeof s?s+="":b.isArray(s)&&(s=b.map(s,function(e){return null==e?"":e+""})),r=b.valHooks[this.type]||b.valHooks[this.nodeName.toLowerCase()],r&&"set"in r&&r.set(this,s,"value")!==t||(this.value=s))});if(s)return r=b.valHooks[s.type]||b.valHooks[s.nodeName.toLowerCase()],r&&"get"in r&&(n=r.get(s,"value"))!==t?n:(n=s.value,"string"==typeof n?n.replace(V,""):null==n?"":n)}}),b.extend({valHooks:{option:{get:function(e){var t=e.attributes.value;return!t||t.specified?e.value:e.text}},select:{get:function(e){var t,n,r=e.options,i=e.selectedIndex,s="select-one"===e.type||0>i,o=s?null:[],u=s?i+1:r.length,a=0>i?u:s?i:0;for(;u>a;a++)if(n=r[a],!(!n.selected&&a!==i||(b.support.optDisabled?n.disabled:null!==n.getAttribute("disabled"))||n.parentNode.disabled&&b.nodeName(n.parentNode,"optgroup"))){if(t=b(n).val(),s)return t;o.push(t)}return o},set:function(e,t){var n=b.makeArray(t);return b(e).find("option").each(function(){this.selected=b.inArray(b(this).val(),n)>=0}),n.length||(e.selectedIndex=-1),n}}},attr:function(e,n,r){var s,o,u,a=e.nodeType;if(e&&3!==a&&8!==a&&2!==a)return typeof e.getAttribute===i?b.prop(e,n,r):(o=1!==a||!b.isXMLDoc(e),o&&(n=n.toLowerCase(),s=b.attrHooks[n]||(K.test(n)?W:z)),r===t?s&&o&&"get"in s&&null!==(u=s.get(e,n))?u:(typeof e.getAttribute!==i&&(u=e.getAttribute(n)),null==u?t:u):null!==r?s&&o&&"set"in s&&(u=s.set(e,r,n))!==t?u:(e.setAttribute(n,r+""),r):(b.removeAttr(e,n),t))},removeAttr:function(e,t){var n,r,i=0,s=t&&t.match(E);if(s&&1===e.nodeType)while(n=s[i++])r=b.propFix[n]||n,K.test(n)?!G&&Q.test(n)?e[b.camelCase("default-"+n)]=e[r]=!1:e[r]=!1:b.attr(e,n,""),e.removeAttribute(G?n:r)},attrHooks:{type:{set:function(e,t){if(!b.support.radioValue&&"radio"===t&&b.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(e,n,r){var i,s,o,u=e.nodeType;if(e&&3!==u&&8!==u&&2!==u)return o=1!==u||!b.isXMLDoc(e),o&&(n=b.propFix[n]||n,s=b.propHooks[n]),r!==t?s&&"set"in s&&(i=s.set(e,r,n))!==t?i:e[n]=r:s&&"get"in s&&null!==(i=s.get(e,n))?i:e[n]},propHooks:{tabIndex:{get:function(e){var n=e.getAttributeNode("tabindex");return n&&n.specified?parseInt(n.value,10):$.test(e.nodeName)||J.test(e.nodeName)&&e.href?0:t}}}}),W={get:function(e,n){var r=b.prop(e,n),i="boolean"==typeof r&&e.getAttribute(n),s="boolean"==typeof r?Y&&G?null!=i:Q.test(n)?e[b.camelCase("default-"+n)]:!!i:e.getAttributeNode(n);return s&&s.value!==!1?n.toLowerCase():t},set:function(e,t,n){return t===!1?b.removeAttr(e,n):Y&&G||!Q.test(n)?e.setAttribute(!G&&b.propFix[n]||n,n):e[b.camelCase("default-"+n)]=e[n]=!0,n}},Y&&G||(b.attrHooks.value={get:function(e,n){var r=e.getAttributeNode(n);return b.nodeName(e,"input")?e.defaultValue:r&&r.specified?r.value:t},set:function(e,n,r){return b.nodeName(e,"input")?(e.defaultValue=n,t):z&&z.set(e,n,r)}}),G||(z=b.valHooks.button={get:function(e,n){var r=e.getAttributeNode(n);return r&&("id"===n||"name"===n||"coords"===n?""!==r.value:r.specified)?r.value:t},set:function(e,n,r){var i=e.getAttributeNode(r);return i||e.setAttributeNode(i=e.ownerDocument.createAttribute(r)),i.value=n+="","value"===r||n===e.getAttribute(r)?n:t}},b.attrHooks.contenteditable={get:z.get,set:function(e,t,n){z.set(e,""===t?!1:t,n)}},b.each(["width","height"],function(e,n){b.attrHooks[n]=b.extend(b.attrHooks[n],{set:function(e,r){return""===r?(e.setAttribute(n,"auto"),r):t}})})),b.support.hrefNormalized||(b.each(["href","src","width","height"],function(e,n){b.attrHooks[n]=b.extend(b.attrHooks[n],{get:function(e){var r=e.getAttribute(n,2);return null==r?t:r}})}),b.each(["href","src"],function(e,t){b.propHooks[t]={get:function(e){return e.getAttribute(t,4)}}})),b.support.style||(b.attrHooks.style={get:function(e){return e.style.cssText||t},set:function(e,t){return e.style.cssText=t+""}}),b.support.optSelected||(b.propHooks.selected=b.extend(b.propHooks.selected,{get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}})),b.support.enctype||(b.propFix.enctype="encoding"),b.support.checkOn||b.each(["radio","checkbox"],function(){b.valHooks[this]={get:function(e){return null===e.getAttribute("value")?"on":e.value}}}),b.each(["radio","checkbox"],function(){b.valHooks[this]=b.extend(b.valHooks[this],{set:function(e,n){return b.isArray(n)?e.checked=b.inArray(b(e).val(),n)>=0:t}})});var Z=/^(?:input|select|textarea)$/i,et=/^key/,tt=/^(?:mouse|contextmenu)|click/,nt=/^(?:focusinfocus|focusoutblur)$/,rt=/^([^.]*)(?:\.(.+)|)$/;b.event={global:{},add:function(e,n,r,s,o){var u,a,f,l,c,h,p,d,v,m,g,y=b._data(e);if(y){r.handler&&(l=r,r=l.handler,o=l.selector),r.guid||(r.guid=b.guid++),(a=y.events)||(a=y.events={}),(h=y.handle)||(h=y.handle=function(e){return typeof b===i||e&&b.event.triggered===e.type?t:b.event.dispatch.apply(h.elem,arguments)},h.elem=e),n=(n||"").match(E)||[""],f=n.length;while(f--)u=rt.exec(n[f])||[],v=g=u[1],m=(u[2]||"").split(".").sort(),c=b.event.special[v]||{},v=(o?c.delegateType:c.bindType)||v,c=b.event.special[v]||{},p=b.extend({type:v,origType:g,data:s,handler:r,guid:r.guid,selector:o,needsContext:o&&b.expr.match.needsContext.test(o),namespace:m.join(".")},l),(d=a[v])||(d=a[v]=[],d.delegateCount=0,c.setup&&c.setup.call(e,s,m,h)!==!1||(e.addEventListener?e.addEventListener(v,h,!1):e.attachEvent&&e.attachEvent("on"+v,h))),c.add&&(c.add.call(e,p),p.handler.guid||(p.handler.guid=r.guid)),o?d.splice(d.delegateCount++,0,p):d.push(p),b.event.global[v]=!0;e=null}},remove:function(e,t,n,r,i){var s,o,u,a,f,l,c,h,p,d,v,m=b.hasData(e)&&b._data(e);if(m&&(l=m.events)){t=(t||"").match(E)||[""],f=t.length;while(f--)if(u=rt.exec(t[f])||[],p=v=u[1],d=(u[2]||"").split(".").sort(),p){c=b.event.special[p]||{},p=(r?c.delegateType:c.bindType)||p,h=l[p]||[],u=u[2]&&RegExp("(^|\\.)"+d.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=s=h.length;while(s--)o=h[s],!i&&v!==o.origType||n&&n.guid!==o.guid||u&&!u.test(o.namespace)||r&&r!==o.selector&&("**"!==r||!o.selector)||(h.splice(s,1),o.selector&&h.delegateCount--,c.remove&&c.remove.call(e,o));a&&!h.length&&(c.teardown&&c.teardown.call(e,d,m.handle)!==!1||b.removeEvent(e,p,m.handle),delete l[p])}else for(p in l)b.event.remove(e,p+t[f],n,r,!0);b.isEmptyObject(l)&&(delete m.handle,b._removeData(e,"events"))}},trigger:function(n,r,i,o){var u,a,f,l,c,h,p,d=[i||s],v=g.call(n,"type")?n.type:n,m=g.call(n,"namespace")?n.namespace.split("."):[];if(f=h=i=i||s,3!==i.nodeType&&8!==i.nodeType&&!nt.test(v+b.event.triggered)&&(v.indexOf(".")>=0&&(m=v.split("."),v=m.shift(),m.sort()),a=0>v.indexOf(":")&&"on"+v,n=n[b.expando]?n:new b.Event(v,"object"==typeof n&&n),n.isTrigger=!0,n.namespace=m.join("."),n.namespace_re=n.namespace?RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,n.result=t,n.target||(n.target=i),r=null==r?[n]:b.makeArray(r,[n]),c=b.event.special[v]||{},o||!c.trigger||c.trigger.apply(i,r)!==!1)){if(!o&&!c.noBubble&&!b.isWindow(i)){for(l=c.delegateType||v,nt.test(l+v)||(f=f.parentNode);f;f=f.parentNode)d.push(f),h=f;h===(i.ownerDocument||s)&&d.push(h.defaultView||h.parentWindow||e)}p=0;while((f=d[p++])&&!n.isPropagationStopped())n.type=p>1?l:c.bindType||v,u=(b._data(f,"events")||{})[n.type]&&b._data(f,"handle"),u&&u.apply(f,r),u=a&&f[a],u&&b.acceptData(f)&&u.apply&&u.apply(f,r)===!1&&n.preventDefault();if(n.type=v,!(o||n.isDefaultPrevented()||c._default&&c._default.apply(i.ownerDocument,r)!==!1||"click"===v&&b.nodeName(i,"a")||!b.acceptData(i)||!a||!i[v]||b.isWindow(i))){h=i[a],h&&(i[a]=null),b.event.triggered=v;try{i[v]()}catch(y){}b.event.triggered=t,h&&(i[a]=h)}return n.result}},dispatch:function(e){e=b.event.fix(e);var n,r,i,s,o,u=[],a=d.call(arguments),f=(b._data(this,"events")||{})[e.type]||[],l=b.event.special[e.type]||{};if(a[0]=e,e.delegateTarget=this,!l.preDispatch||l.preDispatch.call(this,e)!==!1){u=b.event.handlers.call(this,e,f),n=0;while((s=u[n++])&&!e.isPropagationStopped()){e.currentTarget=s.elem,o=0;while((i=s.handlers[o++])&&!e.isImmediatePropagationStopped())(!e.namespace_re||e.namespace_re.test(i.namespace))&&(e.handleObj=i,e.data=i.data,r=((b.event.special[i.origType]||{}).handle||i.handler).apply(s.elem,a),r!==t&&(e.result=r)===!1&&(e.preventDefault(),e.stopPropagation()))}return l.postDispatch&&l.postDispatch.call(this,e),e.result}},handlers:function(e,n){var r,i,s,o,u=[],a=n.delegateCount,f=e.target;if(a&&f.nodeType&&(!e.button||"click"!==e.type))for(;f!=this;f=f.parentNode||this)if(1===f.nodeType&&(f.disabled!==!0||"click"!==e.type)){for(s=[],o=0;a>o;o++)i=n[o],r=i.selector+" ",s[r]===t&&(s[r]=i.needsContext?b(r,this).index(f)>=0:b.find(r,this,null,[f]).length),s[r]&&s.push(i);s.length&&u.push({elem:f,handlers:s})}return n.length>a&&u.push({elem:this,handlers:n.slice(a)}),u},fix:function(e){if(e[b.expando])return e;var t,n,r,i=e.type,o=e,u=this.fixHooks[i];u||(this.fixHooks[i]=u=tt.test(i)?this.mouseHooks:et.test(i)?this.keyHooks:{}),r=u.props?this.props.concat(u.props):this.props,e=new b.Event(o),t=r.length;while(t--)n=r[t],e[n]=o[n];return e.target||(e.target=o.srcElement||s),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,u.filter?u.filter(e,o):e},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,n){var r,i,o,u=n.button,a=n.fromElement;return null==e.pageX&&null!=n.clientX&&(i=e.target.ownerDocument||s,o=i.documentElement,r=i.body,e.pageX=n.clientX+(o&&o.scrollLeft||r&&r.scrollLeft||0)-(o&&o.clientLeft||r&&r.clientLeft||0),e.pageY=n.clientY+(o&&o.scrollTop||r&&r.scrollTop||0)-(o&&o.clientTop||r&&r.clientTop||0)),!e.relatedTarget&&a&&(e.relatedTarget=a===e.target?n.toElement:a),e.which||u===t||(e.which=1&u?1:2&u?3:4&u?2:0),e}},special:{load:{noBubble:!0},click:{trigger:function(){return b.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):t}},focus:{trigger:function(){if(this!==s.activeElement&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:"focusin"},blur:{trigger:function(){return this===s.activeElement&&this.blur?(this.blur(),!1):t},delegateType:"focusout"},beforeunload:{postDispatch:function(e){e.result!==t&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,r){var i=b.extend(new b.Event,n,{type:e,isSimulated:!0,originalEvent:{}});r?b.event.trigger(i,null,t):b.event.dispatch.call(t,i),i.isDefaultPrevented()&&n.preventDefault()}},b.removeEvent=s.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){var r="on"+t;e.detachEvent&&(typeof e[r]===i&&(e[r]=null),e.detachEvent(r,n))},b.Event=function(e,n){return this instanceof b.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.returnValue===!1||e.getPreventDefault&&e.getPreventDefault()?it:st):this.type=e,n&&b.extend(this,n),this.timeStamp=e&&e.timeStamp||b.now(),this[b.expando]=!0,t):new b.Event(e,n)},b.Event.prototype={isDefaultPrevented:st,isPropagationStopped:st,isImmediatePropagationStopped:st,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=it,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=it,e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=it,this.stopPropagation()}},b.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){b.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,s=e.handleObj;return(!i||i!==r&&!b.contains(r,i))&&(e.type=s.origType,n=s.handler.apply(this,arguments),e.type=t),n}}}),b.support.submitBubbles||(b.event.special.submit={setup:function(){return b.nodeName(this,"form")?!1:(b.event.add(this,"click._submit keypress._submit",function(e){var n=e.target,r=b.nodeName(n,"input")||b.nodeName(n,"button")?n.form:t;r&&!b._data(r,"submitBubbles")&&(b.event.add(r,"submit._submit",function(e){e._submit_bubble=!0}),b._data(r,"submitBubbles",!0))}),t)},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&b.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){return b.nodeName(this,"form")?!1:(b.event.remove(this,"._submit"),t)}}),b.support.changeBubbles||(b.event.special.change={setup:function(){return Z.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(b.event.add(this,"propertychange._change",function(e){"checked"===e.originalEvent.propertyName&&(this._just_changed=!0)}),b.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),b.event.simulate("change",this,e,!0)})),!1):(b.event.add(this,"beforeactivate._change",function(e){var t=e.target;Z.test(t.nodeName)&&!b._data(t,"changeBubbles")&&(b.event.add(t,"change._change",function(e){!this.parentNode||e.isSimulated||e.isTrigger||b.event.simulate("change",this.parentNode,e,!0)}),b._data(t,"changeBubbles",!0))}),t)},handle:function(e){var n=e.target;return this!==n||e.isSimulated||e.isTrigger||"radio"!==n.type&&"checkbox"!==n.type?e.handleObj.handler.apply(this,arguments):t},teardown:function(){return b.event.remove(this,"._change"),!Z.test(this.nodeName)}}),b.support.focusinBubbles||b.each({focus:"focusin",blur:"focusout"},function(e,t){var n=0,r=function(e){b.event.simulate(t,e.target,b.event.fix(e),!0)};b.event.special[t]={setup:function(){0===n++&&s.addEventListener(e,r,!0)},teardown:function(){0===--n&&s.removeEventListener(e,r,!0)}}}),b.fn.extend({on:function(e,n,r,i,s){var o,u;if("object"==typeof e){"string"!=typeof n&&(r=r||n,n=t);for(o in e)this.on(o,n,r,e[o],s);return this}if(null==r&&null==i?(i=n,r=n=t):null==i&&("string"==typeof n?(i=r,r=t):(i=r,r=n,n=t)),i===!1)i=st;else if(!i)return this;return 1===s&&(u=i,i=function(e){return b().off(e),u.apply(this,arguments)},i.guid=u.guid||(u.guid=b.guid++)),this.each(function(){b.event.add(this,e,i,r,n)})},one:function(e,t,n,r){return this.on(e,t,n,r,1)},off:function(e,n,r){var i,s;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,b(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof e){for(s in e)this.off(s,n,e[s]);return this}return(n===!1||"function"==typeof n)&&(r=n,n=t),r===!1&&(r=st),this.each(function(){b.event.remove(this,e,r,n)})},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},trigger:function(e,t){return this.each(function(){b.event.trigger(e,t,this)})},triggerHandler:function(e,n){var r=this[0];return r?b.event.trigger(e,n,r,!0):t}}),function(e,t){function rt(e){return J.test(e+"")}function it(){var e,t=[];return e=function(n,r){return t.push(n+=" ")>i.cacheLength&&delete e[t.shift()],e[n]=r}}function st(e){return e[w]=!0,e}function ot(e){var t=c.createElement("div");try{return e(t)}catch(n){return!1}finally{t=null}}function ut(e,t,n,r){var i,s,o,u,a,f,h,v,m,y;if((t?t.ownerDocument||t:E)!==c&&l(t),t=t||c,n=n||[],!e||"string"!=typeof e)return n;if(1!==(u=t.nodeType)&&9!==u)return[];if(!p&&!r){if(i=K.exec(e))if(o=i[1]){if(9===u){if(s=t.getElementById(o),!s||!s.parentNode)return n;if(s.id===o)return n.push(s),n}else if(t.ownerDocument&&(s=t.ownerDocument.getElementById(o))&&g(t,s)&&s.id===o)return n.push(s),n}else{if(i[2])return _.apply(n,D.call(t.getElementsByTagName(e),0)),n;if((o=i[3])&&S.getByClassName&&t.getElementsByClassName)return _.apply(n,D.call(t.getElementsByClassName(o),0)),n}if(S.qsa&&!d.test(e)){if(h=!0,v=w,m=t,y=9===u&&e,1===u&&"object"!==t.nodeName.toLowerCase()){f=ht(e),(h=t.getAttribute("id"))?v=h.replace(Y,"\\$&"):t.setAttribute("id",v),v="[id='"+v+"'] ",a=f.length;while(a--)f[a]=v+pt(f[a]);m=$.test(e)&&t.parentNode||t,y=f.join(",")}if(y)try{return _.apply(n,D.call(m.querySelectorAll(y),0)),n}catch(b){}finally{h||t.removeAttribute("id")}}}return Et(e.replace(R,"$1"),t,n,r)}function at(e,t){var n=t&&e,r=n&&(~t.sourceIndex||A)-(~e.sourceIndex||A);if(r)return r;if(n)while(n=n.nextSibling)if(n===t)return-1;return e?1:-1}function ft(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function lt(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function ct(e){return st(function(t){return t=+t,st(function(n,r){var i,s=e([],n.length,t),o=s.length;while(o--)n[i=s[o]]&&(n[i]=!(r[i]=n[i]))})})}function ht(e,t){var n,r,s,o,u,a,f,l=C[e+" "];if(l)return t?0:l.slice(0);u=e,a=[],f=i.preFilter;while(u){(!n||(r=U.exec(u)))&&(r&&(u=u.slice(r[0].length)||u),a.push(s=[])),n=!1,(r=z.exec(u))&&(n=r.shift(),s.push({value:n,type:r[0].replace(R," ")}),u=u.slice(n.length));for(o in i.filter)!(r=V[o].exec(u))||f[o]&&!(r=f[o](r))||(n=r.shift(),s.push({value:n,type:o,matches:r}),u=u.slice(n.length));if(!n)break}return t?u.length:u?ut.error(e):C(e,a).slice(0)}function pt(e){var t=0,n=e.length,r="";for(;n>t;t++)r+=e[t].value;return r}function dt(e,t,n){var i=t.dir,s=n&&"parentNode"===i,o=T++;return t.first?function(t,n,r){while(t=t[i])if(1===t.nodeType||s)return e(t,n,r)}:function(t,n,u){var a,f,l,c=x+" "+o;if(u){while(t=t[i])if((1===t.nodeType||s)&&e(t,n,u))return!0}else while(t=t[i])if(1===t.nodeType||s)if(l=t[w]||(t[w]={}),(f=l[i])&&f[0]===c){if((a=f[1])===!0||a===r)return a===!0}else if(f=l[i]=[c],f[1]=e(t,n,u)||r,f[1]===!0)return!0}}function vt(e){return e.length>1?function(t,n,r){var i=e.length;while(i--)if(!e[i](t,n,r))return!1;return!0}:e[0]}function mt(e,t,n,r,i){var s,o=[],u=0,a=e.length,f=null!=t;for(;a>u;u++)(s=e[u])&&(!n||n(s,r,i))&&(o.push(s),f&&t.push(u));return o}function gt(e,t,n,r,i,s){return r&&!r[w]&&(r=gt(r)),i&&!i[w]&&(i=gt(i,s)),st(function(s,o,u,a){var f,l,c,h=[],p=[],d=o.length,v=s||wt(t||"*",u.nodeType?[u]:u,[]),m=!e||!s&&t?v:mt(v,h,e,u,a),g=n?i||(s?e:d||r)?[]:o:m;if(n&&n(m,g,u,a),r){f=mt(g,p),r(f,[],u,a),l=f.length;while(l--)(c=f[l])&&(g[p[l]]=!(m[p[l]]=c))}if(s){if(i||e){if(i){f=[],l=g.length;while(l--)(c=g[l])&&f.push(m[l]=c);i(null,g=[],f,a)}l=g.length;while(l--)(c=g[l])&&(f=i?P.call(s,c):h[l])>-1&&(s[f]=!(o[f]=c))}}else g=mt(g===o?g.splice(d,g.length):g),i?i(null,o,g,a):_.apply(o,g)})}function yt(e){var t,n,r,s=e.length,o=i.relative[e[0].type],u=o||i.relative[" "],a=o?1:0,l=dt(function(e){return e===t},u,!0),c=dt(function(e){return P.call(t,e)>-1},u,!0),h=[function(e,n,r){return!o&&(r||n!==f)||((t=n).nodeType?l(e,n,r):c(e,n,r))}];for(;s>a;a++)if(n=i.relative[e[a].type])h=[dt(vt(h),n)];else{if(n=i.filter[e[a].type].apply(null,e[a].matches),n[w]){for(r=++a;s>r;r++)if(i.relative[e[r].type])break;return gt(a>1&&vt(h),a>1&&pt(e.slice(0,a-1)).replace(R,"$1"),n,r>a&&yt(e.slice(a,r)),s>r&&yt(e=e.slice(r)),s>r&&pt(e))}h.push(n)}return vt(h)}function bt(e,t){var n=0,s=t.length>0,o=e.length>0,u=function(u,a,l,h,p){var d,v,m,g=[],y=0,b="0",w=u&&[],E=null!=p,S=f,T=u||o&&i.find.TAG("*",p&&a.parentNode||a),N=x+=null==S?1:Math.random()||.1;for(E&&(f=a!==c&&a,r=n);null!=(d=T[b]);b++){if(o&&d){v=0;while(m=e[v++])if(m(d,a,l)){h.push(d);break}E&&(x=N,r=++n)}s&&((d=!m&&d)&&y--,u&&w.push(d))}if(y+=b,s&&b!==y){v=0;while(m=t[v++])m(w,g,a,l);if(u){if(y>0)while(b--)w[b]||g[b]||(g[b]=M.call(h));g=mt(g)}_.apply(h,g),E&&!u&&g.length>0&&y+t.length>1&&ut.uniqueSort(h)}return E&&(x=N,f=S),w};return s?st(u):u}function wt(e,t,n){var r=0,i=t.length;for(;i>r;r++)ut(e,t[r],n);return n}function Et(e,t,n,r){var s,o,a,f,l,c=ht(e);if(!r&&1===c.length){if(o=c[0]=c[0].slice(0),o.length>2&&"ID"===(a=o[0]).type&&9===t.nodeType&&!p&&i.relative[o[1].type]){if(t=i.find.ID(a.matches[0].replace(et,tt),t)[0],!t)return n;e=e.slice(o.shift().value.length)}s=V.needsContext.test(e)?0:o.length;while(s--){if(a=o[s],i.relative[f=a.type])break;if((l=i.find[f])&&(r=l(a.matches[0].replace(et,tt),$.test(o[0].type)&&t.parentNode||t))){if(o.splice(s,1),e=r.length&&pt(o),!e)return _.apply(n,D.call(r,0)),n;break}}}return u(e,c)(r,t,p,n,$.test(e)),n}function St(){}var n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,w="sizzle"+ -(new Date),E=e.document,S={},x=0,T=0,N=it(),C=it(),k=it(),L=typeof t,A=1<<31,O=[],M=O.pop,_=O.push,D=O.slice,P=O.indexOf||function(e){var t=0,n=this.length;for(;n>t;t++)if(this[t]===e)return t;return-1},H="[\\x20\\t\\r\\n\\f]",B="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",j=B.replace("w","w#"),F="([*^$|!~]?=)",I="\\["+H+"*("+B+")"+H+"*(?:"+F+H+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+j+")|)|)"+H+"*\\]",q=":("+B+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+I.replace(3,8)+")*)|.*)\\)|)",R=RegExp("^"+H+"+|((?:^|[^\\\\])(?:\\\\.)*)"+H+"+$","g"),U=RegExp("^"+H+"*,"+H+"*"),z=RegExp("^"+H+"*([\\x20\\t\\r\\n\\f>+~])"+H+"*"),W=RegExp(q),X=RegExp("^"+j+"$"),V={ID:RegExp("^#("+B+")"),CLASS:RegExp("^\\.("+B+")"),NAME:RegExp("^\\[name=['\"]?("+B+")['\"]?\\]"),TAG:RegExp("^("+B.replace("w","w*")+")"),ATTR:RegExp("^"+I),PSEUDO:RegExp("^"+q),CHILD:RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+H+"*(even|odd|(([+-]|)(\\d*)n|)"+H+"*(?:([+-]|)"+H+"*(\\d+)|))"+H+"*\\)|)","i"),needsContext:RegExp("^"+H+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+H+"*((?:-\\d)?\\d*)"+H+"*\\)|)(?=[^-]|$)","i")},$=/[\x20\t\r\n\f]*[+~]/,J=/^[^{]+\{\s*\[native code/,K=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Q=/^(?:input|select|textarea|button)$/i,G=/^h\d$/i,Y=/'|\\/g,Z=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,et=/\\([\da-fA-F]{1,6}[\x20\t\r\n\f]?|.)/g,tt=function(e,t){var n="0x"+t-65536;return n!==n?t:0>n?String.fromCharCode(n+65536):String.fromCharCode(55296|n>>10,56320|1023&n)};try{D.call(E.documentElement.childNodes,0)[0].nodeType}catch(nt){D=function(e){var t,n=[];while(t=this[e++])n.push(t);return n}}o=ut.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},l=ut.setDocument=function(e){var n=e?e.ownerDocument||e:E;return n!==c&&9===n.nodeType&&n.documentElement?(c=n,h=n.documentElement,p=o(n),S.tagNameNoComments=ot(function(e){return e.appendChild(n.createComment("")),!e.getElementsByTagName("*").length}),S.attributes=ot(function(e){e.innerHTML="<select></select>";var t=typeof e.lastChild.getAttribute("multiple");return"boolean"!==t&&"string"!==t}),S.getByClassName=ot(function(e){return e.innerHTML="<div class='hidden e'></div><div class='hidden'></div>",e.getElementsByClassName&&e.getElementsByClassName("e").length?(e.lastChild.className="e",2===e.getElementsByClassName("e").length):!1}),S.getByName=ot(function(e){e.id=w+0,e.innerHTML="<a name='"+w+"'></a><div name='"+w+"'></div>",h.insertBefore(e,h.firstChild);var t=n.getElementsByName&&n.getElementsByName(w).length===2+n.getElementsByName(w+0).length;return S.getIdNotName=!n.getElementById(w),h.removeChild(e),t}),i.attrHandle=ot(function(e){return e.innerHTML="<a href='#'></a>",e.firstChild&&typeof e.firstChild.getAttribute!==L&&"#"===e.firstChild.getAttribute("href")})?{}:{href:function(e){return e.getAttribute("href",2)},type:function(e){return e.getAttribute("type")}},S.getIdNotName?(i.find.ID=function(e,t){if(typeof t.getElementById!==L&&!p){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},i.filter.ID=function(e){var t=e.replace(et,tt);return function(e){return e.getAttribute("id")===t}}):(i.find.ID=function(e,n){if(typeof n.getElementById!==L&&!p){var r=n.getElementById(e);return r?r.id===e||typeof r.getAttributeNode!==L&&r.getAttributeNode("id").value===e?[r]:t:[]}},i.filter.ID=function(e){var t=e.replace(et,tt);return function(e){var n=typeof e.getAttributeNode!==L&&e.getAttributeNode("id");return n&&n.value===t}}),i.find.TAG=S.tagNameNoComments?function(e,n){return typeof n.getElementsByTagName!==L?n.getElementsByTagName(e):t}:function(e,t){var n,r=[],i=0,s=t.getElementsByTagName(e);if("*"===e){while(n=s[i++])1===n.nodeType&&r.push(n);return r}return s},i.find.NAME=S.getByName&&function(e,n){return typeof n.getElementsByName!==L?n.getElementsByName(name):t},i.find.CLASS=S.getByClassName&&function(e,n){return typeof n.getElementsByClassName===L||p?t:n.getElementsByClassName(e)},v=[],d=[":focus"],(S.qsa=rt(n.querySelectorAll))&&(ot(function(e){e.innerHTML="<select><option selected=''></option></select>",e.querySelectorAll("[selected]").length||d.push("\\["+H+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)"),e.querySelectorAll(":checked").length||d.push(":checked")}),ot(function(e){e.innerHTML="<input type='hidden' i=''/>",e.querySelectorAll("[i^='']").length&&d.push("[*^$]="+H+"*(?:\"\"|'')"),e.querySelectorAll(":enabled").length||d.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),d.push(",.*:")})),(S.matchesSelector=rt(m=h.matchesSelector||h.mozMatchesSelector||h.webkitMatchesSelector||h.oMatchesSelector||h.msMatchesSelector))&&ot(function(e){S.disconnectedMatch=m.call(e,"div"),m.call(e,"[s!='']:x"),v.push("!=",q)}),d=RegExp(d.join("|")),v=RegExp(v.join("|")),g=rt(h.contains)||h.compareDocumentPosition?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!!r&&1===r.nodeType&&!!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r))}:function(e,t){if(t)while(t=t.parentNode)if(t===e)return!0;return!1},y=h.compareDocumentPosition?function(e,t){var r;return e===t?(a=!0,0):(r=t.compareDocumentPosition&&e.compareDocumentPosition&&e.compareDocumentPosition(t))?1&r||e.parentNode&&11===e.parentNode.nodeType?e===n||g(E,e)?-1:t===n||g(E,t)?1:0:4&r?-1:1:e.compareDocumentPosition?-1:1}:function(e,t){var r,i=0,s=e.parentNode,o=t.parentNode,u=[e],f=[t];if(e===t)return a=!0,0;if(!s||!o)return e===n?-1:t===n?1:s?-1:o?1:0;if(s===o)return at(e,t);r=e;while(r=r.parentNode)u.unshift(r);r=t;while(r=r.parentNode)f.unshift(r);while(u[i]===f[i])i++;return i?at(u[i],f[i]):u[i]===E?-1:f[i]===E?1:0},a=!1,[0,0].sort(y),S.detectDuplicates=a,c):c},ut.matches=function(e,t){return ut(e,null,null,t)},ut.matchesSelector=function(e,t){if((e.ownerDocument||e)!==c&&l(e),t=t.replace(Z,"='$1']"),!(!S.matchesSelector||p||v&&v.test(t)||d.test(t)))try{var n=m.call(e,t);if(n||S.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(r){}return ut(t,c,null,[e]).length>0},ut.contains=function(e,t){return(e.ownerDocument||e)!==c&&l(e),g(e,t)},ut.attr=function(e,t){var n;return(e.ownerDocument||e)!==c&&l(e),p||(t=t.toLowerCase()),(n=i.attrHandle[t])?n(e):p||S.attributes?e.getAttribute(t):((n=e.getAttributeNode(t))||e.getAttribute(t))&&e[t]===!0?t:n&&n.specified?n.value:null},ut.error=function(e){throw Error("Syntax error, unrecognized expression: "+e)},ut.uniqueSort=function(e){var t,n=[],r=1,i=0;if(a=!S.detectDuplicates,e.sort(y),a){for(;t=e[r];r++)t===e[r-1]&&(i=n.push(r));while(i--)e.splice(n[i],1)}return e},s=ut.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=s(e)}else if(3===i||4===i)return e.nodeValue}else for(;t=e[r];r++)n+=s(t);return n},i=ut.selectors={cacheLength:50,createPseudo:st,match:V,find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(et,tt),e[3]=(e[4]||e[5]||"").replace(et,tt),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||ut.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&ut.error(e[0]),e},PSEUDO:function(e){var t,n=!e[5]&&e[2];return V.CHILD.test(e[0])?null:(e[4]?e[2]=e[4]:n&&W.test(n)&&(t=ht(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){return"*"===e?function(){return!0}:(e=e.replace(et,tt).toLowerCase(),function(t){return t.nodeName&&t.nodeName.toLowerCase()===e})},CLASS:function(e){var t=N[e+" "];return t||(t=RegExp("(^|"+H+")"+e+"("+H+"|$)"))&&N(e,function(e){return t.test(e.className||typeof e.getAttribute!==L&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(r){var i=ut.attr(r,e);return null==i?"!="===t:t?(i+="","="===t?i===n:"!="===t?i!==n:"^="===t?n&&0===i.indexOf(n):"*="===t?n&&i.indexOf(n)>-1:"$="===t?n&&i.slice(-n.length)===n:"~="===t?(" "+i+" ").indexOf(n)>-1:"|="===t?i===n||i.slice(0,n.length+1)===n+"-":!1):!0}},CHILD:function(e,t,n,r,i){var s="nth"!==e.slice(0,3),o="last"!==e.slice(-4),u="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,a){var f,l,c,h,p,d,v=s!==o?"nextSibling":"previousSibling",m=t.parentNode,g=u&&t.nodeName.toLowerCase(),y=!a&&!u;if(m){if(s){while(v){c=t;while(c=c[v])if(u?c.nodeName.toLowerCase()===g:1===c.nodeType)return!1;d=v="only"===e&&!d&&"nextSibling"}return!0}if(d=[o?m.firstChild:m.lastChild],o&&y){l=m[w]||(m[w]={}),f=l[e]||[],p=f[0]===x&&f[1],h=f[0]===x&&f[2],c=p&&m.childNodes[p];while(c=++p&&c&&c[v]||(h=p=0)||d.pop())if(1===c.nodeType&&++h&&c===t){l[e]=[x,p,h];break}}else if(y&&(f=(t[w]||(t[w]={}))[e])&&f[0]===x)h=f[1];else while(c=++p&&c&&c[v]||(h=p=0)||d.pop())if((u?c.nodeName.toLowerCase()===g:1===c.nodeType)&&++h&&(y&&((c[w]||(c[w]={}))[e]=[x,h]),c===t))break;return h-=i,h===r||0===h%r&&h/r>=0}}},PSEUDO:function(e,t){var n,r=i.pseudos[e]||i.setFilters[e.toLowerCase()]||ut.error("unsupported pseudo: "+e);return r[w]?r(t):r.length>1?(n=[e,e,"",t],i.setFilters.hasOwnProperty(e.toLowerCase())?st(function(e,n){var i,s=r(e,t),o=s.length;while(o--)i=P.call(e,s[o]),e[i]=!(n[i]=s[o])}):function(e){return r(e,0,n)}):r}},pseudos:{not:st(function(e){var t=[],n=[],r=u(e.replace(R,"$1"));return r[w]?st(function(e,t,n,i){var s,o=r(e,null,i,[]),u=e.length;while(u--)(s=o[u])&&(e[u]=!(t[u]=s))}):function(e,i,s){return t[0]=e,r(t,null,s,n),!n.pop()}}),has:st(function(e){return function(t){return ut(e,t).length>0}}),contains:st(function(e){return function(t){return(t.textContent||t.innerText||s(t)).indexOf(e)>-1}}),lang:st(function(e){return X.test(e||"")||ut.error("unsupported lang: "+e),e=e.replace(et,tt).toLowerCase(),function(t){var n;do if(n=p?t.getAttribute("xml:lang")||t.getAttribute("lang"):t.lang)return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===h},focus:function(e){return e===c.activeElement&&(!c.hasFocus||c.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeName>"@"||3===e.nodeType||4===e.nodeType)return!1;return!0},parent:function(e){return!i.pseudos.empty(e)},header:function(e){return G.test(e.nodeName)},input:function(e){return Q.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||t.toLowerCase()===e.type)},first:ct(function(){return[0]}),last:ct(function(e,t){return[t-1]}),eq:ct(function(e,t,n){return[0>n?n+t:n]}),even:ct(function(e,t){var n=0;for(;t>n;n+=2)e.push(n);return e}),odd:ct(function(e,t){var n=1;for(;t>n;n+=2)e.push(n);return e}),lt:ct(function(e,t,n){var r=0>n?n+t:n;for(;--r>=0;)e.push(r);return e}),gt:ct(function(e,t,n){var r=0>n?n+t:n;for(;t>++r;)e.push(r);return e})}};for(n in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})i.pseudos[n]=ft(n);for(n in{submit:!0,reset:!0})i.pseudos[n]=lt(n);u=ut.compile=function(e,t){var n,r=[],i=[],s=k[e+" "];if(!s){t||(t=ht(e)),n=t.length;while(n--)s=yt(t[n]),s[w]?r.push(s):i.push(s);s=k(e,bt(i,r))}return s},i.pseudos.nth=i.pseudos.eq,i.filters=St.prototype=i.pseudos,i.setFilters=new St,l(),ut.attr=b.attr,b.find=ut,b.expr=ut.selectors,b.expr[":"]=b.expr.pseudos,b.unique=ut.uniqueSort,b.text=ut.getText,b.isXMLDoc=ut.isXML,b.contains=ut.contains}(e);var ot=/Until$/,ut=/^(?:parents|prev(?:Until|All))/,at=/^.[^:#\[\.,]*$/,ft=b.expr.match.needsContext,lt={children:!0,contents:!0,next:!0,prev:!0};b.fn.extend({find:function(e){var t,n,r,i=this.length;if("string"!=typeof e)return r=this,this.pushStack(b(e).filter(function(){for(t=0;i>t;t++)if(b.contains(r[t],this))return!0}));for(n=[],t=0;i>t;t++)b.find(e,this[t],n);return n=this.pushStack(i>1?b.unique(n):n),n.selector=(this.selector?this.selector+" ":"")+e,n},has:function(e){var t,n=b(e,this),r=n.length;return this.filter(function(){for(t=0;r>t;t++)if(b.contains(this,n[t]))return!0})},not:function(e){return this.pushStack(ht(this,e,!1))},filter:function(e){return this.pushStack(ht(this,e,!0))},is:function(e){return!!e&&("string"==typeof e?ft.test(e)?b(e,this.context).index(this[0])>=0:b.filter(e,this).length>0:this.filter(e).length>0)},closest:function(e,t){var n,r=0,i=this.length,s=[],o=ft.test(e)||"string"!=typeof e?b(e,t||this.context):0;for(;i>r;r++){n=this[r];while(n&&n.ownerDocument&&n!==t&&11!==n.nodeType){if(o?o.index(n)>-1:b.find.matchesSelector(n,e)){s.push(n);break}n=n.parentNode}}return this.pushStack(s.length>1?b.unique(s):s)},index:function(e){return e?"string"==typeof e?b.inArray(this[0],b(e)):b.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){var n="string"==typeof e?b(e,t):b.makeArray(e&&e.nodeType?[e]:e),r=b.merge(this.get(),n);return this.pushStack(b.unique(r))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),b.fn.andSelf=b.fn.addBack,b.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return b.dir(e,"parentNode")},parentsUntil:function(e,t,n){return b.dir(e,"parentNode",n)},next:function(e){return ct(e,"nextSibling")},prev:function(e){return ct(e,"previousSibling")},nextAll:function(e){return b.dir(e,"nextSibling")},prevAll:function(e){return b.dir(e,"previousSibling")},nextUntil:function(e,t,n){return b.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return b.dir(e,"previousSibling",n)},siblings:function(e){return b.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return b.sibling(e.firstChild)},contents:function(e){return b.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:b.merge([],e.childNodes)}},function(e,t){b.fn[e]=function(n,r){var i=b.map(this,t,n);return ot.test(e)||(r=n),r&&"string"==typeof r&&(i=b.filter(r,i)),i=this.length>1&&!lt[e]?b.unique(i):i,this.length>1&&ut.test(e)&&(i=i.reverse()),this.pushStack(i)}}),b.extend({filter:function(e,t,n){return n&&(e=":not("+e+")"),1===t.length?b.find.matchesSelector(t[0],e)?[t[0]]:[]:b.find.matches(e,t)},dir:function(e,n,r){var i=[],s=e[n];while(s&&9!==s.nodeType&&(r===t||1!==s.nodeType||!b(s).is(r)))1===s.nodeType&&i.push(s),s=s[n];return i},sibling:function(e,t){var n=[];for(;e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}});var dt="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",vt=/ jQuery\d+="(?:null|\d+)"/g,mt=RegExp("<(?:"+dt+")[\\s/>]","i"),gt=/^\s+/,yt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,bt=/<([\w:]+)/,wt=/<tbody/i,Et=/<|&#?\w+;/,St=/<(?:script|style|link)/i,xt=/^(?:checkbox|radio)$/i,Tt=/checked\s*(?:[^=]|=\s*.checked.)/i,Nt=/^$|\/(?:java|ecma)script/i,Ct=/^true\/(.*)/,kt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Lt={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:b.support.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},At=pt(s),Ot=At.appendChild(s.createElement("div"));Lt.optgroup=Lt.option,Lt.tbody=Lt.tfoot=Lt.colgroup=Lt.caption=Lt.thead,Lt.th=Lt.td,b.fn.extend({text:function(e){return b.access(this,function(e){return e===t?b.text(this):this.empty().append((this[0]&&this[0].ownerDocument||s).createTextNode(e))},null,e,arguments.length)},wrapAll:function(e){if(b.isFunction(e))return this.each(function(t){b(this).wrapAll(e.call(this,t))});if(this[0]){var t=b(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstChild&&1===e.firstChild.nodeType)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return b.isFunction(e)?this.each(function(t){b(this).wrapInner(e.call(this,t))}):this.each(function(){var t=b(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=b.isFunction(e);return this.each(function(n){b(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){b.nodeName(this,"body")||b(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(e){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&this.appendChild(e)})},prepend:function(){return this.domManip(arguments,!0,function(e){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&this.insertBefore(e,this.firstChild)})},before:function(){return this.domManip(arguments,!1,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,!1,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){var n,r=0;for(;null!=(n=this[r]);r++)(!e||b.filter(e,[n]).length>0)&&(t||1!==n.nodeType||b.cleanData(jt(n)),n.parentNode&&(t&&b.contains(n.ownerDocument,n)&&Pt(jt(n,"script")),n.parentNode.removeChild(n)));return this},empty:function(){var e,t=0;for(;null!=(e=this[t]);t++){1===e.nodeType&&b.cleanData(jt(e,!1));while(e.firstChild)e.removeChild(e.firstChild);e.options&&b.nodeName(e,"select")&&(e.options.length=0)}return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return b.clone(this,e,t)})},html:function(e){return b.access(this,function(e){var n=this[0]||{},r=0,i=this.length;if(e===t)return 1===n.nodeType?n.innerHTML.replace(vt,""):t;if(!("string"!=typeof e||St.test(e)||!b.support.htmlSerialize&&mt.test(e)||!b.support.leadingWhitespace&&gt.test(e)||Lt[(bt.exec(e)||["",""])[1].toLowerCase()])){e=e.replace(yt,"<$1></$2>");try{for(;i>r;r++)n=this[r]||{},1===n.nodeType&&(b.cleanData(jt(n,!1)),n.innerHTML=e);n=0}catch(s){}}n&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(e){var t=b.isFunction(e);return t||"string"==typeof e||(e=b(e).not(this).detach()),this.domManip([e],!0,function(e){var t=this.nextSibling,n=this.parentNode;n&&(b(this).remove(),n.insertBefore(e,t))})},detach:function(e){return this.remove(e,!0)},domManip:function(e,n,r){e=h.apply([],e);var i,s,o,u,a,f,l=0,c=this.length,p=this,d=c-1,v=e[0],m=b.isFunction(v);if(m||!(1>=c||"string"!=typeof v||b.support.checkClone)&&Tt.test(v))return this.each(function(i){var s=p.eq(i);m&&(e[0]=v.call(this,i,n?s.html():t)),s.domManip(e,n,r)});if(c&&(f=b.buildFragment(e,this[0].ownerDocument,!1,this),i=f.firstChild,1===f.childNodes.length&&(f=i),i)){for(n=n&&b.nodeName(i,"tr"),u=b.map(jt(f,"script"),_t),o=u.length;c>l;l++)s=f,l!==d&&(s=b.clone(s,!0,!0),o&&b.merge(u,jt(s,"script"))),r.call(n&&b.nodeName(this[l],"table")?Mt(this[l],"tbody"):this[l],s,l);if(o)for(a=u[u.length-1].ownerDocument,b.map(u,Dt),l=0;o>l;l++)s=u[l],Nt.test(s.type||"")&&!b._data(s,"globalEval")&&b.contains(a,s)&&(s.src?b.ajax({url:s.src,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0}):b.globalEval((s.text||s.textContent||s.innerHTML||"").replace(kt,"")));f=i=null}return this}}),b.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){b.fn[e]=function(e){var n,r=0,i=[],s=b(e),o=s.length-1;for(;o>=r;r++)n=r===o?this:this.clone(!0),b(s[r])[t](n),p.apply(i,n.get());return this.pushStack(i)}}),b.extend({clone:function(e,t,n){var r,i,s,o,u,a=b.contains(e.ownerDocument,e);if(b.support.html5Clone||b.isXMLDoc(e)||!mt.test("<"+e.nodeName+">")?s=e.cloneNode(!0):(Ot.innerHTML=e.outerHTML,Ot.removeChild(s=Ot.firstChild)),!(b.support.noCloneEvent&&b.support.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||b.isXMLDoc(e)))for(r=jt(s),u=jt(e),o=0;null!=(i=u[o]);++o)r[o]&&Bt(i,r[o]);if(t)if(n)for(u=u||jt(e),r=r||jt(s),o=0;null!=(i=u[o]);o++)Ht(i,r[o]);else Ht(e,s);return r=jt(s,"script"),r.length>0&&Pt(r,!a&&jt(e,"script")),r=u=i=null,s},buildFragment:function(e,t,n,r){var i,s,o,u,a,f,l,c=e.length,h=pt(t),p=[],d=0;for(;c>d;d++)if(s=e[d],s||0===s)if("object"===b.type(s))b.merge(p,s.nodeType?[s]:s);else if(Et.test(s)){u=u||h.appendChild(t.createElement("div")),a=(bt.exec(s)||["",""])[1].toLowerCase(),l=Lt[a]||Lt._default,u.innerHTML=l[1]+s.replace(yt,"<$1></$2>")+l[2],i=l[0];while(i--)u=u.lastChild;if(!b.support.leadingWhitespace&&gt.test(s)&&p.push(t.createTextNode(gt.exec(s)[0])),!b.support.tbody){s="table"!==a||wt.test(s)?"<table>"!==l[1]||wt.test(s)?0:u:u.firstChild,i=s&&s.childNodes.length;while(i--)b.nodeName(f=s.childNodes[i],"tbody")&&!f.childNodes.length&&s.removeChild(f)}b.merge(p,u.childNodes),u.textContent="";while(u.firstChild)u.removeChild(u.firstChild);u=h.lastChild}else p.push(t.createTextNode(s));u&&h.removeChild(u),b.support.appendChecked||b.grep(jt(p,"input"),Ft),d=0;while(s=p[d++])if((!r||-1===b.inArray(s,r))&&(o=b.contains(s.ownerDocument,s),u=jt(h.appendChild(s),"script"),o&&Pt(u),n)){i=0;while(s=u[i++])Nt.test(s.type||"")&&n.push(s)}return u=null,h},cleanData:function(e,t){var n,r,s,o,u=0,a=b.expando,f=b.cache,c=b.support.deleteExpando,h=b.event.special;for(;null!=(n=e[u]);u++)if((t||b.acceptData(n))&&(s=n[a],o=s&&f[s])){if(o.events)for(r in o.events)h[r]?b.event.remove(n,r):b.removeEvent(n,r,o.handle);f[s]&&(delete f[s],c?delete n[a]:typeof n.removeAttribute!==i?n.removeAttribute(a):n[a]=null,l.push(s))}}});var It,qt,Rt,Ut=/alpha\([^)]*\)/i,zt=/opacity\s*=\s*([^)]*)/,Wt=/^(top|right|bottom|left)$/,Xt=/^(none|table(?!-c[ea]).+)/,Vt=/^margin/,$t=RegExp("^("+w+")(.*)$","i"),Jt=RegExp("^("+w+")(?!px)[a-z%]+$","i"),Kt=RegExp("^([+-])=("+w+")","i"),Qt={BODY:"block"},Gt={position:"absolute",visibility:"hidden",display:"block"},Yt={letterSpacing:0,fontWeight:400},Zt=["Top","Right","Bottom","Left"],en=["Webkit","O","Moz","ms"];b.fn.extend({css:function(e,n){return b.access(this,function(e,n,r){var i,s,o={},u=0;if(b.isArray(n)){for(s=qt(e),i=n.length;i>u;u++)o[n[u]]=b.css(e,n[u],!1,s);return o}return r!==t?b.style(e,n,r):b.css(e,n)},e,n,arguments.length>1)},show:function(){return rn(this,!0)},hide:function(){return rn(this)},toggle:function(e){var t="boolean"==typeof e;return this.each(function(){(t?e:nn(this))?b(this).show():b(this).hide()})}}),b.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Rt(e,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":b.support.cssFloat?"cssFloat":"styleFloat"},style:function(e,n,r,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var s,o,u,a=b.camelCase(n),f=e.style;if(n=b.cssProps[a]||(b.cssProps[a]=tn(f,a)),u=b.cssHooks[n]||b.cssHooks[a],r===t)return u&&"get"in u&&(s=u.get(e,!1,i))!==t?s:f[n];if(o=typeof r,"string"===o&&(s=Kt.exec(r))&&(r=(s[1]+1)*s[2]+parseFloat(b.css(e,n)),o="number"),!(null==r||"number"===o&&isNaN(r)||("number"!==o||b.cssNumber[a]||(r+="px"),b.support.clearCloneStyle||""!==r||0!==n.indexOf("background")||(f[n]="inherit"),u&&"set"in u&&(r=u.set(e,r,i))===t)))try{f[n]=r}catch(l){}}},css:function(e,n,r,i){var s,o,u,a=b.camelCase(n);return n=b.cssProps[a]||(b.cssProps[a]=tn(e.style,a)),u=b.cssHooks[n]||b.cssHooks[a],u&&"get"in u&&(o=u.get(e,!0,r)),o===t&&(o=Rt(e,n,i)),"normal"===o&&n in Yt&&(o=Yt[n]),""===r||r?(s=parseFloat(o),r===!0||b.isNumeric(s)?s||0:o):o},swap:function(e,t,n,r){var i,s,o={};for(s in t)o[s]=e.style[s],e.style[s]=t[s];i=n.apply(e,r||[]);for(s in t)e.style[s]=o[s];return i}}),e.getComputedStyle?(qt=function(t){return e.getComputedStyle(t,null)},Rt=function(e,n,r){var i,s,o,u=r||qt(e),a=u?u.getPropertyValue(n)||u[n]:t,f=e.style;return u&&(""!==a||b.contains(e.ownerDocument,e)||(a=b.style(e,n)),Jt.test(a)&&Vt.test(n)&&(i=f.width,s=f.minWidth,o=f.maxWidth,f.minWidth=f.maxWidth=f.width=a,a=u.width,f.width=i,f.minWidth=s,f.maxWidth=o)),a}):s.documentElement.currentStyle&&(qt=function(e){return e.currentStyle},Rt=function(e,n,r){var i,s,o,u=r||qt(e),a=u?u[n]:t,f=e.style;return null==a&&f&&f[n]&&(a=f[n]),Jt.test(a)&&!Wt.test(n)&&(i=f.left,s=e.runtimeStyle,o=s&&s.left,o&&(s.left=e.currentStyle.left),f.left="fontSize"===n?"1em":a,a=f.pixelLeft+"px",f.left=i,o&&(s.left=o)),""===a?"auto":a}),b.each(["height","width"],function(e,n){b.cssHooks[n]={get:function(e,r,i){return r?0===e.offsetWidth&&Xt.test(b.css(e,"display"))?b.swap(e,Gt,function(){return un(e,n,i)}):un(e,n,i):t},set:function(e,t,r){var i=r&&qt(e);return sn(e,t,r?on(e,n,r,b.support.boxSizing&&"border-box"===b.css(e,"boxSizing",!1,i),i):0)}}}),b.support.opacity||(b.cssHooks.opacity={get:function(e,t){return zt.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var n=e.style,r=e.currentStyle,i=b.isNumeric(t)?"alpha(opacity="+100*t+")":"",s=r&&r.filter||n.filter||"";n.zoom=1,(t>=1||""===t)&&""===b.trim(s.replace(Ut,""))&&n.removeAttribute&&(n.removeAttribute("filter"),""===t||r&&!r.filter)||(n.filter=Ut.test(s)?s.replace(Ut,i):s+" "+i)}}),b(function(){b.support.reliableMarginRight||(b.cssHooks.marginRight={get:function(e,n){return n?b.swap(e,{display:"inline-block"},Rt,[e,"marginRight"]):t}}),!b.support.pixelPosition&&b.fn.position&&b.each(["top","left"],function(e,n){b.cssHooks[n]={get:function(e,r){return r?(r=Rt(e,n),Jt.test(r)?b(e).position()[n]+"px":r):t}}})}),b.expr&&b.expr.filters&&(b.expr.filters.hidden=function(e){return 0>=e.offsetWidth&&0>=e.offsetHeight||!b.support.reliableHiddenOffsets&&"none"===(e.style&&e.style.display||b.css(e,"display"))},b.expr.filters.visible=function(e){return!b.expr.filters.hidden(e)}),b.each({margin:"",padding:"",border:"Width"},function(e,t){b.cssHooks[e+t]={expand:function(n){var r=0,i={},s="string"==typeof n?n.split(" "):[n];for(;4>r;r++)i[e+Zt[r]+t]=s[r]||s[r-2]||s[0];return i}},Vt.test(e)||(b.cssHooks[e+t].set=sn)});var ln=/%20/g,cn=/\[\]$/,hn=/\r?\n/g,pn=/^(?:submit|button|image|reset|file)$/i,dn=/^(?:input|select|textarea|keygen)/i;b.fn.extend({serialize:function(){return b.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=b.prop(this,"elements");return e?b.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!b(this).is(":disabled")&&dn.test(this.nodeName)&&!pn.test(e)&&(this.checked||!xt.test(e))}).map(function(e,t){var n=b(this).val();return null==n?null:b.isArray(n)?b.map(n,function(e){return{name:t.name,value:e.replace(hn,"\r\n")}}):{name:t.name,value:n.replace(hn,"\r\n")}}).get()}}),b.param=function(e,n){var r,i=[],s=function(e,t){t=b.isFunction(t)?t():null==t?"":t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(n===t&&(n=b.ajaxSettings&&b.ajaxSettings.traditional),b.isArray(e)||e.jquery&&!b.isPlainObject(e))b.each(e,function(){s(this.name,this.value)});else for(r in e)vn(r,e[r],n,s);return i.join("&").replace(ln,"+")},b.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){b.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),b.fn.hover=function(e,t){return this.mouseenter(e).mouseleave(t||e)};var mn,gn,yn=b.now(),bn=/\?/,wn=/#.*$/,En=/([?&])_=[^&]*/,Sn=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,xn=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Tn=/^(?:GET|HEAD)$/,Nn=/^\/\//,Cn=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,kn=b.fn.load,Ln={},An={},On="*/".concat("*");try{gn=o.href}catch(Mn){gn=s.createElement("a"),gn.href="",gn=gn.href}mn=Cn.exec(gn.toLowerCase())||[],b.fn.load=function(e,n,r){if("string"!=typeof e&&kn)return kn.apply(this,arguments);var i,s,o,u=this,a=e.indexOf(" ");return a>=0&&(i=e.slice(a,e.length),e=e.slice(0,a)),b.isFunction(n)?(r=n,n=t):n&&"object"==typeof n&&(o="POST"),u.length>0&&b.ajax({url:e,type:o,dataType:"html",data:n}).done(function(e){s=arguments,u.html(i?b("<div>").append(b.parseHTML(e)).find(i):e)}).complete(r&&function(e,t){u.each(r,s||[e.responseText,t,e])}),this},b.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){b.fn[t]=function(e){return this.on(t,e)}}),b.each(["get","post"],function(e,n){b[n]=function(e,r,i,s){return b.isFunction(r)&&(s=s||i,i=r,r=t),b.ajax({url:e,type:n,dataType:s,data:r,success:i})}}),b.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:gn,type:"GET",isLocal:xn.test(mn[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":On,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":e.String,"text html":!0,"text json":b.parseJSON,"text xml":b.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Pn(Pn(e,b.ajaxSettings),t):Pn(b.ajaxSettings,e)},ajaxPrefilter:_n(Ln),ajaxTransport:_n(An),ajax:function(e,n){function N(e,n,r,i){var l,g,y,E,S,T=n;2!==w&&(w=2,u&&clearTimeout(u),f=t,o=i||"",x.readyState=e>0?4:0,r&&(E=Hn(c,x,r)),e>=200&&300>e||304===e?(c.ifModified&&(S=x.getResponseHeader("Last-Modified"),S&&(b.lastModified[s]=S),S=x.getResponseHeader("etag"),S&&(b.etag[s]=S)),204===e?(l=!0,T="nocontent"):304===e?(l=!0,T="notmodified"):(l=Bn(c,E),T=l.state,g=l.data,y=l.error,l=!y)):(y=T,(e||!T)&&(T="error",0>e&&(e=0))),x.status=e,x.statusText=(n||T)+"",l?d.resolveWith(h,[g,T,x]):d.rejectWith(h,[x,T,y]),x.statusCode(m),m=t,a&&p.trigger(l?"ajaxSuccess":"ajaxError",[x,c,l?g:y]),v.fireWith(h,[x,T]),a&&(p.trigger("ajaxComplete",[x,c]),--b.active||b.event.trigger("ajaxStop")))}"object"==typeof e&&(n=e,e=t),n=n||{};var r,i,s,o,u,a,f,l,c=b.ajaxSetup({},n),h=c.context||c,p=c.context&&(h.nodeType||h.jquery)?b(h):b.event,d=b.Deferred(),v=b.Callbacks("once memory"),m=c.statusCode||{},g={},y={},w=0,S="canceled",x={readyState:0,getResponseHeader:function(e){var t;if(2===w){if(!l){l={};while(t=Sn.exec(o))l[t[1].toLowerCase()]=t[2]}t=l[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===w?o:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return w||(e=y[n]=y[n]||e,g[e]=t),this},overrideMimeType:function(e){return w||(c.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>w)for(t in e)m[t]=[m[t],e[t]];else x.always(e[x.status]);return this},abort:function(e){var t=e||S;return f&&f.abort(t),N(0,t),this}};if(d.promise(x).complete=v.add,x.success=x.done,x.error=x.fail,c.url=((e||c.url||gn)+"").replace(wn,"").replace(Nn,mn[1]+"//"),c.type=n.method||n.type||c.method||c.type,c.dataTypes=b.trim(c.dataType||"*").toLowerCase().match(E)||[""],null==c.crossDomain&&(r=Cn.exec(c.url.toLowerCase()),c.crossDomain=!(!r||r[1]===mn[1]&&r[2]===mn[2]&&(r[3]||("http:"===r[1]?80:443))==(mn[3]||("http:"===mn[1]?80:443)))),c.data&&c.processData&&"string"!=typeof c.data&&(c.data=b.param(c.data,c.traditional)),Dn(Ln,c,n,x),2===w)return x;a=c.global,a&&0===b.active++&&b.event.trigger("ajaxStart"),c.type=c.type.toUpperCase(),c.hasContent=!Tn.test(c.type),s=c.url,c.hasContent||(c.data&&(s=c.url+=(bn.test(s)?"&":"?")+c.data,delete c.data),c.cache===!1&&(c.url=En.test(s)?s.replace(En,"$1_="+yn++):s+(bn.test(s)?"&":"?")+"_="+yn++)),c.ifModified&&(b.lastModified[s]&&x.setRequestHeader("If-Modified-Since",b.lastModified[s]),b.etag[s]&&x.setRequestHeader("If-None-Match",b.etag[s])),(c.data&&c.hasContent&&c.contentType!==!1||n.contentType)&&x.setRequestHeader("Content-Type",c.contentType),x.setRequestHeader("Accept",c.dataTypes[0]&&c.accepts[c.dataTypes[0]]?c.accepts[c.dataTypes[0]]+("*"!==c.dataTypes[0]?", "+On+"; q=0.01":""):c.accepts["*"]);for(i in c.headers)x.setRequestHeader(i,c.headers[i]);if(!c.beforeSend||c.beforeSend.call(h,x,c)!==!1&&2!==w){S="abort";for(i in{success:1,error:1,complete:1})x[i](c[i]);if(f=Dn(An,c,n,x)){x.readyState=1,a&&p.trigger("ajaxSend",[x,c]),c.async&&c.timeout>0&&(u=setTimeout(function(){x.abort("timeout")},c.timeout));try{w=1,f.send(g,N)}catch(T){if(!(2>w))throw T;N(-1,T)}}else N(-1,"No Transport");return x}return x.abort()},getScript:function(e,n){return b.get(e,t,n,"script")},getJSON:function(e,t,n){return b.get(e,t,n,"json")}}),b.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return b.globalEval(e),e}}}),b.ajaxPrefilter("script",function(e){e.cache===t&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),b.ajaxTransport("script",function(e){if(e.crossDomain){var n,r=s.head||b("head")[0]||s.documentElement;return{send:function(t,i){n=s.createElement("script"),n.async=!0,e.scriptCharset&&(n.charset=e.scriptCharset),n.src=e.url,n.onload=n.onreadystatechange=function(e,t){(t||!n.readyState||/loaded|complete/.test(n.readyState))&&(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),n=null,t||i(200,"success"))},r.insertBefore(n,r.firstChild)},abort:function(){n&&n.onload(t,!0)}}}});var jn=[],Fn=/(=)\?(?=&|$)|\?\?/;b.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=jn.pop()||b.expando+"_"+yn++;return this[e]=!0,e}}),b.ajaxPrefilter("json jsonp",function(n,r,i){var s,o,u,a=n.jsonp!==!1&&(Fn.test(n.url)?"url":"string"==typeof n.data&&!(n.contentType||"").indexOf("application/x-www-form-urlencoded")&&Fn.test(n.data)&&"data");return a||"jsonp"===n.dataTypes[0]?(s=n.jsonpCallback=b.isFunction(n.jsonpCallback)?n.jsonpCallback():n.jsonpCallback,a?n[a]=n[a].replace(Fn,"$1"+s):n.jsonp!==!1&&(n.url+=(bn.test(n.url)?"&":"?")+n.jsonp+"="+s),n.converters["script json"]=function(){return u||b.error(s+" was not called"),u[0]},n.dataTypes[0]="json",o=e[s],e[s]=function(){u=arguments},i.always(function(){e[s]=o,n[s]&&(n.jsonpCallback=r.jsonpCallback,jn.push(s)),u&&b.isFunction(o)&&o(u[0]),u=o=t}),"script"):t});var In,qn,Rn=0,Un=e.ActiveXObject&&function(){var e;for(e in In)In[e](t,!0)};b.ajaxSettings.xhr=e.ActiveXObject?function(){return!this.isLocal&&zn()||Wn()}:zn,qn=b.ajaxSettings.xhr(),b.support.cors=!!qn&&"withCredentials"in qn,qn=b.support.ajax=!!qn,qn&&b.ajaxTransport(function(n){if(!n.crossDomain||b.support.cors){var r;return{send:function(i,s){var o,u,a=n.xhr();if(n.username?a.open(n.type,n.url,n.async,n.username,n.password):a.open(n.type,n.url,n.async),n.xhrFields)for(u in n.xhrFields)a[u]=n.xhrFields[u];n.mimeType&&a.overrideMimeType&&a.overrideMimeType(n.mimeType),n.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest");try{for(u in i)a.setRequestHeader(u,i[u])}catch(f){}a.send(n.hasContent&&n.data||null),r=function(e,i){var u,f,l,c;try{if(r&&(i||4===a.readyState))if(r=t,o&&(a.onreadystatechange=b.noop,Un&&delete In[o]),i)4!==a.readyState&&a.abort();else{c={},u=a.status,f=a.getAllResponseHeaders(),"string"==typeof a.responseText&&(c.text=a.responseText);try{l=a.statusText}catch(h){l=""}u||!n.isLocal||n.crossDomain?1223===u&&(u=204):u=c.text?200:404}}catch(p){i||s(-1,p)}c&&s(u,l,c,f)},n.async?4===a.readyState?setTimeout(r):(o=++Rn,Un&&(In||(In={},b(e).unload(Un)),In[o]=r),a.onreadystatechange=r):r()},abort:function(){r&&r(t,!0)}}}});var Xn,Vn,$n=/^(?:toggle|show|hide)$/,Jn=RegExp("^(?:([+-])=|)("+w+")([a-z%]*)$","i"),Kn=/queueHooks$/,Qn=[nr],Gn={"*":[function(e,t){var n,r,i=this.createTween(e,t),s=Jn.exec(t),o=i.cur(),u=+o||0,a=1,f=20;if(s){if(n=+s[2],r=s[3]||(b.cssNumber[e]?"":"px"),"px"!==r&&u){u=b.css(i.elem,e,!0)||n||1;do a=a||".5",u/=a,b.style(i.elem,e,u+r);while(a!==(a=i.cur()/o)&&1!==a&&--f)}i.unit=r,i.start=u,i.end=s[1]?u+(s[1]+1)*n:n}return i}]};b.Animation=b.extend(er,{tweener:function(e,t){b.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");var n,r=0,i=e.length;for(;i>r;r++)n=e[r],Gn[n]=Gn[n]||[],Gn[n].unshift(t)},prefilter:function(e,t){t?Qn.unshift(e):Qn.push(e)}}),b.Tween=rr,rr.prototype={constructor:rr,init:function(e,t,n,r,i,s){this.elem=e,this.prop=n,this.easing=i||"swing",this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=s||(b.cssNumber[n]?"":"px")},cur:function(){var e=rr.propHooks[this.prop];return e&&e.get?e.get(this):rr.propHooks._default.get(this)},run:function(e){var t,n=rr.propHooks[this.prop];return this.pos=t=this.options.duration?b.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):rr.propHooks._default.set(this),this}},rr.prototype.init.prototype=rr.prototype,rr.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=b.css(e.elem,e.prop,""),t&&"auto"!==t?t:0):e.elem[e.prop]},set:function(e){b.fx.step[e.prop]?b.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[b.cssProps[e.prop]]||b.cssHooks[e.prop])?b.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},rr.propHooks.scrollTop=rr.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},b.each(["toggle","show","hide"],function(e,t){var n=b.fn[t];b.fn[t]=function(e,r,i){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(ir(t,!0),e,r,i)}}),b.fn.extend({fadeTo:function(e,t,n,r){return this.filter(nn).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=b.isEmptyObject(e),s=b.speed(t,n,r),o=function(){var t=er(this,b.extend({},e),s);o.finish=function(){t.stop(!0)},(i||b._data(this,"finish"))&&t.stop(!0)};return o.finish=o,i||s.queue===!1?this.each(o):this.queue(s.queue,o)},stop:function(e,n,r){var i=function(e){var t=e.stop;delete e.stop,t(r)};return"string"!=typeof e&&(r=n,n=e,e=t),n&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,n=null!=e&&e+"queueHooks",s=b.timers,o=b._data(this);if(n)o[n]&&o[n].stop&&i(o[n]);else for(n in o)o[n]&&o[n].stop&&Kn.test(n)&&i(o[n]);for(n=s.length;n--;)s[n].elem!==this||null!=e&&s[n].queue!==e||(s[n].anim.stop(r),t=!1,s.splice(n,1));(t||!r)&&b.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=b._data(this),r=n[e+"queue"],i=n[e+"queueHooks"],s=b.timers,o=r?r.length:0;for(n.finish=!0,b.queue(this,e,[]),i&&i.cur&&i.cur.finish&&i.cur.finish.call(this),t=s.length;t--;)s[t].elem===this&&s[t].queue===e&&(s[t].anim.stop(!0),s.splice(t,1));for(t=0;o>t;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}}),b.each({slideDown:ir("show"),slideUp:ir("hide"),slideToggle:ir("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){b.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),b.speed=function(e,t,n){var r=e&&"object"==typeof e?b.extend({},e):{complete:n||!n&&t||b.isFunction(e)&&e,duration:e,easing:n&&t||t&&!b.isFunction(t)&&t};return r.duration=b.fx.off?0:"number"==typeof r.duration?r.duration:r.duration in b.fx.speeds?b.fx.speeds[r.duration]:b.fx.speeds._default,(null==r.queue||r.queue===!0)&&(r.queue="fx"),r.old=r.complete,r.complete=function(){b.isFunction(r.old)&&r.old.call(this),r.queue&&b.dequeue(this,r.queue)},r},b.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},b.timers=[],b.fx=rr.prototype.init,b.fx.tick=function(){var e,n=b.timers,r=0;for(Xn=b.now();n.length>r;r++)e=n[r],e()||n[r]!==e||n.splice(r--,1);n.length||b.fx.stop(),Xn=t},b.fx.timer=function(e){e()&&b.timers.push(e)&&b.fx.start()},b.fx.interval=13,b.fx.start=function(){Vn||(Vn=setInterval(b.fx.tick,b.fx.interval))},b.fx.stop=function(){clearInterval(Vn),Vn=null},b.fx.speeds={slow:600,fast:200,_default:400},b.fx.step={},b.expr&&b.expr.filters&&(b.expr.filters.animated=function(e){return b.grep(b.timers,function(t){return e===t.elem}).length}),b.fn.offset=function(e){if(arguments.length)return e===t?this:this.each(function(t){b.offset.setOffset(this,e,t)});var n,r,s={top:0,left:0},o=this[0],u=o&&o.ownerDocument;if(u)return n=u.documentElement,b.contains(n,o)?(typeof o.getBoundingClientRect!==i&&(s=o.getBoundingClientRect()),r=sr(u),{top:s.top+(r.pageYOffset||n.scrollTop)-(n.clientTop||0),left:s.left+(r.pageXOffset||n.scrollLeft)-(n.clientLeft||0)}):s},b.offset={setOffset:function(e,t,n){var r=b.css(e,"position");"static"===r&&(e.style.position="relative");var i=b(e),s=i.offset(),o=b.css(e,"top"),u=b.css(e,"left"),a=("absolute"===r||"fixed"===r)&&b.inArray("auto",[o,u])>-1,f={},l={},c,h;a?(l=i.position(),c=l.top,h=l.left):(c=parseFloat(o)||0,h=parseFloat(u)||0),b.isFunction(t)&&(t=t.call(e,n,s)),null!=t.top&&(f.top=t.top-s.top+c),null!=t.left&&(f.left=t.left-s.left+h),"using"in t?t.using.call(e,f):i.css(f)}},b.fn.extend({position:function(){if(this[0]){var e,t,n={top:0,left:0},r=this[0];return"fixed"===b.css(r,"position")?t=r.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),b.nodeName(e[0],"html")||(n=e.offset()),n.top+=b.css(e[0],"borderTopWidth",!0),n.left+=b.css(e[0],"borderLeftWidth",!0)),{top:t.top-n.top-b.css(r,"marginTop",!0),left:t.left-n.left-b.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var e=this.offsetParent||s.documentElement;while(e&&!b.nodeName(e,"html")&&"static"===b.css(e,"position"))e=e.offsetParent;return e||s.documentElement})}}),b.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,n){var r=/Y/.test(n);b.fn[e]=function(i){return b.access(this,function(e,i,s){var o=sr(e);return s===t?o?n in o?o[n]:o.document.documentElement[i]:e[i]:(o?o.scrollTo(r?b(o).scrollLeft():s,r?s:b(o).scrollTop()):e[i]=s,t)},e,i,arguments.length,null)}}),b.each({Height:"height",Width:"width"},function(e,n){b.each({padding:"inner"+e,content:n,"":"outer"+e},function(r,i){b.fn[i]=function(i,s){var o=arguments.length&&(r||"boolean"!=typeof i),u=r||(i===!0||s===!0?"margin":"border");return b.access(this,function(n,r,i){var s;return b.isWindow(n)?n.document.documentElement["client"+e]:9===n.nodeType?(s=n.documentElement,Math.max(n.body["scroll"+e],s["scroll"+e],n.body["offset"+e],s["offset"+e],s["client"+e])):i===t?b.css(n,r,u):b.style(n,r,i,u)},n,o?i:t,o,null)}})}),e.jQuery=e.$=b,"function"==typeof define&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return b})}(window),function(){var e=this,t=e._,n={},r=Array.prototype,i=Object.prototype,s=Function.prototype,o=r.push,u=r.slice,a=r.concat,f=i.toString,l=i.hasOwnProperty,c=r.forEach,h=r.map,p=r.reduce,d=r.reduceRight,v=r.filter,m=r.every,g=r.some,y=r.indexOf,b=r.lastIndexOf,w=Array.isArray,E=Object.keys,S=s.bind,x=function(e){if(e instanceof x)return e;if(!(this instanceof x))return new x(e);this._wrapped=e};typeof exports!="undefined"?(typeof module!="undefined"&&module.exports&&(exports=module.exports=x),exports._=x):e._=x,x.VERSION="1.4.4";var T=x.each=x.forEach=function(e,t,r){if(e==null)return;if(c&&e.forEach===c)e.forEach(t,r);else if(e.length===+e.length){for(var i=0,s=e.length;i<s;i++)if(t.call(r,e[i],i,e)===n)return}else for(var o in e)if(x.has(e,o)&&t.call(r,e[o],o,e)===n)return};x.map=x.collect=function(e,t,n){var r=[];return e==null?r:h&&e.map===h?e.map(t,n):(T(e,function(e,i,s){r[r.length]=t.call(n,e,i,s)}),r)};var N="Reduce of empty array with no initial value";x.reduce=x.foldl=x.inject=function(e,t,n,r){var i=arguments.length>2;e==null&&(e=[]);if(p&&e.reduce===p)return r&&(t=x.bind(t,r)),i?e.reduce(t,n):e.reduce(t);T(e,function(e,s,o){i?n=t.call(r,n,e,s,o):(n=e,i=!0)});if(!i)throw new TypeError(N);return n},x.reduceRight=x.foldr=function(e,t,n,r){var i=arguments.length>2;e==null&&(e=[]);if(d&&e.reduceRight===d)return r&&(t=x.bind(t,r)),i?e.reduceRight(t,n):e.reduceRight(t);var s=e.length;if(s!==+s){var o=x.keys(e);s=o.length}T(e,function(u,a,f){a=o?o[--s]:--s,i?n=t.call(r,n,e[a],a,f):(n=e[a],i=!0)});if(!i)throw new TypeError(N);return n},x.find=x.detect=function(e,t,n){var r;return C(e,function(e,i,s){if(t.call(n,e,i,s))return r=e,!0}),r},x.filter=x.select=function(e,t,n){var r=[];return e==null?r:v&&e.filter===v?e.filter(t,n):(T(e,function(e,i,s){t.call(n,e,i,s)&&(r[r.length]=e)}),r)},x.reject=function(e,t,n){return x.filter(e,function(e,r,i){return!t.call(n,e,r,i)},n)},x.every=x.all=function(e,t,r){t||(t=x.identity);var i=!0;return e==null?i:m&&e.every===m?e.every(t,r):(T(e,function(e,s,o){if(!(i=i&&t.call(r,e,s,o)))return n}),!!i)};var C=x.some=x.any=function(e,t,r){t||(t=x.identity);var i=!1;return e==null?i:g&&e.some===g?e.some(t,r):(T(e,function(e,s,o){if(i||(i=t.call(r,e,s,o)))return n}),!!i)};x.contains=x.include=function(e,t){return e==null?!1:y&&e.indexOf===y?e.indexOf(t)!=-1:C(e,function(e){return e===t})},x.invoke=function(e,t){var n=u.call(arguments,2),r=x.isFunction(t);return x.map(e,function(e){return(r?t:e[t]).apply(e,n)})},x.pluck=function(e,t){return x.map(e,function(e){return e[t]})},x.where=function(e,t,n){return x.isEmpty(t)?n?null:[]:x[n?"find":"filter"](e,function(e){for(var n in t)if(t[n]!==e[n])return!1;return!0})},x.findWhere=function(e,t){return x.where(e,t,!0)},x.max=function(e,t,n){if(!t&&x.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.max.apply(Math,e);if(!t&&x.isEmpty(e))return-Infinity;var r={computed:-Infinity,value:-Infinity};return T(e,function(e,i,s){var o=t?t.call(n,e,i,s):e;o>=r.computed&&(r={value:e,computed:o})}),r.value},x.min=function(e,t,n){if(!t&&x.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.min.apply(Math,e);if(!t&&x.isEmpty(e))return Infinity;var r={computed:Infinity,value:Infinity};return T(e,function(e,i,s){var o=t?t.call(n,e,i,s):e;o<r.computed&&(r={value:e,computed:o})}),r.value},x.shuffle=function(e){var t,n=0,r=[];return T(e,function(e){t=x.random(n++),r[n-1]=r[t],r[t]=e}),r};var k=function(e){return x.isFunction(e)?e:function(t){return t[e]}};x.sortBy=function(e,t,n){var r=k(t);return x.pluck(x.map(e,function(e,t,i){return{value:e,index:t,criteria:r.call(n,e,t,i)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;if(n!==r){if(n>r||n===void 0)return 1;if(n<r||r===void 0)return-1}return e.index<t.index?-1:1}),"value")};var L=function(e,t,n,r){var i={},s=k(t||x.identity);return T(e,function(t,o){var u=s.call(n,t,o,e);r(i,u,t)}),i};x.groupBy=function(e,t,n){return L(e,t,n,function(e,t,n){(x.has(e,t)?e[t]:e[t]=[]).push(n)})},x.countBy=function(e,t,n){return L(e,t,n,function(e,t){x.has(e,t)||(e[t]=0),e[t]++})},x.sortedIndex=function(e,t,n,r){n=n==null?x.identity:k(n);var i=n.call(r,t),s=0,o=e.length;while(s<o){var u=s+o>>>1;n.call(r,e[u])<i?s=u+1:o=u}return s},x.toArray=function(e){return e?x.isArray(e)?u.call(e):e.length===+e.length?x.map(e,x.identity):x.values(e):[]},x.size=function(e){return e==null?0:e.length===+e.length?e.length:x.keys(e).length},x.first=x.head=x.take=function(e,t,n){return e==null?void 0:t!=null&&!n?u.call(e,0,t):e[0]},x.initial=function(e,t,n){return u.call(e,0,e.length-(t==null||n?1:t))},x.last=function(e,t,n){return e==null?void 0:t!=null&&!n?u.call(e,Math.max(e.length-t,0)):e[e.length-1]},x.rest=x.tail=x.drop=function(e,t,n){return u.call(e,t==null||n?1:t)},x.compact=function(e){return x.filter(e,x.identity)};var A=function(e,t,n){return T(e,function(e){x.isArray(e)?t?o.apply(n,e):A(e,t,n):n.push(e)}),n};x.flatten=function(e,t){return A(e,t,[])},x.without=function(e){return x.difference(e,u.call(arguments,1))},x.uniq=x.unique=function(e,t,n,r){x.isFunction(t)&&(r=n,n=t,t=!1);var i=n?x.map(e,n,r):e,s=[],o=[];return T(i,function(n,r){if(t?!r||o[o.length-1]!==n:!x.contains(o,n))o.push(n),s.push(e[r])}),s},x.union=function(){return x.uniq(a.apply(r,arguments))},x.intersection=function(e){var t=u.call(arguments,1);return x.filter(x.uniq(e),function(e){return x.every(t,function(t){return x.indexOf(t,e)>=0})})},x.difference=function(e){var t=a.apply(r,u.call(arguments,1));return x.filter(e,function(e){return!x.contains(t,e)})},x.zip=function(){var e=u.call(arguments),t=x.max(x.pluck(e,"length")),n=new Array(t);for(var r=0;r<t;r++)n[r]=x.pluck(e,""+r);return n},x.object=function(e,t){if(e==null)return{};var n={};for(var r=0,i=e.length;r<i;r++)t?n[e[r]]=t[r]:n[e[r][0]]=e[r][1];return n},x.indexOf=function(e,t,n){if(e==null)return-1;var r=0,i=e.length;if(n){if(typeof n!="number")return r=x.sortedIndex(e,t),e[r]===t?r:-1;r=n<0?Math.max(0,i+n):n}if(y&&e.indexOf===y)return e.indexOf(t,n);for(;r<i;r++)if(e[r]===t)return r;return-1},x.lastIndexOf=function(e,t,n){if(e==null)return-1;var r=n!=null;if(b&&e.lastIndexOf===b)return r?e.lastIndexOf(t,n):e.lastIndexOf(t);var i=r?n:e.length;while(i--)if(e[i]===t)return i;return-1},x.range=function(e,t,n){arguments.length<=1&&(t=e||0,e=0),n=arguments[2]||1;var r=Math.max(Math.ceil((t-e)/n),0),i=0,s=new Array(r);while(i<r)s[i++]=e,e+=n;return s},x.bind=function(e,t){if(e.bind===S&&S)return S.apply(e,u.call(arguments,1));var n=u.call(arguments,2);return function(){return e.apply(t,n.concat(u.call(arguments)))}},x.partial=function(e){var t=u.call(arguments,1);return function(){return e.apply(this,t.concat(u.call(arguments)))}},x.bindAll=function(e){var t=u.call(arguments,1);return t.length===0&&(t=x.functions(e)),T(t,function(t){e[t]=x.bind(e[t],e)}),e},x.memoize=function(e,t){var n={};return t||(t=x.identity),function(){var r=t.apply(this,arguments);return x.has(n,r)?n[r]:n[r]=e.apply(this,arguments)}},x.delay=function(e,t){var n=u.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},x.defer=function(e){return x.delay.apply(x,[e,1].concat(u.call(arguments,1)))},x.throttle=function(e,t){var n,r,i,s,o=0,u=function(){o=new Date,i=null,s=e.apply(n,r)};return function(){var a=new Date,f=t-(a-o);return n=this,r=arguments,f<=0?(clearTimeout(i),i=null,o=a,s=e.apply(n,r)):i||(i=setTimeout(u,f)),s}},x.debounce=function(e,t,n){var r,i;return function(){var s=this,o=arguments,u=function(){r=null,n||(i=e.apply(s,o))},a=n&&!r;return clearTimeout(r),r=setTimeout(u,t),a&&(i=e.apply(s,o)),i}},x.once=function(e){var t=!1,n;return function(){return t?n:(t=!0,n=e.apply(this,arguments),e=null,n)}},x.wrap=function(e,t){return function(){var n=[e];return o.apply(n,arguments),t.apply(this,n)}},x.compose=function(){var e=arguments;return function(){var t=arguments;for(var n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}},x.after=function(e,t){return e<=0?t():function(){if(--e<1)return t.apply(this,arguments)}},x.keys=E||function(e){if(e!==Object(e))throw new TypeError("Invalid object");var t=[];for(var n in e)x.has(e,n)&&(t[t.length]=n);return t},x.values=function(e){var t=[];for(var n in e)x.has(e,n)&&t.push(e[n]);return t},x.pairs=function(e){var t=[];for(var n in e)x.has(e,n)&&t.push([n,e[n]]);return t},x.invert=function(e){var t={};for(var n in e)x.has(e,n)&&(t[e[n]]=n);return t},x.functions=x.methods=function(e){var t=[];for(var n in e)x.isFunction(e[n])&&t.push(n);return t.sort()},x.extend=function(e){return T(u.call(arguments,1),function(t){if(t)for(var n in t)e[n]=t[n]}),e},x.pick=function(e){var t={},n=a.apply(r,u.call(arguments,1));return T(n,function(n){n in e&&(t[n]=e[n])}),t},x.omit=function(e){var t={},n=a.apply(r,u.call(arguments,1));for(var i in e)x.contains(n,i)||(t[i]=e[i]);return t},x.defaults=function(e){return T(u.call(arguments,1),function(t){if(t)for(var n in t)e[n]==null&&(e[n]=t[n])}),e},x.clone=function(e){return x.isObject(e)?x.isArray(e)?e.slice():x.extend({},e):e},x.tap=function(e,t){return t(e),e};var O=function(e,t,n,r){if(e===t)return e!==0||1/e==1/t;if(e==null||t==null)return e===t;e instanceof x&&(e=e._wrapped),t instanceof x&&(t=t._wrapped);var i=f.call(e);if(i!=f.call(t))return!1;switch(i){case"[object String]":return e==String(t);case"[object Number]":return e!=+e?t!=+t:e==0?1/e==1/t:e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}if(typeof e!="object"||typeof t!="object")return!1;var s=n.length;while(s--)if(n[s]==e)return r[s]==t;n.push(e),r.push(t);var o=0,u=!0;if(i=="[object Array]"){o=e.length,u=o==t.length;if(u)while(o--)if(!(u=O(e[o],t[o],n,r)))break}else{var a=e.constructor,l=t.constructor;if(a!==l&&!(x.isFunction(a)&&a instanceof a&&x.isFunction(l)&&l instanceof l))return!1;for(var c in e)if(x.has(e,c)){o++;if(!(u=x.has(t,c)&&O(e[c],t[c],n,r)))break}if(u){for(c in t)if(x.has(t,c)&&!(o--))break;u=!o}}return n.pop(),r.pop(),u};x.isEqual=function(e,t){return O(e,t,[],[])},x.isEmpty=function(e){if(e==null)return!0;if(x.isArray(e)||x.isString(e))return e.length===0;for(var t in e)if(x.has(e,t))return!1;return!0},x.isElement=function(e){return!!e&&e.nodeType===1},x.isArray=w||function(e){return f.call(e)=="[object Array]"},x.isObject=function(e){return e===Object(e)},T(["Arguments","Function","String","Number","Date","RegExp"],function(e){x["is"+e]=function(t){return f.call(t)=="[object "+e+"]"}}),x.isArguments(arguments)||(x.isArguments=function(e){return!!e&&!!x.has(e,"callee")}),typeof /./!="function"&&(x.isFunction=function(e){return typeof e=="function"}),x.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},x.isNaN=function(e){return x.isNumber(e)&&e!=+e},x.isBoolean=function(e){return e===!0||e===!1||f.call(e)=="[object Boolean]"},x.isNull=function(e){return e===null},x.isUndefined=function(e){return e===void 0},x.has=function(e,t){return l.call(e,t)},x.noConflict=function(){return e._=t,this},x.identity=function(e){return e},x.times=function(e,t,n){var r=Array(e);for(var i=0;i<e;i++)r[i]=t.call(n,i);return r},x.random=function(e,t){return t==null&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))};var M={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};M.unescape=x.invert(M.escape);var _={escape:new RegExp("["+x.keys(M.escape).join("")+"]","g"),unescape:new RegExp("("+x.keys(M.unescape).join("|")+")","g")};x.each(["escape","unescape"],function(e){x[e]=function(t){return t==null?"":(""+t).replace(_[e],function(t){return M[e][t]})}}),x.result=function(e,t){if(e==null)return null;var n=e[t];return x.isFunction(n)?n.call(e):n},x.mixin=function(e){T(x.functions(e),function(t){var n=x[t]=e[t];x.prototype[t]=function(){var e=[this._wrapped];return o.apply(e,arguments),j.call(this,n.apply(x,e))}})};var D=0;x.uniqueId=function(e){var t=++D+"";return e?e+t:t},x.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var P=/(.)^/,H={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},B=/\\|'|\r|\n|\t|\u2028|\u2029/g;x.template=function(e,t,n){var r;n=x.defaults({},n,x.templateSettings);var i=new RegExp([(n.escape||P).source,(n.interpolate||P).source,(n.evaluate||P).source].join("|")+"|$","g"),s=0,o="__p+='";e.replace(i,function(t,n,r,i,u){return o+=e.slice(s,u).replace(B,function(e){return"\\"+H[e]}),n&&(o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"),r&&(o+="'+\n((__t=("+r+"))==null?'':__t)+\n'"),i&&(o+="';\n"+i+"\n__p+='"),s=u+t.length,t}),o+="';\n",n.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{r=new Function(n.variable||"obj","_",o)}catch(u){throw u.source=o,u}if(t)return r(t,x);var a=function(e){return r.call(this,e,x)};return a.source="function("+(n.variable||"obj")+"){\n"+o+"}",a},x.chain=function(e){return x(e).chain()};var j=function(e){return this._chain?x(e).chain():e};x.mixin(x),T(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=r[e];x.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),(e=="shift"||e=="splice")&&n.length===0&&delete n[0],j.call(this,n)}}),T(["concat","join","slice"],function(e){var t=r[e];x.prototype[e]=function(){return j.call(this,t.apply(this._wrapped,arguments))}}),x.extend(x.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}.call(this),define("underscore",function(e){return function(){var t,n;return t||e._}}(this)),function(){var e=this,t=e.Backbone,n=[],r=n.push,i=n.slice,s=n.splice,o;typeof exports!="undefined"?o=exports:o=e.Backbone={},o.VERSION="1.0.0";var u=e._;!u&&typeof require!="undefined"&&(u=require("underscore")),o.$=e.jQuery||e.Zepto||e.ender||e.$,o.noConflict=function(){return e.Backbone=t,this},o.emulateHTTP=!1,o.emulateJSON=!1;var a=o.Events={on:function(e,t,n){if(!l(this,"on",e,[t,n])||!t)return this;this._events||(this._events={});var r=this._events[e]||(this._events[e]=[]);return r.push({callback:t,context:n,ctx:n||this}),this},once:function(e,t,n){if(!l(this,"once",e,[t,n])||!t)return this;var r=this,i=u.once(function(){r.off(e,i),t.apply(this,arguments)});return i._callback=t,this.on(e,i,n)},off:function(e,t,n){var r,i,s,o,a,f,c,h;if(!this._events||!l(this,"off",e,[t,n]))return this;if(!e&&!t&&!n)return this._events={},this;o=e?[e]:u.keys(this._events);for(a=0,f=o.length;a<f;a++){e=o[a];if(s=this._events[e]){this._events[e]=r=[];if(t||n)for(c=0,h=s.length;c<h;c++)i=s[c],(t&&t!==i.callback&&t!==i.callback._callback||n&&n!==i.context)&&r.push(i);r.length||delete this._events[e]}}return this},trigger:function(e){if(!this._events)return this;var t=i.call(arguments,1);if(!l(this,"trigger",e,t))return this;var n=this._events[e],r=this._events.all;return n&&c(n,t),r&&c(r,arguments),this},stopListening:function(e,t,n){var r=this._listeners;if(!r)return this;var i=!t&&!n;typeof t=="object"&&(n=this),e&&((r={})[e._listenerId]=e);for(var s in r)r[s].off(t,n,this),i&&delete this._listeners[s];return this}},f=/\s+/,l=function(e,t,n,r){if(!n)return!0;if(typeof n=="object"){for(var i in n)e[t].apply(e,[i,n[i]].concat(r));return!1}if(f.test(n)){var s=n.split(f);for(var o=0,u=s.length;o<u;o++)e[t].apply(e,[s[o]].concat(r));return!1}return!0},c=function(e,t){var n,r=-1,i=e.length,s=t[0],o=t[1],u=t[2];switch(t.length){case 0:while(++r<i)(n=e[r]).callback.call(n.ctx);return;case 1:while(++r<i)(n=e[r]).callback.call(n.ctx,s);return;case 2:while(++r<i)(n=e[r]).callback.call(n.ctx,s,o);return;case 3:while(++r<i)(n=e[r]).callback.call(n.ctx,s,o,u);return;default:while(++r<i)(n=e[r]).callback.apply(n.ctx,t)}},h={listenTo:"on",listenToOnce:"once"};u.each(h,function(e,t){a[t]=function(t,n,r){var i=this._listeners||(this._listeners={}),s=t._listenerId||(t._listenerId=u.uniqueId("l"));return i[s]=t,typeof n=="object"&&(r=this),t[e](n,r,this),this}}),a.bind=a.on,a.unbind=a.off,u.extend(o,a);var p=o.Model=function(e,t){var n,r=e||{};t||(t={}),this.cid=u.uniqueId("c"),this.attributes={},u.extend(this,u.pick(t,d)),t.parse&&(r=this.parse(r,t)||{});if(n=u.result(this,"defaults"))r=u.defaults({},r,n);this.set(r,t),this.changed={},this.initialize.apply(this,arguments)},d=["url","urlRoot","collection"];u.extend(p.prototype,a,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(e){return u.clone(this.attributes)},sync:function(){return o.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return u.escape(this.get(e))},has:function(e){return this.get(e)!=null},set:function(e,t,n){var r,i,s,o,a,f,l,c;if(e==null)return this;typeof e=="object"?(i=e,n=t):(i={})[e]=t,n||(n={});if(!this._validate(i,n))return!1;s=n.unset,a=n.silent,o=[],f=this._changing,this._changing=!0,f||(this._previousAttributes=u.clone(this.attributes),this.changed={}),c=this.attributes,l=this._previousAttributes,this.idAttribute in i&&(this.id=i[this.idAttribute]);for(r in i)t=i[r],u.isEqual(c[r],t)||o.push(r),u.isEqual(l[r],t)?delete this.changed[r]:this.changed[r]=t,s?delete c[r]:c[r]=t;if(!a){o.length&&(this._pending=!0);for(var h=0,p=o.length;h<p;h++)this.trigger("change:"+o[h],this,c[o[h]],n)}if(f)return this;if(!a)while(this._pending)this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,u.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var n in this.attributes)t[n]=void 0;return this.set(t,u.extend({},e,{unset:!0}))},hasChanged:function(e){return e==null?!u.isEmpty(this.changed):u.has(this.changed,e)},changedAttributes:function(e){if(!e)return this.hasChanged()?u.clone(this.changed):!1;var t,n=!1,r=this._changing?this._previousAttributes:this.attributes;for(var i in e){if(u.isEqual(r[i],t=e[i]))continue;(n||(n={}))[i]=t}return n},previous:function(e){return e==null||!this._previousAttributes?null:this._previousAttributes[e]},previousAttributes:function(){return u.clone(this._previousAttributes)},fetch:function(e){e=e?u.clone(e):{},e.parse===void 0&&(e.parse=!0);var t=this,n=e.success;return e.success=function(r){if(!t.set(t.parse(r,e),e))return!1;n&&n(t,r,e),t.trigger("sync",t,r,e)},j(this,e),this.sync("read",this,e)},save:function(e,t,n){var r,i,s,o=this.attributes;e==null||typeof e=="object"?(r=e,n=t):(r={})[e]=t;if(r&&(!n||!n.wait)&&!this.set(r,n))return!1;n=u.extend({validate:!0},n);if(!this._validate(r,n))return!1;r&&n.wait&&(this.attributes=u.extend({},o,r)),n.parse===void 0&&(n.parse=!0);var a=this,f=n.success;return n.success=function(e){a.attributes=o;var t=a.parse(e,n);n.wait&&(t=u.extend(r||{},t));if(u.isObject(t)&&!a.set(t,n))return!1;f&&f(a,e,n),a.trigger("sync",a,e,n)},j(this,n),i=this.isNew()?"create":n.patch?"patch":"update",i==="patch"&&(n.attrs=r),s=this.sync(i,this,n),r&&n.wait&&(this.attributes=o),s},destroy:function(e){e=e?u.clone(e):{};var t=this,n=e.success,r=function(){t.trigger("destroy",t,t.collection,e)};e.success=function(i){(e.wait||t.isNew())&&r(),n&&n(t,i,e),t.isNew()||t.trigger("sync",t,i,e)};if(this.isNew())return e.success(),!1;j(this,e);var i=this.sync("delete",this,e);return e.wait||r(),i},url:function(){var e=u.result(this,"urlRoot")||u.result(this.collection,"url")||B();return this.isNew()?e:e+(e.charAt(e.length-1)==="/"?"":"/")+encodeURIComponent(this.id)},parse:function(e,t){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return this.id==null},isValid:function(e){return this._validate({},u.extend(e||{},{validate:!0}))},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=u.extend({},this.attributes,e);var n=this.validationError=this.validate(e,t)||null;return n?(this.trigger("invalid",this,n,u.extend(t||{},{validationError:n})),!1):!0}});var v=["keys","values","pairs","invert","pick","omit"];u.each(v,function(e){p.prototype[e]=function(){var t=i.call(arguments);return t.unshift(this.attributes),u[e].apply(u,t)}});var m=o.Collection=function(e,t){t||(t={}),t.url&&(this.url=t.url),t.model&&(this.model=t.model),t.comparator!==void 0&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,u.extend({silent:!0},t))},g={add:!0,remove:!0,merge:!0},y={add:!0,merge:!1,remove:!1};u.extend(m.prototype,a,{model:p,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return o.sync.apply(this,arguments)},add:function(e,t){return this.set(e,u.defaults(t||{},y))},remove:function(e,t){e=u.isArray(e)?e.slice():[e],t||(t={});var n,r,i,s;for(n=0,r=e.length;n<r;n++){s=this.get(e[n]);if(!s)continue;delete this._byId[s.id],delete this._byId[s.cid],i=this.indexOf(s),this.models.splice(i,1),this.length--,t.silent||(t.index=i,s.trigger("remove",s,this,t)),this._removeReference(s)}return this},set:function(e,t){t=u.defaults(t||{},g),t.parse&&(e=this.parse(e,t)),u.isArray(e)||(e=e?[e]:[]);var n,i,o,a,f,l,c=t.at,h=this.comparator&&c==null&&t.sort!==!1,p=u.isString(this.comparator)?this.comparator:null,d=[],v=[],m={};for(n=0,i=e.length;n<i;n++){if(!(o=this._prepareModel(e[n],t)))continue;(f=this.get(o))?(t.remove&&(m[f.cid]=!0),t.merge&&(f.set(o.attributes,t),h&&!l&&f.hasChanged(p)&&(l=!0))):t.add&&(d.push(o),o.on("all",this._onModelEvent,this),this._byId[o.cid]=o,o.id!=null&&(this._byId[o.id]=o))}if(t.remove){for(n=0,i=this.length;n<i;++n)m[(o=this.models[n]).cid]||v.push(o);v.length&&this.remove(v,t)}d.length&&(h&&(l=!0),this.length+=d.length,c!=null?s.apply(this.models,[c,0].concat(d)):r.apply(this.models,d)),l&&this.sort({silent:!0});if(t.silent)return this;for(n=0,i=d.length;n<i;n++)(o=d[n]).trigger("add",o,this,t);return l&&this.trigger("sort",this,t),this},reset:function(e,t){t||(t={});for(var n=0,r=this.models.length;n<r;n++)this._removeReference(this.models[n]);return t.previousModels=this.models,this._reset(),this.add(e,u.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),this},push:function(e,t){return e=this._prepareModel(e,t),this.add(e,u.extend({at:this.length},t)),e},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e),t},unshift:function(e,t){return e=this._prepareModel(e,t),this.add(e,u.extend({at:0},t)),e},shift:function(e){var t=this.at(0);return this.remove(t,e),t},slice:function(e,t){return this.models.slice(e,t)},get:function(e){return e==null?void 0:this._byId[e.id!=null?e.id:e.cid||e]},at:function(e){return this.models[e]},where:function(e,t){return u.isEmpty(e)?t?void 0:[]:this[t?"find":"filter"](function(t){for(var n in e)if(e[n]!==t.get(n))return!1;return!0})},findWhere:function(e){return this.where(e,!0)},sort:function(e){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return e||(e={}),u.isString(this.comparator)||this.comparator.length===1?this.models=this.sortBy(this.comparator,this):this.models.sort(u.bind(this.comparator,this)),e.silent||this.trigger("sort",this,e),this},sortedIndex:function(e,t,n){t||(t=this.comparator);var r=u.isFunction(t)?t:function(e){return e.get(t)};return u.sortedIndex(this.models,e,r,n)},pluck:function(e){return u.invoke(this.models,"get",e)},fetch:function(e){e=e?u.clone(e):{},e.parse===void 0&&(e.parse=!0);var t=e.success,n=this;return e.success=function(r){var i=e.reset?"reset":"set";n[i](r,e),t&&t(n,r,e),n.trigger("sync",n,r,e)},j(this,e),this.sync("read",this,e)},create:function(e,t){t=t?u.clone(t):{};if(!(e=this._prepareModel(e,t)))return!1;t.wait||this.add(e,t);var n=this,r=t.success;return t.success=function(i){t.wait&&n.add(e,t),r&&r(e,i,t)},e.save(null,t),e},parse:function(e,t){return e},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(e,t){if(e instanceof p)return e.collection||(e.collection=this),e;t||(t={}),t.collection=this;var n=new this.model(e,t);return n._validate(e,t)?n:(this.trigger("invalid",this,e,t),!1)},_removeReference:function(e){this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,n,r){if((e==="add"||e==="remove")&&n!==this)return;e==="destroy"&&this.remove(t,r),t&&e==="change:"+t.idAttribute&&(delete this._byId[t.previous(t.idAttribute)],t.id!=null&&(this._byId[t.id]=t)),this.trigger.apply(this,arguments)}});var b=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","indexOf","shuffle","lastIndexOf","isEmpty","chain"];u.each(b,function(e){m.prototype[e]=function(){var t=i.call(arguments);return t.unshift(this.models),u[e].apply(u,t)}});var w=["groupBy","countBy","sortBy"];u.each(w,function(e){m.prototype[e]=function(t,n){var r=u.isFunction(t)?t:function(e){return e.get(t)};return u[e](this.models,r,n)}});var E=o.View=function(e){this.cid=u.uniqueId("view"),this._configure(e||{}),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},S=/^(\S+)\s*(.*)$/,x=["model","collection","el","id","attributes","className","tagName","events"];u.extend(E.prototype,a,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(e,t){return this.$el&&this.undelegateEvents(),this.$el=e instanceof o.$?e:o.$(e),this.el=this.$el[0],t!==!1&&this.delegateEvents(),this},delegateEvents:function(e){if(!e&&!(e=u.result(this,"events")))return this;this.undelegateEvents();for(var t in e){var n=e[t];u.isFunction(n)||(n=this[e[t]]);if(!n)continue;var r=t.match(S),i=r[1],s=r[2];n=u.bind(n,this),i+=".delegateEvents"+this.cid,s===""?this.$el.on(i,n):this.$el.on(i,s,n)}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_configure:function(e){this.options&&(e=u.extend({},u.result(this,"options"),e)),u.extend(this,u.pick(e,x)),this.options=e},_ensureElement:function(){if(!this.el){var e=u.extend({},u.result(this,"attributes"));this.id&&(e.id=u.result(this,"id")),this.className&&(e["class"]=u.result(this,"className"));var t=o.$("<"+u.result(this,"tagName")+">").attr(e);this.setElement(t,!1)}else this.setElement(u.result(this,"el"),!1)}}),o.sync=function(e,t,n){var r=T[e];u.defaults(n||(n={}),{emulateHTTP:o.emulateHTTP,emulateJSON:o.emulateJSON});var i={type:r,dataType:"json"};n.url||(i.url=u.result(t,"url")||B()),n.data==null&&t&&(e==="create"||e==="update"||e==="patch")&&(i.contentType="application/json",i.data=JSON.stringify(n.attrs||t.toJSON(n))),n.emulateJSON&&(i.contentType="application/x-www-form-urlencoded",i.data=i.data?{model:i.data}:{});if(n.emulateHTTP&&(r==="PUT"||r==="DELETE"||r==="PATCH")){i.type="POST",n.emulateJSON&&(i.data._method=r);var s=n.beforeSend;n.beforeSend=function(e){e.setRequestHeader("X-HTTP-Method-Override",r);if(s)return s.apply(this,arguments)}}i.type!=="GET"&&!n.emulateJSON&&(i.processData=!1),i.type==="PATCH"&&window.ActiveXObject&&(!window.external||!window.external.msActiveXFilteringEnabled)&&(i.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var a=n.xhr=o.ajax(u.extend(i,n));return t.trigger("request",t,a,n),a};var T={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};o.ajax=function(){return o.$.ajax.apply(o.$,arguments)};var N=o.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},C=/\((.*?)\)/g,k=/(\(\?)?:\w+/g,L=/\*\w+/g,A=/[\-{}\[\]+?.,\\\^$|#\s]/g;u.extend(N.prototype,a,{initialize:function(){},route:function(e,t,n){u.isRegExp(e)||(e=this._routeToRegExp(e)),u.isFunction(t)&&(n=t,t=""),n||(n=this[t]);var r=this;return o.history.route(e,function(i){var s=r._extractParameters(e,i);n&&n.apply(r,s),r.trigger.apply(r,["route:"+t].concat(s)),r.trigger("route",t,s),o.history.trigger("route",r,t,s)}),this},navigate:function(e,t){return o.history.navigate(e,t),this},_bindRoutes:function(){if(!this.routes)return;this.routes=u.result(this,"routes");var e,t=u.keys(this.routes);while((e=t.pop())!=null)this.route(e,this.routes[e])},_routeToRegExp:function(e){return e=e.replace(A,"\\$&").replace(C,"(?:$1)?").replace(k,function(e,t){return t?e:"([^/]+)"}).replace(L,"(.*?)"),new RegExp("^"+e+"$")},_extractParameters:function(e,t){var n=e.exec(t).slice(1);return u.map(n,function(e){return e?decodeURIComponent(e):null})}});var O=o.History=function(){this.handlers=[],u.bindAll(this,"checkUrl"),typeof window!="undefined"&&(this.location=window.location,this.history=window.history)},M=/^[#\/]|\s+$/g,_=/^\/+|\/+$/g,D=/msie [\w.]+/,P=/\/$/;O.started=!1,u.extend(O.prototype,a,{interval:50,getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getFragment:function(e,t){if(e==null)if(this._hasPushState||!this._wantsHashChange||t){e=this.location.pathname;var n=this.root.replace(P,"");e.indexOf(n)||(e=e.substr(n.length))}else e=this.getHash();return e.replace(M,"")},start:function(e){if(O.started)throw new Error("Backbone.history has already been started");O.started=!0,this.options=u.extend({},{root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var t=this.getFragment(),n=document.documentMode,r=D.exec(navigator.userAgent.toLowerCase())&&(!n||n<=7);this.root=("/"+this.root+"/").replace(_,"/"),r&&this._wantsHashChange&&(this.iframe=o.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(t)),this._hasPushState?o.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!r?o.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=t;var i=this.location,s=i.pathname.replace(/[^\/]$/,"$&/")===this.root;if(this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!s)return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0;this._wantsPushState&&this._hasPushState&&s&&i.hash&&(this.fragment=this.getHash().replace(M,""),this.history.replaceState({},document.title,this.root+this.fragment+i.search));if(!this.options.silent)return this.loadUrl()},stop:function(){o.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),O.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(e){var t=this.getFragment();t===this.fragment&&this.iframe&&(t=this.getFragment(this.getHash(this.iframe)));if(t===this.fragment)return!1;this.iframe&&this.navigate(t),this.loadUrl()||this.loadUrl(this.getHash())},loadUrl:function(e){var t=this.fragment=this.getFragment(e),n=u.any(this.handlers,function(e){if(e.route.test(t))return e.callback(t),!0});return n},navigate:function(e,t){if(!O.started)return!1;if(!t||t===!0)t={trigger:t};e=this.getFragment(e||"");if(this.fragment===e)return;this.fragment=e;var n=this.root+e;if(this._hasPushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getFragment(this.getHash(this.iframe))&&(t.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,e,t.replace))}t.trigger&&this.loadUrl(e)},_updateHash:function(e,t,n){if(n){var r=e.href.replace(/(javascript:|#).*$/,"");e.replace(r+"#"+t)}else e.hash="#"+t}}),o.history=new O;var H=function(e,t){var n=this,r;e&&u.has(e,"constructor")?r=e.constructor:r=function(){return n.apply(this,arguments)},u.extend(r,n,t);var i=function(){this.constructor=r};return i.prototype=n.prototype,r.prototype=new i,e&&u.extend(r.prototype,e),r.__super__=n.prototype,r};p.extend=m.extend=N.extend=E.extend=O.extend=H;var B=function(){throw new Error('A "url" property or function must be specified')},j=function(e,t){var n=t.error;t.error=function(r){n&&n(e,r,t),e.trigger("error",e,r,t)}}}.call(this),define("backbone",["underscore","jquery"],function(e){return function(){var t,n;return t||e.Backbone}}(this));var Handlebars={};Handlebars.VERSION="1.0.beta.6",Handlebars.helpers={},Handlebars.partials={},Handlebars.registerHelper=function(e,t,n){n&&(t.not=n),this.helpers[e]=t},Handlebars.registerPartial=function(e,t){this.partials[e]=t},Handlebars.registerHelper("helperMissing",function(e){if(arguments.length===2)return undefined;throw new Error("Could not find property '"+e+"'")});var toString=Object.prototype.toString,functionType="[object Function]";Handlebars.registerHelper("blockHelperMissing",function(e,t){var n=t.inverse||function(){},r=t.fn,i="",s=toString.call(e);s===functionType&&(e=e.call(this));if(e===!0)return r(this);if(e===!1||e==null)return n(this);if(s==="[object Array]"){if(e.length>0)for(var o=0,u=e.length;o<u;o++)i+=r(e[o]);else i=n(this);return i}return r(e)}),Handlebars.registerHelper("each",function(e,t){var n=t.fn,r=t.inverse,i="";if(e&&e.length>0)for(var s=0,o=e.length;s<o;s++)i+=n(e[s]);else i=r(this);return i}),Handlebars.registerHelper("if",function(e,t){var n=toString.call(e);return n===functionType&&(e=e.call(this)),!e||Handlebars.Utils.isEmpty(e)?t.inverse(this):t.fn(this)}),Handlebars.registerHelper("unless",function(e,t){var n=t.fn,r=t.inverse;return t.fn=r,t.inverse=n,Handlebars.helpers["if"].call(this,e,t)}),Handlebars.registerHelper("with",function(e,t){return t.fn(e)}),Handlebars.registerHelper("log",function(e){Handlebars.log(e)});var handlebars=function(){var e={trace:function(){},yy:{},symbols_:{error:2,root:3,program:4,EOF:5,statements:6,simpleInverse:7,statement:8,openInverse:9,closeBlock:10,openBlock:11,mustache:12,partial:13,CONTENT:14,COMMENT:15,OPEN_BLOCK:16,inMustache:17,CLOSE:18,OPEN_INVERSE:19,OPEN_ENDBLOCK:20,path:21,OPEN:22,OPEN_UNESCAPED:23,OPEN_PARTIAL:24,params:25,hash:26,param:27,STRING:28,INTEGER:29,BOOLEAN:30,hashSegments:31,hashSegment:32,ID:33,EQUALS:34,pathSegments:35,SEP:36,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"CONTENT",15:"COMMENT",16:"OPEN_BLOCK",18:"CLOSE",19:"OPEN_INVERSE",20:"OPEN_ENDBLOCK",22:"OPEN",23:"OPEN_UNESCAPED",24:"OPEN_PARTIAL",28:"STRING",29:"INTEGER",30:"BOOLEAN",33:"ID",34:"EQUALS",36:"SEP"},productions_:[0,[3,2],[4,3],[4,1],[4,0],[6,1],[6,2],[8,3],[8,3],[8,1],[8,1],[8,1],[8,1],[11,3],[9,3],[10,3],[12,3],[12,3],[13,3],[13,4],[7,2],[17,3],[17,2],[17,2],[17,1],[25,2],[25,1],[27,1],[27,1],[27,1],[27,1],[26,1],[31,2],[31,1],[32,3],[32,3],[32,3],[32,3],[21,1],[35,3],[35,1]],performAction:function(t,n,r,i,s,o,u){var a=o.length-1;switch(s){case 1:return o[a-1];case 2:this.$=new i.ProgramNode(o[a-2],o[a]);break;case 3:this.$=new i.ProgramNode(o[a]);break;case 4:this.$=new i.ProgramNode([]);break;case 5:this.$=[o[a]];break;case 6:o[a-1].push(o[a]),this.$=o[a-1];break;case 7:this.$=new i.InverseNode(o[a-2],o[a-1],o[a]);break;case 8:this.$=new i.BlockNode(o[a-2],o[a-1],o[a]);break;case 9:this.$=o[a];break;case 10:this.$=o[a];break;case 11:this.$=new i.ContentNode(o[a]);break;case 12:this.$=new i.CommentNode(o[a]);break;case 13:this.$=new i.MustacheNode(o[a-1][0],o[a-1][1]);break;case 14:this.$=new i.MustacheNode(o[a-1][0],o[a-1][1]);break;case 15:this.$=o[a-1];break;case 16:this.$=new i.MustacheNode(o[a-1][0],o[a-1][1]);break;case 17:this.$=new i.MustacheNode(o[a-1][0],o[a-1][1],!0);break;case 18:this.$=new i.PartialNode(o[a-1]);break;case 19:this.$=new i.PartialNode(o[a-2],o[a-1]);break;case 20:break;case 21:this.$=[[o[a-2]].concat(o[a-1]),o[a]];break;case 22:this.$=[[o[a-1]].concat(o[a]),null];break;case 23:this.$=[[o[a-1]],o[a]];break;case 24:this.$=[[o[a]],null];break;case 25:o[a-1].push(o[a]),this.$=o[a-1];break;case 26:this.$=[o[a]];break;case 27:this.$=o[a];break;case 28:this.$=new i.StringNode(o[a]);break;case 29:this.$=new i.IntegerNode(o[a]);break;case 30:this.$=new i.BooleanNode(o[a]);break;case 31:this.$=new i.HashNode(o[a]);break;case 32:o[a-1].push(o[a]),this.$=o[a-1];break;case 33:this.$=[o[a]];break;case 34:this.$=[o[a-2],o[a]];break;case 35:this.$=[o[a-2],new i.StringNode(o[a])];break;case 36:this.$=[o[a-2],new i.IntegerNode(o[a])];break;case 37:this.$=[o[a-2],new i.BooleanNode(o[a])];break;case 38:this.$=new i.IdNode(o[a]);break;case 39:o[a-2].push(o[a]),this.$=o[a-2];break;case 40:this.$=[o[a]]}},table:[{3:1,4:2,5:[2,4],6:3,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],24:[1,15]},{1:[3]},{5:[1,16]},{5:[2,3],7:17,8:18,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,19],20:[2,3],22:[1,13],23:[1,14],24:[1,15]},{5:[2,5],14:[2,5],15:[2,5],16:[2,5],19:[2,5],20:[2,5],22:[2,5],23:[2,5],24:[2,5]},{4:20,6:3,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,4],22:[1,13],23:[1,14],24:[1,15]},{4:21,6:3,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,4],22:[1,13],23:[1,14],24:[1,15]},{5:[2,9],14:[2,9],15:[2,9],16:[2,9],19:[2,9],20:[2,9],22:[2,9],23:[2,9],24:[2,9]},{5:[2,10],14:[2,10],15:[2,10],16:[2,10],19:[2,10],20:[2,10],22:[2,10],23:[2,10],24:[2,10]},{5:[2,11],14:[2,11],15:[2,11],16:[2,11],19:[2,11],20:[2,11],22:[2,11],23:[2,11],24:[2,11]},{5:[2,12],14:[2,12],15:[2,12],16:[2,12],19:[2,12],20:[2,12],22:[2,12],23:[2,12],24:[2,12]},{17:22,21:23,33:[1,25],35:24},{17:26,21:23,33:[1,25],35:24},{17:27,21:23,33:[1,25],35:24},{17:28,21:23,33:[1,25],35:24},{21:29,33:[1,25],35:24},{1:[2,1]},{6:30,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],24:[1,15]},{5:[2,6],14:[2,6],15:[2,6],16:[2,6],19:[2,6],20:[2,6],22:[2,6],23:[2,6],24:[2,6]},{17:22,18:[1,31],21:23,33:[1,25],35:24},{10:32,20:[1,33]},{10:34,20:[1,33]},{18:[1,35]},{18:[2,24],21:40,25:36,26:37,27:38,28:[1,41],29:[1,42],30:[1,43],31:39,32:44,33:[1,45],35:24},{18:[2,38],28:[2,38],29:[2,38],30:[2,38],33:[2,38],36:[1,46]},{18:[2,40],28:[2,40],29:[2,40],30:[2,40],33:[2,40],36:[2,40]},{18:[1,47]},{18:[1,48]},{18:[1,49]},{18:[1,50],21:51,33:[1,25],35:24},{5:[2,2],8:18,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,2],22:[1,13],23:[1,14],24:[1,15]},{14:[2,20],15:[2,20],16:[2,20],19:[2,20],22:[2,20],23:[2,20],24:[2,20]},{5:[2,7],14:[2,7],15:[2,7],16:[2,7],19:[2,7],20:[2,7],22:[2,7],23:[2,7],24:[2,7]},{21:52,33:[1,25],35:24},{5:[2,8],14:[2,8],15:[2,8],16:[2,8],19:[2,8],20:[2,8],22:[2,8],23:[2,8],24:[2,8]},{14:[2,14],15:[2,14],16:[2,14],19:[2,14],20:[2,14],22:[2,14],23:[2,14],24:[2,14]},{18:[2,22],21:40,26:53,27:54,28:[1,41],29:[1,42],30:[1,43],31:39,32:44,33:[1,45],35:24},{18:[2,23]},{18:[2,26],28:[2,26],29:[2,26],30:[2,26],33:[2,26]},{18:[2,31],32:55,33:[1,56]},{18:[2,27],28:[2,27],29:[2,27],30:[2,27],33:[2,27]},{18:[2,28],28:[2,28],29:[2,28],30:[2,28],33:[2,28]},{18:[2,29],28:[2,29],29:[2,29],30:[2,29],33:[2,29]},{18:[2,30],28:[2,30],29:[2,30],30:[2,30],33:[2,30]},{18:[2,33],33:[2,33]},{18:[2,40],28:[2,40],29:[2,40],30:[2,40],33:[2,40],34:[1,57],36:[2,40]},{33:[1,58]},{14:[2,13],15:[2,13],16:[2,13],19:[2,13],20:[2,13],22:[2,13],23:[2,13],24:[2,13]},{5:[2,16],14:[2,16],15:[2,16],16:[2,16],19:[2,16],20:[2,16],22:[2,16],23:[2,16],24:[2,16]},{5:[2,17],14:[2,17],15:[2,17],16:[2,17],19:[2,17],20:[2,17],22:[2,17],23:[2,17],24:[2,17]},{5:[2,18],14:[2,18],15:[2,18],16:[2,18],19:[2,18],20:[2,18],22:[2,18],23:[2,18],24:[2,18]},{18:[1,59]},{18:[1,60]},{18:[2,21]},{18:[2,25],28:[2,25],29:[2,25],30:[2,25],33:[2,25]},{18:[2,32],33:[2,32]},{34:[1,57]},{21:61,28:[1,62],29:[1,63],30:[1,64],33:[1,25],35:24},{18:[2,39],28:[2,39],29:[2,39],30:[2,39],33:[2,39],36:[2,39]},{5:[2,19],14:[2,19],15:[2,19],16:[2,19],19:[2,19],20:[2,19],22:[2,19],23:[2,19],24:[2,19]},{5:[2,15],14:[2,15],15:[2,15],16:[2,15],19:[2,15],20:[2,15],22:[2,15],23:[2,15],24:[2,15]},{18:[2,34],33:[2,34]},{18:[2,35],33:[2,35]},{18:[2,36],33:[2,36]},{18:[2,37],33:[2,37]}],defaultActions:{16:[2,1],37:[2,23],53:[2,21]},parseError:function(t,n){throw new Error(t)},parse:function(t){function d(e){r.length=r.length-2*e,i.length=i.length-e,s.length=s.length-e}function v(){var e;return e=n.lexer.lex()||1,typeof e!="number"&&(e=n.symbols_[e]||e),e}var n=this,r=[0],i=[null],s=[],o=this.table,u="",a=0,f=0,l=0,c=2,h=1;this.lexer.setInput(t),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,typeof this.lexer.yylloc=="undefined"&&(this.lexer.yylloc={});var p=this.lexer.yylloc;s.push(p),typeof this.yy.parseError=="function"&&(this.parseError=this.yy.parseError);var m,g,y,b,w,E,S={},x,T,N,C;for(;;){y=r[r.length-1],this.defaultActions[y]?b=this.defaultActions[y]:(m==null&&(m=v()),b=o[y]&&o[y][m]);if(typeof b=="undefined"||!b.length||!b[0])if(!l){C=[];for(x in o[y])this.terminals_[x]&&x>2&&C.push("'"+this.terminals_[x]+"'");var k="";this.lexer.showPosition?k="Parse error on line "+(a+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+C.join(", ")+", got '"+this.terminals_[m]+"'":k="Parse error on line "+(a+1)+": Unexpected "+(m==1?"end of input":"'"+(this.terminals_[m]||m)+"'"),this.parseError(k,{text:this.lexer.match,token:this.terminals_[m]||m,line:this.lexer.yylineno,loc:p,expected:C})}if(b[0]instanceof Array&&b.length>1)throw new Error("Parse Error: multiple actions possible at state: "+y+", token: "+m);switch(b[0]){case 1:r.push(m),i.push(this.lexer.yytext),s.push(this.lexer.yylloc),r.push(b[1]),m=null,g?(m=g,g=null):(f=this.lexer.yyleng,u=this.lexer.yytext,a=this.lexer.yylineno,p=this.lexer.yylloc,l>0&&l--);break;case 2:T=this.productions_[b[1]][1],S.$=i[i.length-T],S._$={first_line:s[s.length-(T||1)].first_line,last_line:s[s.length-1].last_line,first_column:s[s.length-(T||1)].first_column,last_column:s[s.length-1].last_column},E=this.performAction.call(S,u,f,a,this.yy,b[1],i,s);if(typeof E!="undefined")return E;T&&(r=r.slice(0,-1*T*2),i=i.slice(0,-1*T),s=s.slice(0,-1*T)),r.push(this.productions_[b[1]][0]),i.push(S.$),s.push(S._$),N=o[r[r.length-2]][r[r.length-1]],r.push(N);break;case 3:return!0}}return!0}},t=function(){var e={EOF:1,parseError:function(t,n){if(!this.yy.parseError)throw new Error(t);this.yy.parseError(t,n)},setInput:function(e){return this._input=e,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this},input:function(){var e=this._input[0];this.yytext+=e,this.yyleng++,this.match+=e,this.matched+=e;var t=e.match(/\n/);return t&&this.yylineno++,this._input=this._input.slice(1),e},unput:function(e){return this._input=e+this._input,this},more:function(){return this._more=!0,this},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=(new Array(e.length+1)).join("-");return e+this.upcomingInput()+"\n"+t+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var e,t,n,r;this._more||(this.yytext="",this.match="");var i=this._currentRules();for(var s=0;s<i.length;s++){t=this._input.match(this.rules[i[s]]);if(t){r=t[0].match(/\n.*/g),r&&(this.yylineno+=r.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:r?r[r.length-1].length-1:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this._more=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],e=this.performAction.call(this,this.yy,this,i[s],this.conditionStack[this.conditionStack.length-1]);if(e)return e;return}}if(this._input==="")return this.EOF;this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var t=this.next();return typeof t!="undefined"?t:this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(t){this.begin(t)}};return e.performAction=function(t,n,r,i){var s=i;switch(r){case 0:n.yytext.slice(-1)!=="\\"&&this.begin("mu"),n.yytext.slice(-1)==="\\"&&(n.yytext=n.yytext.substr(0,n.yyleng-1),this.begin("emu"));if(n.yytext)return 14;break;case 1:return 14;case 2:return this.popState(),14;case 3:return 24;case 4:return 16;case 5:return 20;case 6:return 19;case 7:return 19;case 8:return 23;case 9:return 23;case 10:return n.yytext=n.yytext.substr(3,n.yyleng-5),this.popState(),15;case 11:return 22;case 12:return 34;case 13:return 33;case 14:return 33;case 15:return 36;case 16:break;case 17:return this.popState(),18;case 18:return this.popState(),18;case 19:return n.yytext=n.yytext.substr(1,n.yyleng-2).replace(/\\"/g,'"'),28;case 20:return 30;case 21:return 30;case 22:return 29;case 23:return 33;case 24:return n.yytext=n.yytext.substr(1,n.yyleng-2),33;case 25:return"INVALID";case 26:return 5}},e.rules=[/^[^\x00]*?(?=(\{\{))/,/^[^\x00]+/,/^[^\x00]{2,}?(?=(\{\{))/,/^\{\{>/,/^\{\{#/,/^\{\{\//,/^\{\{\^/,/^\{\{\s*else\b/,/^\{\{\{/,/^\{\{&/,/^\{\{![\s\S]*?\}\}/,/^\{\{/,/^=/,/^\.(?=[} ])/,/^\.\./,/^[\/.]/,/^\s+/,/^\}\}\}/,/^\}\}/,/^"(\\["]|[^"])*"/,/^true(?=[}\s])/,/^false(?=[}\s])/,/^[0-9]+(?=[}\s])/,/^[a-zA-Z0-9_$-]+(?=[=}\s\/.])/,/^\[[^\]]*\]/,/^./,/^$/],e.conditions={mu:{rules:[3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26],inclusive:!1},emu:{rules:[2],inclusive:!1},INITIAL:{rules:[0,1,26],inclusive:!0}},e}();return e.lexer=t,e}();typeof require!="undefined"&&typeof exports!="undefined"&&(exports.parser=handlebars,exports.parse=function(){return handlebars.parse.apply(handlebars,arguments)},exports.main=function(t){if(!t[1])throw new Error("Usage: "+t[0]+" FILE");if(typeof process!="undefined")var n=require("fs").readFileSync(require("path").join(process.cwd(),t[1]),"utf8");else var r=require("file").path(require("file").cwd()),n=r.join(t[1]).read({charset:"utf-8"});return exports.parser.parse(n)},typeof module!="undefined"&&require.main===module&&exports.main(typeof process!="undefined"?process.argv.slice(1):require("system").args)),Handlebars.Parser=handlebars,Handlebars.parse=function(e){return Handlebars.Parser.yy=Handlebars.AST,Handlebars.Parser.parse(e)},Handlebars.print=function(e){return(new Handlebars.PrintVisitor).accept(e)},Handlebars.logger={DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,log:function(e,t){}},Handlebars.log=function(e,t){Handlebars.logger.log(e,t)},function(){Handlebars.AST={},Handlebars.AST.ProgramNode=function(e,t){this.type="program",this.statements=e,t&&(this.inverse=new Handlebars.AST.ProgramNode(t))},Handlebars.AST.MustacheNode=function(e,t,n){this.type="mustache",this.id=e[0],this.params=e.slice(1),this.hash=t,this.escaped=!n},Handlebars.AST.PartialNode=function(e,t){this.type="partial",this.id=e,this.context=t};var e=function(e,t){if(e.original!==t.original)throw new Handlebars.Exception(e.original+" doesn't match "+t.original)};Handlebars.AST.BlockNode=function(t,n,r){e(t.id,r),this.type="block",this.mustache=t,this.program=n},Handlebars.AST.InverseNode=function(t,n,r){e(t.id,r),this.type="inverse",this.mustache=t,this.program=n},Handlebars.AST.ContentNode=function(e){this.type="content",this.string=e},Handlebars.AST.HashNode=function(e){this.type="hash",this.pairs=e},Handlebars.AST.IdNode=function(e){this.type="ID",this.original=e.join(".");var t=[],n=0;for(var r=0,i=e.length;r<i;r++){var s=e[r];s===".."?n++:s==="."||s==="this"?this.isScoped=!0:t.push(s)}this.parts=t,this.string=t.join("."),this.depth=n,this.isSimple=t.length===1&&n===0},Handlebars.AST.StringNode=function(e){this.type="STRING",this.string=e},Handlebars.AST.IntegerNode=function(e){this.type="INTEGER",this.integer=e},Handlebars.AST.BooleanNode=function(e){this.type="BOOLEAN",this.bool=e},Handlebars.AST.CommentNode=function(e){this.type="comment",this.comment=e}}(),Handlebars.Exception=function(e){var t=Error.prototype.constructor.apply(this,arguments);for(var n in t)t.hasOwnProperty(n)&&(this[n]=t[n]);this.message=t.message},Handlebars.Exception.prototype=new Error,Handlebars.SafeString=function(e){this.string=e},Handlebars.SafeString.prototype.toString=function(){return this.string.toString()},function(){var e={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},t=/&(?!\w+;)|[<>"'`]/g,n=/[&<>"'`]/,r=function(t){return e[t]||"&amp;"};Handlebars.Utils={escapeExpression:function(e){return e instanceof Handlebars.SafeString?e.toString():e==null||e===!1?"":n.test(e)?e.replace(t,r):e},isEmpty:function(e){return typeof e=="undefined"?!0:e===null?!0:e===!1?!0:Object.prototype.toString.call(e)==="[object Array]"&&e.length===0?!0:!1}}}(),Handlebars.Compiler=function(){},Handlebars.JavaScriptCompiler=function(){},function(e,t){e.OPCODE_MAP={appendContent:1,getContext:2,lookupWithHelpers:3,lookup:4,append:5,invokeMustache:6,appendEscaped:7,pushString:8,truthyOrFallback:9,functionOrFallback:10,invokeProgram:11,invokePartial:12,push:13,assignToHash:15,pushStringParam:16},e.MULTI_PARAM_OPCODES={appendContent:1,getContext:1,lookupWithHelpers:2,lookup:1,invokeMustache:3,pushString:1,truthyOrFallback:1,functionOrFallback:1,invokeProgram:3,invokePartial:1,push:1,assignToHash:1,pushStringParam:1},e.DISASSEMBLE_MAP={};for(var n in e.OPCODE_MAP){var r=e.OPCODE_MAP[n];e.DISASSEMBLE_MAP[r]=n}e.multiParamSize=function(t){return e.MULTI_PARAM_OPCODES[e.DISASSEMBLE_MAP[t]]},e.prototype={compiler:e,disassemble:function(){var t=this.opcodes,n,r,i=[],s,o,u;for(var a=0,f=t.length;a<f;a++){n=t[a];if(n==="DECLARE")o=t[++a],u=t[++a],i.push("DECLARE "+o+" = "+u);else{s=e.DISASSEMBLE_MAP[n];var l=e.multiParamSize(n),c=[];for(var h=0;h<l;h++)r=t[++a],typeof r=="string"&&(r='"'+r.replace("\n","\\n")+'"'),c.push(r);s=s+" "+c.join(" "),i.push(s)}}return i.join("\n")},guid:0,compile:function(e,t){this.children=[],this.depths={list:[]},this.options=t;var n=this.options.knownHelpers;this.options.knownHelpers={helperMissing:!0,blockHelperMissing:!0,each:!0,"if":!0,unless:!0,"with":!0,log:!0};if(n)for(var r in n)this.options.knownHelpers[r]=n[r];return this.program(e)},accept:function(e){return this[e.type](e)},program:function(e){var t=e.statements,n;this.opcodes=[];for(var r=0,i=t.length;r<i;r++)n=t[r],this[n.type](n);return this.isSimple=i===1,this.depths.list=this.depths.list.sort(function(e,t){return e-t}),this},compileProgram:function(e){var t=(new this.compiler).compile(e,this.options),n=this.guid++;this.usePartial=this.usePartial||t.usePartial,this.children[n]=t;for(var r=0,i=t.depths.list.length;r<i;r++){depth=t.depths.list[r];if(depth<2)continue;this.addDepth(depth-1)}return n},block:function(e){var t=e.mustache,n,r,i,s,o=this.setupStackForMustache(t),u=this.compileProgram(e.program);e.program.inverse&&(s=this.compileProgram(e.program.inverse),this.declare("inverse",s)),this.opcode("invokeProgram",u,o.length,!!t.hash),this.declare("inverse",null),this.opcode("append")},inverse:function(e){var t=this.setupStackForMustache(e.mustache),n=this.compileProgram(e.program);this.declare("inverse",n),this.opcode("invokeProgram",null,t.length,!!e.mustache.hash),this.declare("inverse",null),this.opcode("append")},hash:function(e){var t=e.pairs,n,r;this.opcode("push","{}");for(var i=0,s=t.length;i<s;i++)n=t[i],r=n[1],this.accept(r),this.opcode("assignToHash",n[0])},partial:function(e){var t=e.id;this.usePartial=!0,e.context?this.ID(e.context):this.opcode("push","depth0"),this.opcode("invokePartial",t.original),this.opcode("append")},content:function(e){this.opcode("appendContent",e.string)},mustache:function(e){var t=this.setupStackForMustache(e);this.opcode("invokeMustache",t.length,e.id.original,!!e.hash),e.escaped&&!this.options.noEscape?this.opcode("appendEscaped"):this.opcode("append")},ID:function(e){this.addDepth(e.depth),this.opcode("getContext",e.depth),this.opcode("lookupWithHelpers",e.parts[0]||null,e.isScoped||!1);for(var t=1,n=e.parts.length;t<n;t++)this.opcode("lookup",e.parts[t])},STRING:function(e){this.opcode("pushString",e.string)},INTEGER:function(e){this.opcode("push",e.integer)},BOOLEAN:function(e){this.opcode("push",e.bool)},comment:function(){},pushParams:function(e){var t=e.length,n;while(t--)n=e[t],this.options.stringParams?(n.depth&&this.addDepth(n.depth),this.opcode("getContext",n.depth||0),this.opcode("pushStringParam",n.string)):this[n.type](n)},opcode:function(t,n,r,i){this.opcodes.push(e.OPCODE_MAP[t]),n!==undefined&&this.opcodes.push(n),r!==undefined&&this.opcodes.push(r),i!==undefined&&this.opcodes.push(i)},declare:function(e,t){this.opcodes.push("DECLARE"),this.opcodes.push(e),this.opcodes.push(t)},addDepth:function(e){if(e===0)return;this.depths[e]||(this.depths[e]=!0,this.depths.list.push(e))},setupStackForMustache:function(e){var t=e.params;return this.pushParams(t),e.hash&&this.hash(e.hash),this.ID(e.id),t}},t.prototype={nameLookup:function(e,n,r){return/^[0-9]+$/.test(n)?e+"["+n+"]":t.isValidJavaScriptVariableName(n)?e+"."+n:e+"['"+n+"']"},appendToBuffer:function(e){return this.environment.isSimple?"return "+e+";":"buffer += "+e+";"},initializeBuffer:function(){return this.quotedString("")},namespace:"Handlebars",compile:function(e,t,n,r){this.environment=e,this.options=t||{},this.name=this.environment.name,this.isChild=!!n,this.context=n||{programs:[],aliases:{self:"this"},registers:{list:[]}},this.preamble(),this.stackSlot=0,this.stackVars=[],this.compileChildren(e,t);var i=e.opcodes,s;this.i=0;for(u=i.length;this.i<u;this.i++)s=this.nextOpcode(0),s[0]==="DECLARE"?(this.i=this.i+2,this[s[1]]=s[2]):(this.i=this.i+s[1].length,this[s[0]].apply(this,s[1]));return this.createFunctionContext(r)},nextOpcode:function(t){var n=this.environment.opcodes,r=n[this.i+t],i,s,o,u;if(r==="DECLARE")return i=n[this.i+1],s=n[this.i+2],["DECLARE",i,s];i=e.DISASSEMBLE_MAP[r],o=e.multiParamSize(r),u=[];for(var a=0;a<o;a++)u.push(n[this.i+a+1+t]);return[i,u]},eat:function(e){this.i=this.i+e.length},preamble:function(){var e=[];this.useRegister("foundHelper");if(!this.isChild){var t=this.namespace,n="helpers = helpers || "+t+".helpers;";this.environment.usePartial&&(n=n+" partials = partials || "+t+".partials;"),e.push(n)}else e.push("");this.environment.isSimple?e.push(""):e.push(", buffer = "+this.initializeBuffer()),this.lastContext=0,this.source=e},createFunctionContext:function(e){var t=this.stackVars;this.isChild||(t=t.concat(this.context.registers.list)),t.length>0&&(this.source[1]=this.source[1]+", "+t.join(", "));if(!this.isChild){var n=[];for(var r in this.context.aliases)this.source[1]=this.source[1]+", "+r+"="+this.context.aliases[r]}this.source[1]&&(this.source[1]="var "+this.source[1].substring(2)+";"),this.isChild||(this.source[1]+="\n"+this.context.programs.join("\n")+"\n"),this.environment.isSimple||this.source.push("return buffer;");var i=this.isChild?["depth0","data"]:["Handlebars","depth0","helpers","partials","data"];for(var s=0,o=this.environment.depths.list.length;s<o;s++)i.push("depth"+this.environment.depths.list[s]);if(e)return i.push(this.source.join("\n  ")),Function.apply(this,i);var u="function "+(this.name||"")+"("+i.join(",")+") {\n  "+this.source.join("\n  ")+"}";return Handlebars.log(Handlebars.logger.DEBUG,u+"\n\n"),u},appendContent:function(e){this.source.push(this.appendToBuffer(this.quotedString(e)))},append:function(){var e=this.popStack();this.source.push("if("+e+" || "+e+" === 0) { "+this.appendToBuffer(e)+" }"),this.environment.isSimple&&this.source.push("else { "+this.appendToBuffer("''")+" }")},appendEscaped:function(){var e=this.nextOpcode(1),t="";this.context.aliases.escapeExpression="this.escapeExpression",e[0]==="appendContent"&&(t=" + "+this.quotedString(e[1][0]),this.eat(e)),this.source.push(this.appendToBuffer("escapeExpression("+this.popStack()+")"+t))},getContext:function(e){this.lastContext!==e&&(this.lastContext=e)},lookupWithHelpers:function(e,t){if(e){var n=this.nextStack();this.usingKnownHelper=!1;var r;!t&&this.options.knownHelpers[e]?(r=n+" = "+this.nameLookup("helpers",e,"helper"),this.usingKnownHelper=!0):t||this.options.knownHelpersOnly?r=n+" = "+this.nameLookup("depth"+this.lastContext,e,"context"):(this.register("foundHelper",this.nameLookup("helpers",e,"helper")),r=n+" = foundHelper || "+this.nameLookup("depth"+this.lastContext,e,"context")),r+=";",this.source.push(r)}else this.pushStack("depth"+this.lastContext)},lookup:function(e){var t=this.topStack();this.source.push(t+" = ("+t+" === null || "+t+" === undefined || "+t+" === false ? "+t+" : "+this.nameLookup(t,e,"context")+");")},pushStringParam:function(e){this.pushStack("depth"+this.lastContext),this.pushString(e)},pushString:function(e){this.pushStack(this.quotedString(e))},push:function(e){this.pushStack(e)},invokeMustache:function(e,t,n){this.populateParams(e,this.quotedString(t),"{}",null,n,function(e,t,n){this.usingKnownHelper||(this.context.aliases.helperMissing="helpers.helperMissing",this.context.aliases.undef="void 0",this.source.push("else if("+n+"=== undef) { "+e+" = helperMissing.call("+t+"); }"),e!==n&&this.source.push("else { "+e+" = "+n+"; }"))})},invokeProgram:function(e,t,n){var r=this.programExpression(this.inverse),i=this.programExpression(e);this.populateParams(t,null,i,r,n,function(e,t,n){this.usingKnownHelper||(this.context.aliases.blockHelperMissing="helpers.blockHelperMissing",this.source.push("else { "+e+" = blockHelperMissing.call("+t+"); }"))})},populateParams:function(e,t,n,r,i,s){var o=i||this.options.stringParams||r||this.options.data,u=this.popStack(),a,f=[],l,c,h;o?(this.register("tmp1",n),h="tmp1"):h="{ hash: {} }";if(o){var p=i?this.popStack():"{}";this.source.push("tmp1.hash = "+p+";")}this.options.stringParams&&this.source.push("tmp1.contexts = [];");for(var d=0;d<e;d++)l=this.popStack(),f.push(l),this.options.stringParams&&this.source.push("tmp1.contexts.push("+this.popStack()+");");r&&(this.source.push("tmp1.fn = tmp1;"),this.source.push("tmp1.inverse = "+r+";")),this.options.data&&this.source.push("tmp1.data = data;"),f.push(h),this.populateCall(f,u,t||u,s,n!=="{}")},populateCall:function(e,t,n,r,i){var s=["depth0"].concat(e).join(", "),o=["depth0"].concat(n).concat(e).join(", "),u=this.nextStack();if(this.usingKnownHelper)this.source.push(u+" = "+t+".call("+s+");");else{this.context.aliases.functionType='"function"';var a=i?"foundHelper && ":"";this.source.push("if("+a+"typeof "+t+" === functionType) { "+u+" = "+t+".call("+s+"); }")}r.call(this,u,o,t),this.usingKnownHelper=!1},invokePartial:function(e){params=[this.nameLookup("partials",e,"partial"),"'"+e+"'",this.popStack(),"helpers","partials"],this.options.data&&params.push("data"),this.pushStack("self.invokePartial("+params.join(", ")+");")},assignToHash:function(e){var t=this.popStack(),n=this.topStack();this.source.push(n+"['"+e+"'] = "+t+";")},compiler:t,compileChildren:function(e,t){var n=e.children,r,i;for(var s=0,o=n.length;s<o;s++){r=n[s],i=new this.compiler,this.context.programs.push("");var u=this.context.programs.length;r.index=u,r.name="program"+u,this.context.programs[u]=i.compile(r,t,this.context)}},programExpression:function(e){if(e==null)return"self.noop";var t=this.environment.children[e],n=t.depths.list,r=[t.index,t.name,"data"];for(var i=0,s=n.length;i<s;i++)depth=n[i],depth===1?r.push("depth0"):r.push("depth"+(depth-1));return n.length===0?"self.program("+r.join(", ")+")":(r.shift(),"self.programWithDepth("+r.join(", ")+")")},register:function(e,t){this.useRegister(e),this.source.push(e+" = "+t+";")},useRegister:function(e){this.context.registers[e]||(this.context.registers[e]=!0,this.context.registers.list.push(e))},pushStack:function(e){return this.source.push(this.nextStack()+" = "+e+";"),"stack"+this.stackSlot},nextStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),"stack"+this.stackSlot},popStack:function(){return"stack"+this.stackSlot--},topStack:function(){return"stack"+this.stackSlot},quotedString:function(e){return'"'+e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r")+'"'}};var i="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield".split(" "),s=t.RESERVED_WORDS={};for(var o=0,u=i.length;o<u;o++)s[i[o]]=!0;t.isValidJavaScriptVariableName=function(e){return!t.RESERVED_WORDS[e]&&/^[a-zA-Z_$][0-9a-zA-Z_$]+$/.test(e)?!0:!1}}(Handlebars.Compiler,Handlebars.JavaScriptCompiler),Handlebars.precompile=function(e,t){t=t||{};var n=Handlebars.parse(e),r=(new Handlebars.Compiler).compile(n,t);return(new Handlebars.JavaScriptCompiler).compile(r,t)},Handlebars.compile=function(e,t){function r(){var n=Handlebars.parse(e),r=(new Handlebars.Compiler).compile(n,t),i=(new Handlebars.JavaScriptCompiler).compile(r,t,undefined,!0);return Handlebars.template(i)}t=t||{};var n;return function(e,t){return n||(n=r()),n.call(this,e,t)}},Handlebars.VM={template:function(e){var t={escapeExpression:Handlebars.Utils.escapeExpression,invokePartial:Handlebars.VM.invokePartial,programs:[],program:function(e,t,n){var r=this.programs[e];return n?Handlebars.VM.program(t,n):r?r:(r=this.programs[e]=Handlebars.VM.program(t),r)},programWithDepth:Handlebars.VM.programWithDepth,noop:Handlebars.VM.noop};return function(n,r){return r=r||{},e.call(t,Handlebars,n,r.helpers,r.partials,r.data)}},programWithDepth:function(e,t,n){var r=Array.prototype.slice.call(arguments,2);return function(n,i){return i=i||{},e.apply(this,[n,i.data||t].concat(r))}},program:function(e,t){return function(n,r){return r=r||{},e(n,r.data||t)}},noop:function(){return""},invokePartial:function(e,t,n,r,i,s){options={helpers:r,partials:i,data:s};if(e===undefined)throw new Handlebars.Exception("The partial "+t+" could not be found");if(e instanceof Function)return e(n,options);if(!Handlebars.compile)throw new Handlebars.Exception("The partial "+t+" could not be compiled when running in runtime-only mode");return i[t]=Handlebars.compile(e),i[t](n,options)}},Handlebars.template=Handlebars.VM.template,define("handlebars",function(e){return function(){var t,n;return t||e.Handlebars}}(this)),function(e){var t,n=e.Backbone,r=e._,i=n.$,s=n.View.prototype._configure,o=n.View.prototype.render,u=Array.prototype.push,a=Array.prototype.concat,f=Array.prototype.splice,l=n.View.extend({constructor:function(t){t=t||{},l.setupView(this,t),n.View.call(this,t)},insertView:function(e,t){return t?this.setView(e,t,!0):this.setView(e,!0)},insertViews:function(e){return r.isArray(e)?this.setViews({"":e}):(r.each(e,function(t,n){e[n]=r.isArray(t)?t:[t]}),this.setViews(e))},getView:function(e){return e==null&&(e=arguments[1]),this.getViews(e).first().value()},getViews:function(e){var t=r.chain(this.views).map(function(e){return r.isArray(e)?e:[e]},this).flatten().value();return typeof e=="string"?r.chain([this.views[e]]).flatten():typeof e=="object"?r.chain([r.where(t,e)]).flatten():r.chain(typeof e=="function"?r.filter(t,e):t)},removeView:function(e){return this.getViews(e).each(function(e){e.remove()})},setView:function(e,t,n){var i,s,o,u=this;typeof e!="string"&&(n=t,t=e,e=""),this.views=this.views||{},i=t.__manager__,s=this.views[e];if(!i)throw new Error("Please set `View#manage` property with selector '"+e+"' to `true`.");return o=t.getAllOptions(),i.parent=u,i.selector=e,t.on("all",function(e){e!=="beforeRender"&&e!=="afterRender"&&u.trigger.apply(u,arguments)},t),n?(this.views[e]=a.call([],s||[],t),i.insert=!0,t):(i.hasRendered&&o.partial(u.$el,t.$el,u.__manager__,i),s&&r.each(a.call([],s),function(e){e.remove()}),this.views[e]=t)},setViews:function(e){return r.each(e,function(e,t){if(r.isArray(e))return r.each(e,function(e){this.insertView(t,e)},this);this.setView(t,e)},this),this},render:function(){function a(){function a(){var n=t.afterRender;n&&n.call(e,e),e.trigger("afterRender",e)}var r,u;return i&&(t.contains(i.el,e.el)||t.partial(i.$el,e.$el,s,n)),e.delegateEvents(),n.hasRendered=!0,(r=n.queue.shift())?r():delete n.queue,s&&s.queue?i.once("afterRender",a):a(),o.resolveWith(e,[e])}function f(){var t=e.getAllOptions(),n=e.__manager__,i=n.parent,s=i&&i.__manager__;e._render(l._viewRender,t).done(function(){if(!r.keys(e.views).length)return a();var n=r.map(e.views,function(e){var t=r.isArray(e);return t&&e.length?r.reduce(e.slice(1),function(e,t){return e.then(function(){return t.render()})},e[0].render()):t?e:e.render()});t.when(n).done(a)})}var e=this,t=e.getAllOptions(),n=e.__manager__,i=n.parent,s=i&&i.__manager__,o=t.deferred();return n.queue?u.call(n.queue,f):(n.queue=[],f(e,o)),o.view=e,o},remove:function(){return l._removeView(this,!0),this._remove.apply(this,arguments)},getAllOptions:function(){return r.extend({},this,l.prototype.options,this.options)}},{_cache:{},_makeAsync:function(e,t){var n=e.deferred();return n.async=function(){return n._isAsync=!0,t},n},_viewRender:function(e,t){function f(n){n&&(a.noel?(u=i(n),e.$el.slice(1).remove(),e.$el.replaceWith(u),e.setElement(u,!1)):t.html(e.$el,n)),o.resolveWith(e,[e])}function c(e,r){var i,s=l._makeAsync(t,function(e){f(e)});l.cache(n,r),r&&(i=t.render.call(s,r,e)),s._isAsync||f(i)}var n,s,o,u,a=e.__manager__;return{render:function(){var i=e.serialize||t.serialize,u=e.template||t.template;return r.isFunction(i)&&(i=i.call(e)),o=l._makeAsync(t,function(e){c(i,e)}),typeof u=="string"&&(n=t.prefix+u),(s=l.cache(n))?(c(i,s,n),o):(typeof u=="string"?s=t.fetch.call(o,t.prefix+u):typeof u=="function"?s=u:u!=null&&(s=t.fetch.call(o,u)),o._isAsync||c(i,s),o)}}},_removeViews:function(e,t){var n;typeof e=="boolean"&&(t=e,e=this),e=e||this,e.getViews().each(function(e){(e.__manager__.hasRendered||t)&&l._removeView(e,t)})},_removeView:function(e,t){var n,i=e.__manager__,s=typeof e.keep=="boolean"?e.keep:e.options.keep;if(!s&&(i.insert===!0||t)){l.cleanViews(e),e._removeViews(!0),e.$el.remove();if(!i.parent)return;n=i.parent.views[i.selector];if(r.isArray(n))return r.each(r.clone(n),function(e,t){e&&e.__manager__===i&&f.call(n,t,1)});delete i.parent.views[i.selector]}},cache:function(e,t){if(e in this._cache&&t==null)return this._cache[e];if(e!=null&&t!=null)return this._cache[e]=t},cleanViews:function(e){r.each(a.call([],e),function(e){e.unbind(),e.model instanceof n.Model&&e.model.off(null,null,e),e.collection instanceof n.Collection&&e.collection.off(null,null,e),e.stopListening(),r.result(e,"cleanup")})},configure:function(e){r.extend(l.prototype.options,e),e.manage&&(n.View.prototype.manage=!0),e.el===!1&&(n.View.prototype.el=!1)},setupView:function(e,i){r.each(a.call([],e),function(e){if(e.__manager__)return;var s,o,u,f=l.prototype,c=r.pick(e,t);r.defaults(e,{views:{},__manager__:{},_removeViews:l._removeViews,_removeView:l._removeView},l.prototype),i=e.options=r.defaults(i||{},e.options,f.options),u=r.pick(i,a.call(["events"],r.values(i.events))),r.extend(e,u),(c.render===l.prototype.render||c.render===n.View.prototype.render)&&delete c.render,r.extend(i,c),e._remove=n.View.prototype.remove,e._render=function(e,t){var n=this,r=n.__manager__,i=t.beforeRender;return r.hasRendered&&this._removeViews(),i&&i.call(this,this),this.trigger("beforeRender",this),e(this,t).render()},e.render=l.prototype.render,e.remove!==f.remove&&(e._remove=e.remove,e.remove=f.remove),s=i.views||e.views,r.keys(s).length&&(o=s,e.views={},e.setViews(o)),e.options.template?e.options.template=i.template:e.template&&(i.template=e.template)})}});n.Layout=l,l.VERSION="0.8.5",n.View.prototype._configure=function(e){var t,n;if("el"in e?e.el===!1:this.el===!1)t=!0;return n=s.apply(this,arguments),(e.manage||this.manage)&&l.setupView(this),this.__manager__&&(this.__manager__.noel=t),n},l.prototype.options={prefix:"",deferred:function(){return i.Deferred()},fetch:function(e){return r.template(i(e).html())},partial:function(e,t,n,r){if(r.selector)if(n.noel){var i=e.filter(r.selector);e=i.length?i:e.find(r.selector)}else e=e.find(r.selector);r.insert?this.insert(e,t):this.html(e,t)},html:function(e,t){e.html(t)},insert:function(e,t){e.append(t)},when:function(e){return i.when.apply(null,e)},render:function(e,t){return e(t)},contains:function(e,t){return i.contains(e,t)}},t=r.keys(l.prototype.options)}(typeof global=="object"?global:this),define("plugins/backbone.layoutmanager",function(){}),function(){var e,t,n,r,i,s,o,u,a,f;return typeof window=="undefined"?(f=require("underscore"),e=require("backbone"),t=module.exports=e):(f=window._,e=window.Backbone,t=window),e.JJStore={},e.JJStore.Models={},e.JJStore.Events=f.extend({},e.Events),e.JJStore.__registerModelType=function(e){return this.Models[e]||(this.Models[e]=[]),this.Models[e]},e.JJStore.__registerModelInStore=function(t,n){var r;return r=this.__registerModelType(t),this.__modelExistsInStore(r,n)||(r.push(n),e.JJStore.Events.trigger("added:"+t,n)),!0},e.JJStore.__removeModelFromStore=function(e){var t;return t=this.Models[e.storeIdentifier],f.find(t,function(n,r){if(n===e)return t.splice(r,1),!0}),!0},e.JJStore.__modelExistsInStore=function(e,t){return f.isString(e)&&(e=this.Models[e]),f.contains(e,t)},e.JJStore.getModelByProperty=function(e,t,n,r){var i;return f.isString(e)&&(e=this.Models[e]),i=void 0,e&&(i=f.find(e,function(e,i){var s;s=e,r&&(s=s.attributes);if(s[t]===n)return!0})),i},e.JJStore._byId=function(e,t){return this.getModelByProperty(e,"id",t,!1)},e.JJStore._byCid=function(e,t){return this.getModelByProperty(e,"cid",t,!1)},e.JJRelational={},e.JJRelational.Config={url_id_appendix:"?ids=",work_with_store:!0},e.JJRelational.CollectionTypes={},e.JJRelational.__getObjectByName=function(e){var n;return n=f.reduce(e.split("."),function(e,t){return e[t]},t),n!==t?n:null},e.JJRelational.registerCollectionTypes=function(t){var n,r;if(!f.isObject(t))return!1;for(r in t)n=t[r],e.JJRelational.CollectionTypes[r]=n;return!0},e.JJRelational.__getCollectionType=function(t){var n,r,i;i=e.JJRelational.CollectionTypes;for(r in i){n=i[r];if(r===t)return n}return e.Collection},e.JJRelationalModel=e.Model.extend({relationsInstalled:!1,constructor:function(t,n){var r,i;return e.JJRelational.Config.work_with_store&&f.isObject(t)&&(i=t[this.idAttribute])&&(r=e.JJStore._byId(this.storeIdentifier,i)),r?(r.set(t,n),r):(e.Model.apply(this,arguments),this.__prepopulate_rel_atts(),e.JJStore.__registerModelInStore(this.storeIdentifier,this),this.__populate_rels_with_atts(t,n),e.JJStore.Events.trigger("created:"+this.storeIdentifier,this),this)},__prepopulate_rel_atts:function(){var t,n,r,i,s,o,a,l,c,h;if(this.relations){h=this.relations;for(r=l=0,c=h.length;l<c;r=++l){o=h[r],s=o.relatedModel,o.includeInJSON=o.includeInJSON?o.includeInJSON:[],o.includeInJSON=f.isArray(o.includeInJSON)?o.includeInJSON:[o.includeInJSON],i=f.indexOf(o.includeInJSON,"id"),i>=0&&this.idAttribute&&(o.includeInJSON[i]=this.idAttribute);if(s===void 0||s.prototype instanceof e.JJRelationalModel==0)if(f.isString(s)){n=e.JJRelational.__getObjectByName(s);if(!n||n.prototype instanceof e.JJRelationalModel!=1)throw new TypeError('relatedModel "'+s+'" is neither a reference to a JJRelationalModel nor a string referring to an object in the global oject');s=this.relations[r].relatedModel=n}else f.isFunction(s)&&(s=this.relations[r].relatedModel=s.call(this));a,o&&!u(o)&&(t=e.JJRelational.__getCollectionType(o.collectionType))?(a=new t,a._relational={owner:this,ownerKey:o.key,reverseKey:o.reverseKey,idQueue:[]}):a=null,this.attributes[o.key]=a,e.JJStore.Events.bind("created:"+s.prototype.storeIdentifier,this.newModelInStore,this)}this.bind("destroy",this._destroyAllRelations)}return this.relationsInstalled=!0,this},__populate_rels_with_atts:function(t,n){var r,i,s,o,u,a;for(r in t){o=t[r];if(i=this.getRelationByKey(r)){if(o instanceof e.Collection==1)throw new TypeError('The attribute "'+r+'" is a collection. You should not replace whole collections in a relational attribute. Please use the direct reference to the model array (Backbone.Collection.models)');o=f.isArray(o)?o:[o];for(u=0,a=o.length;u<a;u++)s=o[u],this.checkAndAdd(s,i,n)}}return this},save:function(t,r,i){a,h;var s,a,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O=this;b=null,f.isObject(t)||!t?(a=t,i=r):t!==null&&(a={},a[t]=r),i=i?f.clone(i):{},i.isSave=!0;if(i.wait){if(!this._validate(a,i))return!1;h=n(f.clone(this.attributes))}w=f.extend({},i,{silent:!0}),m=i.wait?w:i;if(a&&!this.set(a,m))return!1;if(!a&&!this._validate(null,i))return!1;s=function(){var e,t,n,r;return n=i.success,i.contentType||(i.contentType="application/json"),i.data||(i.data=JSON.stringify(O.toJSON({isSave:!0}))),e=!1,i.success=function(t,r,s){var o;e=!0,o=O.parse(t),i.wait&&(o=f.extend(a||{},o));if(!O.set(o,i))return!1;if(n)return n(O,t)},t=O.isNew()?"create":i.patch?"patch":"update",t==="patch"&&(i.attrs=a),r=O.sync.call(O,t,O,i),!e&&i.wait&&(O.clear(w),O.set(h,w)),r},i.ignoreSaveOnModels||(i.ignoreSaveOnModels=[this]),g=[],c=function(t){if(t&&t instanceof e.JJRelationalModel&&t.isNew())return g.push({model:t,done:!1})},l=function(){var e,t,n,r;f.isEmpty(g)&&(b=s()),e=!0;for(n=0,r=g.length;n<r;n++)t=g[n],t.done===!1&&(e=!1);if(e)return b=s()};if(this.relations){L=this.relations;for(S=0,N=L.length;S<N;S++){y=L[S],E=this.get(y.key);if(u(y))c(E);else if(o(y)){A=E.models;for(x=0,C=A.length;x<C;x++)p=A[x],c(p)}}}f.isEmpty(g)&&(b=s());for(T=0,k=g.length;T<k;T++)d=g[T],f.indexOf(i.ignoreSaveOnModels,d.model)<=-1?(i.ignoreSaveOnModels.push(d.model),v=f.clone(i),v.success=function(t,n){var r,i;for(r=0,i=g.length;r<i;r++)d=g[r],d.model.cid===t.cid&&(d.done=!0);return e.JJStore.Events.trigger("created:"+t.storeIdentifier,t),l()},d.model.save({},v)):(d.done=!0,l());return b},set:function(e,t,n){var r,i,s,o,u,a,l,c,h,p,d,v,m,g,y,b;if(e===null)return this;f.isObject(e)?(r=e,n=t):(r={},r[e]=t),n=n||{};if(!this._validate(r,n))return!1;h=n&&n.silent,p=n&&n.unset,a=n&&n.ignoreChanges,s=[],o=this._changing,this._changing=!0,o||(this._previousAttributes=f.clone(this.attributes),this.changed={}),u=this.attributes,l=this._previousAttributes,this.idAttribute in r&&(this.id=r[this.idAttribute]),n.ignoreChanges=!0;for(e in r){v=r[e],f.isEqual(u[e],v)||s.push(e),f.isEqual(l[e],v)?delete this.changed[e]:this.changed[e]=t;if((c=this.getRelationByKey(e))&&this.relationsInstalled){this._emptyRelation(c),v=f.isArray(v)?v:[v];for(m=0,y=v.length;m<y;m++)d=v[m],p||this.checkAndAdd(d,c,n)}else p?delete u[e]:u[e]=v}if(!h){s.length&&(this._pending=!0);for(g=0,b=s.length;g<b;g++)i=s[g],this.trigger("change:"+i,this,u[i],n)}if(o)return this;if(!h)while(this._pending)this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},_validate:function(t,n){var r,i,s,o,u,a;if(!this.validate)return!0;t=f.extend({},this.attributes,t),a=this.relations;for(o=0,u=a.length;o<u;o++)i=a[o],s=t[i.key],s instanceof e.Collection==1&&(t[i.key]=s.models);return r=this.validate(t,n),r?(n&&n.error&&n.error(this,r,n),this.trigger("error",this,r,n),!1):!0},toJSON:function(e){var t,n,r,i,s,a,l,c,h,p,d;e=e||{};if(e.withRelIDs)return this.toJSONWithRelIDs();n=f.clone(this.attributes);if(e.bypass)return n;if(e.isSave){p=this.relations;for(a=0,c=p.length;a<c;a++){s=p[a];if(e.scaffold&&f.indexOf(e.scaffold,s.key)<0)continue;t=s.includeInJSON,r=s.key,i=this.get(r),u(s)?i?i instanceof s.relatedModel==1?t.length===0?n[s.key]=i.toJSONWithRelIDs():t.length===1?n[s.key]=i.get(t[0]):n[s.key]=i.toJSON({isSave:!0,scaffold:t}):n[s.key]=f.indexOf(t,s.relatedModel.prototype.idAttribute)>=0?i:null:n[s.key]=null:o(s)&&(t.length===0?n[s.key]=i.toJSON({withRelIDs:!0}):t.length===1?n[s.key]=i.getArrayForAttribute(t[0]):(n[s.key]=i.toJSON({isSave:!0,scaffold:t}),f.indexOf(t,"id")>=0&&n[s.key].push(i._relational.idQueue)))}}else{d=this.relations;for(l=0,h=d.length;l<h;l++)s=d[l],i=this.get(s.key),u(s)?n[s.key]=i instanceof s.relatedModel==1?i.toJSONWithRelIDs():i:o(s)&&(n[s.key]=i.toJSON({withRelIDs:!0}))}return e.scaffold&&(n=f.pick.apply(window,[n,e.scaffold])),n},toJSONWithRelIDs:function(){var e,t,n,r,i,s;e=f.clone(this.attributes),s=this.relations;for(r=0,i=s.length;r<i;r++)n=s[r],t=this.get(n.key),u(n)?e[n.key]=t instanceof n.relatedModel==1?t.id:t:o(n)&&(e[n.key]=t.getIDArray());return e},checkAndAdd:function(t,n,r){var i,s,a,l;r=r||{},a=n.relatedModel;if(t instanceof a==1)this.addToRelation(t,n,!1);else if(f.isObject(t)&&t instanceof e.Model==0)s=new a(t),this.addToRelation(s,n,!1);else{l=a.prototype.storeIdentifier;if(i=e.JJStore._byId(l,t)){if(r.ignoreModel===i)return;this.addToRelation(i,n,!1)}else o(n)?this.get(n.key).addToIdQueue(t):u(n)&&this.setHasOneRelation(n,t,!0)}return this},newModelInStore:function(e){var t,n,r,i;return t=e.id,t&&(i=this.getRelationByIdentifier(e.storeIdentifier),i&&(u(i)?t===this.get(i.key)&&this.addToRelation(e,i,!1):o(i)&&(r=this.get(i.key),n=r._relational.idQueue,f.indexOf(n,t)>-1&&this.addToRelation(e,i,!1)))),void 0},addToRelation:function(e,t,n){return f.isObject(t)||(t=this.getRelationByKey(t)),t&&e instanceof t.relatedModel==1&&(u(t)?this.get(t.key)!==e&&this.setHasOneRelation(t,e,n):o(t)&&this.get(t.key).add(e,{silentRelation:n})),this},setHasOneRelation:function(e,t,n){var r;f.isObject(e)||(e=this.getRelationByKey(e)),r=this.get(e.key),this.attributes[e.key]=t;if(n)return;return r instanceof e.relatedModel==1&&r.removeFromRelation(e.reverseKey,this,!0),t instanceof e.relatedModel==1&&t.addToRelation(this,e.reverseKey,!0),this},removeFromRelation:function(e,t,n){var r;return f.isObject(e)||(e=this.getRelationByKey(e)),e&&(u(e)?this.setHasOneRelation(e,null,n):o(e)&&(r=this.get(e.key),t instanceof e.relatedModel==1?r.remove(t,{silentRelation:n}):r.removeFromIdQueue(t))),this},_emptyRelation:function(e){var t;return u(e)?this.setHasOneRelation(e,null,!1):o(e)&&(t=this.get(e.key),t._cleanup()),this},_destroyAllRelations:function(){var t,n,r,i,s;e.JJStore.__removeModelFromStore(this),s=this.relations;for(r=0,i=s.length;r<i;r++)n=s[r],this.unbind("destroy",this._destroyAllRelations),e.JJStore.Events.unbind("created:"+n.relatedModel.prototype.storeIdentifier,this.newModelInStore,this),u(n)&&(t=this.get(n.key))?this.setHasOneRelation(n,null,!1):o(n)&&this.get(n.key)._cleanup();return this},getIdQueueLength:function(e){var t;f.isObject(e)||(e=this.getRelationByKey(e));if(e){if(u(e))return t=this.get(e.key),!t||t instanceof e.relatedModel==1?0:1;if(o(e))return this.get(e.key)._relational.idQueue.length}return 0},clearIdQueue:function(e){var t,n;return f.isObject(e)||(e=this.getRelationByKey(e)),e&&(u(e)?(n=this.get(e.key),n&&n instanceof e.relatedModel==0&&this.set(e.key,null,{silentRelation:!0})):o(e)&&(t=this.get(e.key),t._relational.idQueue=[])),this},fetchByIdQueue:function(t,n){var r,i,a,l,c=this;f.isObject(t)||(t=this.getRelationByKey(t));if(t)if(o(t))this.get(t.key).fetchByIdQueue(n);else if(u(t)){r=this.get(t.key);if(r&&r instanceof t.relatedModel==0)return i=t.relatedModel,n?n=f.clone(n):n={},l=s(i.prototype,"url"),l+=e.JJRelational.Config.url_id_appendix+r,n.url=l,n.parse===void 0&&(n.parse=!0),a=n.success,n.success=function(e,r,s){var o;c.setHasOneRelation(t,null,!0),n.ignoreModel=c,o=new i(i.prototype.parse(e[0]),n),c.set(t.key,o);if(a)return a(o,e)},this.sync.call(this,"read",this,n)}return this},getRelationByKey:function(e){var t,n,r,i;i=this.relations;for(n=0,r=i.length;n<r;n++){t=i[n];if(t.key===e)return t}return!1},getRelationByReverseKey:function(e){var t,n,r,i;i=this.relations;for(n=0,r=i.length;n<r;n++){t=i[n];if(t.reverseKey===e)return t}return!1},getRelationByIdentifier:function(e){var t,n,r,i;i=this.relations;for(n=0,r=i.length;n<r;n++){t=i[n];if(t.relatedModel.prototype.storeIdentifier===e)return t}return!1}}),e.Collection.prototype.fetchByIdQueueOfModels=function(t,n){var i,s,a,l,c=this;if(this.model&&this.model.prototype instanceof e.JJRelationalModel==1){a=this.model.prototype.getRelationByKey(t),s=a.relatedModel,i=[],u(a)?this.each(function(e){var n;n=e.get(t);if(n&&n instanceof s==0)return i.push(n)}):o(a)&&this.each(function(e){var n;return n=e.get(t),i=f.union(i,n._relational.idQueue)});if(i.length>0)return n.url=r(s.prototype,i),n.parse===void 0&&(n.parse=!0),l=n.success,n.success=function(t,n,r){var i,o,u,h,p,d,v,m;u=[];if(a.collectionType&&(i=e.JJRelational.__getCollectionType(a.collectionType)))u=i.prototype.parse(t);else if(f.isArray(t))for(p=0,v=t.length;p<v;p++)h=t[p],f.isObject(h)&&u.push(s.prototype.parse(h));for(d=0,m=u.length;d<m;d++)o=u[d],new s(o);if(l)return l(c,t)},this.sync.call(this,"read",this,n)}return n.success&&n.success(this),this},e.Collection.prototype.__add=e.Collection.prototype.add,e.Collection.prototype.add=function(t,n){var r,i,s,o,u,a,l,c,h,p,d,v,m;if(!this._relational)return this.__add(t,n);if(this._relational){n||(n={}),f.isArray(t)||(t=[t]),l=[],o=[],s=[];for(c=0,d=t.length;c<d;c++){u=t[c];if(u instanceof e.Model==0)if(!f.isObject(u)){if(!(r=e.JJStore._byId(this.model.prototype.storeIdentifier,u))){s.push(u);break}u=r}else u=this._prepareModel(u,n);if(u instanceof this.model==0)throw new TypeError('Invalid model to be added to collection with relation key "'+this._relational.ownerKey+'"');l.push(u),u.id&&o.push(u.id)}this.removeFromIdQueue(o);for(h=0,v=s.length;h<v;h++)i=s[h],this.addToIdQueue(i);if(!n.silentRelation)for(p=0,m=l.length;p<m;p++)a=l[p],a.addToRelation(this._relational.owner,this._relational.reverseKey,!0);n.silentRelation=!1}return this.__add(l,n)},e.Collection.update=function(e,t){var n,r,i,s,o,u,a,l,c,h,p,d,v;n=[],l=[],s=[],a={},i=this.model.prototype.idAttribute,t=f.extend({add:!0,merge:!0,remove:!0},t),t.parse&&(e=this.parse(e)),f.isArray(e)||(e=e?[e]:[]);for(c=0,p=e.length;c<p;c++)u=e[c],r=this.get(u.id||u.cid||u[i]),t.remove&&r&&(a[r.cid]=!0),t.add&&!r&&n.push(u),t.merge&&r&&s.push(u);if(t.remove){v=this.models;for(h=0,d=v.length;h<d;h++)u=v[h],a[u.cid]||l.push(u)}return l.length&&this.remove(l,t),t.merge=!0,n.length&&this.add(n,t),s.length&&(o=f.extend({silentRelation:!0},t),this.add(s,o)),this},e.Collection.prototype.__remove=e.Collection.prototype.remove,e.Collection.prototype.remove=function(t,n){var r=this;return this._relational?(n||(n={}),f.isArray(t)?t=t.slice(0):t=[t],f.each(t,function(t){if(t instanceof e.Model==1){r.__remove(t,n);if(!n.silentRelation)return r._relatedModelRemoved(t,n)}}),this):this.__remove(t,n)},e.Collection.prototype._cleanup=function(){return this.remove(this.models,{silentRelation:!1}),this._relational.idQueue=[],this},e.Collection.prototype._relatedModelRemoved=function(e,t){var n;return t.silentRelation?n=!1:n=!0,e.removeFromRelation(this._relational.reverseKey,this._relational.owner,n),this},e.Collection.prototype.__reset=e.Collection.prototype.reset,e.Collection.prototype.reset=function(e,t){return this._relational&&this._cleanup(),this.__reset(e,t),this},e.Collection.prototype.__fetch=e.Collection.prototype.fetch,e.Collection.prototype.fetch=function(t){var n,r=this;return t=t?f.clone(t):{},t.parse===void 0&&(t.parse=!0),n=t.success,t.success=function(i,s,o){var u,a,l,c,h,p,d,v,m,g,y,b;h=r.model.prototype.idAttribute,g=r.model.prototype.storeIdentifier,v=r.parse(i),l=[],u=[],u.push(v);for(y=0,b=v.length;y<b;y++)m=v[y],c=m[h],a=e.JJStore._byId(g,c),a&&(a.set(m,t),l.push(a),u.push(m));v=f.without.apply(window,u),r._relational&&(t.ignoreModel=r._relational.owner),d=l.concat(v),p=t.update?"update":"reset",t.update&&(t.merge=!1),r[p](d,t);if(n)return n(r,i)},this.sync.call(this,"read",this,t)},e.Collection.prototype.fetchByIdQueue=function(e){var t,n,i=this;return e?e=f.clone(e):e={},t=this._relational.idQueue,t.length>0?(e.url=r(this,t),e.parse===void 0&&(e.parse=!0),n=e.success,e.success=function(t,r,s){e.ignoreModel=i._relational.owner,i._relational.idQueue=[],i.add(i.parse(t),e);if(n)return n(i,t)},this.sync.call(this,"read",this,e)):this},e.Collection.prototype.addToIdQueue=function(e){var t;return t=this._relational.idQueue,t.push(e),this._relational.idQueue=f.uniq(t),this},e.Collection.prototype.removeFromIdQueue=function(e){var t;return e=f.isArray?e:[e],t=[this._relational.idQueue].concat(e),this._relational.idQueue=f.without.apply(window,t),this},e.Collection.prototype.getIDArray=function(){var e;return e=[],this.each(function(t){if(t.id)return e.push(t.id)}),f.union(e,this._relational.idQueue)},e.Collection.prototype.getArrayForAttribute=function(e){var t;return e===this.model.prototype.idAttribute?this.getIDArray():(t=[],this.each(function(n){return t.push(n.get(e))}),t)},n=function(t){var n,r;for(n in t)r=t[n],r instanceof e.Collection&&r._relational&&(t[n]=r.models.concat(r._relational.idQueue));return t},s=function(e,t){return!e||!e[t]?null:f.isFunction(e[t])?e[t]():e[t]},i=function(e,t){var n;return n=s(e,"urlRoot")||s(e.collection,"url")||a(),n+(n.charAt(n.length-1)==="/"?"":"/")+encodeURIComponent(t?t:e.id)},r=function(t,n){var r;return r=s(t,"url"),r?(r+=e.JJRelational.Config.url_id_appendix+n.join(","),r):(a(),!1)},a=function(){throw new Error('A "url" property or function must be specified')},u=function(e){return e.type==="has_one"?!0:!1},o=function(e){return e.type==="has_many"||e.type==="many_many"?!0:!1},this}(),define("plugins/backbone.JJRelational",function(){});var JJRestApi;JJRestApi={url:"/api/v2/",extension:"json",structurID:"api-structure"},JJRestApi.Models={},JJRestApi.Collections={},JJRestApi.Modules={},JJRestApi.Modules._modules=[],JJRestApi.Events=_.extend({},Backbone.Events),JJRestApi.Model=function(e){return this.Models[e]?this.Models[e]:!1},JJRestApi.Collection=function(e){return this.Collections[e]?this.Collections[e]:!1},JJRestApi.Modules.extend=function(e,t){return JJRestApi.Modules._modules.push({module:e,extension:t}),!0},JJRestApi.extendModel=function(e,t,n){var r;r=this.Model(e),t.prototype instanceof Backbone.Model==0&&(n=t,t=r),n||(n={});if(r)return this.Models[e]=t.extend(n)},JJRestApi.extendCollection=function(e,t,n){var r;r=this.Collection(e),t instanceof Backbone.Collection==0&&(n=t,t=r),n||(n={});if(r)return this.Collections[e]=t.extend(n)},JJRestApi.setObjectUrl=function(e,t){return t=t||{},this.url+e+(t.id?"/"+t.id:"")+"."+this.extension},JJRestApi.hookSecurityToken=function(){return JJRestApi.getFromDomOrApi("SecurityID",{noAjax:!0}).done(function(e){if(e.SecurityID)return $(document).bind("ajaxSend",function(t,n,r){return n.setRequestHeader(e.RequestHeader,e.SecurityID)})})},JJRestApi.getFromDomOrApi=function(e,t){var n,r,i,s,o;return t=t||{},s=t.name?t.name:e.toLowerCase(),n=$("#api-"+s),n.length?(r=$.trim(n.html()),n.attr("type")==="application/json"&&(r=r?$.parseJSON(r):null),i=new $.Deferred,i.resolve(r),i.promise()):t.noAjax?$.Deferred().resolve(null):(o=t.url?t.url:JJRestApi.setObjectUrl(e,t),t.urlSuffix&&(o+=t.urlSuffix),i=$.getJSON(o),JJRestApi.Events.trigger("dfdAjax",i),i)},JJRestApi.objToUrlString=function(e){var t,n,r,i,s,o,u;i="";for(n in e){u=e[n];if(n==="search"){s="s=";for(t in u)o=u[t],s+=encodeURIComponent(t)+":",s+=_.isArray(o)?encodeURIComponent(o.join("|")):encodeURIComponent(o),s+=";";i+=s}else i+=encodeURIComponent(n)+"="+encodeURIComponent(u);i+="&"}return r=i.length,i.lastIndexOf("&")===r-1&&(i=i.substr(0,r-1)),i},JJRestApi.bootstrapWithStructure=function(e){var t;return t=JJRestApi.getFromDomOrApi("Structure"),t.done(function(e){return JJRestApi.Bootstrap(e)}),t.fail(function(){throw new Error("Structure could not be loaded.")}),t},JJRestApi.Bootstrap=function(e){o,s;var t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b=this;i=[],a=function(e){t;var t;switch(e){case"belongs_to":t="has_one";break;case"has_one":t="has_one";break;case"has_many":t="has_many";break;case"many_many":t="many_many";break;case"belongs_many_many":t="many_many"}return t},u=function(e,t){var n,r;return n=a(t.Type),r={type:n,relatedModel:function(){return JJRestApi.Model(t.ClassName)},key:t.Key,reverseKey:t.ReverseKey,includeInJSON:["id"]},n!=="has_one"&&(r.collectionType=t.ClassName,i.push(t.ClassName)),r},f=function(e){return(e="has_many")?!0:!1},t=function(e,t,n){var r,i,s,o,a,f,l,c;o={defaults:{}},l=[];for(i in t)f=t[i],(a=u(e,f))&&l.push(a);l.length&&(o.relations=l),o.storeIdentifier=e,o.url=function(){return this.id?JJRestApi.url+this.storeIdentifier+"/"+this.id+"."+JJRestApi.extension:this.urlRoot},o.urlRoot=b.setObjectUrl(e),o.idAttribute="ID";if(n&&n.DefaultFields){c=n.DefaultFields;for(s in c)r=c[s],o.defaults[r]=null}return b.Models[e]=b.Model(e).extend(o),!0},s=e.Config||!1,o=e.Config?e.Objs:e;if(!o)return;for(n in o)h=o[n],this.Models[n]=Backbone.JJRelationalModel.extend({}),this.Collections[n]=Backbone.Collection.extend({url:this.setObjectUrl(n),comparator:function(e){return e.id},parse:function(e){return e}});g=JJRestApi.Modules._modules;for(p=0,v=g.length;p<v;p++)l=g[p],l.extension.call(window,l.module);for(n in o)h=o[n],t(n,h,s),this.Collections[n]=this.Collection(n).extend({model:this.Model(n)});r={},y=_.uniq(i);for(d=0,m=y.length;d<m;d++)c=y[d],r[c]=this.Collection(c);return Backbone.JJRelational.registerCollectionTypes(r),!1},JJRestApi,define("plugins/backbone.JJRestApi",function(){}),window.matchMedia=window.matchMedia||function(e,t){var n,r=e.documentElement,i=r.firstElementChild||r.firstChild,s=e.createElement("body"),o=e.createElement("div");return o.id="mq-test-1",o.style.cssText="position:absolute;top:-100em",s.appendChild(o),function(e){return o.innerHTML='&shy;<style media="'+e+'"> #mq-test-1 { width: 42px; }</style>',r.insertBefore(s,i),n=o.offsetWidth==42,r.removeChild(s),{matches:n,media:e}}}(document),define("responsiveimage/external/matchmedia",function(){}),function(e){e.picturefill_opts={wrapperTag:"span",imageTag:"span"},e.picturefill=function(t){t=t||e.picturefill_opts;var n=e.document.getElementsByTagName(t.wrapperTag);for(var r=0,i=n.length;r<i;r++)if(n[r].getAttribute("data-picture")!==null){var s=n[r].getElementsByTagName(t.imageTag),o=[],u=n[r].offsetWidth;for(var a=0,f=s.length;a<f;a++){var l=s[a].getAttribute("data-media"),c=n[a].getAttribute("data-ratio");(!l||e.matchMedia&&e.matchMedia(l).matches)&&o.push(s[a])}var h=n[r].getElementsByTagName("img")[0],p;o.length?(h||(h=e.document.createElement("img"),h.alt=n[r].getAttribute("data-alt"),n[r].appendChild(h)),p=o.pop(),h.src=p.getAttribute("data-src"),h.height=u/parseFloat(p.getAttribute("data-ratio"),10)):h&&n[r].removeChild(h)}},e.addEventListener?(e.addEventListener("resize",e.picturefill,!1),e.addEventListener("DOMContentLoaded",function(){e.picturefill(),e.removeEventListener("load",e.picturefill,!1)},!1),e.addEventListener("load",e.picturefill,!1)):e.attachEvent&&e.attachEvent("onload",e.picturefill)}(this),define("responsiveimage/picturefill",function(){}),define("app",["jquery","underscore","backbone","handlebars","plugins/backbone.layoutmanager","plugins/backbone.JJRelational","plugins/backbone.JJRestApi","responsiveimage/picturefill"],function(e,t,n,r){var i,s;return s={root:"/",pendingTemplateReqs:{}},i=window.JST=window.JST||{},n.NMLayout=n.Layout.extend({setViewAndRenderMaybe:function(e,t){this.setView(e,t);if(this.__manager__.hasRendered)return t.render()}}),n.Layout.configure({manage:!0,prefix:"app/app/templates/",pendingAjaxRequests:{},fetch:function(t){var o,u,a;return u=void 0,a=t.replace(n.Layout.prototype.options.prefix,""),a.indexOf("/")===0?t=a.substring(1):t+=".html",i[t]?(i[t].__compiled__||(i[t]=r.template(i[t]),i[t].__compiled__=!0),i[t]):(u=this.async(),(o=s.pendingTemplateReqs[t])?o.then(function(){return u(i[t])}):(o=e.ajax({url:s.root+t}),s.pendingTemplateReqs[t]=o,o.then(function(e){return i[t]=r.compile(e),i[t].__compiled__=!0,delete s.pendingTemplateReqs[t],u(i[t])})),o)}}),t.extend(s,{module:function(e){return t.extend({Views:{}},e)},useLayout:function(r,i){var s,o,u,a,f;return i=i||{},u=i.customClass?i.customClass:r,this.layout&&this.layout.getAllOptions().template==="layouts/"+r?(a=this.layout,a.customClass&&a.$el.removeClass(a.customClass),u&&(a.customClass=u,a.$el.addClass(u)),this.layout):(this.layout&&this.layout.remove(),f=new n.NMLayout(t.extend({template:"layouts/"+r,className:"layout "+u,id:"layout"},i)),e("#main").empty().append(f.el),e(f.el).css("height","100%"),o=this.currentLayoutName,s=e("body"),o&&s.removeClass(o),s.addClass(r),this.currentLayoutName=r,f.render(),this.layout=f,f)}},n.Events)}),define("modules/ProjectSearch",["app"],function(e){var t;return t={fields:{Title:"partial",Teaser:function(e,t){return this.partialMatchFilter(e,"TeaserText",t)},Name:function(e,t){return!0}},transformSearchTerm:function(e){var t,n,r,i,s,o,u;n={},u=e.split(";");for(s=0,o=u.length;s<o;s++)r=u[s],t=r.split(":"),i=null,t.length>1&&(i=t[1].split("|")),n[t[0]]=i;return n},test:function(e,t,n){var r;_.isArray(n)||(n=[n]);if(r=this.fields[t]){if(_.isFunction(r))return r.call(this,e,n);if(r==="exact")return this.exactMatchFilter(e,t,n);if(r)return this.partialMatchFilter(e,t,n)}return!0},partialMatchFilter:function(e,t,n){var r,i;return i=n.join("|"),r=new RegExp($.trim(i),"i"),console.log(e[t]),e.hasOwnProperty(t)&&r.test(e[t])?!0:!1},exactMatchFilter:function(e,t,n){var r,i,s,o,u;if(!e.hasOwnProperty(t))return!1;for(o=0,u=n.length;o<u;o++){s=n[o],i="^"+s+"$",r=new RegExp(i,"i");if(r.test(s))return!0}return!1}},t}),define("modules/DataRetrieval",["app","modules/ProjectSearch"],function(e,t){var n;return n={forProjectsOverview:function(t){var n,r,i,s,o,u,a,f;r=t.present,s=e.Config.ProjectTypes,o=new $.Deferred;if(!r.flag){n=[],u=function(r){var i;return i={name:t.domName(r),urlSuffix:t.urlSuffix},n.push(JJRestApi.getFromDomOrApi(r,i).done(function(t){return e.handleFetchedModels(r,t)}))};for(a=0,f=s.length;a<f;a++)i=s[a],u(i);$.when.apply(this,n).done(function(){return r.flag=!0,o.resolve()})}else o.resolve();return o.promise()},filterProjectTypesBySearchTerm:function(n){var r,i,s,o,u,a,f,l;a=e.Cache.WholePortfolio;if(!e.Cache.WholePortfolioJSON){u=[];for(f=0,l=a.length;f<l;f++)r=a[f],u.push(r.toJSON());e.Cache.WholePortfolioJSON=u}return o=t.transformSearchTerm(n),console.log(o),s=_.filter(e.Cache.WholePortfolioJSON,function(e){return s=!0,_.each(o,function(n,r){if(!t.test(e,r,n))return s=!1}),s}),i=_.map(s,function(e){return function(e){return _.find(a,function(t){return t.id===e.ID&&t.get("ClassName")===e.ClassName})}(e)}),i},forCalendar:function(t){var n,r,i;return n=e.Config.Calendar[t],r=new $.Deferred,n.flag?r.resolve():(i=_.clone(n),i.name=t+"-calendar",JJRestApi.getFromDomOrApi("CalendarEntry",i).done(function(i){var s,o,u;if(i){if(t==="upcoming")for(o=0,u=i.length;o<u;o++)s=i[o],s.IsUpcoming=!0;e.handleFetchedModels("CalendarEntry",i),n.flag=!0,t==="whole"&&(e.Config.Calendar.upcoming.flag=!0)}return r.resolve()})),r.promise()},forPersonsOverview:function(){var t,n,r;return t=e.Config.Person,n=new $.Deferred,t.about_present?n.resolve():(r=_.clone(t),JJRestApi.getFromDomOrApi("Person",r).done(function(r){return t.about_present=!0,e.handleFetchedModels("Person",r),n.resolve()})),n.promise()},forDetailedObject:function(t,n,r){var i,s,o,u,a,f,l,c,h=this;return s=e.Config.Detail[t],f={name:s.domName,urlSuffix:s.urlSuffix(n)},a=function(){var n;return n=new $.Deferred,JJRestApi.getFromDomOrApi(t,f).done(function(r){var i;return r||n.resolve(null),r=_.isArray(r)?r:[r],i=r.length===1?e.handleFetchedModel(t,r[0]):null,i&&(i._isCompletelyFetched=!0,e.CurrentMember&&(i._isFetchedWhenLoggedIn=!0)),n.resolve(i)}),n.promise()},o=new $.Deferred,i=e.Collections[t],c=s.where(n),u=i.findWhere(c),u?(u._isCompletelyFetched&&(l=!0),r&&!u._isFetchedWhenLoggedIn&&(l=!1),l?o.resolve(u):(f.noAjax=!0,a().done(function(e){return e&&e.cid===u.cid?o.resolve(e):h.fetchExistingModelCompletely(u).done(function(e){return o.resolve(e)})}))):a().done(function(e){return o.resolve(e)}),o.promise()},forRandomGroupImage:function(){var t,n,r;return r=e.PageInfos,t=new $.Deferred,n=function(){var e;return e=r.GroupImages,e&&e.length>0?e[Math.floor(Math.random()*e.length)]:null},r.GroupImages?t.resolve(n()):JJRestApi.getFromDomOrApi("GroupImage").done(function(e){return r.GroupImages=e,t.resolve(n())}),t.promise()},forUserGallery:function(t){var n,r,i;return i=e.Cache.UserGallery,n=new $.Deferred,i.fetched[t]?n.resolve(i):(r=$.getJSON(e.Config.GalleryUrl+t+"/").done(function(e){return i.images[t]=e,i.fetched[t]=!0,n.resolve(i)}),n.fail(function(){if(r.readyState!==4)return r.abort()})),n},forDocImage:function(t){var n,r;return n=new $.Deferred,(r=e.Collections.DocImage.get(t))?n.resolve(r):JJRestApi.getFromDomOrApi("DocImage",{id:t}).done(function(t){return t?n.resolve(e.handleFetchedModel("DocImage",t)):n.reject()}),n.promise()},forMultipleDocImages:function(t){var n,r,i,s;return n=new $.Deferred,i=[],r=[],_.each(t,function(t){var n;return(n=e.Collections.DocImage.get(t))?r.push(n):i.push(t)}),i.length?(s=JJRestApi.setObjectUrl("DocImage")+Backbone.JJRelational.Config.url_id_appendix+i.join(","),this._docImagesReq&&this._docImagesReq.readyState!==4&&this._docImagesReq.abort(),this._docImagesReq=$.getJSON(s,function(t){return $.isArray(t)&&(r=r.concat(e.handleFetchedModels("DocImage",t))),n.resolve(r)}),n):(n.resolve(r),n)},fetchExistingModelCompletely:function(t){var n;return n=new $.Deferred,t.fetch({success:function(t){n.resolve(t),t._isCompletelyFetched=!0;if(e.CurrentMember)return t._isFetchedWhenLoggedIn=!0}}),n.promise()}},n}),define("modules/RecycleBin",["app"],function(e){var t;return t={},t.setup=function(){var e,t,n=this;return t=function(){return e.addClass("done"),setTimeout(function(){return e.removeClass("done")},1e3)},this.$bin=e=$("#recycle-bin").removeClass("done"),e.on("dragenter dragleave drop",function(e){var t;return t=e.type==="dragenter"?"addClass":"removeClass",$(e.target)[t]("dragover")}),e.on("drop",function(r){var i,s,o,u,a;u=n.activeRecycleDrag,n.activeRecycleDrag=null;if(u&&u.className)return e.addClass("processing"),i=u.model.ID?u.model.ID:u.model.id,n.removeViewAndData(u),(s=Backbone.JJStore._byId(u.className,i))?(s.destroy(),t(),e.removeClass("processing")):(a=JJRestApi.setObjectUrl(u.className,{id:i}),o=$.ajax({url:a,contentType:"json",type:"DELETE"}),o.always(function(){return e.removeClass("processing")}),o.done(function(){return t()}))})},t.removeViewAndData=function(t){return t.view.$el.trigger("dragend"),$("body").removeClass("drag-inline"),t.className==="PersonImage"||t.className==="DocImage"?(e.removeFromGalleryCache(t.className,t.model.id),t.view.liveRemoval()):t.view.remove()},t.setViewAsRecyclable=function(e){var t,n=this;return t={view:e,model:e.model},t.className=e.className?e.className:e.model.ClassName,e.$el.on("dragstart dragend",function(e){var r;return $.fireGlobalDragEvent(e.type,e.target),e.type==="dragstart"?(r="addClass",n.activeRecycleDrag=t):(n.activeRecycleDrag=null,r="removeClass"),n.$bin[r]("active")})},t}),function(e,t){typeof exports=="object"?module.exports=t():typeof define=="function"&&define.amd?define("plugins/misc/spin.min",[],t):e.Spinner=t()}(this,function(){function r(e,t){var n=document.createElement(e||"div"),r;for(r in t)n[r]=t[r];return n}function i(e){for(var t=1,n=arguments.length;t<n;t++)e.appendChild(arguments[t]);return e}function o(e,r,i,o){var u=["opacity",r,~~(e*100),i,o].join("-"),a=.01+i/o*100,f=Math.max(1-(1-e)/r*(100-a),e),l=n.substring(0,n.indexOf("Animation")).toLowerCase(),c=l&&"-"+l+"-"||"";return t[u]||(s.insertRule("@"+c+"keyframes "+u+"{"+"0%{opacity:"+f+"}"+a+"%{opacity:"+e+"}"+(a+.01)+"%{opacity:1}"+(a+r)%100+"%{opacity:"+e+"}"+"100%{opacity:"+f+"}"+"}",s.cssRules.length),t[u]=1),u}function u(t,n){var r=t.style,i,s;if(r[n]!==undefined)return n;n=n.charAt(0).toUpperCase()+n.slice(1);for(s=0;s<e.length;s++){i=e[s]+n;if(r[i]!==undefined)return i}}function a(e,t){for(var n in t)e.style[u(e,n)||n]=t[n];return e}function f(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)e[r]===undefined&&(e[r]=n[r])}return e}function l(e){var t={x:e.offsetLeft,y:e.offsetTop};while(e=e.offsetParent)t.x+=e.offsetLeft,t.y+=e.offsetTop;return t}function h(e){if(typeof this=="undefined")return new h(e);this.opts=f(e||{},h.defaults,c)}function p(){function e(e,t){return r("<"+e+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',t)}s.addRule(".spin-vml","behavior:url(#default#VML)"),h.prototype.lines=function(t,n){function o(){return a(e("group",{coordsize:s+" "+s,coordorigin:-r+" "+ -r}),{width:s,height:s})}function c(t,s,u){i(f,i(a(o(),{rotation:360/n.lines*t+"deg",left:~~s}),i(a(e("roundrect",{arcsize:n.corners}),{width:r,height:n.width,left:n.radius,top:-n.width>>1,filter:u}),e("fill",{color:n.color,opacity:n.opacity}),e("stroke",{opacity:0}))))}var r=n.length+n.width,s=2*r,u=-(n.width+n.length)*2+"px",f=a(o(),{position:"absolute",top:u,left:u}),l;if(n.shadow)for(l=1;l<=n.lines;l++)c(l,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(l=1;l<=n.lines;l++)c(l);return i(t,f)},h.prototype.opacity=function(e,t,n,r){var i=e.firstChild;r=r.shadow&&r.lines||0,i&&t+r<i.childNodes.length&&(i=i.childNodes[t+r],i=i&&i.firstChild,i=i&&i.firstChild,i&&(i.opacity=n))}}var e=["webkit","Moz","ms","O"],t={},n,s=function(){var e=r("style",{type:"text/css"});return i(document.getElementsByTagName("head")[0],e),e.sheet||e.styleSheet}(),c={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:"#000",direction:1,speed:1,trail:100,opacity:.25,fps:20,zIndex:2e9,className:"spinner",top:"auto",left:"auto",position:"relative"};h.defaults={},f(h.prototype,{spin:function(e){this.stop();var t=this,i=t.opts,s=t.el=a(r(0,{className:i.className}),{position:i.position,width:0,zIndex:i.zIndex}),o=i.radius+i.length+i.width,u,f;e&&(e.insertBefore(s,e.firstChild||null),f=l(e),u=l(s),a(s,{left:(i.left=="auto"?f.x-u.x+(e.offsetWidth>>1):parseInt(i.left,10)+o)+"px",top:(i.top=="auto"?f.y-u.y+(e.offsetHeight>>1):parseInt(i.top,10)+o)+"px"})),s.setAttribute("role","progressbar"),t.lines(s,t.opts);if(!n){var c=0,h=(i.lines-1)*(1-i.direction)/2,p,d=i.fps,v=d/i.speed,m=(1-i.opacity)/(v*i.trail/100),g=v/i.lines;(function y(){c++;for(var e=0;e<i.lines;e++)p=Math.max(1-(c+(i.lines-e)*g)%v*m,i.opacity),t.opacity(s,e*i.direction+h,p,i);t.timeout=t.el&&setTimeout(y,~~(1e3/d))})()}return t},stop:function(){var e=this.el;return e&&(clearTimeout(this.timeout),e.parentNode&&e.parentNode.removeChild(e),this.el=undefined),this},lines:function(e,t){function l(e,n){return a(r(),{position:"absolute",width:t.length+t.width+"px",height:t.width+"px",background:e,boxShadow:n,transformOrigin:"left",transform:"rotate("+~~(360/t.lines*s+t.rotate)+"deg) translate("+t.radius+"px"+",0)",borderRadius:(t.corners*t.width>>1)+"px"})}var s=0,u=(t.lines-1)*(1-t.direction)/2,f;for(;s<t.lines;s++)f=a(r(),{position:"absolute",top:1+~(t.width/2)+"px",transform:t.hwaccel?"translate3d(0,0,0)":"",opacity:t.opacity,animation:n&&o(t.opacity,t.trail,u+s*t.direction,t.lines)+" "+1/t.speed+"s linear infinite"}),t.shadow&&i(f,a(l("#000","0 0 4px #000"),{top:"2px"})),i(e,i(f,l(t.color,"0 0 1px rgba(0,0,0,.1)")));return e},opacity:function(e,t,n){t<e.childNodes.length&&(e.childNodes[t].style.opacity=n)}});var d=a(r("group"),{behavior:"url(#default#VML)"});return!u(d,"transform")&&d.adj?p():n=u(d,"animation"),h}),function(e){var t="list",n="1.2.4",r=!0,i={headerSelector:"dt",zIndex:1,fakeHeaderClass:"ui-"+t+"-fakeheader"},s=null,o={log:function(){if(r&&window.console&&window.console.log)try{window.console.log.apply(console,arguments)}catch(e){window.console.log(arguments)}},updateHeader:function(e,n){var r=e.data(t);r&&(r.fakeHeader=n.clone().removeAttr("id").addClass(r.settings.fakeHeaderClass),r.fakeHeader.css({position:"absolute",top:0,width:r.headers.width(),zIndex:r.settings.zIndex}),e.data(t,r).children(0).eq(0).replaceWith(r.fakeHeader))},events:{resize:function(){var n=e(this),r=n.data(t);r&&(r.fakeHeader.width(r.headers.width()),r.wrapper.css("maxHeight",n.css("maxHeight")))},scroll:function(){var n=e(this),r=n.data(t);if(r){var i=null,s=r.headers.eq(r.currentHeader),u=r.currentHeader>=r.headers.length-1?null:r.headers.eq(r.currentHeader+1),a=r.currentHeader<=0?null:r.headers.eq(r.currentHeader-1),f=!1;r.containerTop=n.offset().top+parseInt(n.css("marginTop"),10)+parseInt(n.css("borderTopWidth"),10),r.fakeHeader.css("top",0);if(a!==null){var l=s.offset().top,c=s.outerHeight();l>r.containerTop&&(r.fakeHeader.css("top",l-c-r.containerTop),o.updateHeader(n,a),r.currentHeader=r.currentHeader-1,f=!0),l-c>r.containerTop&&(r.fakeHeader.css("top",0),i=r.currentHeader-1)}if(u!==null){var l=u.offset().top,c=u.outerHeight();l-c<r.containerTop&&r.fakeHeader.css("top",l-c-r.containerTop),l<r.containerTop&&(r.fakeHeader.css("top",0),i=r.currentHeader+1)}if(i!==null){var h=r.headers.eq(i);r.currentHeader=i,o.updateHeader(n,h),f=!0}var p=r.wrapper.scrollTop()>=r.wrapper.prop("scrollHeight")-r.wrapper.height();(f||p||r.max&&!p)&&n.trigger("headingChange",[r.currentHeader,r.headers.eq(r.currentHeader),p]),r.max=p,n.data(t,r)}}}},u={init:function(n){return e(this).each(function(){var r=e.extend({},i);typeof n=="object"&&e.extend(r,n);var s=e(this),u=s.data(t);u||(u={target:s,wrapper:s.wrapInner('<div class="ui-'+t+'" />').find(".ui-"+t+""),settings:r,headers:[],containerTop:0,currentHeader:0,fakeHeader:null,scrolllist:[],original:{position:"",overflowX:"",overflowY:""},max:!1},s.addClass("-"+t+"-container").css({position:s.css("position")=="absolute"?"absolute":"relative",overflowY:"hidden"}),u.headers=s.find(u.settings.headerSelector),u.fakeHeader=u.headers.eq(0).clone().removeAttr("id").addClass(u.settings.fakeHeaderClass),u.wrapper.bind("scroll."+t,e.proxy(o.events.scroll,s)).css({height:"100%",maxHeight:s.css("maxHeight"),overflowY:"scroll",position:"relative"}),u.fakeHeader.css({position:"absolute",top:0,width:u.headers.width(),zIndex:u.settings.zIndex}),e(window).bind("resize."+t,e.proxy(o.events.resize,s)),s.data(t,u).prepend(u.fakeHeader))})},header:function(){var n=e(this),r=n.data(t);if(r)return r.currentHeader},scrollTo:function(n,r,i,s){return this.each(function(){var u=e(this),a=u.data(t);if(a&&n!==undefined&&!isNaN(n)&&n>=0&&n<a.headers.length){var f=a.headers.eq(n),l=f.position().top+a.wrapper.scrollTop()+parseInt(f.css("borderTopWidth"),10)+parseInt(f.css("borderBottomWidth"),10);r?a.wrapper.stop().animate({scrollTop:l},r,i,s):(a.wrapper.stop().scrollTop(l),a.currentHeader=n,o.updateHeader(u,f),u.trigger("headingChange",[n,f]),u.data(t,a))}})},option:function(n,r){var i=e(this),s=i.data(t);if(s)return typeof n=="undefined"?s.settings:!n in s.settings?!1:typeof r=="undefined"?s.settings[n]:(s.settings[n]=r,i)},version:function(e){if(e){var r=n.split("."),i=(Number(r[0])||1)+"",s=(Number(r[1])||0)+"",o=(Number(r[2])||0)+"",u="000";return Number(u.slice(0,3-i.length)+i+u.slice(0,3-s.length)+s+u.slice(0,3-o.length)+o)}return t+" v"+n},destroy:function(){return this.each(function(){var n=e(this),r=n.data(t);r&&(r.wrapper.children().unwrap(),r.fakeHeader.remove(),n.css(r.original).removeData(t).removeClass("-"+t+"-container").unbind("."+t))})}};e.fn[t]=function(n){if(u[n])return u[n].apply(this,Array.prototype.slice.call(arguments,1));if(typeof n=="object"||!n)return u.init.apply(this,arguments);e.error("Method "+n+" does not exist on jQuery."+t)},e[t]={},e[t].log=function(e){return e!==undefined&&(r=e),r}}(jQuery),define("plugins/misc/jquery.list",function(){}),function(e){var t;return t=function(){function t(){}return t["do"]=function(t,n,r,i,s,o,u){var a,f,l,c,h,p,d,v,m=this;h=null,n.removeClass("failed done"),e(".progress-text, .progress",n).remove(),a=e("<div />",{"class":"progress"}).height(0).appendTo(n),f=e("<div />",{"class":"progress-text"}).appendTo(n),p=t.dataTransfer.files,d=new FormData,u&&p.length>u&&(p=array_slice(p,0,3)),e.each(p,function(e,t){return t.type.match(o)?d.append(t.name,t):h="Sorry, but "+t.name+" is no image, bitch!"});if(i)for(l in i)c=i[l],d.append(l,c);return h?(console.log(h),v=new e.Deferred,v.reject({error:h})):(n.addClass("uploading"),v=e.ajax({url:r,data:d,processData:!1,contentType:!1,type:"POST",xhr:function(){var e;return e=new XMLHttpRequest,e.upload.onprogress=function(e){var t;if(e.lengthComputable)return t=Math.round(e.loaded/e.total*100),f.html(t+"%"),a.height(t+"%")},e}})),v.pipe(function(t){return t.error?e.Deferred().reject(t):t}).fail(function(e){return n.addClass("failed"),f.text(s),setTimeout(function(){return n.removeClass("dragover")},3e3)}).always(function(){return n.removeClass("uploading"),a.remove(),f.remove()}).done(function(){return n.addClass("done"),setTimeout(function(){return n.removeClass("dragover")},1e3)})},t}(),window.JJFileUpload=t}(jQuery),define("plugins/editor/jquery.jjfileupload",function(){});var __hasProp={}.hasOwnProperty,__extends=function(e,t){function r(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};(function(e){var t,n,r;return e.globalDragStart=e.Callbacks(),e.globalDragEnd=e.Callbacks(),e.dragLeaveTimeout=null,e.fireGlobalDragEvent=function(t,n,r){var i;return r==null&&(r="inline"),i=t==="dragstart"?"Start":"End",e["globalDrag"+i].fire({type:r,target:n})},e.globalDragStart.add(function(t){return e.dragLeaveTimeout&&clearTimeout(e.dragLeaveTimeout),e("body").addClass("dragover drag-"+t.type)}),e.globalDragEnd.add(function(t){return e.dragLeaveTimeout&&clearTimeout(e.dragLeaveTimeout),e.dragLeaveTimeout=setTimeout(function(){return e("body").removeClass("dragover drag-"+t.type)},200)}),r=function(){function t(t,n){this.options=e.extend({},this.defaults,n),this.$dropzone=t instanceof jQuery?t:e(t),this.$dropzone.addClass("dropzone")}return t.prototype.fileMatch="image.*",t.prototype.defaults={url:null,errorMsg:"Sorry, but there has been an error.",additionalData:null,responseHandler:function(e){return console.log("UPLOAD DATA"),console.log(e)}},t.prototype.$dropzone=null,t.prototype.maxAllowed=null,t.prototype.cleanup=function(){return this.$dropzone.off("dragenter dragleave drop")},t.prototype.deferredUpload=function(t){var n,r=this;return n=JJFileUpload["do"](t,this.$dropzone,this.options.url,this.options.additionalData,this.options.errorMsg,this.fileMatch,this.maxAllowed),n.done(function(t){return t=e.parseJSON(t),r.options.responseHandler(t)})},t}(),t=function(t){function n(e,t){n.__super__.constructor.call(this,e,t),this.dragAndDropSetup()}return __extends(n,t),n.prototype.dragAndDropSetup=function(){var t,n=this;return t=this.$dropzone,t.on("dragenter",function(t){return e(this).addClass("dragover")}),t.on("dragleave",function(t){return e(this).removeClass("dragover")}),t.on("drop",function(r){return n.deferredUpload(r).always(function(){return e.fireGlobalDragEvent(r.type,r.target),t.removeClass("dragover")})})},n}(r),n=function(t){function n(e,t){n.__super__.constructor.call(this,e,t),window.dropzoneIDCount++,this.dropzoneID="jjdrop-"+window.dropzoneIDCount,this.dragAndDropSetup()}return __extends(n,t),n.prototype.setAsActiveDraggable=function(t){if(t.type!=="dragstart")return this._activeDraggableId=null;this._activeDraggableId=e(t.target).data("id");if(!this._activeDraggableId)return this._activeDraggableId=e(t.target).parent().data("id")},n.prototype.setAsDraggable=function(t){var n=this;this.draggables||(this.draggables=[]);if(t.length)return this.draggables.push(t),t.on("dragstart."+this.dropzoneID+" dragend."+this.dropzoneID,function(t){return e.fireGlobalDragEvent(t.type,t.target),n.setAsActiveDraggable(t)})},n.prototype.cleanup=function(){var e,t,r,i,s;n.__super__.cleanup.call(this);if(this.draggables){i=this.draggables,s=[];for(t=0,r=i.length;t<r;t++)e=i[t],s.push(e.off("dragstart."+this.dropzoneID+" dragend."+this.dropzoneID));return s}},n.prototype.dragAndDropSetup=function(){var t,n=this;return t=this.$dropzone,t.on("dragenter",function(t){return e(this).addClass("dragover")}),t.on("dragleave drop",function(t){return e(this).removeClass("dragover")}),t.on("drop",function(t){var r,i;e.fireGlobalDragEvent(t.type,t.target);if(i=n._activeDraggableId){n._activeDraggableId=null,r=n.options.getFromCache(i);if(r)return r.done?r.done(n.options.responseHandler):n.options.responseHandler(r)}else if(t.dataTransfer.files.length)return n.deferredUpload(t)})},n}(r),window.dropzoneIDCount=0,window.JJSimpleImagesUploadZone=t,window.JJSingleImageUploadZone=n})(jQuery),define("plugins/editor/jquery.jjdropzone",function(){}),function(e){function t(e){window.console&&window.console.log&&window.console.log("textarea count: "+e.size())}function n(e,t,n){var s=e.scrollTop;e.setSelectionRange?r(e,t,n):document.selection&&i(e,t,n),e.scrollTop=s}function r(e,t,n){var r=e.selectionStart,i=e.selectionEnd;if(r==i)t?"	"==e.value.substring(r-n.tabString.length,r)?(e.value=e.value.substring(0,r-n.tabString.length)+e.value.substring(r),e.focus(),e.setSelectionRange(r-n.tabString.length,r-n.tabString.length)):"	"==e.value.substring(r,r+n.tabString.length)&&(e.value=e.value.substring(0,r)+e.value.substring(r+n.tabString.length),e.focus(),e.setSelectionRange(r,r)):(e.value=e.value.substring(0,r)+n.tabString+e.value.substring(r),e.focus(),e.setSelectionRange(r+n.tabString.length,r+n.tabString.length));else{var s=e.value.split("\n"),o=new Array,u=0,a=0,f=!1;for(var l in s)a=u+s[l].length,o.push({start:u,end:a,selected:u<=r&&a>r||a>=i&&u<i||u>r&&a<i}),u=a+1;var c=0;for(var l in o)if(o[l].selected){var h=o[l].start+c;t&&n.tabString==e.value.substring(h,h+n.tabString.length)?(e.value=e.value.substring(0,h)+e.value.substring(h+n.tabString.length),c-=n.tabString.length):t||(e.value=e.value.substring(0,h)+n.tabString+e.value.substring(h),c+=n.tabString.length)}e.focus();var p=r+(c>0?n.tabString.length:c<0?-n.tabString.length:0),d=i+c;e.setSelectionRange(p,d)}}function i(t,n,r){var i=document.selection.createRange();if(t==i.parentElement())if(""==i.text)if(n){var s=i.getBookmark();i.moveStart("character",-r.tabString.length),r.tabString==i.text?i.text="":(i.moveToBookmark(s),i.moveEnd("character",r.tabString.length),r.tabString==i.text&&(i.text="")),i.collapse(!0),i.select()}else i.text=r.tabString,i.collapse(!1),i.select();else{var o=i.text,u=o.length,a=o.split("\r\n"),f=document.body.createTextRange();f.moveToElementText(t),f.setEndPoint("EndToStart",i);var l=f.text,c=l.split("\r\n"),h=l.length,p=document.body.createTextRange();p.moveToElementText(t),p.setEndPoint("StartToEnd",i);var d=p.text,v=document.body.createTextRange();v.moveToElementText(t),v.setEndPoint("StartToEnd",f);var m=v.text,g=e(t).html();e("#r3").text(h+" + "+u+" + "+d.length+" = "+g.length),h+m.length<g.length?(c.push(""),h+=2,n&&r.tabString==a[0].substring(0,r.tabString.length)?a[0]=a[0].substring(r.tabString.length):n||(a[0]=r.tabString+a[0])):n&&r.tabString==c[c.length-1].substring(0,r.tabString.length)?c[c.length-1]=c[c.length-1].substring(r.tabString.length):n||(c[c.length-1]=r.tabString+c[c.length-1]);for(var y=1;y<a.length;y++)n&&r.tabString==a[y].substring(0,r.tabString.length)?a[y]=a[y].substring(r.tabString.length):n||(a[y]=r.tabString+a[y]);1==c.length&&0==h&&(n&&r.tabString==a[0].substring(0,r.tabString.length)?a[0]=a[0].substring(r.tabString.length):n||(a[0]=r.tabString+a[0])),h+u+d.length<g.length&&(a.push(""),u+=2),f.text=c.join("\r\n"),i.text=a.join("\r\n");var b=document.body.createTextRange();b.moveToElementText(t),0<h?b.setEndPoint("StartToEnd",f):b.setEndPoint("StartToStart",f),b.setEndPoint("EndToEnd",i),b.select()}}e.fn.tabby=function(t){var r=e.extend({},e.fn.tabby.defaults,t),i=e.fn.tabby.pressed;return this.each(function(){$this=e(this);var t=e.meta?e.extend({},r,$this.data()):r;$this.bind("keydown",function(r){var s=e.fn.tabby.catch_kc(r);16==s&&(i.shft=!0),17==s&&(i.ctrl=!0,setTimeout("$.fn.tabby.pressed.ctrl = false;",1e3)),18==s&&(i.alt=!0,setTimeout("$.fn.tabby.pressed.alt = false;",1e3));if(9==s&&!i.ctrl&&!i.alt)return r.preventDefault,i.last=s,setTimeout("$.fn.tabby.pressed.last = null;",0),n(e(r.target).get(0),i.shft,t),!1}).bind("keyup",function(t){16==e.fn.tabby.catch_kc(t)&&(i.shft=!1)}).bind("blur",function(t){9==i.last&&e(t.target).one("focus",function(e){i.last=null}).get(0).focus()})})},e.fn.tabby.catch_kc=function(e){return e.keyCode?e.keyCode:e.charCode?e.charCode:e.which},e.fn.tabby.pressed={shft:!1,ctrl:!1,alt:!1,last:null},e.fn.tabby.defaults={tabString:String.fromCharCode(9)}}(jQuery),define("plugins/editor/jquery.tabby",function(){}),function(){function t(t){this.tokens=[],this.strs=[],this.tokens.links={},this.options=t||f.defaults,this.rules=e.normal,this.options.gfm&&(this.options.tables?this.rules=e.tables:this.rules=e.gfm)}function r(e,t){this.options=t||f.defaults,this.links=e,this.rules=n.normal;if(!this.links)throw new Error("Tokens array requires a `links` property.");this.options.gfm?this.options.breaks?this.rules=n.breaks:this.rules=n.gfm:this.options.pedantic&&(this.rules=n.pedantic)}function i(e){this.tokens=[],this.token=null,this.options=e||f.defaults}function s(e,t){return e.replace(t?/&/g:/&(?!#?\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function o(e,t){return e=e.source,t=t||"",function n(r,i){return r?(i=i.source||i,i=i.replace(/(^|[^\[])\^/g,"$1"),e=e.replace(r,i),n):new RegExp(e,t)}}function u(){}function a(e){var t=1,n,r;for(;t<arguments.length;t++){n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}function f(e,n,r){if(r||typeof n=="function"){r||(r=n,n=null),n&&(n=a({},f.defaults,n));var o=t.lex(o,n),u=n.highlight,l=0,c=o.length,h=0;if(!u||u.length<3)return r(null,i.parse(o,n));var p=function(){delete n.highlight;var e=i.parse(o,n);return n.highlight=u,r(null,e)};for(;h<c;h++)(function(e){if(e.type!=="code")return;return l++,u(e.text,e.lang,function(t,n){if(n==null||n===e.text)return--l||p();e.text=n,e.escaped=!0,--l||p()})})(o[h]);return}try{return n&&(n=a({},f.defaults,n)),i.parse(t.lex(e,n),n,e)}catch(d){d.message+="\nPlease report this to https://github.com/chjj/marked.";if((n||f.defaults).silent)return"<p>An error occured:</p><pre>"+s(d.message+"",!0)+"</pre>";throw d}}var e={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,fences:u,hr:/^( *[-*_]){3,} *(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *#* *(?:\n+|$)/,nptable:u,lheading:/^([^\n]+)\n *(=|-){3,} *\n*/,blockquote:/^( *>[^\n]+(\n[^\n]+)*\n*)+/,list:/^( *)(bull) [\s\S]+?(?:hr|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:/^ *(?:comment|closed|closing) *(?:\n{2,}|\s*$)/,def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +["(]([^\n]+)[")])? *(?:\n+|$)/,table:u,paragraph:/^((?:[^\n]+\n?(?!hr|heading|lheading|blockquote|tag|def))+)\n*/,text:/^[^\n]+/};e.bullet=/(?:[*+-]|\d+\.)/,e.item=/^( *)(bull) [^\n]*(?:\n(?!\1bull )[^\n]*)*/,e.item=o(e.item,"gm")(/bull/g,e.bullet)(),e.list=o(e.list)(/bull/g,e.bullet)("hr",/\n+(?=(?: *[-*_]){3,} *(?:\n+|$))/)(),e._tag="(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:/|@)\\b",e.html=o(e.html)("comment",/<!--[\s\S]*?-->/)("closed",/<(tag)[\s\S]+?<\/\1>/)("closing",/<tag(?:"[^"]*"|'[^']*'|[^'">])*?>/)(/tag/g,e._tag)(),e.paragraph=o(e.paragraph)("hr",e.hr)("heading",e.heading)("lheading",e.lheading)("blockquote",e.blockquote)("tag","<"+e._tag)("def",e.def)(),e.normal=a({},e),e.gfm=a({},e.normal,{fences:/^ *(`{3,}|~{3,}) *(\S+)? *\n([\s\S]+?)\s*\1 *(?:\n+|$)/,paragraph:/^/}),e.gfm.paragraph=o(e.paragraph)("(?!","(?!"+e.gfm.fences.source.replace("\\1","\\2")+"|")(),e.tables=a({},e.gfm,{nptable:/^ *(\S.*\|.*)\n *([-:]+ *\|[-| :]*)\n((?:.*\|.*(?:\n|$))*)\n*/,table:/^ *\|(.+)\n *\|( *[-:]+[-| :]*)\n((?: *\|.*(?:\n|$))*)\n*/}),t.rules=e,t.lex=function(e,n){var r=new t(n);return r.lex(e)},t.prototype.lex=function(e){return e=e.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    ").replace(/\u00a0/g," ").replace(/\u2424/g,"\n"),this.token(e,!0)},t.prototype.token=function(t,n){var t=t.replace(/^ +$/gm,""),r,i,s,o,u,a,f,l,c,h,p=0;h=t;while(t){p&&(this.tokens[this.tokens.length-1].origin=h.substring(0,h.indexOf(t))),h=t,p++;if(s=this.rules.newline.exec(t))t=t.substring(s[0].length),s[0].length>1&&this.tokens.push({type:"space"});if(s=this.rules.code.exec(t)){t=t.substring(s[0].length),s=s[0].replace(/^ {4}/gm,""),this.tokens.push({type:"code",text:this.options.pedantic?s:s.replace(/\n+$/,"")});continue}if(s=this.rules.fences.exec(t)){t=t.substring(s[0].length),this.tokens.push({type:"code",lang:s[2],text:s[3]});continue}if(s=this.rules.heading.exec(t)){t=t.substring(s[0].length),this.tokens.push({type:"heading",depth:s[1].length,text:s[2]});continue}if(n&&(s=this.rules.nptable.exec(t))){t=t.substring(s[0].length),a={type:"table",header:s[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:s[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:s[3].replace(/\n$/,"").split("\n")};for(l=0;l<a.align.length;l++)/^ *-+: *$/.test(a.align[l])?a.align[l]="right":/^ *:-+: *$/.test(a.align[l])?a.align[l]="center":/^ *:-+ *$/.test(a.align[l])?a.align[l]="left":a.align[l]=null;for(l=0;l<a.cells.length;l++)a.cells[l]=a.cells[l].split(/ *\| */);this.tokens.push(a);continue}if(s=this.rules.lheading.exec(t)){t=t.substring(s[0].length),this.tokens.push({type:"heading",depth:s[2]==="="?1:2,text:s[1]});continue}if(s=this.rules.hr.exec(t)){t=t.substring(s[0].length),this.tokens.push({type:"hr"});continue}if(s=this.rules.blockquote.exec(t)){t=t.substring(s[0].length),this.tokens.push({type:"blockquote_start"}),s=s[0].replace(/^ *> ?/gm,""),this.token(s,n),this.tokens.push({type:"blockquote_end"});continue}if(s=this.rules.list.exec(t)){t=t.substring(s[0].length),o=s[2],this.tokens.push({type:"list_start",ordered:o.length>1}),s=s[0].match(this.rules.item),r=!1,c=s.length,l=0;for(;l<c;l++)a=s[l],f=a.length,a=a.replace(/^ *([*+-]|\d+\.) +/,""),~a.indexOf("\n ")&&(f-=a.length,a=this.options.pedantic?a.replace(/^ {1,4}/gm,""):a.replace(new RegExp("^ {1,"+f+"}","gm"),"")),this.options.smartLists&&l!==c-1&&(u=e.bullet.exec(s[l+1])[0],o!==u&&!(o.length>1&&u.length>1)&&(t=s.slice(l+1).join("\n")+t,l=c-1)),i=r||/\n\n(?!\s*$)/.test(a),l!==c-1&&(r=a[a.length-1]==="\n",i||(i=r)),this.tokens.push({type:i?"loose_item_start":"list_item_start"}),this.token(a,!1),this.tokens.push({type:"list_item_end"});this.tokens.push({type:"list_end"});continue}if(s=this.rules.html.exec(t)){t=t.substring(s[0].length),this.tokens.push({type:this.options.sanitize?"paragraph":"html",pre:s[1]==="pre"||s[1]==="script",text:s[0]});continue}if(n&&(s=this.rules.def.exec(t))){t=t.substring(s[0].length),this.tokens.links[s[1].toLowerCase()]={href:s[2],title:s[3]};continue}if(n&&(s=this.rules.table.exec(t))){t=t.substring(s[0].length),a={type:"table",header:s[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:s[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:s[3].replace(/(?: *\| *)?\n$/,"").split("\n")};for(l=0;l<a.align.length;l++)/^ *-+: *$/.test(a.align[l])?a.align[l]="right":/^ *:-+: *$/.test(a.align[l])?a.align[l]="center":/^ *:-+ *$/.test(a.align[l])?a.align[l]="left":a.align[l]=null;for(l=0;l<a.cells.length;l++)a.cells[l]=a.cells[l].replace(/^ *\| *| *\| *$/g,"").split(/ *\| */);this.tokens.push(a);continue}if(n&&(s=this.rules.paragraph.exec(t))){t=t.substring(s[0].length),this.tokens.push({type:"paragraph",text:s[1][s[1].length-1]==="\n"?s[1].slice(0,-1):s[1]});continue}if(s=this.rules.text.exec(t)){t=t.substring(s[0].length),this.tokens.push({type:"text",text:s[0]});continue}if(t)throw new Error("Infinite loop on byte: "+t.charCodeAt(0))}return this.tokens&&this.tokens.length&&(this.tokens[this.tokens.length-1].origin=h),this.tokens};var n={escape:/^\\([\\`*{}\[\]()#+\-.!_>])/,autolink:/^<([^ >]+(@|:\/)[^ >]+)>/,url:u,tag:/^<!--[\s\S]*?-->|^<\/?\w+(?:"[^"]*"|'[^']*'|[^'">])*?>/,link:/^!?\[(inside)\]\(href\)/,reflink:/^!?\[(inside)\]\s*\[([^\]]*)\]/,nolink:/^!?\[((?:\[[^\]]*\]|[^\[\]])*)\]/,strong:/^__([\s\S]+?)__(?!_)|^\*\*([\s\S]+?)\*\*(?!\*)/,em:/^\b_((?:__|[\s\S])+?)_\b|^\*((?:\*\*|[\s\S])+?)\*(?!\*)/,code:/^(`+)\s*([\s\S]*?[^`])\s*\1(?!`)/,br:/^ {2,}\n(?!\s*$)/,del:u,cite:/^""([\s\S]+?)""/,text:/^[\s\S]+?(?=[\\<!\[_"*`]| {2,}\n|$)/};n._inside=/(?:\[[^\]]*\]|[^\]]|\](?=[^\[]*\]))*/,n._href=/\s*<?([^\s]*?)>?(?:\s+['"]([\s\S]*?)['"])?\s*/,n.link=o(n.link)("inside",n._inside)("href",n._href)(),n.reflink=o(n.reflink)("inside",n._inside)(),n.normal=a({},n),n.pedantic=a({},n.normal,{strong:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/}),n.gfm=a({},n.normal,{escape:o(n.escape)("])","~|])")(),url:/^(https?:\/\/[^\s<]+[^<.,:;"')\]\s])/,del:/^~~(?=\S)([\s\S]*?\S)~~/,text:o(n.text)("]|","~]|")("|","|https?://|")()}),n.breaks=a({},n.gfm,{br:o(n.br)("{2,}","*")(),text:o(n.gfm.text)("{2,}","*")()}),r.rules=n,r.output=function(e,t,n){var i=new r(t,n);return i.output(e)},r.prototype.output=function(e){var t="",n,r,i,o;while(e){if(o=this.rules.escape.exec(e)){e=e.substring(o[0].length),t+=o[1];continue}if(o=this.rules.autolink.exec(e)){e=e.substring(o[0].length),o[2]==="@"?(r=o[1][6]===":"?this.mangle(o[1].substring(7)):this.mangle(o[1]),i=this.mangle("mailto:")+r):(r=s(o[1]),i=r),t+='<a href="'+i+'">'+r+"</a>";continue}if(o=this.rules.url.exec(e)){e=e.substring(o[0].length),r=s(o[1]),i=r,t+='<a href="'+i+'">'+r+"</a>";continue}if(o=this.rules.tag.exec(e)){e=e.substring(o[0].length),t+=this.options.sanitize?s(o[0]):o[0];continue}if(o=this.rules.link.exec(e)){e=e.substring(o[0].length),t+=this.outputLink(o,{href:o[2],title:o[3]});continue}if((o=this.rules.reflink.exec(e))||(o=this.rules.nolink.exec(e))){e=e.substring(o[0].length),n=(o[2]||o[1]).replace(/\s+/g," "),n=this.links[n.toLowerCase()];if(!n||!n.href){t+=o[0][0],e=o[0].substring(1)+e;continue}t+=this.outputLink(o,n);continue}if(o=this.rules.strong.exec(e)){e=e.substring(o[0].length),t+="<strong>"+this.output(o[2]||o[1])+"</strong>";continue}if(o=this.rules.cite.exec(e)){e=e.substring(o[0].length),t+="<cite>"+this.output(o[2]||o[1])+"</cite>";continue}if(o=this.rules.em.exec(e)){e=e.substring(o[0].length),t+="<em>"+this.output(o[2]||o[1])+"</em>";continue}if(o=this.rules.code.exec(e)){e=e.substring(o[0].length),t+="<code>"+s(o[2],!0)+"</code>";continue}if(o=this.rules.br.exec(e)){e=e.substring(o[0].length),t+="<br>";continue}if(o=this.rules.del.exec(e)){e=e.substring(o[0].length),t+="<del>"+this.output(o[1])+"</del>";continue}if(o=this.rules.text.exec(e)){e=e.substring(o[0].length),t+=s(o[0]);continue}if(e)throw new Error("Infinite loop on byte: "+e.charCodeAt(0))}return t},r.prototype.outputLink=function(e,t){return e[0][0]!=="!"?'<a href="'+s(t.href)+'"'+(t.title?' title="'+s(t.title)+'"':"")+">"+this.output(e[1])+"</a>":'<img src="'+s(t.href)+'" alt="'+s(e[1])+'"'+(t.title?' title="'+s(t.title)+'"':"")+">"},r.prototype.smartypants=function(e){return this.options.smartypants?e.replace(/--/g,"—").replace(/'([^']*)'/g,"‘$1’").replace(/"([^"]*)"/g,"“$1”").replace(/\.{3}/g,"…"):e},r.prototype.mangle=function(e){var t="",n=e.length,r=0,i;for(;r<n;r++)i=e.charCodeAt(r),Math.random()>.5&&(i="x"+i.toString(16)),t+="&#"+i+";";return t},i.parse=function(e,t,n){var r=new i(t);return r.parse(e,n)},i.prototype.parse=function(e,t){var n=[];for(var i=0;i<e.length;i++)node=e[i],n.push(t.indexOf(node.origin));this.inline=new r(e.links,this.options),this.tokens=e.reverse();var s="";while(this.next()){var o=this.tok(),u=n[0],a=o.indexOf(">");o&&(o=[o.slice(0,a),' data-editor-pos="'+u+'"',o.slice(a)].join("")),n.shift(),s+=o}return s},i.prototype.next=function(){return this.token=this.tokens.pop()},i.prototype.peek=function(){return this.tokens[this.tokens.length-1]||0},i.prototype.parseText=function(){var e=this.token.text;while(this.peek().type==="text")e+="\n"+this.next().text;return this.inline.output(e)},i.prototype.tok=function(){switch(this.token.type){case"space":return"";case"hr":return"<hr>\n";case"heading":return"<h"+this.token.depth+">"+this.inline.output(this.token.text)+"</h"+this.token.depth+">\n";case"code":if(this.options.highlight){var e=this.options.highlight(this.token.text,this.token.lang);e!=null&&e!==this.token.text&&(this.token.escaped=!0,this.token.text=e)}return this.token.escaped||(this.token.text=s(this.token.text,!0)),"<pre><code"+(this.token.lang?' class="'+this.options.langPrefix+this.token.lang+'"':"")+">"+this.token.text+"</code></pre>\n";case"table":var t="",n,r,i,o,u;t+="<thead>\n<tr>\n";for(r=0;r<this.token.header.length;r++)n=this.inline.output(this.token.header[r]),t+=this.token.align[r]?'<th align="'+this.token.align[r]+'">'+n+"</th>\n":"<th>"+n+"</th>\n";t+="</tr>\n</thead>\n",t+="<tbody>\n";for(r=0;r<this.token.cells.length;r++){i=this.token.cells[r],t+="<tr>\n";for(u=0;u<i.length;u++)o=this.inline.output(i[u]),t+=this.token.align[u]?'<td align="'+this.token.align[u]+'">'+o+"</td>\n":"<td>"+o+"</td>\n";t+="</tr>\n"}return t+="</tbody>\n","<table>\n"+t+"</table>\n";case"blockquote_start":var t="";while(this.next().type!=="blockquote_end")t+=this.tok();return"<blockquote>\n"+t+"</blockquote>\n";case"list_start":var a=this.token.ordered?"ol":"ul",t="";while(this.next().type!=="list_end")t+=this.tok();return"<"+a+">\n"+t+"</"+a+">\n";case"list_item_start":var t="";while(this.next().type!=="list_item_end")t+=this.token.type==="text"?this.parseText():this.tok();return"<li>"+t+"</li>\n";case"loose_item_start":var t="";while(this.next().type!=="list_item_end")t+=this.tok();return"<li>"+t+"</li>\n";case"html":return!this.token.pre&&!this.options.pedantic?this.inline.output(this.token.text):this.token.text;case"paragraph":return"<p>"+this.inline.output(this.token.text)+"</p>\n";case"text":return"<p>"+this.parseText()+"</p>\n"}},u.exec=u,f.options=f.setOptions=function(e){return a(f.defaults,e),f},f.defaults={gfm:!0,tables:!0,breaks:!1,pedantic:!1,sanitize:!1,smartLists:!1,silent:!1,highlight:null,langPrefix:"lang-"},f.Parser=i,f.parser=i.parse,f.Lexer=t,f.lexer=t.lex,f.InlineLexer=r,f.inlineLexer=r.output,f.parse=f,typeof exports=="object"?module.exports=f:this.marked=f}.call(function(){return this||(typeof window!="undefined"?window:global)}()),define("plugins/editor/marked_jjedit",function(){}),function(e){var t,n,r;return r=function(){function n(t,n){var r;r=null,this.$preview=null,this.currentDrag=null,this.inlineElementDragged=null,this.dragCount=0,this.fileDragPermitted=!0,this.pendingAjax=[],this.customParsers={},this.options=e.extend({},this.defaults,n),this.$input=t instanceof jQuery?t:e(t),this.$input._val=this.$input[this.options.contentGetter],this.$preview=this.options.preview instanceof jQuery?this.options.preview:e(this.options.preview),this.initialize()}var t;return n.prototype.defaults={preview:"#preview",parsingDelay:200,dragAndDropAllowed:!0,hideDropzoneDelay:1e3,errorMsg:"Sorry, but there has been an error.",contentGetter:"val",customParsers:{},customParserOptions:{},afterRender:null,onChange:null,onBlur:null,imageUrl:"/imagery/images/docimage/",placeholder:"PLACEHOLDER",charlimit:0,additionalPOSTData:null,uploadResponseHandler:null},t=function(t){var r;return t.type==="dragstart"?(r=e(t.target).data("md-tag"),r||(r=e(t.target).parent().data("md-tag")),r=r.replace("\\[","[").replace("\\]","]")):r=null,e.fireGlobalDragEvent(t.type,t.target),n._activeDraggable=r},n.setAsDraggable=function(e){n.draggables||(n.draggables=[]),e=e.filter("[data-md-tag]");if(e.length)return n.draggables.push(e),e.on("dragstart dragend",t)},n.cleanupDraggables=function(){if(n.draggables)return e.each(n.draggables,function(e,t){return t.off("dragstart dragend")})},n.prototype.cleanup=function(){this.$input.remove(),this.$preview.remove();if(this.$dropzone)return this.$dropzone.remove()},n.prototype.initialize=function(){var t,n,r,i,s=this;return e.each(this.options.customParsers,function(e,t){var n,r;r=window[t];if(r)return n=s.options.customParserOptions[e],s.customParsers[e]=new r(n)}),n=this.$input,r=this.$preview,s=this,n.tabby().trigger("keyup"),this.delayTimeout=null,n.off("keyup").on("keyup",function(t){var r,i,o;return r=e(this),i=s.options.charlimit,i>0&&n._val().length>i&&n._val(n._val().substring(0,i)),o&&clearTimeout(o),o=setTimeout(function(){return s.parseMarkdown()},s.options.parsingDelay)}),t=n.add(r),i=null,t.on("scroll",function(t){var s,o;return o=e(this),s=o.is(n)?r:n,i&&i.is(s)?!1:(i=o,s[0].scrollTop=this.scrollTop*s[0].scrollHeight/this.scrollHeight,setTimeout(function(){return i=null},200))}),s.parseMarkdown(),this.options.dragAndDropAllowed&&this.dragAndDropSetup(),this},n.prototype.parseMarkdown=function(){var t,n,r,i=this;return e.each(this.pendingAjax,function(e,t){if(t.readyState!==4&&t.abort)return t.abort()}),n=this.$input._val(),t=marked(n),r=[],e.each(this.customParsers,function(e,t){var s,o;s=t.findIDs(n),o=t.getData(s),r.push(o);if(!t.noAjax)return i.pendingAjax.push(o)}),e.when.apply(e,r).then(function(){var r;i.pendingAjax=[],e.each(i.customParsers,function(e,n){return t=n.parseMarkdown(t)}),i.$preview.trigger("markdown:replaced"),n.length===0?i.$preview.html(i.options.placeholder):i.$preview.html(t),i.inlineDragAndDropSetup(),i.options.afterRender&&i.options.afterRender(),r={raw:n},i.customParsers.images&&(r.images=i.customParsers.images.returnIds());if(i.options.onChange)return i.options.onChange(r)})},n.prototype.dragAndDropSetup=function(){var t,r,i,s,o=this;return t=this.$preview,r=this.options.hideDropzoneDelay,t.on("dragover",function(n){var r,s,u,a,f,l;o.currentDrag||(o.currentDrag={$dropzone:e("<div>",{"class":"dropzone"})},o.dragCount++,t.data("dragid",o.dragCount),o.currentDrag.$dropzone.data("dragid",o.dragCount)),i(),a=o.currentDrag,r=a.$dropzone,a.hideDropzoneTimeout&&clearTimeout(o.currentDrag.hideDropzoneTimeout),s=e(n.target);if(!s.is(r))return l=!1,s.is(t)?l=!0:s.attr("data-editor-pos")||(u=s.closest("[data-editor-pos]"),u.length?s=u:(s=t,l=!0)),f=l?"appendTo":"insertBefore",a.$target=s,r[f].call(r,s)}),t.on("drop",function(t){var n;n=e(t.originalEvent.originalTarget);if(o.currentDrag&&!n.is(o.currentDrag.$dropzone))return s(),!1}),s=function(){if(!o.currentDrag)return;return clearTimeout(o.currentDrag.hideDropzoneTimeout),o.currentDrag.hideDropzoneTimeout=setTimeout(function(){return o.currentDrag.$dropzone.hide().detach().show()},r)},t.on("dragleave",s),i=function(){var t;return o.currentDrag.dropHandlerBound?!1:(o.currentDrag.dropHandlerBound=!0,t=o.currentDrag.$dropzone,t.on("dragenter",function(t){return e(this).addClass("dragover")}),t.on("dragleave",function(t){return e(this).removeClass("dragover")}),t.on("drop",function(r){var i,s,u,a,f,l;return i=o.currentDrag.$target,a=o.currentDrag.hideDropzoneTimeout,a&&clearTimeout(a),t.off("drop"),o.currentDrag=null,s=new e.Deferred,s.done(function(){return t.remove(),o.parseMarkdown()}),(u=o.inlineElementDragged)?(o.moveInlineElement(e(u),i),o.inlineElementDragged=null,s.resolve()):(f=n._activeDraggable)?(o.insertAtEditorPosByEl(i,f),n._activeDraggable=null,s.resolve()):r.dataTransfer.files.length?(l=JJFileUpload["do"](r,t,o.options.imageUrl,o.options.additionalPOSTData,o.options.errorMsg,"image.*"),l.done(function(t){var n,r,u,a,f;t=e.parseJSON(t),o.options.uploadResponseHandler&&o.options.uploadResponseHandler(t),u="";for(a=0,f=t.length;a<f;a++)r=t[a],u+="[img "+r.id+"]";return n="  \n\n",o.insertAtEditorPosByEl(i,u+n),s.resolve()})):t.remove()}))}},n.prototype.inlineDragAndDropSetup=function(){var e,t,n=this;return t=this.$preview,e=t.find("[data-md-tag]"),n=this,e.on("dragstart",function(e){return n.inlineElementDragged=this}),e.on("dragend",function(e){return n.inlineElementDragged=null}),t.on("markdown:replace",function(){return e.off("dragstart dragend")})},n.prototype.moveInlineElement=function(e,t){var n,r;return n=e.data("md-tag").replace(/\\/g,""),r=e.data("editor-pos"),!t.is(this.$preview)&&t.data("editor-pos")<r&&(r+=n.length),this.insertAtEditorPosByEl(t,n),this.removeAtEditorPos(r,n)},n.prototype.removeAtEditorPos=function(e,t){var n;return n=this.$input._val(),n=[n.slice(0,e),n.slice(e+t.length)].join(""),this.$input._val(n)},n.prototype.insertAtEditorPosByEl=function(e,t){var n,r;return r=this.$input._val(),e.is(this.$preview)?r+=t:(n=e.data("editor-pos"),r=[r.slice(0,n),t,r.slice(n)].join("")),this.$input._val(r)},n}(),n={findIDs:function(e){},parseFound:function(e){},getUrl:function(e){},getData:function(e){},parseMarkdown:function(e){},returnIds:function(){}},t=function(){function e(e){var t,n;this.cache=[];if(e)for(t in e)n=e[t],this[t]=n}return e.prototype.url="",e}(),t.prototype.findIDs=function(t){var n,r,i,s;this._raw=t,s=[],i=[];while(n=this.rule.exec(t))s.push(n),r=this.parseFound(n[1]),e.inArray(r,i)<0&&i.push(r);return this._tempReplacements=s,i},t.prototype.parseFound=function(e){return e},t.prototype.getUrl=function(e){return this.url+"?ids="+e.join(",")},t.prototype.getData=function(t){var n,r,i,s,o=this;return r=[],i=[],n=new e.Deferred,e.each(t,function(t,n){var s;return s=null,e.each(o.cache,function(e,t){t.id===n&&(s=t)}),s?i.push(s):r.push(n)}),r.length?(s=this.getUrl(r),e.getJSON(s).done(function(t){if(e.isArray(t))return o.cache=o.cache.concat(t),i=i.concat(t),o.data=i})):(this.data=i,n.resolve(),n)},t.prototype.parseMarkdown=function(t){var n,r,i,s,o=this;return n=function(e,t,n){var r;return r=e.indexOf(">"),[e.slice(0,r)," data-"+t+'="'+n+'"',e.slice(r)].join("")},r=[],i=this._raw,s=[],e.each(this._tempReplacements,function(r,i){var u,a,f,l;a=null,u=o.parseFound(i[1]),e.each(o.data,function(e,t){t.id===u&&(a=t)});if(a)return s.push(a.id),f=i[0].replace("[","\\[").replace("]","\\]"),l=n(a.tag,"editor-pos",i.index),l=n(l,"md-tag",f),t=t.replace(i[0],l)}),this._raw=null,this._tempReplacements=null,this.usedIds=e.unique(s),t},t.prototype.returnIds=function(){var e;return e={ids:this.usedIds},this.className&&(e.className=this.className),e},window.JJMarkdownEditor=r,window.CustomMarkdownParser=t}(jQuery),define("plugins/editor/jquery.jjmarkdown",function(){}),function(e){function H(t,i,s,o){this.id=s,this.target=t,this.tooltip=r,this.elements=elements={target:t},this._id=E+"-"+s,this.timers={img:{}},this.options=i,this.plugins={},this.cache=cache={event:{},target:e(),disabled:n,attr:o,onTooltip:n,lastClass:""},this.rendered=this.destroyed=this.disabled=this.waiting=this.hiddenDuringWait=this.positioning=this.triggering=n}function B(t){return t===r||e.type(t)!=="object"}function j(t){return!(e.isFunction(t)||t&&t.attr||t.length||e.type(t)==="object"&&(t.jquery||t.then))}function F(i){var s,o,u,a;return B(i)?n:(B(i.metadata)&&(i.metadata={type:i.metadata}),"content"in i&&(s=i.content,B(s)||s.jquery||s.done?s=i.content={text:o=j(s)?n:s}:o=s.text,"ajax"in s&&(u=s.ajax,a=u&&u.once!==n,delete s.ajax,s.text=function(t,n){var i=o||e(this).attr(n.options.content.attr)||"Loading...",s=e.ajax(e.extend({},u,{context:n})).then(u.success,r,u.error).then(function(e){return e&&a&&n.set("content.text",e),e},function(e,t,r){if(n.destroyed||e.status===0)return;n.set("content.text",t+": "+r)});return a?i:(n.set("content.text",i),s)}),"title"in s&&(B(s.title)||(s.button=s.title.button,s.title=s.title.text),j(s.title||n)&&(s.title=n))),"position"in i&&B(i.position)&&(i.position={my:i.position,at:i.position}),"show"in i&&B(i.show)&&(i.show=i.show.jquery?{target:i.show}:i.show===t?{ready:t}:{event:i.show}),"hide"in i&&B(i.hide)&&(i.hide=i.hide.jquery?{target:i.hide}:{event:i.hide}),"style"in i&&B(i.style)&&(i.style={classes:i.style}),e.each(w,function(){this.sanitize&&this.sanitize(i)}),i)}function I(e,t){var n=0,r,i=e,s=t.split(".");while(i=i[s[n++]])n<s.length&&(r=i);return[r||e,s.pop()]}function q(e,t){var n,r,i;for(n in this.checks)for(r in this.checks[n])if(i=(new RegExp(r,"i")).exec(e))t.push(i),(n==="builtin"||this.plugins[n])&&this.checks[n][r].apply(this.plugins[n]||this,t)}function W(e){return T.concat("").join(e?"-"+e+" ":" ")}function X(r){if(this.tooltip.hasClass(M))return n;clearTimeout(this.timers.show),clearTimeout(this.timers.hide);var i=e.proxy(function(){this.toggle(t,r)},this);this.options.show.delay>0?this.timers.show=setTimeout(i,this.options.show.delay):i()}function V(t){if(this.tooltip.hasClass(M))return n;var r=e(t.relatedTarget),i=r.closest(N)[0]===this.tooltip[0],s=r[0]===this.options.show.target[0];clearTimeout(this.timers.show),clearTimeout(this.timers.hide);if(this!==r[0]&&this.options.position.target==="mouse"&&i||this.options.hide.fixed&&/mouse(out|leave|move)/.test(t.type)&&(i||s)){try{t.preventDefault(),t.stopImmediatePropagation()}catch(o){}return}var u=e.proxy(function(){this.toggle(n,t)},this);this.options.hide.delay>0?this.timers.hide=setTimeout(u,this.options.hide.delay):u()}function $(t){if(this.tooltip.hasClass(M)||!this.options.hide.inactive)return n;clearTimeout(this.timers.inactive),this.timers.inactive=setTimeout(e.proxy(function(){this.hide(t)},this),this.options.hide.inactive)}function J(e){this.rendered&&this.tooltip[0].offsetWidth>0&&this.reposition(e)}function Q(t,n,r){e(document.body).delegate(t,(n.split?n:n.join(K+" "))+K,function(){var t=m.api[e.attr(this,x)];t&&!t.disabled&&r.apply(t,arguments)})}function G(i,s,o){var u,a,f,l,c,h=e(document.body),p=i[0]===document?h:i,d=i.metadata?i.metadata(o.metadata):r,v=o.metadata.type==="html5"&&d?d[o.metadata.name]:r,g=i.data(o.metadata.name||"qtipopts");try{g=typeof g=="string"?e.parseJSON(g):g}catch(b){}l=e.extend(t,{},m.defaults,o,typeof g=="object"?F(g):r,F(v||d)),a=l.position,l.id=s;if("boolean"==typeof l.content.text){f=i.attr(l.content.attr);if(l.content.attr===n||!f)return n;l.content.text=f}a.container.length||(a.container=h),a.target===n&&(a.target=p),l.show.target===n&&(l.show.target=p),l.show.solo===t&&(l.show.solo=a.container.closest("body")),l.hide.target===n&&(l.hide.target=p),l.position.viewport===t&&(l.position.viewport=a.container),a.container=a.container.eq(0),a.at=new y(a.at,t),a.my=new y(a.my);if(i.data(E))if(l.overwrite)i.qtip("destroy");else if(l.overwrite===n)return n;return i.attr(S,s),l.suppress&&(c=i.attr("title"))&&i.removeAttr("title").attr(D,c).attr("title",""),u=new H(i,l,s,!!f),i.data(E,u),i.one("remove.qtip-"+s+" removeqtip.qtip-"+s,function(){var t;(t=e(this).data(E))&&t.destroy()}),u}var t=!0,n=!1,r=null,i="x",s="y",o="width",u="height",a="top",f="left",l="bottom",c="right",h="center",p="flip",d="flipinvert",v="shift",m,g,y,b,w={},E="qtip",S="data-hasqtip",x="data-qtip-id",T=["ui-widget","ui-tooltip"],N="."+E,C="click dblclick mousedown mouseup mousemove mouseleave mouseenter".split(" "),k=E+"-fixed",L=E+"-default",A=E+"-focus",O=E+"-hover",M=E+"-disabled",_="_replacedByqTip",D="oldtitle",P;BROWSER={ie:function(){var e=3,t=document.createElement("div");while(t.innerHTML="<!--[if gt IE "+ ++e+"]><i></i><![endif]-->")if(!t.getElementsByTagName("i")[0])break;return e>4?e:NaN}(),iOS:parseFloat((""+(/CPU.*OS ([0-9_]{1,5})|(CPU like).*AppleWebKit.*Mobile/i.exec(navigator.userAgent)||[0,""])[1]).replace("undefined","3_2").replace("_",".").replace("_",""))||n},g=H.prototype,g.render=function(r){if(this.rendered||this.destroyed)return this;var i=this,s=this.options,o=this.cache,u=this.elements,a=s.content.text,f=s.content.title,l=s.content.button,c=s.position,h="."+this._id+" ",p=[];return e.attr(this.target[0],"aria-describedby",this._id),this.tooltip=u.tooltip=tooltip=e("<div/>",{id:this._id,"class":[E,L,s.style.classes,E+"-pos-"+s.position.my.abbrev()].join(" "),width:s.style.width||"",height:s.style.height||"",tracking:c.target==="mouse"&&c.adjust.mouse,role:"alert","aria-live":"polite","aria-atomic":n,"aria-describedby":this._id+"-content","aria-hidden":t}).toggleClass(M,this.disabled).attr(x,this.id).data(E,this).appendTo(c.container).append(u.content=e("<div />",{"class":E+"-content",id:this._id+"-content","aria-atomic":t})),this.rendered=-1,this.positioning=t,f&&(this._createTitle(),e.isFunction(f)||p.push(this._updateTitle(f,n))),l&&this._createButton(),e.isFunction(a)||p.push(this._updateContent(a,n)),this.rendered=t,this._setWidget(),e.each(s.events,function(t,n){e.isFunction(n)&&tooltip.bind((t==="toggle"?["tooltipshow","tooltiphide"]:["tooltip"+t]).join(h)+h,n)}),e.each(w,function(e){var t;this.initialize==="render"&&(t=this(i))&&(i.plugins[e]=t)}),this._assignEvents(),e.when.apply(e,p).then(function(){i._trigger("render"),i.positioning=n,!i.hiddenDuringWait&&(s.show.ready||r)&&i.toggle(t,o.event,n),i.hiddenDuringWait=n}),m.api[this.id]=this,this},g.destroy=function(n){function i(){if(this.destroyed)return;this.destroyed=t;var n=this.target,i=n.attr(D);this.rendered&&this.tooltip.stop(1,0).find("*").remove().end().remove(),e.each(this.plugins,function(e){this.destroy&&this.destroy()}),clearTimeout(this.timers.show),clearTimeout(this.timers.hide),this._unassignEvents(),n.removeData(E).removeAttr(x).removeAttr("aria-describedby"),this.options.suppress&&i&&n.attr("title",i).removeAttr(D),this._unbind(n),this.options=this.elements=this.cache=this.timers=this.plugins=this.mouse=r,delete m.api[this.id]}return this.destroyed?this.target:(n!==t&&this.rendered?(tooltip.one("tooltiphidden",e.proxy(i,this)),!this.triggering&&this.hide()):i.call(this),this.target)},b=g.checks={builtin:{"^id$":function(r,i,s,o){var u=s===t?m.nextid:s,a=E+"-"+u;u!==n&&u.length>0&&!e("#"+a).length?(this._id=a,this.rendered&&(this.tooltip[0].id=this._id,this.elements.content[0].id=this._id+"-content",this.elements.title[0].id=this._id+"-title")):r[i]=o},"^prerender":function(e,t,n){n&&!this.rendered&&this.render(this.options.show.ready)},"^content.text$":function(e,t,n){this._updateContent(n)},"^content.attr$":function(e,t,n,r){this.options.content.text===this.target.attr(r)&&this._updateContent(this.target.attr(n))},"^content.title$":function(e,t,n){if(!n)return this._removeTitle();n&&!this.elements.title&&this._createTitle(),this._updateTitle(n)},"^content.button$":function(e,t,n){this._updateButton(n)},"^content.title.(text|button)$":function(e,t,n){this.set("content."+t,n)},"^position.(my|at)$":function(e,t,n){"string"==typeof n&&(e[t]=new y(n,t==="at"))},"^position.container$":function(e,t,n){this.tooltip.appendTo(n)},"^show.ready$":function(e,n,r){r&&(!this.rendered&&this.render(t)||this.toggle(t))},"^style.classes$":function(e,t,n,r){this.tooltip.removeClass(r).addClass(n)},"^style.width|height":function(e,t,n){this.tooltip.css(t,n)},"^style.widget|content.title":function(){this._setWidget()},"^style.def":function(e,t,n){this.tooltip.toggleClass(L,!!n)},"^events.(render|show|move|hide|focus|blur)$":function(t,n,r){tooltip[(e.isFunction(r)?"":"un")+"bind"]("tooltip"+n,r)},"^(show|hide|position).(event|target|fixed|inactive|leave|distance|viewport|adjust)":function(){var e=this.options.position;tooltip.attr("tracking",e.target==="mouse"&&e.adjust.mouse),this._unassignEvents(),this._assignEvents()}}},g.get=function(e){if(this.destroyed)return this;var t=I(this.options,e.toLowerCase()),n=t[0][t[1]];return n.precedance?n.string():n};var R=/^position\.(my|at|adjust|target|container|viewport)|style|content|show\.ready/i,U=/^prerender|show\.ready/i;g.set=function(i,s){if(this.destroyed)return this;var o=this.rendered,u=n,a=this.options,f=this.checks,l;return"string"==typeof i?(l=i,i={},i[l]=s):i=e.extend({},i),e.each(i,function(t,n){if(!o&&!U.test(t)){delete i[t];return}var r=I(a,t.toLowerCase()),s;s=r[0][r[1]],r[0][r[1]]=n&&n.nodeType?e(n):n,u=R.test(t)||u,i[t]=[r[0],r[1],n,s]}),F(a),this.positioning=t,e.each(i,e.proxy(q,this)),this.positioning=n,this.rendered&&this.tooltip[0].offsetWidth>0&&u&&this.reposition(a.position.target==="mouse"?r:this.cache.event),this},g._update=function(i,s,o){var u=this,a=this.cache;return!this.rendered||!i?n:(e.isFunction(i)&&(i=i.call(this.elements.target,a.event,this)||""),e.isFunction(i.then)?(a.waiting=t,i.then(function(e){return a.waiting=n,u._update(e,s,o)},r,function(e){return u._update(e,s,o)})):i===n||!i&&i!==""?n:(i.jquery&&i.length>0?s.children().detach().end().append(i.css({display:"block"})):s.html(i),a.waiting=t,s.imagesLoaded().done(function(e){a.waiting=n,o!==n&&u.rendered&&u.tooltip[0].offsetWidth>0&&u.reposition(a.event,!e.length)}).promise()))},g._updateContent=function(e,t){this._update(e,this.elements.content,t)},g._updateTitle=function(e,t){this._update(e,this.elements.title,t)===n&&this._removeTitle(n)},g._createTitle=function(){var n=this.elements,r=this._id+"-title";n.titlebar&&this._removeTitle(),n.titlebar=e("<div />",{"class":E+"-titlebar "+(this.options.style.widget?W("header"):"")}).append(n.title=e("<div />",{id:r,"class":E+"-title","aria-atomic":t})).insertBefore(n.content).delegate(".qtip-close","mousedown keydown mouseup keyup mouseout",function(t){e(this).toggleClass("ui-state-active ui-state-focus",t.type.substr(-4)==="down")}).delegate(".qtip-close","mouseover mouseout",function(t){e(this).toggleClass("ui-state-hover",t.type==="mouseover")}),this.options.content.button&&this._createButton()},g._removeTitle=function(e){var t=this.elements;t.title&&(t.titlebar.remove(),t.titlebar=t.title=t.button=r,e!==n&&this.reposition())},g.reposition=function(r,i){if(!this.rendered||this.positioning||this.destroyed)return this;this.positioning=t;var s=this.cache,o=this.tooltip,u=this.options.position,p=u.target,d=u.my,v=u.at,m=u.viewport,g=u.container,y=u.adjust,b=y.method.split(" "),E=o.outerWidth(n),S=o.outerHeight(n),x=0,T=0,N=o.css("position"),C={left:0,top:0},k=o[0].offsetWidth>0,L=r&&r.type==="scroll",A=e(window),O=g[0].ownerDocument,M=this.mouse,_,D;if(e.isArray(p)&&p.length===2)v={x:f,y:a},C={left:p[0],top:p[1]};else if(p==="mouse"&&(r&&r.pageX||s.event.pageX))v={x:f,y:a},r=M&&M.pageX&&(y.mouse||!r||!r.pageX)?M:(!r||r.type!=="resize"&&r.type!=="scroll"?r&&r.pageX&&r.type==="mousemove"?r:(!y.mouse||this.options.show.distance)&&s.origin&&s.origin.pageX?s.origin:r:s.event)||r||s.event||M||{},N!=="static"&&(C=g.offset()),O.body.offsetWidth!==(window.innerWidth||O.documentElement.clientWidth)&&(D=e(O.body).offset()),C={left:r.pageX-C.left+(D&&D.left||0),top:r.pageY-C.top+(D&&D.top||0)},y.mouse&&L&&(C.left-=M.scrollX-A.scrollLeft(),C.top-=M.scrollY-A.scrollTop());else{p==="event"&&r&&r.target&&r.type!=="scroll"&&r.type!=="resize"?s.target=e(r.target):p!=="event"&&(s.target=e(p.jquery?p:elements.target)),p=s.target,p=e(p).eq(0);if(p.length===0)return this;p[0]===document||p[0]===window?(x=BROWSER.iOS?window.innerWidth:p.width(),T=BROWSER.iOS?window.innerHeight:p.height(),p[0]===window&&(C={top:(m||p).scrollTop(),left:(m||p).scrollLeft()})):w.imagemap&&p.is("area")?_=w.imagemap(this,p,v,w.viewport?b:n):w.svg&&p[0].ownerSVGElement?_=w.svg(this,p,v,w.viewport?b:n):(x=p.outerWidth(n),T=p.outerHeight(n),C=p.offset()),_&&(x=_.width,T=_.height,D=_.offset,C=_.position),C=this.reposition.offset(p,C,g);if(BROWSER.iOS>3.1&&BROWSER.iOS<4.1||BROWSER.iOS>=4.3&&BROWSER.iOS<4.33||!BROWSER.iOS&&N==="fixed")C.left-=A.scrollLeft(),C.top-=A.scrollTop();if(!_||_&&_.adjustable!==n)C.left+=v.x===c?x:v.x===h?x/2:0,C.top+=v.y===l?T:v.y===h?T/2:0}return C.left+=y.x+(d.x===c?-E:d.x===h?-E/2:0),C.top+=y.y+(d.y===l?-S:d.y===h?-S/2:0),w.viewport?(C.adjusted=w.viewport(this,C,u,x,T,E,S),D&&C.adjusted.left&&(C.left+=D.left),D&&C.adjusted.top&&(C.top+=D.top)):C.adjusted={left:0,top:0},this._trigger("move",[C,m.elem||m],r)?(delete C.adjusted,i===n||!k||isNaN(C.left)||isNaN(C.top)||p==="mouse"||!e.isFunction(u.effect)?o.css(C):e.isFunction(u.effect)&&(u.effect.call(o,this,e.extend({},C)),o.queue(function(t){e(this).css({opacity:"",height:""}),BROWSER.ie&&this.style.removeAttribute("filter"),t()})),this.positioning=n,this):this},g.reposition.offset=function(t,n,r){function c(e,t){n.left+=t*e.scrollLeft(),n.top+=t*e.scrollTop()}if(!r[0])return n;var i=e(t[0].ownerDocument),s=!!BROWSER.ie&&document.compatMode!=="CSS1Compat",o=r[0],u,a,f,l;do(a=e.css(o,"position"))!=="static"&&(a==="fixed"?(f=o.getBoundingClientRect(),c(i,-1)):(f=e(o).position(),f.left+=parseFloat(e.css(o,"borderLeftWidth"))||0,f.top+=parseFloat(e.css(o,"borderTopWidth"))||0),n.left-=f.left+(parseFloat(e.css(o,"marginLeft"))||0),n.top-=f.top+(parseFloat(e.css(o,"marginTop"))||0),!u&&(l=e.css(o,"overflow"))!=="hidden"&&l!=="visible"&&(u=e(o)));while(o=o.offsetParent);return u&&(u[0]!==i[0]||s)&&c(u,1),n};var z=(y=g.reposition.Corner=function(e,t){e=(""+e).replace(/([A-Z])/," $1").replace(/middle/gi,h).toLowerCase(),this.x=(e.match(/left|right/i)||e.match(/center/)||["inherit"])[0].toLowerCase(),this.y=(e.match(/top|bottom|center/i)||["inherit"])[0].toLowerCase(),this.forceY=!!t;var n=e.charAt(0);this.precedance=n==="t"||n==="b"?s:i}).prototype;z.invert=function(e,t){this[e]=this[e]===f?c:this[e]===c?f:t||this[e]},z.string=function(){var e=this.x,t=this.y;return e===t?e:this.precedance===s||this.forceY&&t!=="center"?t+" "+e:e+" "+t},z.abbrev=function(){var e=this.string().split(" ");return e[0].charAt(0)+(e[1]&&e[1].charAt(0)||"")},z.clone=function(){return new y(this.string(),this.forceY)},g.toggle=function(i,s){var o=this.cache,u=this.options,a=this.tooltip;if(s){if(/over|enter/.test(s.type)&&/out|leave/.test(o.event.type)&&u.show.target.add(s.target).length===u.show.target.length&&a.has(s.relatedTarget).length)return this;o.event=e.extend({},s)}this.waiting&&!i&&(this.hiddenDuringWait=t);if(!this.rendered)return i?this.render(1):this;if(this.destroyed||this.disabled)return this;var f=i?"show":"hide",l=this.options[f],c=this.options[i?"hide":"show"],h=this.options.position,p=this.options.content,d=this.tooltip.css("width"),v=this.tooltip[0].offsetWidth>0,m=i||l.target.length===1,g=!s||l.target.length<2||o.target[0]===s.target,y,b,w,S;return(typeof i).search("boolean|number")&&(i=!v),y=!a.is(":animated")&&v===i&&g,b=y?r:!!this._trigger(f,[90]),b!==n&&i&&this.focus(s),!b||y?this:(e.attr(a[0],"aria-hidden",!i),i?(o.origin=e.extend({},this.mouse),e.isFunction(p.text)&&this._updateContent(p.text,n),e.isFunction(p.title)&&this._updateTitle(p.title,n),!P&&h.target==="mouse"&&h.adjust.mouse&&(e(document).bind("mousemove."+E,this._storeMouse),P=t),d||a.css("width",a.outerWidth(n)),this.reposition(s,arguments[2]),d||a.css("width",""),!l.solo||(typeof l.solo=="string"?e(l.solo):e(N,l.solo)).not(a).not(l.target).qtip("hide",e.Event("tooltipsolo"))):(clearTimeout(this.timers.show),delete o.origin,P&&!e(N+'[tracking="true"]:visible',l.solo).not(a).length&&(e(document).unbind("mousemove."+E),P=n),this.blur(s)),after=e.proxy(function(){i?(BROWSER.ie&&a[0].style.removeAttribute("filter"),a.css("overflow",""),"string"==typeof l.autofocus&&e(this.options.show.autofocus,a).focus(),this.options.show.target.trigger("qtip-"+this.id+"-inactive")):a.css({display:"",visibility:"",opacity:"",left:"",top:""}),this._trigger(i?"visible":"hidden")},this),l.effect===n||m===n?(a[f](),after()):e.isFunction(l.effect)?(a.stop(1,1),l.effect.call(a,this),a.queue("fx",function(e){after(),e()})):a.fadeTo(90,i?1:0,after),i&&l.target.trigger("qtip-"+this.id+"-inactive"),this)},g.show=function(e){return this.toggle(t,e)},g.hide=function(e){return this.toggle(n,e)},g.focus=function(t){if(!this.rendered||this.destroyed)return this;var n=e(N),r=this.tooltip,i=parseInt(r[0].style.zIndex,10),s=m.zindex+n.length,o;return r.hasClass(A)||this._trigger("focus",[s],t)&&(i!==s&&(n.each(function(){this.style.zIndex>i&&(this.style.zIndex=this.style.zIndex-1)}),n.filter("."+A).qtip("blur",t)),r.addClass(A)[0].style.zIndex=s),this},g.blur=function(e){return!this.rendered||this.destroyed?this:(this.tooltip.removeClass(A),this._trigger("blur",[this.tooltip.css("zIndex")],e),this)},g.disable=function(e){return this.destroyed?this:("boolean"!=typeof e&&(e=!this.tooltip.hasClass(M)&&!this.disabled),this.rendered&&this.tooltip.toggleClass(M,e).attr("aria-disabled",e),this.disabled=!!e,this)},g.enable=function(){return this.disable(n)},g._createButton=function(){var t=this,r=this.elements,i=r.tooltip,s=this.options.content.button,o=typeof s=="string",u=o?s:"Close tooltip";r.button&&r.button.remove(),s.jquery?r.button=s:r.button=e("<a />",{"class":"qtip-close "+(this.options.style.widget?"":E+"-icon"),title:u,"aria-label":u}).prepend(e("<span />",{"class":"ui-icon ui-icon-close",html:"&times;"})),r.button.appendTo(r.titlebar||i).attr("role","button").click(function(e){return i.hasClass(M)||t.hide(e),n})},g._updateButton=function(e){if(!this.rendered)return n;var t=this.elements.button;e?this._createButton():t.remove()},g._setWidget=function(){var e=this.options.style.widget,t=this.elements,n=t.tooltip,r=n.hasClass(M);n.removeClass(M),M=e?"ui-state-disabled":"qtip-disabled",n.toggleClass(M,r),n.toggleClass("ui-helper-reset "+W(),e).toggleClass(L,this.options.style.def&&!e),t.content&&t.content.toggleClass(W("content"),e),t.titlebar&&t.titlebar.toggleClass(W("header"),e),t.button&&t.button.toggleClass(E+"-icon",!e)},g._storeMouse=function(e){this.mouse={pageX:e.pageX,pageY:e.pageY,type:"mousemove",scrollX:window.pageXOffset||document.body.scrollLeft||document.documentElement.scrollLeft,scrollY:window.pageYOffset||document.body.scrollTop||document.documentElement.scrollTop}},g._bind=function(t,n,r,i,s){var o="."+this._id+(i?"-"+i:"");n.length&&e(t).bind((n.split?n:n.join(o+" "))+o,e.proxy(r,s||this))},g._unbind=function(t,n){e(t).unbind("."+this._id+(n?"-"+n:""))};var K="."+E;e(function(){Q(N,["mouseenter","mouseleave"],function(t){var n=t.type==="mouseenter",r=e(t.currentTarget),i=e(t.relatedTarget||t.target),s=this.options;n?(this.focus(t),r.hasClass(k)&&!r.hasClass(M)&&clearTimeout(this.timers.hide)):s.position.target==="mouse"&&s.hide.event&&s.show.target&&!i.closest(s.show.target[0]).length&&this.hide(t),r.toggleClass(O,n)}),Q("["+x+"]",C,$)}),g._trigger=function(i,s,o){var u=e.Event("tooltip"+i);return u.originalEvent=o&&e.extend({},o)||this.cache.event||r,this.triggering=t,this.tooltip.trigger(u,[this].concat(s||[])),this.triggering=n,!u.isDefaultPrevented()},g._assignEvents=function(){var t=this.options,n=t.position,r=this.tooltip,i=t.show.target,s=t.hide.target,o=n.container,u=n.viewport,a=e(document),f=e(document.body),l=e(window),c=t.show.event?e.trim(""+t.show.event).split(" "):[],h=t.hide.event?e.trim(""+t.hide.event).split(" "):[],p=[];/mouse(out|leave)/i.test(t.hide.event)&&t.hide.leave==="window"&&this._bind(a,["mouseout","blur"],function(e){!/select|option/.test(e.target.nodeName)&&!e.relatedTarget&&this.hide(e)}),t.hide.fixed?s=s.add(r.addClass(k)):/mouse(over|enter)/i.test(t.show.event)&&this._bind(s,"mouseleave",function(){clearTimeout(this.timers.show)}),(""+t.hide.event).indexOf("unfocus")>-1&&this._bind(o.closest("html"),["mousedown","touchstart"],function(t){var n=e(t.target),r=this.rendered&&!this.tooltip.hasClass(M)&&this.tooltip[0].offsetWidth>0,i=n.parents(N).filter(this.tooltip[0]).length>0;n[0]!==this.target[0]&&n[0]!==this.tooltip[0]&&!i&&!this.target.has(n[0]).length&&r&&this.hide(t)}),"number"==typeof t.hide.inactive&&(this._bind(i,"qtip-"+this.id+"-inactive",$),this._bind(s.add(r),m.inactiveEvents,$,"-inactive")),h=e.map(h,function(t){var n=e.inArray(t,c);if(n>-1&&s.add(i).length===s.length){p.push(c.splice(n,1)[0]);return}return t}),this._bind(i,c,X),this._bind(s,h,V),this._bind(i,p,function(e){(this.tooltip[0].offsetWidth>0?V:X).call(this,e)}),this._bind(i.add(r),"mousemove",function(e){if("number"==typeof t.hide.distance){var n=this.cache.origin||{},r=this.options.hide.distance,i=Math.abs;(i(e.pageX-n.pageX)>=r||i(e.pageY-n.pageY)>=r)&&this.hide(e)}this._storeMouse(e)}),n.target==="mouse"&&n.adjust.mouse&&(t.hide.event&&this._bind(i,["mouseenter","mouseleave"],function(e){this.cache.onTarget=e.type==="mouseenter"}),this._bind(a,"mousemove",function(e){this.rendered&&this.cache.onTarget&&!this.tooltip.hasClass(M)&&this.tooltip[0].offsetWidth>0&&this.reposition(e)})),(n.adjust.resize||u.length)&&this._bind(e.event.special.resize?u:l,"resize",J),n.adjust.scroll&&this._bind(l.add(n.container),"scroll",J)},g._unassignEvents=function(){var t=[this.options.show.target[0],this.options.hide.target[0],this.rendered&&this.tooltip[0],this.options.position.container[0],this.options.position.viewport[0],this.options.position.container.closest("html")[0],window,document];this.rendered?this._unbind(e([]).pushStack(e.grep(t,function(e){return typeof e=="object"}))):e(t[0]).unbind("."+this._id+"-create")},m=e.fn.qtip=function(i,s,o){var u=(""+i).toLowerCase(),a=r,f=e.makeArray(arguments).slice(1),l=f[f.length-1],c=this[0]?e.data(this[0],E):r;if(!arguments.length&&c||u==="api")return c;if("string"==typeof i)return this.each(function(){var r=e.data(this,E);if(!r)return t;l&&l.timeStamp&&(r.cache.event=l);if(!s||u!=="option"&&u!=="options")r[u]&&r[u].apply(r,f);else{if(o===undefined&&!e.isPlainObject(s))return a=r.get(s),n;r.set(s,o)}}),a!==r?a:this;if("object"==typeof i||!arguments.length)return c=F(e.extend(t,{},i)),m.bind.call(this,c,l)},m.bind=function(r,i){return this.each(function(s){function h(t){function r(){l.render(typeof t=="object"||o.show.ready),u.show.add(u.hide).unbind(f)}if(l.disabled)return n;l.cache.event=e.extend({},t),l.cache.target=t?e(t.target):[undefined],o.show.delay>0?(clearTimeout(l.timers.show),l.timers.show=setTimeout(r,o.show.delay),a.show!==a.hide&&u.hide.bind(a.hide,function(){clearTimeout(l.timers.show)})):r()}var o,u,a,f,l,c;c=e.isArray(r.id)?r.id[s]:r.id,c=!c||c===n||c.length<1||m.api[c]?m.nextid++:c,f=".qtip-"+c+"-create",l=G(e(this),c,r);if(l===n)return t;m.api[c]=l,o=l.options,e.each(w,function(){this.initialize==="initialize"&&this(l)}),u={show:o.show.target,hide:o.hide.target},a={show:e.trim(""+o.show.event).replace(/ /g,f+" ")+f,hide:e.trim(""+o.hide.event).replace(/ /g,f+" ")+f},/mouse(over|enter)/i.test(a.show)&&!/mouse(out|leave)/i.test(a.hide)&&(a.hide+=" mouseleave"+f),u.show.bind("mousemove"+f,function(e){l._storeMouse(e),l.cache.onTarget=t}),u.show.bind(a.show,h),(o.show.ready||o.prerender)&&h(i)})},m.api={},e.each({attr:function(t,n){if(this.length){var r=this[0],i="title",s=e.data(r,"qtip");if(t===i&&s&&"object"==typeof s&&s.options.suppress)return arguments.length<2?e.attr(r,D):(s&&s.options.content.attr===i&&s.cache.attr&&s.set("content.text",n),this.attr(D,n))}return e.fn["attr"+_].apply(this,arguments)},clone:function(t){var n=e([]),r="title",i=e.fn["clone"+_].apply(this,arguments);return t||i.filter("["+D+"]").attr("title",function(){return e.attr(this,D)}).removeAttr(D),i}},function(n,r){if(!r||e.fn[n+_])return t;var i=e.fn[n+_]=e.fn[n];e.fn[n]=function(){return r.apply(this,arguments)||i.apply(this,arguments)}}),e.ui||(e["cleanData"+_]=e.cleanData,e.cleanData=function(t){for(var n=0,r;(r=e(t[n])).length&&r.attr(x);n++)try{r.triggerHandler("removeqtip")}catch(i){}e["cleanData"+_](t)}),m.version="2.0.1-101",m.nextid=0,m.inactiveEvents=C,m.zindex=15e3,m.defaults={prerender:n,id:n,overwrite:t,suppress:t,content:{text:t,attr:"title",title:n,button:n},position:{my:"top left",at:"bottom right",target:n,container:n,viewport:n,adjust:{x:0,y:0,mouse:t,scroll:t,resize:t,method:"flipinvert flipinvert"},effect:function(t,r,i){e(this).animate(r,{duration:200,queue:n})}},show:{target:n,event:"mouseenter",effect:t,delay:90,solo:n,ready:n,autofocus:n},hide:{target:n,event:"mouseleave",effect:t,delay:0,fixed:n,inactive:n,leave:"window",distance:n},style:{classes:"",widget:n,width:n,height:n,def:t},events:{render:r,move:r,show:r,hide:r,toggle:r,visible:r,hidden:r,focus:r,blur:r}},w.viewport=function(e,t,r,p,m,g,y){function B(e,n,r,i,s,o,u,a,f){var l=t[s],c=S[e],p=x[e],m=r===v,g=-A.offset[s]+L.offset[s]+L["scroll"+s],y=c===s?f:c===o?-f:-f/2,b=p===s?a:p===o?-a:-a/2,w=M&&M.size?M.size[u]||0:0,E=M&&M.corner&&M.corner.precedance===e&&!m?w:0,T=g-l+E,N=l+f-L[u]-g+E,C=y-(S.precedance===e||c===S[n]?b:0)-(p===h?a/2:0);return m?(E=M&&M.corner&&M.corner.precedance===n?w:0,C=(c===s?1:-1)*y-E,t[s]+=T>0?T:N>0?-N:0,t[s]=Math.max(-A.offset[s]+L.offset[s]+(E&&M.corner[e]===h?M.offset:0),l-C,Math.min(Math.max(-A.offset[s]+L.offset[s]+L[u],l+C),t[s]))):(i*=r===d?2:0,T>0&&(c!==s||N>0)?(t[s]-=C+i,P.invert(e,s)):N>0&&(c!==o||T>0)&&(t[s]-=(c===h?-C:C)+i,P.invert(e,o)),t[s]<g&&-t[s]>N&&(t[s]=l,P=S.clone())),t[s]-l}var b=r.target,w=e.elements.tooltip,S=r.my,x=r.at,T=r.adjust,N=T.method.split(" "),C=N[0],k=N[1]||N[0],L=r.viewport,A=r.container,O=e.cache,M=e.plugins.tip,_={left:0,top:0},D,P,H;if(!L.jquery||b[0]===window||b[0]===document.body||T.method==="none")return _;D=w.css("position")==="fixed",L={elem:L,width:L[0]===window?L.width():L.outerWidth(n),height:L[0]===window?L.height():L.outerHeight(n),scrollleft:D?0:L.scrollLeft(),scrolltop:D?0:L.scrollTop(),offset:L.offset()||{left:0,top:0}},A={elem:A,scrollLeft:A.scrollLeft(),scrollTop:A.scrollTop(),offset:A.offset()||{left:0,top:0}};if(C!=="shift"||k!=="shift")P=S.clone();return _={left:C!=="none"?B(i,s,C,T.x,f,c,o,p,g):0,top:k!=="none"?B(s,i,k,T.y,a,l,u,m,y):0},P&&O.lastClass!==(H=E+"-pos-"+P.abbrev())&&w.removeClass(e.cache.lastClass).addClass(e.cache.lastClass=H),_}}(jQuery),function(e,t){var n="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==";e.fn.imagesLoaded=function(r){function c(){var t=e(f),n=e(l);s&&(l.length?s.reject(u,t,n):s.resolve(u)),e.isFunction(r)&&r.call(i,u,t,n)}function h(e){p(e.target,e.type==="error")}function p(t,r){if(t.src===n||e.inArray(t,a)!==-1)return;a.push(t),r?l.push(t):f.push(t),e.data(t,"imagesLoaded",{isBroken:r,src:t.src}),o&&s.notifyWith(e(t),[r,u,e(f),e(l)]),u.length===a.length&&(setTimeout(c),u.unbind(".imagesLoaded",h))}var i=this,s=e.isFunction(e.Deferred)?e.Deferred():0,o=e.isFunction(s.notify),u=i.find("img").add(i.filter("img")),a=[],f=[],l=[];return e.isPlainObject(r)&&e.each(r,function(e,t){e==="callback"?r=t:s&&s[e](t)}),u.length?u.bind("load.imagesLoaded error.imagesLoaded",h).each(function(r,i){var s=i.src,o=e.data(i,"imagesLoaded");if(o&&o.src===s){p(i,o.isBroken);return}if(i.complete&&i.naturalWidth!==t){p(i,i.naturalWidth===0||i.naturalHeight===0);return}if(i.readyState||i.complete)i.src=n,i.src=s}):c(),s?s.promise(i):i}}(jQuery),define("plugins/tooltip/jquery.qtip",function(){}),function(e){e.Zebra_DatePicker=function(t,n){var r={always_show_clear:!1,always_visible:!1,days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],days_abbr:!1,direction:0,disabled_dates:!1,enabled_dates:!1,first_day_of_week:1,format:"Y-m-d",inside:!0,lang_clear_date:"Clear",months:["January","February","March","April","May","June","July","August","September","October","November","December"],months_abbr:!1,offset:[5,-5],pair:!1,readonly_element:!0,select_other_months:!1,show_icon:!0,show_other_months:!0,show_week_number:!1,start_date:!1,view:"days",weekend_days:[0,6],zero_pad:!1,onChange:null,onClear:null,onSelect:null},i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O,M,_,D,P,H,B=this;B.settings={};var j=e(t),F=function(N){N||(B.settings=e.extend({},r,n)),B.settings.readonly_element&&j.attr("readonly","readonly");var M={days:["d","j","D"],months:["F","m","M","n","t"],years:["o","Y","y"]},_=!1,D=!1,F=!1;for(type in M)e.each(M[type],function(e,t){B.settings.format.indexOf(t)>-1&&(type=="days"?_=!0:type=="months"?D=!0:type=="years"&&(F=!0))});_&&D&&F?P=["years","months","days"]:!_&&D&&F?P=["years","months"]:!_&&!D&&F?P=["years"]:!_&&D&&!F?P=["months"]:P=["years","months","days"],e.inArray(B.settings.view,P)==-1&&(B.settings.view=P[P.length-1]),T=[],x=[];var R;for(var U=0;U<2;U++)U==0?R=B.settings.disabled_dates:R=B.settings.enabled_dates,e.isArray(R)&&R.length>0&&e.each(R,function(){var t=this.split(" ");for(var n=0;n<4;n++){t[n]||(t[n]="*"),t[n]=t[n].indexOf(",")>-1?t[n].split(","):new Array(t[n]);for(var r=0;r<t[n].length;r++)if(t[n][r].indexOf("-")>-1){var i=t[n][r].match(/^([0-9]+)\-([0-9]+)/);if(null!=i){for(var s=tt(i[1]);s<=tt(i[2]);s++)e.inArray(s,t[n])==-1&&t[n].push(s+"");t[n].splice(r,1)}}for(r=0;r<t[n].length;r++)t[n][r]=isNaN(tt(t[n][r]))?t[n][r]:tt(t[n][r])}U==0?T.push(t):x.push(t)});var z=new Date,W=B.settings.reference_date?B.settings.reference_date:j.data("zdp_reference_date")&&undefined!=j.data("zdp_reference_date")?j.data("zdp_reference_date"):z,X,V;C=undefined,k=undefined,v=W.getMonth(),h=z.getMonth(),m=W.getFullYear(),p=z.getFullYear(),g=W.getDate(),d=z.getDate();if(B.settings.direction===!0)C=W;else if(B.settings.direction===!1)k=W,O=k.getMonth(),A=k.getFullYear(),L=k.getDate();else if(!e.isArray(B.settings.direction)&&K(B.settings.direction)&&tt(B.settings.direction)>0||e.isArray(B.settings.direction)&&((X=I(B.settings.direction[0]))||B.settings.direction[0]===!0||K(B.settings.direction[0])&&B.settings.direction[0]>0)&&((V=I(B.settings.direction[1]))||B.settings.direction[1]===!1||K(B.settings.direction[1])&&B.settings.direction[1]>=0))X?C=X:C=new Date(m,v,g+(e.isArray(B.settings.direction)?tt(B.settings.direction[0]===!0?0:B.settings.direction[0]):tt(B.settings.direction))),v=C.getMonth(),m=C.getFullYear(),g=C.getDate(),V&&+V>=+C?k=V:!V&&B.settings.direction[1]!==!1&&e.isArray(B.settings.direction)&&(k=new Date(m,v,g+tt(B.settings.direction[1]))),k&&(O=k.getMonth(),A=k.getFullYear(),L=k.getDate());else if(!e.isArray(B.settings.direction)&&K(B.settings.direction)&&tt(B.settings.direction)<0||e.isArray(B.settings.direction)&&(B.settings.direction[0]===!1||K(B.settings.direction[0])&&B.settings.direction[0]<0)&&((X=I(B.settings.direction[1]))||K(B.settings.direction[1])&&B.settings.direction[1]>=0))k=new Date(m,v,g+(e.isArray(B.settings.direction)?tt(B.settings.direction[0]===!1?0:B.settings.direction[0]):tt(B.settings.direction))),O=k.getMonth(),A=k.getFullYear(),L=k.getDate(),X&&+X<+k?C=X:!X&&e.isArray(B.settings.direction)&&(C=new Date(A,O,L-tt(B.settings.direction[1]))),C&&(v=C.getMonth(),m=C.getFullYear(),g=C.getDate());else if(e.isArray(B.settings.disabled_dates)&&B.settings.disabled_dates.length>0)for(var Q in T)if(T[Q][0]=="*"&&T[Q][1]=="*"&&T[Q][2]=="*"&&T[Q][3]=="*"){var Z=[];e.each(x,function(){var e=this;e[2][0]!="*"&&Z.push(parseInt(e[2][0]+(e[1][0]=="*"?"12":et(e[1][0],2))+(e[0][0]=="*"?e[1][0]=="*"?"31":(new Date(e[2][0],e[1][0],0)).getDate():et(e[0][0],2)),10))}),Z.sort();if(Z.length>0){var rt=(Z[0]+"").match(/([0-9]{4})([0-9]{2})([0-9]{2})/);m=parseInt(rt[1],10),v=parseInt(rt[2],10)-1,g=parseInt(rt[3],10)}break}if(J(m,v,g)){while(J(m))C?(m++,v=0):(m--,v=11);while(J(m,v))C?(v++,g=1):(v--,g=(new Date(m,v+1,0)).getDate()),v>11?(m++,v=0,g=1):v<0&&(m--,v=11,g=(new Date(m,v+1,0)).getDate());while(J(m,v,g))C?g++:g--;z=new Date(m,v,g),m=z.getFullYear(),v=z.getMonth(),g=z.getDate()}var it=I(j.val()||(B.settings.start_date?B.settings.start_date:""));it&&J(it.getFullYear(),it.getMonth(),it.getDate())&&j.val(""),nt(it);if(!B.settings.always_visible){if(!N){if(B.settings.show_icon){var st='<button type="button" class="Zebra_DatePicker_Icon'+(j.attr("disabled")=="disabled"?" Zebra_DatePicker_Icon_Disabled":"")+'">Pick a date</button>';o=e(st),B.icon=o,H=o.add(j)}else H=j;H.bind("click",function(e){e.preventDefault(),j.attr("disabled")||(s.css("display")!="none"?B.hide():B.show())}),undefined!=o&&o.insertAfter(t)}if(undefined!=o){o.attr("style",""),B.settings.inside&&o.addClass("Zebra_DatePicker_Icon_Inside");var ot=j.position(),ut=j.outerWidth(!1),at=j.outerHeight(!1),ft=parseInt(j.css("marginTop"),10)||0,lt=parseInt(j.css("marginRight"),10)||0,ct=o.position(),ht=o.outerWidth(!0),pt=o.outerHeight(!0),dt=parseInt(o.css("marginLeft"),10)||0;B.settings.inside?o.css({marginLeft:(ct.left<=ot.left+ut?ot.left+ut-ct.left:0)-(lt+ht)}):o.css({marginLeft:(ct.left<=ot.left+ut?ot.left+ut-ct.left:0)-lt+dt}),o.css({marginRight:-parseInt(o.css("marginLeft"),10)}),o.css({marginTop:(ct.top>ot.top?ot.top-ct.top:ct.top-ot.top)+ft+(at-pt)/2})}}undefined!=o&&(j.is(":visible")?o.show():o.hide());if(N)return;var st='<div class="Zebra_DatePicker"><table class="dp_header"><tr><td class="dp_previous">&#171;</td><td class="dp_caption">&#032;</td><td class="dp_next">&#187;</td></tr></table><table class="dp_daypicker"></table><table class="dp_monthpicker"></table><table class="dp_yearpicker"></table><table class="dp_footer"><tr><td>'+B.settings.lang_clear_date+"</td></tr>"+"</table>"+"</div>";s=e(st),B.datepicker=s,u=e("table.dp_header",s),a=e("table.dp_daypicker",s),f=e("table.dp_monthpicker",s),l=e("table.dp_yearpicker",s),c=e("table.dp_footer",s),B.settings.always_visible?j.attr("disabled")||(B.settings.always_visible.append(s),B.show()):e("body").append(s),s.delegate("td:not(.dp_disabled, .dp_weekend_disabled, .dp_not_in_month, .dp_blocked, .dp_week_number)","mouseover",function(){e(this).addClass("dp_hover")}).delegate("td:not(.dp_disabled, .dp_weekend_disabled, .dp_not_in_month, .dp_blocked, .dp_week_number)","mouseout",function(){e(this).removeClass("dp_hover")}),q(e("td",u)),e(".dp_previous",u).bind("click",function(){e(this).hasClass("dp_blocked")||(i=="months"?b--:i=="years"?b-=12:--y<0&&(y=11,b--),G())}),e(".dp_caption",u).bind("click",function(){i=="days"?i=e.inArray("months",P)>-1?"months":e.inArray("years",P)>-1?"years":"days":i=="months"?i=e.inArray("years",P)>-1?"years":e.inArray("days",P)>-1?"days":"months":i=e.inArray("days",P)>-1?"days":e.inArray("months",P)>-1?"months":"years",G()}),e(".dp_next",u).bind("click",function(){e(this).hasClass("dp_blocked")||(i=="months"?b++:i=="years"?b+=12:++y==12&&(y=0,b++),G())}),a.delegate("td:not(.dp_disabled, .dp_weekend_disabled, .dp_not_in_month, .dp_week_number)","click",function(){B.settings.select_other_months&&null!=(rt=e(this).attr("class").match(/date\_([0-9]{4})(0[1-9]|1[012])(0[1-9]|[12][0-9]|3[01])/))?Y(rt[1],rt[2],rt[3],"days",e(this)):Y(b,y,tt(e(this).html()),"days",e(this))}),f.delegate("td:not(.dp_disabled)","click",function(){var t=e(this).attr("class").match(/dp\_month\_([0-9]+)/);y=tt(t[1]),e.inArray("days",P)==-1?Y(b,y,1,"months",e(this)):(i="days",B.settings.always_visible&&j.val(""),G())}),l.delegate("td:not(.dp_disabled)","click",function(){b=tt(e(this).html()),e.inArray("months",P)==-1?Y(b,1,1,"years",e(this)):(i="months",B.settings.always_visible&&j.val(""),G())}),e("td",c).bind("click",function(e){e.preventDefault(),j.val(""),B.settings.always_visible||(w=null,E=null,S=null,y=null,b=null,c.css("display","none")),B.hide(),B.settings.onClear&&typeof B.settings.onClear=="function"&&B.settings.onClear(j)}),B.settings.always_visible||e(document).bind({mousedown:B._mousedown,keyup:B._keyup}),G()};B.hide=function(){B.settings.always_visible||(V("hide"),s.css("display","none"))},B.show=function(){i=B.settings.view;var t=I(j.val()||(B.settings.start_date?B.settings.start_date:""));t?(E=t.getMonth(),y=t.getMonth(),S=t.getFullYear(),b=t.getFullYear(),w=t.getDate(),J(S,E,w)&&(j.val(""),y=v,b=m)):(y=v,b=m),G();if(!B.settings.always_visible){var n=s.outerWidth(),r=s.outerHeight(),u=(undefined!=o?o.offset().left+o.outerWidth(!0):j.offset().left+j.outerWidth(!0))+B.settings.offset[0],a=(undefined!=o?o.offset().top:j.offset().top)-r+B.settings.offset[1],f=e(window).width(),l=e(window).height(),c=e(window).scrollTop(),h=e(window).scrollLeft();u+n>h+f&&(u=h+f-n),u<h&&(u=h),a+r>c+l&&(a=c+l-r),a<c&&(a=c),s.css({left:u,top:a}),s.fadeIn(it.name=="explorer"&&it.version<9?0:150,"linear"),V()}else s.css("display","block")},B.update=function(t){B.original_direction&&(B.original_direction=B.direction),B.settings=e.extend(B.settings,t),F(!0)};var I=function(t){t+="";if(e.trim(t)!=""){var n=R(B.settings.format),r=["d","D","j","l","N","S","w","F","m","M","n","Y","y"],i=new Array,s=new Array;for(var o=0;o<r.length;o++)(position=n.indexOf(r[o]))>-1&&i.push({character:r[o],position:position});i.sort(function(e,t){return e.position-t.position}),e.each(i,function(e,t){switch(t.character){case"d":s.push("0[1-9]|[12][0-9]|3[01]");break;case"D":s.push("[a-z]{3}");break;case"j":s.push("[1-9]|[12][0-9]|3[01]");break;case"l":s.push("[a-z]+");break;case"N":s.push("[1-7]");break;case"S":s.push("st|nd|rd|th");break;case"w":s.push("[0-6]");break;case"F":s.push("[a-z]+");break;case"m":s.push("0[1-9]|1[012]+");break;case"M":s.push("[a-z]{3}");break;case"n":s.push("[1-9]|1[012]");break;case"Y":s.push("[0-9]{4}");break;case"y":s.push("[0-9]{2}")}});if(s.length){i.reverse(),e.each(i,function(e,t){n=n.replace(t.character,"("+s[s.length-e-1]+")")}),s=new RegExp("^"+n+"$","ig");if(segments=s.exec(t)){var u=new Date,a=u.getDate(),f=u.getMonth()+1,l=u.getFullYear(),c=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],h=["January","February","March","April","May","June","July","August","September","October","November","December"],p,d=!0;i.reverse(),e.each(i,function(t,n){if(!d)return!0;switch(n.character){case"m":case"n":f=tt(segments[t+1]);break;case"d":case"j":a=tt(segments[t+1]);break;case"D":case"l":case"F":case"M":n.character=="D"||n.character=="l"?p=B.settings.days:p=B.settings.months,d=!1,e.each(p,function(e,r){if(d)return!0;if(segments[t+1].toLowerCase()==r.substring(0,n.character=="D"||n.character=="M"?3:r.length).toLowerCase()){switch(n.character){case"D":segments[t+1]=c[e].substring(0,3);break;case"l":segments[t+1]=c[e];break;case"F":segments[t+1]=h[e],f=e+1;break;case"M":segments[t+1]=h[e].substring(0,3),f=e+1}d=!0}});break;case"Y":l=tt(segments[t+1]);break;case"y":l="19"+tt(segments[t+1])}});if(d){var v=new Date(l,(f||1)-1,a||1);if(v.getFullYear()==l&&v.getDate()==(a||1)&&v.getMonth()==(f||1)-1)return v}}}return!1}},q=function(e){it.name=="firefox"?e.css("MozUserSelect","none"):it.name=="explorer"?e.bind("selectstart",function(){return!1}):e.mousedown(function(){return!1})},R=function(e){return e.replace(/([-.,*+?^${}()|[\]\/\\])/g,"\\$1")},U=function(t){var n="",r=t.getDate(),i=t.getDay(),s=B.settings.days[i],o=t.getMonth()+1,u=B.settings.months[o-1],a=t.getFullYear()+"";for(var f=0;f<B.settings.format.length;f++){var l=B.settings.format.charAt(f);switch(l){case"y":a=a.substr(2);case"Y":n+=a;break;case"m":o=et(o,2);case"n":n+=o;break;case"M":u=e.isArray(B.settings.months_abbr)&&undefined!=B.settings.months_abbr[o-1]?B.settings.months_abbr[o-1]:B.settings.months[o-1].substr(0,3);case"F":n+=u;break;case"d":r=et(r,2);case"j":n+=r;break;case"D":s=e.isArray(B.settings.days_abbr)&&undefined!=B.settings.days_abbr[i]?B.settings.days_abbr[i]:B.settings.days[i].substr(0,3);case"l":n+=s;break;case"N":i++;case"w":n+=i;break;case"S":r%10==1&&r!="11"?n+="st":r%10==2&&r!="12"?n+="nd":r%10==3&&r!="13"?n+="rd":n+="th";break;default:n+=l}}return n},z=function(){var t=(new Date(b,y+1,0)).getDate(),n=(new Date(b,y,1)).getDay(),r=(new Date(b,y,0)).getDate(),i=n-B.settings.first_day_of_week;i=i<0?7+i:i,Q(B.settings.months[y]+", "+b);var s="<tr>";B.settings.show_week_number&&(s+="<th>"+B.settings.show_week_number+"</th>");for(var o=0;o<7;o++)s+="<th>"+(e.isArray(B.settings.days_abbr)&&undefined!=B.settings.days_abbr[(B.settings.first_day_of_week+o)%7]?B.settings.days_abbr[(B.settings.first_day_of_week+o)%7]:B.settings.days[(B.settings.first_day_of_week+o)%7].substr(0,2))+"</th>";s+="</tr><tr>";for(var o=0;o<42;o++){o>0&&o%7==0&&(s+="</tr><tr>"),o%7==0&&B.settings.show_week_number&&(s+='<td class="dp_week_number">'+rt(new Date(b,y,o-i+1))+"</td>");var u=o-i+1;if(B.settings.select_other_months&&(o<i||u>t)){var f=new Date(b,y,u),l=f.getFullYear(),c=f.getMonth(),v=f.getDate();f=l+et(c,2)+et(v,2)}if(o<i)s+='<td class="'+(B.settings.select_other_months&&!J(l,c,v)?"dp_not_in_month_selectable date_"+f:"dp_not_in_month")+'">'+(B.settings.select_other_months||B.settings.show_other_months?et(r-i+o+1,B.settings.zero_pad?2:0):"&#032;")+"</td>";else if(u>t)s+='<td class="'+(B.settings.select_other_months&&!J(l,c,v)?"dp_not_in_month_selectable date_"+f:"dp_not_in_month")+'">'+(B.settings.select_other_months||B.settings.show_other_months?et(u-t,B.settings.zero_pad?2:0):"&#032;")+"</td>";else{var m=(B.settings.first_day_of_week+o)%7,g="";J(b,y,u)?(e.inArray(m,B.settings.weekend_days)>-1?g="dp_weekend_disabled":g+=" dp_disabled",y==h&&b==p&&d==u&&(g+=" dp_disabled_current")):(e.inArray(m,B.settings.weekend_days)>-1&&(g="dp_weekend"),y==E&&b==S&&w==u&&(g+=" dp_selected"),y==h&&b==p&&d==u&&(g+=" dp_current")),s+="<td"+(g!=""?' class="'+e.trim(g)+'"':"")+">"+(B.settings.zero_pad?et(u,2):u)+"</td>"}}s+="</tr>",a.html(e(s)),B.settings.always_visible&&(M=e("td:not(.dp_disabled, .dp_weekend_disabled, .dp_not_in_month, .dp_blocked, .dp_week_number)",a)),a.css("display","")},W=function(){Q(b);var t="<tr>";for(var n=0;n<12;n++){n>0&&n%3==0&&(t+="</tr><tr>");var r="dp_month_"+n;J(b,n)?r+=" dp_disabled":E!==!1&&E==n?r+=" dp_selected":h==n&&p==b&&(r+=" dp_current"),t+='<td class="'+e.trim(r)+'">'+(e.isArray(B.settings.months_abbr)&&undefined!=B.settings.months_abbr[n]?B.settings.months_abbr[n]:B.settings.months[n].substr(0,3))+"</td>"}t+="</tr>",f.html(e(t)),B.settings.always_visible&&(_=e("td:not(.dp_disabled)",f)),f.css("display","")},X=function(){Q(b-7+" - "+(b+4));var t="<tr>";for(var n=0;n<12;n++){n>0&&n%3==0&&(t+="</tr><tr>");var r="";J(b-7+n)?r+=" dp_disabled":S&&S==b-7+n?r+=" dp_selected":p==b-7+n&&(r+=" dp_current"),t+="<td"+(e.trim(r)!=""?' class="'+e.trim(r)+'"':"")+">"+(b-7+n)+"</td>"}t+="</tr>",l.html(e(t)),B.settings.always_visible&&(D=e("td:not(.dp_disabled)",l)),l.css("display","")},V=function(t){if(it.name=="explorer"&&it.version==6){if(!N){var n=tt(s.css("zIndex"))-1;N=jQuery("<iframe>",{src:'javascript:document.write("")',scrolling:"no",frameborder:0,allowtransparency:"true",css:{zIndex:n,position:"absolute",top:-1e3,left:-1e3,width:s.outerWidth(),height:s.outerHeight(),filter:"progid:DXImageTransform.Microsoft.Alpha(opacity=0)",display:"none"}}),e("body").append(N)}switch(t){case"hide":N.css("display","none");break;default:var r=s.offset();N.css({top:r.top,left:r.left,display:"block"})}}},J=function(t,n,r){if(undefined!=t&&!isNaN(t)||undefined!=n&&!isNaN(n)||undefined!=r&&!isNaN(r)){if(!!e.isArray(B.settings.direction)||tt(B.settings.direction)!==0){var i=tt(Z(t,typeof n!="undefined"?et(n,2):"",typeof r!="undefined"?et(r,2):"")),s=(i+"").length;if(s==8&&(typeof C!="undefined"&&i<tt(Z(m,et(v,2),et(g,2)))||typeof k!="undefined"&&i>tt(Z(A,et(O,2),et(L,2)))))return!0;if(s==6&&(typeof C!="undefined"&&i<tt(Z(m,et(v,2)))||typeof k!="undefined"&&i>tt(Z(A,et(O,2)))))return!0;if(s==4&&(typeof C!="undefined"&&i<m||typeof k!="undefined"&&i>A))return!0}typeof n!="undefined"&&(n+=1);var o=!1,u=!1;return T&&e.each(T,function(){if(o)return;var i=this;if(e.inArray(t,i[2])>-1||e.inArray("*",i[2])>-1)if(typeof n!="undefined"&&e.inArray(n,i[1])>-1||e.inArray("*",i[1])>-1)if(typeof r!="undefined"&&e.inArray(r,i[0])>-1||e.inArray("*",i[0])>-1){if(i[3]=="*")return o=!0;var s=(new Date(t,n-1,r)).getDay();if(e.inArray(s,i[3])>-1)return o=!0}}),x&&e.each(x,function(){if(u)return;var i=this;if(e.inArray(t,i[2])>-1||e.inArray("*",i[2])>-1){u=!0;if(typeof n!="undefined"){u=!0;if(e.inArray(n,i[1])>-1||e.inArray("*",i[1])>-1){if(typeof r!="undefined"){u=!0;if(e.inArray(r,i[0])>-1||e.inArray("*",i[0])>-1){if(i[3]=="*")return u=!0;var s=(new Date(t,n-1,r)).getDay();if(e.inArray(s,i[3])>-1)return u=!0;u=!1}else u=!1}}else u=!1}}}),x&&u?!1:T&&o?!0:!1}return!1},K=function(e){return(e+"").match(/^\-?[0-9]+$/)?!0:!1},Q=function(t){e(".dp_caption",u).html(t);if(!!e.isArray(B.settings.direction)||tt(B.settings.direction)!==0||P.length==1&&P[0]=="months"){var n=b,r=y,s,o;i=="days"?(o=r-1<0?Z(n-1,"11"):Z(n,et(r-1,2)),s=r+1>11?Z(n+1,"00"):Z(n,et(r+1,2))):i=="months"?(o=n-1,s=n+1):i=="years"&&(o=n-7,s=n+7),P.length==1&&P[0]=="months"||J(o)?(e(".dp_previous",u).addClass("dp_blocked"),e(".dp_previous",u).removeClass("dp_hover")):e(".dp_previous",u).removeClass("dp_blocked"),P.length==1&&P[0]=="months"||J(s)?(e(".dp_next",u).addClass("dp_blocked"),e(".dp_next",u).removeClass("dp_hover")):e(".dp_next",u).removeClass("dp_blocked")}},G=function(){if(a.text()==""||i=="days"){if(a.text()==""){B.settings.always_visible||s.css("left",-1e3),s.css({display:"block"}),z();var t=a.outerWidth(),n=a.outerHeight();u.css("width",t),f.css({width:t,height:n}),l.css({width:t,height:n}),c.css("width",t),s.css({display:"none"})}else z();f.css("display","none"),l.css("display","none")}else i=="months"?(W(),a.css("display","none"),l.css("display","none")):i=="years"&&(X(),a.css("display","none"),f.css("display","none"));if(B.settings.onChange&&typeof B.settings.onChange=="function"&&undefined!=i){var r=i=="days"?a.find("td:not(.dp_disabled, .dp_weekend_disabled, .dp_not_in_month, .dp_blocked)"):i=="months"?f.find("td:not(.dp_disabled, .dp_weekend_disabled, .dp_not_in_month, .dp_blocked)"):l.find("td:not(.dp_disabled, .dp_weekend_disabled, .dp_not_in_month, .dp_blocked)");r.each(function(){if(i=="days")e(this).data("date",b+"-"+et(y+1,2)+"-"+et(tt(e(this).text()),2));else if(i=="months"){var t=e(this).attr("class").match(/dp\_month\_([0-9]+)/);e(this).data("date",b+"-"+et(tt(t[1])+1,2))}else e(this).data("date",tt(e(this).text()))}),B.settings.onChange(i,r,j)}B.settings.always_show_clear||B.settings.always_visible||j.val()!=""?c.css("display",""):c.css("display","none")},Y=function(e,t,n,r,i){var s=new Date(e,t,n,12,0,0),o=r=="days"?M:r=="months"?_:D,u=U(s);j.val(u),B.settings.always_visible&&(E=s.getMonth(),y=s.getMonth(),S=s.getFullYear(),b=s.getFullYear(),w=s.getDate(),o.removeClass("dp_selected"),i.addClass("dp_selected")),B.hide(),nt(s),B.settings.onSelect&&typeof B.settings.onSelect=="function"&&B.settings.onSelect(u,e+"-"+et(t+1,2)+"-"+et(n,2),s,j),j.focus()},Z=function(){var e="";for(var t=0;t<arguments.length;t++)e+=arguments[t]+"";return e},et=function(e,t){e+="";while(e.length<t)e="0"+e;return e},tt=function(e){return parseInt(e,10)},nt=function(t){B.settings.pair&&e.each(B.settings.pair,function(){var n=e(this);if(!n.data||!n.data("Zebra_DatePicker"))n.data("zdp_reference_date",t);else{var r=n.data("Zebra_DatePicker");r.update({reference_date:t,direction:r.settings.direction==0?1:r.settings.direction}),r.settings.always_visible&&r.show()}})},rt=function(e){var t=e.getFullYear(),n=e.getMonth()+1,r=e.getDate(),i,s,o,u,a,f,l,r,c,h;return n<3?(i=t-1,s=(i/4|0)-(i/100|0)+(i/400|0),o=((i-1)/4|0)-((i-1)/100|0)+((i-1)/400|0),u=s-o,a=0,f=r-1+31*(n-1)):(i=t,s=(i/4|0)-(i/100|0)+(i/400|0),o=((i-1)/4|0)-((i-1)/100|0)+((i-1)/400|0),u=s-o,a=u+1,f=r+((153*(n-3)+2)/5|0)+58+u),l=(i+s)%7,r=(f+l-a)%7,c=f+3-r,c<0?h=53-((l-u)/5|0):c>364+u?h=1:h=(c/7|0)+1,h};B._keyup=function(e){return(s.css("display")=="block"||e.which==27)&&B.hide(),!0},B._mousedown=function(t){if(s.css("display")=="block"){if(B.settings.show_icon&&e(t.target).get(0)===o.get(0))return!0;e(t.target).parents().filter(".Zebra_DatePicker").length==0&&B.hide()}return!0};var it={init:function(){this.name=this.searchString(this.dataBrowser)||"",this.version=this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||""},searchString:function(e){for(var t=0;t<e.length;t++){var n=e[t].string,r=e[t].prop;this.versionSearchString=e[t].versionSearch||e[t].identity;if(n){if(n.indexOf(e[t].subString)!=-1)return e[t].identity}else if(r)return e[t].identity}},searchVersion:function(e){var t=e.indexOf(this.versionSearchString);if(t==-1)return;return parseFloat(e.substring(t+this.versionSearchString.length+1))},dataBrowser:[{string:navigator.userAgent,subString:"Firefox",identity:"firefox"},{string:navigator.userAgent,subString:"MSIE",identity:"explorer",versionSearch:"MSIE"}]};it.init(),F()},e.fn.Zebra_DatePicker=function(t){return this.each(function(){if(undefined!=e(this).data("Zebra_DatePicker")){var n=e(this).data("Zebra_DatePicker");undefined!=n.icon&&n.icon.remove(),n.datepicker.remove(),e(document).unbind("keyup",n._keyup),e(document).unbind("mousedown",n._mousedown)}var n=new e.Zebra_DatePicker(this,t);e(this).data("Zebra_DatePicker",n)})}}(jQuery),define("plugins/misc/zebra_datepicker.src",function(){});var __hasProp={}.hasOwnProperty,__extends=function(e,t){function r(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};(function(e,t,n){var r;return r=function(r){var i,s,o,u,a;s=0,o=t.length,u=r.target,i=void 0,a=[];while(s<o)i=t[s],i!==u&&!(i.contains?i.contains(u):i.compareDocumentPosition?i.compareDocumentPosition(u)&16:1)&&e.event.trigger(n,r,i),a.push(s++);return a},e.event.special[n]={setup:function(){var n;n=t.length,n||e.event.add(document,"click",r);if(e.inArray(this,t)<0)return t[n]=this},teardown:function(){var n;n=e.inArray(this,t);if(n>=0){t.splice(n,1);if(!t.length)return jQuery(this).unbind("click",r)}}},e.fn[n]=function(e){return e?this.bind(n,e):this.trigger(n)}})(jQuery,[],"outerClick"),function(e){var t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g;return e.fn.selectRange=function(e,t){return t||(t=e),this.each(function(){var n;if(this.setSelectionRange)return this.focus(),this.setSelectionRange(e,t);if(this.createTextRange)return n=this.createTextRange(),n.collapse(!0),n.moveEnd("character",t),n.moveStart("character",e),n.select()})},i=function(){function a(n,r){var i=this;this.members(),r===void 0&&(r=n,n=e(document)),this.scope=n instanceof jQuery?n:e(n),this.debug&&console.group("EDITOR: add Components"),e.map(r,function(e){return i.debug&&console.log("- "+e),t.call(i,e)}),this.debug&&console.groupEnd(),this.on("change:\\",function(e){return i.updateState(e.fullName,e.value,!1,e.replace)}),this.on("editor.removeComponent",function(e){return i.updateState(e,null,!1,!0)}),this.updateElements()}var t,n,r,i,s,o,u;return a.prototype.members=function(){return this._contentTypes={},this._components={},this._storage={},this._events={},this.debug=!1,this.attr={_namespace:"editor-",type:"type",name:"name",scope:"scope",placeholder:"placeholder",options:"options",handledBy:"handled-by",componentId:"component-id"}},a.prototype.getAttr=function(e){return this.attr[e]?this.attr._namespace+this.attr[e]:!1},a.prototype.on=function(t,n){return this._events[t]||(this._events[t]=e.Callbacks("unique")),this._events[t].add(n)},a.prototype.off=function(e,t){if(!this._events[e])return;return this._events[e].remove(t)},a.prototype.trigger=function(e,t){this.debug&&e.indexOf(!0)&&(console.group("EDITOR: trigger "+e),console.log(t),console.groupEnd());if(this._events[e])return this._events[e].fire(t)},a.prototype.updateState=function(t,n,r,i){var o,u,a,f,l,c,h,p;this.debug&&console.group("EDITOR: update state"),this.debug&&console.log("scope: %s -> %O",t,n),f=!1;if(i){l=t.split("."),u=l.splice(-1)[0],c=this._storage;for(h=0,p=l.length;h<p;h++){o=l[h];if(!c[o])break;c=c[o]}c[u]&&(c[u]=n,f=!0)}f||(a={},a[t]=n,this._storage=e.extend(!0,this._storage,s.call(this,a))),this.debug&&console.log(this._storage),this.debug&&console.groupEnd();if(!r)return this.debug&&console.log(this._storage),this.debug&&console.log(this.getState()),this.trigger("stateUpdate",this._storage)},a.prototype.getState=function(){return this._storage},a.prototype.addElement=function(t){var n,r;return r=t.data(this.getAttr("type")),n=!1,t.attr(this.getAttr("handledBy"))?(this.debug&&console.log("already handled by the editor!"),n):(-1!==e.inArray(r,Object.keys(this._contentTypes))&&(n=o.call(this,r),t.data(this.getAttr("componentId"),n.id),n.init(t),this.debug&&console.log("added element: %s",n.getDataFullName())),n)},a.prototype.removeElement=function(e){var t,n;return this.debug&&console.group("EDITOR: remove component"),n=e.data(this.getAttr("componentId")),t=this.getComponent(n),t?(i.call(this,t),this.debug&&console.groupEnd(),!0):!1},a.prototype.removeElementByScope=function(e){var t,n,r,s;n=this.getComponents(),s=!1,this.debug&&console.group("EDITOR: remove component by scope: %s",e);for(r in n)t=n[r],e===t.getDataFullName()&&(i.call(this,t),s=!0);return this.debug&&console.groupEnd(),s},a.prototype.removeElementsByScope=function(t,n){var r,s,o,u,a;n==null&&(n=[]),o=this.getComponents(),a=!1,n.length||(r=!0),this.debug&&console.group("EDITOR: remove components by scope: %s, names: %O",t,n);for(u in o)s=o[u],t===s.getDataScope()&&(r||-1!==e.inArray(s.getDataName(),n))&&(i.call(this,s),a=!0);return this.debug&&console.groupEnd(),a},a.prototype.updateElements=function(){var t,n,r,s,o=this;n=this.getAttr("handledBy"),this.debug&&console.group("EDITOR: update Elements"),e("[data-"+this.getAttr("type")+"]",this.scope).each(function(t,r){var i;i=e(r);if(!i.attr(n))return o.addElement(i)}),s=this.getComponents();for(r in s)t=s[r],t.elementExists()||i.call(this,t);return this.debug&&console.groupEnd(),null},a.prototype.destroy=function(){var e,t,n,r,s,o;this.debug&&console.log("going to destroy the editor and remove all"),this.off(),s=this._events;for(r in s)e=s[r],e.disable(),e.empty();o=this.getComponents();for(n in o)t=o[n],i.call(this,t);return!1},t=function(t){var r,i=this;if(!window.editorComponents[t])throw new ReferenceError("The Component '"+t+"' doesn't exists. Maybe you forgot to add it to the global 'window.editorComponents' namespace?");return r=new window.editorComponents[t](this),e.map(r.contentTypes,function(e){return n.call(i,e,t)})},o=function(e){var t,n;return n=e.toLowerCase(),t=this._contentTypes[n],t?r.call(this,t):null},r=function(e){var t;return window.editorComponents[e]?(t=new window.editorComponents[e](this),t.name=e.toLowerCase(),this._components[t.id]=t,t):null},i=function(t){var n,r=this;return n=t.getId(),this.debug&&console.log("EDITOR: destroy component %s",t.getDataFullName()),t.destroy(),this._components[n]=null,e.map(t.contentTypes,function(e){if(r._contentTypes[e])return delete r._contentTypes[e]}),delete this._components[n]},a.prototype.getComponent=function(e){return this._components[e]?this._components[e]:null},a.prototype.getComponents=function(){return this._components},a.prototype.getComponentsByClassName=function(e){var t,n,r,i;n=this.getComponents(),i=[];for(r in n)t=n[r],t.name===e&&i.push(t);return i},a.prototype.getComponentsByType=function(t){var n,r,i,s;r=this.getComponents(),s=[];for(i in r)n=r[i],-1!==e.inArray(t.toLowerCase(),n.contentTypes)&&s.push(n);return s},a.prototype.getComponentByName=function(e){var t,n,r;n=this.getComponents();for(r in n){t=n[r];if(t.getDataFullName()===e)return t}return null},n=function(e,t){var n;return n=e.toLowerCase(),this._contentTypes[n]?console.error("Another Component ("+this._contentTypes[n]+') is already handling the content-type "'+e+'"'):this._contentTypes[n]=t},u=function(t){var n,r;for(n in t)r=t[n],typeof r=="object"&&(r=u(r)),(r===null||r===void 0||e.isEmptyObject(t[n]))&&delete t[n];return t},s=function(e){var t,n,r,i,s,o;r={},o=void 0,s=void 0,i=void 0;for(t in e){o=r,s=t.split("."),n=s.pop();while(s.length)i=s.shift(),o=o[i]=o[i]||{};o[n]=e[t]}return r},a}(),r=function(){function n(e){this.editor=e,this.members(),this.id="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t,n;return t=Math.random()*16|0,n=e==="x"?t:t&3|8,n.toString(16)});if(this.constructor.name==="Editable")throw new ReferenceError('"Editable" is an abstract class. Please use one of the subclasses instead.')}var t;return n.prototype.members=function(){return this._prevValue="",this._value="",this._options={},this._dataName="",this._dataFullName="",this.contentTypes=[],this.name=""},n.prototype.init=function(e){var t;this.element=e;if(!this.element){console.log("JJEditabel: no element found.");return}return this.setDataName(e.data(this.editor.getAttr("name"))),this.updateOptions(e.data(this.editor.getAttr("options")),!0),e.attr(this.editor.getAttr("handledBy"),this.id),this._options.elementClasses&&e.addClass(this._options.elementClasses),this.updateValue(!0),t=this.getValue(),t&&this.isValidValue(t)?this.setValueToContent(t):this.setValueToContent(this.getPlaceholder(),!0)},t=function(e){return e=-1!==e.indexOf(".")?e:this.name+"."+e},n.prototype.getNamespacedEventName=function(e){var t,n,r,i,s;r=e.split(" "),t=[];for(i=0,s=r.length;i<s;i++)n=r[i],t.push(""+n+"."+this.id);return t.join(" ")},n.prototype.trigger=function(e,n){return n==null&&(n={}),n.senderId=this.id,e=t.call(this,e),this.editor.trigger(e,n)},n.prototype.triggerScopeEvent=function(t,n){var r,i,s,o,u,a,f;n==null&&(n={}),o=this.getDataScope(),o,e.extend(n,{name:this.getDataName(),scope:o,fullName:this.getDataFullName(),senderId:this.id}),a=o.split("."),a.unshift("\\"),f=[];for(i in a)u=a[i],s=a.slice(0,i).join("."),s&&(s+="."),r=s+u,r=r.replace("\\.",""),f.push(this.editor.trigger(t+":"+r,n));return f},n.prototype.triggerDataEvent=function(e,t){return t==null&&(t={}),t.senderId=this.id,this.editor.trigger(e+":"+this.getDataFullName(),t)},n.prototype.on=function(e,n){e=t.call(this,e),e=this.getNamespacedEventName(e);if(!this.editor)return this.editor.on(e,n)},n.prototype.off=function(e,n){e=t.call(this,e),e=this.getNamespacedEventName(e);if(!this.editor)return this.editor.off(e,n)},n.prototype.getElement=function(){return this.element},n.prototype.elementExists=function(){return this.element.closest("body").length>0},n.prototype.getId=function(){return this.id},n.prototype.setValue=function(e,t,n){var r,i;if(!t&&this._prevValue===e)return;return this._prevValue=this._value,this._value=e,t?this.editor.updateState(this.getDataFullName(),this.getValue(),t,n):(r=this.getPrevValue(),i=this.getValue(),this.triggerScopeEvent("change",{value:i,prevValue:r,replace:n}),this.triggerDataEvent("change",{value:i,prevValue:r,replace:n}),typeof e=="string"&&this.render()),!0},n.prototype.getValue=function(){return this._value},n.prototype.getPrevValue=function(){return this._prevValue},n.prototype.updateValue=function(e){return this.setValue(this.getValueFromContent(),e)},n.prototype.getValueFromContent=function(){return null},n.prototype.setValueToContent=function(e,t){},n.prototype.isValidValue=function(e){return e?!0:!1},n.prototype.getPlaceholder=function(){var e;return e=this.element.data(this.editor.getAttr("placeholder")),e?e:this.getDataName()},n.prototype.getValueOrPlaceholder=function(){var e;return e=this.getValue(),this.debug&&console.log("value or placeholder: "+e),e?e:this.getPlaceholder()},n.prototype.setDataName=function(e){var t,n,r,i,s,o=this;n=function(e){return e.split(".").slice(-1)[0]},r=function(e){var t;return t=".",e[0]==="\\"&&(t="",e=e.slice(1)),e.lastIndexOf(".")!==-1?t+e.slice(0,e.lastIndexOf(".")):""},t=function(){var t,i,s;return s=o.editor.getAttr("scope"),t=function(e){return e[0]==="\\"?e.slice(1):e},i=function(r,o){var u,a;u=r.closest("[data-"+s+"]");if(u.length)return a=u.data(s),o=a+o,a[0]!=="\\"?o=i(u.parent(),"."+o):t(o);if(o[0]==="\\")return t(o);throw new Error("Couldn't find a complete scope for "+n(e)+". Maybe you forgot to add a Backslash at the beginning of your stack? Foo.Bar.FooBar")},i(o.element,r(e))};if(!e)throw new Error("Please add a data-"+this.editor.getAttr("name")+" attribute");return e[0]==="\\"?s=r(e):s=t(),i=n(e),this._dataScope=s,this._dataName=i},n.prototype.getDataScope=function(){return this._dataScope},n.prototype.getDataFullName=function(){return""+this._dataScope+"."+this._dataName},n.prototype.getDataName=function(){return this._dataName},n.prototype.getOptions=function(){return this._options},n.prototype.updateOptions=function(t,n){this._options=e.extend(!0,this._options,t);if(!n)return this.onOptionsUpdate()},n.prototype.onOptionsUpdate=function(){},n.prototype.render=function(){if(this.element)return this.element.html(this.getValueOrPlaceholder())},n.prototype.destroy=function(){return this.element.removeAttr(this.editor.getAttr("handledBy")),this.trigger("editor.removeComponent",this.getDataFullName()),this.editor.off(this.getNamespacedEventName("editor")),this.editor=null},n}(),s=function(t){function n(e){this.editor=e;if(this.constructor.name==="PopoverEditable")throw new ReferenceError('"PopoverEditable" is an abstract class. Please use one of the subclasses instead.');n.__super__.constructor.call(this,e)}return __extends(n,t),n.prototype.members=function(){return n.__super__.members.call(this),this._popoverContent="",this.popoverClasses=[],this.closeOnOuterClick=!0,this.repositionOnChangeTimeout=null},n.prototype.init=function(t){var r=this;if(!t){console.log("JJPopoverEditabel: no element found.");return}return this._options.position||(this._options.position={at:"right center",my:"left center",adjust:{x:10,resize:!0,method:"flip shift"}}),this._options.repositionOnChange===void 0&&(this._options.repositionOnChange=!0),n.__super__.init.call(this,t),t.qtip({events:{render:function(e,t){},visible:function(){var t,n;t=e("input, textarea",r.api.tooltip).eq(0);try{t.selectRange(t.val().length)}catch(i){n=i,!1}return r.closeOnOuterClick&&r.api.tooltip.one(r.getNamespacedEventName("outerClick"),function(){return r.close()}),!0},move:function(e,t){return r.onMove(e),!0}},content:{text:function(){return r.getPopoverContent()},title:""},position:this.getPosition(),show:{event:!1},hide:{event:!1,fixed:!0},prerender:!0,style:{classes:this.getPopOverClasses(),tip:{width:20,height:10}}}),this.api=t.qtip("api"),this.editor.on("editor.closepopovers",function(e){if(!e||!e.senderId||e.senderId!==r.id)return r.close()}),t.on(this.getNamespacedEventName("click"),function(){return r.toggle()}),e(window).on(this.getNamespacedEventName("resize"),function(){return r.updateTooltipDimensions()}),e("body").on(this.getNamespacedEventName("toggle.editor-sidebar"),function(e){if(e.name==="opened"||e.name==="close")return r.autoReposition()})},n.prototype.getValueFromContent=function(){var e,t;return e=this.getPlaceholder(),t=this.element.html(),e===t?"":t},n.prototype.setValueToContent=function(e,t){return this.element.html(e)},n.prototype.onOptionsUpdate=function(){var e,t,n,r,i,s;t=this.getPosition(),i=Object.keys(t),s=[];for(n=0,r=i.length;n<r;n++)e=i[n],s.push(this.element.qtip("option","position."+e,t[e]));return s},n.prototype.getPosition=function(){var t;return t=this._options.position?this._options.position:this.position,t=e.extend(!0,t,{adjust:{screen:!0,resize:!0},viewport:e(window)}),t},n.prototype.open=function(){return this.element.addClass("active"),this.trigger("editor.closepopovers"),this.api.show()},n.prototype.close=function(){return this.element.removeClass("active"),this.api.tooltip.unbind(this.getNamespacedEventName("outerClick")),this.api.hide()},n.prototype.toggle=function(){return this.api.tooltip&&e(this.api.tooltip).hasClass("qtip-focus")?this.close():this.open()},n.prototype.getPopOverClasses=function(){var e;return e=this.getDataFullName().toLowerCase().replace(".","-"),console.log(this),console.log(this.name),["editor-popover"].concat([this.name,e],this.popoverClasses).join(" ")},n.prototype.getPopoverContent=function(){var e;return e=this.contentTypes.join(", "),this._popoverContent?this._popoverContent:"<input placeholder='"+e+" Editor'>"},n.prototype.setPopoverContent=function(e){return this._popoverContent=e},n.prototype.autoReposition=function(){var e=this;if(!this._options.repositionOnChange)return;return this.repositionOnChangeTimeout&&clearTimeout(this.repositionOnChangeTimeout),this.repositionOnChangeTimeout=setTimeout(function(){return e.debug&&console.log("JJPopoverEditable: Popover reposition"),e.updateTooltipDimensions(),e.element.qtip("reposition")},100),!0},n.prototype.onMove=function(e){},n.prototype.updateTooltipDimensions=function(){},n.prototype.destroy=function(){return this.api&&this.api.tooltip&&this.api.tooltip.unbind(this.getNamespacedEventName("outerClick")),this.element.off(this.getNamespacedEventName("click")),e("body").off(this.getNamespacedEventName("toggle.editor-sidebar")),e(window).on(this.getNamespacedEventName("resize")),n.__super__.destroy.call(this)},n}(r),n=function(e){function t(){return c=t.__super__.constructor.apply(this,arguments),c}return __extends(t,e),t.prototype.members=function(){return t.__super__.members.call(this),this.contentTypes=["inline"]},t.prototype.init=function(e){var n=this;return t.__super__.init.call(this,e),e.attr("contenteditable",!0).on(this.getNamespacedEventName("blur"),function(e){return n.updateValue()}).on(this.getNamespacedEventName("click focus"),function(){return n.trigger("editor.closepopovers")})},t.prototype.getValueFromContent=function(){return this.element.text()},t.prototype.setValueToContent=function(e,t){return this.element.html(e)},t.prototype.destroy=function(){return this.element.removeAttr("contenteditable"),this.element.off(this.getNamespacedEventName("keyup click focus")),t.__super__.destroy.call(this)},t}(r),t=function(t){function n(){return h=n.__super__.constructor.apply(this,arguments),h}return __extends(n,t),n.prototype.members=function(){return n.__super__.members.call(this),this.contentTypes=["date"],this.contentFormattedValue=""},n.prototype.init=function(t){var r,i,s=this;return this.$input=e('<input type="text">'),i=e('<div class="datepicker">'),r=e("<div>").append(this.$input).append(i),this._options.position={my:"top right",at:"top left",adjust:{x:-5,y:-18,method:"flip shift"}},n.__super__.init.call(this,t),this.contentFormattedValue=this.getPlaceholder(),this.$input.Zebra_DatePicker({format:this.getContentFormat(),always_visible:i,onChange:function(){if(s.api)return s.api.reposition()},onClear:function(){return s.contentFormattedValue=s.getPlaceholder(),s.setValue(null),s.render()},onSelect:function(e,t,n){return s.contentFormattedValue=e,s.setValue(t)}}),this.setPopoverContent(r)},n.prototype.updateValue=function(e){return n.__super__.updateValue.call(this,e),this.element.html(this.getValueOrPlaceholder())},n.prototype.render=function(){return this.element.html(this.contentFormattedValue)},n.prototype.setValueToContent=function(e,t){if(this.$input.length&&!t)return this.$input.val(e)},n.prototype.getFormat=function(){return this.getOptions().format||"Y-m-d"},n.prototype.getContentFormat=function(){return this.getOptions().contentFormat||this.getFormat()},n.prototype.destroy=function(){return this.$input.off(this.getNamespacedEventName("keyup")),n.__super__.destroy.call(this)},n}(s),o=function(t){function n(){return p=n.__super__.constructor.apply(this,arguments),p}return __extends(n,t),n.prototype.members=function(){return n.__super__.members.call(this),this.contentTypes=["markdown"],this.markdown=null,this.markdownChangeTimeout=null,this.previewClass="preview",this.popoverClasses=["markdown"]},n.prototype.init=function(t){var r,i,s,o,u,a=this;return n.__super__.init.call(this,t),t.on(this.getNamespacedEventName("focus"),function(){return a.trigger("editor.closepopovers")}),i=e("<textarea>",{"class":this.previewClass}),u=this.getValue(),i.val(u.raw),r=e("<div>",{"class":this.previewClass}),this.setPopoverContent(i),s=!1,o={placeholder:this.getPlaceholder(),preview:t,contentGetter:"val",onChange:function(e){if(!s){s=!0;return}return a.markdownChangeTimeout&&clearTimeout(a.markdownChangeTimeout),a.autoReposition(),a.markdownChangeTimeout=setTimeout(function(){a.setValue(e);if(!e.raw)return a.element.html(a.getPlaceholder())},500)}},e.extend(o,this._options||{}),this.markdown=new JJMarkdownEditor(i,o)},n.prototype.isValidValue=function(e){return e&&e.raw?!0:!1},n.prototype.getValueFromContent=function(){var e,t;return e=this.getPlaceholder(),t=this.element.text(),e!==t?{raw:t}:{raw:""}},n.prototype.destroy=function(){return this.element.off(this.getNamespacedEventName("focus")),this.markdown.cleanup(),this.markdown=null,n.__super__.destroy.call(this)},n}(s),l=function(t){function n(){return d=n.__super__.constructor.apply(this,arguments),d}return __extends(n,t),n.prototype.members=function(){return n.__super__.members.call(this),this.contentTypes=["markdown-split"],this.previewClass="preview split"},n.prototype.init=function(e){return this._options.position={my:"top left",at:"top left",type:"fixed",target:[0,0],adjust:{x:0,y:0,method:"none"}},n.__super__.init.call(this,e)},n.prototype.open=function(){return this.trigger("editor.open-split-markdown"),this.updateTooltipDimensions(),n.__super__.open.call(this)},n.prototype.close=function(){return this.trigger("editor.close-split-markdown"),n.__super__.close.call(this)},n.prototype.updateTooltipDimensions=function(t){var n;return n=this.element.offset(),this.api.set("style.height",e(window).height()+top),this.api.set("style.width",n.left-10),!0},n}(o),u=function(t){function n(){return v=n.__super__.constructor.apply(this,arguments),v}return __extends(n,t),n.prototype.members=function(){return n.__super__.members.call(this),this.contentTypes=["select"],this.contentSeperator=", ",this._source={}},n.prototype.init=function(t){return this._options.position||(this._options.position={my:"top left",at:"bottom left",adjust:{x:0,y:0,method:"flip shift"}}),this._source=t.data(this.editor.attr._namespace+"source")||{},n.__super__.init.call(this,t),this.$set=e('<div class="selectable-set">'),this.setPopoverContent(this.$set),this.setSource(this._source)},n.prototype.createPopupContent=function(){var t,n,r,i,s,o,u,a,f=this;this.$set.empty(),a=this.getSource();for(r in a)o=a[r],i=o.id||o.ID,u=o.title||o.Title,s=this.getDataName().toLowerCase()+"-item-"+i,n=e('<label class="selectable-item" for="'+s+'">'+u+"<label>"),t=e('<input type="checkbox" name="'+this.getDataName()+'" value="'+i+'" id="'+s+'">'),-1!==this.getValueIndex(i)&&t.prop("checked",!0),t.on(this.getNamespacedEventName("change"),function(t){var n,r,s,o;return o=f.getValue(),n=e(t.target),i=n.val(),isNaN(i)||(i=parseInt(i,10)),s=f.getValueIndex(i),r=!1,n.is(":checked")?-1===s&&(o.push(i),r=!0):-1!==s&&(o.splice(s,1),r=!0),r&&f.setValue(o),!0}),this.$set.append(n.prepend(t));return!0},n.prototype.onOptionsUpdate=function(){this._options.source&&this.setSource(this._options.source);if(this._options.contentSeperator)return this.contentSeperator=this._options.contentSeperator},n.prototype.getSeperator=function(){return this.contentSeperator},n.prototype.getSource=function(){return this._source},n.prototype.setSource=function(e,t){return this._source=e,this.cleanupValue(t),this.createPopupContent()},n.prototype.getValue=function(){return n.__super__.getValue.call(this).slice()},n.prototype.getPrevValue=function(){return n.__super__.getPrevValue.call(this).slice()},n.prototype.getValueIndex=function(t){return e.inArray(t,this.getValue())},n.prototype.isValidValue=function(e){return e&&e.length?!0:!1},n.prototype.getValueFromContent=function(){var t,n,r,i,s,o;i=this.element.text().split(this.getSeperator()),s=[],o=this.getSource();for(t in o)n=o[t],r=n.title||n.Title,-1!==e.inArray(r,i)&&s.push(n.id);return s},n.prototype.cleanupValue=function(e){var t,n,r,i,s,o,u,a;u=this.getValue();for(n in u){o=u[n],t=!1,a=this.getSource();for(i in a)s=a[i],r=s.id||s.ID,o===r&&(t=!0);t||u.splice(n,1)}return this.setValue(u,e)},n.prototype.setValue=function(e,t,r){return r==null&&(r=!0),n.__super__.setValue.call(this,e,t,r),this.render()},n.prototype.setValueToContent=function(t,n){var r,i,s,o,u,a;u=[];if(t){a=this.getSource();for(r in a)s=a[r],i=s.id||s.ID,-1!==e.inArray(i,t)&&(o=s.title||s.Title,u.push(o),this.updatePopoverContent(o,i));return this.updateContent(u)}},n.prototype.updatePopoverContent=function(e,t){var n;if(this.$set)return n=this.$set.find("#"+this.getDataName().toLowerCase()+"-item-"+t),n.prop("checked",!0)},n.prototype.updateContent=function(e){return this.element.html(e.join(this.getSeperator()))},n.prototype.render=function(){var e;return e=this.getValue(),e&&this.isValidValue(e)?this.setValueToContent(e):this.element.html(this.getPlaceholder())},n}(s),f=function(e){function t(){return m=t.__super__.constructor.apply(this,arguments),m}return __extends(t,e),t.prototype.members=function(){return t.__super__.members.call(this),this.contentTypes=["select-person"]},t.prototype.updateContent=function(e){var t;return t=e?" &amp; ":"",this.element.html(t+e.join(this.getSeperator()))},t}(u),a=function(e){function t(){return g=t.__super__.constructor.apply(this,arguments),g}return __extends(t,e),t.prototype.members=function(){return t.__super__.members.call(this),this.contentTypes=["select-list"]},t.prototype.init=function(e){return this._options.position||(this._options.position={my:"top right",at:"top left",adjust:{x:-10,y:-16,method:"flip shift"}}),t.__super__.init.call(this,e)},t.prototype.updateContent=function(e){var t,n,r,i;t="";for(r=0,i=e.length;r<i;r++)n=e[r],t+="<li>"+n+"</li>";return this.element.html(t)},t.prototype.render=function(){var e;return e=this.getValue(),e&&this.isValidValue(e)?this.setValueToContent(e):this.element.html("<li>"+this.getPlaceholder()+"</li>")},t}(u),window.JJEditor=i,window.editorComponents={},window.editorComponents.JJEditable=r,window.editorComponents.JJPopoverEditable=s,window.editorComponents.InlineEditable=n,window.editorComponents.DateEditable=t,window.editorComponents.MarkdownEditable=o,window.editorComponents.SplitMarkdownEditable=l,window.editorComponents.SelectEditable=u,window.editorComponents.SelectListEditable=a,window.editorComponents.SelectPersonEditable=f}(jQuery),define("plugins/editor/jquery.editor-popover",function(){}),define("modules/UserSidebar",["app","modules/DataRetrieval","modules/RecycleBin","plugins/misc/spin.min","plugins/misc/jquery.list","plugins/editor/jquery.jjdropzone","plugins/editor/jquery.jjmarkdown","plugins/editor/jquery.editor-popover"],function(e,t,n,r){var i;return i=e.module(),i.config={},i.config.spinner={lines:13,length:6,width:2,radius:7,corners:1,rotate:0,direction:1,color:"#fff",speed:1,trail:70,shadow:!1,hwaccel:!1,className:"spinner",zIndex:2e9,top:"auto",left:"auto"},i.construct=function(){var e;return e=new i.Views.Main,e.$el.appendTo("#editor-sidebar"),e.render(),e},i.setPendingReq=function(e){var t=this;return this.pendingRequest&&this.pendingRequest.reject(),this.pendingRequest=e,this.pendingRequest.always(function(){return t.pendingRequest=null})},i.Views.Main=Backbone.View.extend({tagName:"div",className:"editor-sidebar",template:"security/editor-sidebar",availableSubViews:{user:"UserSidebar",gallery:"GallerySidebar"},subView:null,events:{"click [data-editor-sidebar-content]":"toggleSidebarCheck","click .icon-switch":"switchEditorView","click .icon-publish":"clickPublish"},initialize:function(){return Backbone.Events.on("projectEdited",this.handlePublishActive,this)},cleanup:function(){return Backbone.Events.off("projectEdited",this.handlePublishActive)},switchEditorView:function(t){return t.preventDefault(),e.isEditor&&e.ProjectEditor.toggleView(),!1},clickPublish:function(t){var n,r;return t.preventDefault(),e.isEditor&&(r=e.ProjectEditor.model.get("IsPublished")?!1:!0,n=r?"add":"remove",e.ProjectEditor.model.save("IsPublished",r),$(t.target)[n+"Class"]("published")),!1},handlePublishActive:function(e){var t;return t=e.get("IsPublished")?"add":"remove",this.$el.find(".icon-publish")[t+"Class"]("published")},toggleSidebarCheck:function(e){var t,n,r;e.preventDefault(),t=$(e.target),r=t.data("editor-sidebar-content"),n=this.getSubviewName(r);if(this.subViewName===n){if(!this.subView.__manager__.hasRendered)return!1;t.toggleClass("active"),this.toggle()}else n&&(t.parents("nav").find(".active").removeClass("active").end().end().addClass("active"),this.setSubview(n,!0),this.open(!0));return!1},toggleEditorClass:function(e){var t;return t=e?"addClass":"removeClass",t==="removeClass"&&this.$el.hasClass("is-editor")&&(this.close(),this.setSubview()),this.$el[t]("is-editor")},triggerSubview:function(e){var t,n;t=Array.prototype.slice.call(arguments),n="on"+e.charAt(0).toUpperCase()+e.slice(1);if(this.subView&&this.subView[n])return this.subView[n].apply(this.subView,t.slice(1))},getSubviewName:function(e){return this.availableSubViews[e]?this.availableSubViews[e]:!1},setSubview:function(e,t){if(!e)return this.subView&&this.subView.remove(),this.subView=null,this.subViewName=null;this.subViewName=e,this.subView=new i.Views[e],this.subView.parentView=this,this.startSpinner(),this.setView("#editor-sidebar-container",this.subView);if(t)return this.subView.render()},open:function(e){var t=this;return this.$el.addClass("open"),this.$body.addClass("editor-sidebar-open").trigger({type:"toggle.editor-sidebar",name:"open"}),setTimeout(function(){return t.triggerSubview("opened",e),t.$el.addClass("opened"),t.$body.trigger({type:"toggle.editor-sidebar",name:"opened"})},300)},close:function(){var e=this;return this.triggerSubview("close"),this.$body.removeClass("editor-sidebar-open").trigger({type:"toggle.editor-sidebar",name:"closing"}),this.$el.removeClass("open").find("nav .active").removeClass("active"),setTimeout(function(){return e.$el.removeClass("opened"),e.$body.trigger({type:"toggle.editor-sidebar",name:"close"})},300)},toggle:function(){return this.$el.hasClass("open")?this.close():this.open()},initSpinner:function(){return this.spinner={inst:new r(i.config.spinner),target:$("#editor-sidebar-spinner",this.$el)[0]}},startSpinner:function(){var e;return e=this.spinner,$(e.target).addClass("active"),e.inst.spin(e.target)},stopSpinner:function(){var e;return e=this.spinner,$(e.target).removeClass("active"),e.inst.stop()},afterRender:function(){return this.$body=$("body"),this.initSpinner()}}),i.Views.SidebarContainer=Backbone.View.extend({$sidebarHeader:null,$sidebarContent:null,parentView:null,className:"editor-sidebar-container",columnsPrefix:"columns-",galleryData:{},initSidebar:function(){var e=this;return this.$sidebarHeader=$("> header",this.$el),this.$sidebarContent=$("section.editor-sidebar-content",this.$el),this.setSidebarHeight(),$.addOnWindowResize("editor.sidebar.height",function(){return e.setSidebarHeight(),e._setColumnCount()})},hideSpinner:function(){if(this.parentView)return this.parentView.stopSpinner()},_cleanup:function(){return this.uploadZone&&this.uploadZone.cleanup(),$.removeOnWindowResize("editor.sidebar.height")},setSidebarHeight:function(){return this.$sidebarContent.css({height:$(window).height()-this.$sidebarHeader.outerHeight()})},_getColumnsCount:function(){return this.$sidebarContent.data("columns")},_setColumnCount:function(){var e,t,n;if(!this.$sidebarContent)return;n=parseInt(this.$sidebarContent.width(),10),t=this._getColumnsCount(),e=Math.floor(n/75);if(e)return this.$sidebarContent.removeClass(this.columnsPrefix+t).addClass(this.columnsPrefix+e).data("columns",e)},_afterRender:function(){var e=this;this.hideSpinner(),this.initSidebar(),_.once(function(){e.$sidebarContent=$(".editor-sidebar-content",e.$el);if(e.isOpen)return e._setColumnCount()})(),this.isOpen&&this._setColumnCount();if(this.$sidebarContent.hasClass("scrollbox"))return this.$sidebarContent.list({headerSelector:"header"}),$(".ui-list",this.$sidebarContent).scroll(function(t){return e.onContentScroll()})},onContentScroll:function(){},_onOpened:function(e){var t,n=this;return t=e?0:300,this.isOpen=!0,setTimeout(function(){return n._setColumnCount()},t)},onOpened:function(e){return this._onOpened(e)},_onClose:function(){var e,t=this;return this.isOpen=!1,e=this._getColumnsCount(),setTimeout(function(){if(t.$sidebarContent)return t.$sidebarContent.removeClass(t.columnsPrefix+e)},300)},onClose:function(){return this._onClose()}}),i.Views.UserSidebar=i.Views.SidebarContainer.extend({tagName:"div",template:"security/editor-sidebar-user",events:{"submit form.user-settings":"changeUserCredentials"},cleanup:function(){return this._cleanup(),this.metaEditor.destroy()},render:function(n,r){var s,o;return r==null&&(r={}),s=this.async(),o=t.forUserGallery("Person").done(function(t){return r.PersonImages=t.images.Person,r.Person=e.CurrentMemberPerson.toJSON(),r.Member=e.CurrentMember,_.each(r.PersonImages,function(e){if(r.Person.Image&&e.id===r.Person.Image.ID)return r.CurrentImage=e}),s(n(r))}),i.setPendingReq(o)},initProjectList:function(){var t,n,r,s,o,u=this;t=[],o=["Projects","Exhibitions","Excursions","Workshops"];for(r=0,s=o.length;r<s;r++)n=o[r],t=t.concat(e.CurrentMemberPerson.get(n).toJSON());return t=_.sortBy(t,function(e){return e.Title.toLowerCase()}),_.each(t.reverse(),function(e){var t;if(e.EditableByMember)return t=new i.Views.ProjectItem({model:e}),u.insertView(".editor-sidebar-content .project-list",t),t.render()})},initPersonImageList:function(){var t,n=this;return t=_.sortBy(e.Cache.UserGallery.images.Person,"id"),_.each(t,function(e){return n.insertPersonImage(e)})},insertPersonImage:function(e){var t,n;return t=this.uploadZone,n=new i.Views.PersonImage({model:e}),this.insertView(".editor-sidebar-content .image-list",n),n.afterRender=function(){return this._afterRender(),t.setAsDraggable(this.$el.find("[data-id]"))},n.render()},initDropzone:function(){var t=this;return this.uploadZone=new JJSingleImageUploadZone("#current-person-image",{url:e.Config.PersonImageUrl,getFromCache:function(t){var n;return n=null,_.each(e.Cache.UserGallery.images.Person,function(e){if(e.id===t)return n=e}),console.log(n),[n]},responseHandler:function(n){var r,i,s;i=n[0],i.UploadedToClass&&(e.updateGalleryCache(n),t.insertPersonImage(i)),console.log(i);if(r=i.id){t.uploadZone.$dropzone.html('<img src="'+i.url+'">'),s=e.CurrentMemberPerson.get("Image");if(r!==s&&(!s||r!==s.id))return e.CurrentMemberPerson.rejectAndSave("Image",r)}}})},onContentScroll:function(){var e;return e=this.metaEditor.getComponentByName("CurrentPerson.Bio"),e.api.reposition()},initMetaEditor:function(){return this.metaEditor=new JJEditor($(".meta-info"),["InlineEditable","MarkdownEditable","SplitMarkdownEditable"]),this.metaEditor.on("stateUpdate",function(t){var n,r,i,s;i=!1,s=t.CurrentPerson;for(n in s)r=s[n],n==="Bio"&&r&&(r=r.raw),r===null&&(r=""),e.CurrentMemberPerson.get(n)!==r&&(i=!0,e.CurrentMemberPerson.set(n,r));if(i)return e.CurrentMemberPerson.rejectAndSave()})},afterRender:function(){return this._afterRender(),this.initDropzone(),this.initPersonImageList(),this.initProjectList(),this.initMetaEditor()},changeUserCredentials:function(t){var n,r,i,s=this;return t.preventDefault(),n=$(t.target),r=n.serialize(),i=$.ajax({url:e.Config.ChangeCredentialsUrl,data:r,type:"POST"}),i.done(function(t){var r;t.email&&(n.find('[name="email"]').val(t.email),s.$el.find(".editor-header .email").text(t.email),e.CurrentMember.Email=t.email);if(r=t.msg)return s.showMessageAt(r.text,n.parent(),r.type)}),!1}}),i.Views.GallerySidebar=i.Views.SidebarContainer.extend({tagName:"div",template:"security/editor-sidebar-gallery",isGallery:!0,$sidebarContent:null,initialize:function(){return Backbone.Events.on("DocImageAdded",this.handleUploadedImageData,this)},cleanup:function(){return this._cleanup(),this.$el.parent().off("dragenter"),Backbone.Events.off("DocImageAdded",this.handleUploadedImageData)},initImageList:function(){var t=this;return _.each(e.Cache.UserGallery.images.Projects,function(e){return _.each(e.Images,function(n){return t.insertGalleryImage(e.FilterID,n)})})},insertGalleryImage:function(e,t){var n;return n=new i.Views.GalleryImage({model:t}),this.insertView('[data-filter-id="'+e+'"] .image-list',n),n.render()},initFilter:function(){var e=this;this.$filter||(this.$filter=$("select.filter",this.$el));if(this.$filter.length)return this.$filter.on("change",function(t){var n,r;r=$(t.target).blur().val();if(!r)return e.$sidebarContent.removeClass("filtered").find(".active").removeClass("active");n=$("[data-filter-id="+r+"]",e.$sidebarContent);if(n.length)return e.$sidebarContent.addClass("filtered"),n.addClass("active").siblings().removeClass("active"),n.prev("header").addClass("active")})},initDropzone:function(){var t=this;return this.uploadZone=new JJSimpleImagesUploadZone("#uploadzone",{url:e.Config.DocImageUrl,additionalData:{projectId:e.ProjectEditor.model.id,projectClass:e.ProjectEditor.model.get("ClassName")},responseHandler:function(n){return e.updateGalleryCache(n),t.handleUploadedImageData(n)}}),this.$el.parent().on("dragenter",function(e){if(!$("body").hasClass("drag-inline"))return t.uploadZone.$dropzone.addClass("dragover"),$.fireGlobalDragEvent("dragstart",e.target,"file")})},handleUploadedImageData:function(t){var n=this;return console.log(t),_.each(t,function(t){return n.insertGalleryImage(t.FilterID,t),e.ProjectEditor.model.get("Images").add(t.id)})},render:function(n,r){var s,o,u=this;return r==null&&(r={}),s=this.async(),o=t.forUserGallery("Projects").done(function(t){var i,o,u,a;return a=_.sortBy(t.images.Projects,function(e){return e.Title.toLowerCase()}),i=e.ProjectEditor.model,o=i.get("ClassName")+"-"+i.id,u=0,_.each(a,function(e,t){if(e.FilterID===o)return u=t}),u&&a.splice(0,0,a.splice(u,1)[0]),r.Projects=a,s(n(r))}),i.setPendingReq(o)},afterRender:function(){return this._afterRender(),this.initFilter(),this.initDropzone(),this.initImageList()}}),i.Views.ListItem=Backbone.View.extend({tagName:"li",_cleanup:function(){return this.$el.data("recyclable",null),this.$el.off("dragstart dragend")},cleanup:function(){return this._cleanup()},serialize:function(){return this.model},insert:function(e,t){return $(e).prepend(t)},_afterRender:function(){return n.setViewAsRecyclable(this)},afterRender:function(){return this._afterRender()}}),i.Views.GalleryImage=i.Views.ListItem.extend({template:"security/editor-sidebar-gallery-image",className:"DocImage",cleanup:function(){return this.$el.find("[data-md-tag]").trigger("dragend"),this._cleanup()},afterRender:function(){var t,n=this;return this._afterRender(),this.$img=this.$el.find("[data-md-tag]"),t=function(){var e,t;return t=n.$img.data("id"),e=n.$img[0].tagName.toLowerCase(),n.$el.closest(".editor-sidebar-content").find("[data-id="+t+"]").filter(function(t){return this.tagName.toLowerCase()===e})},JJMarkdownEditor.setAsDraggable(this.$img),e.ProjectEditor.PreviewImageZone.setAsDraggable(this.$img),this.$img.on("mouseover",function(){var e;e=t();if(e.length)return e.addClass("active")}).on("mouseleave",function(){var e;e=t();if(e.length)return e.removeClass("active")})},liveRemoval:function(){var t=this;return e.ProjectEditor.galleryImageRemoved(this.model.id),_.each(this.__manager__.parent.views,function(e){return _.each(e,function(e){if(e.model.id===t.model.id&&e!==t)return e.remove()})}),this.remove()}}),i.Views.PersonImage=i.Views.ListItem.extend({template:"security/editor-sidebar-person-image",className:"PersonImage",cleanup:function(){return this.$el.find("[data-id]").trigger("dragend"),this._cleanup()},liveRemoval:function(){var t;return t=e.CurrentMemberPerson.get("Image"),t.id===this.model.id&&$("#current-person-image").empty(),this.remove()}}),i.Views.ProjectItem=i.Views.ListItem.extend({template:"security/editor-sidebar-project-item",cleanup:function(){return this._cleanup(),Backbone.Events.off("projectEdited",this.handleActive)},initialize:function(){return Backbone.Events.on("projectEdited",this.handleActive,this)},afterRender:function(){if(e.isEditor)return this.handleActive(e.ProjectEditor.model)},handleActive:function(e){this.$el.find("a").removeClass("active");if(e.get("ClassName")===this.model.ClassName&&e.id===this.model.ID)return this.$el.find("a").addClass("active")}}),i}),define("modules/Auth",["app","modules/UserSidebar"],function(e,t){var n;return n=e.module(),n.ping={url:JJRestApi.setObjectUrl("User"),interval:2e5},n.loginUrl="api/v2/Auth/login/",n.logoutUrl="api/v2/Auth/logout/",n.canEditUrl="api/v2/Auth/canEdit/",n.Cache={userWidget:null},n.redirectTo=function(t){var n;return n=e.origin+"/"+t+"/",window.location.replace(n)},n.logout=function(){return $.post(n.logoutUrl).pipe(function(e){return e.success?e:$.Deferred().reject(e)}).done(function(t){return console.log("cancelling login ping, redirecting..."),e.CurrentMember={},n.cancelLoginPing(),n.redirectTo("login")}).promise()},n.handleUserServerResponse=function(t){if(!t.Email)return e.CurrentMember={};n.kickOffLoginPing();if(!e.CurrentMember.Email)return e.CurrentMember=t,n.fetchMembersPerson().done(function(){return n.updateUserWidget()});if(t.Email!==e.CurrentMember.Email)return n.redirectTo("secured/dashboard")},n.performLoginCheck=function(){return $.getJSON(this.ping.url).done(n.handleUserServerResponse).promise()},n.canEdit=function(e){var t,n,r;t="?";for(r in e)n=e[r],t+=r+"="+n+"&";return $.getJSON(this.canEditUrl+t).pipe(function(e){return e.allowed?e:$.Deferred().reject()}).promise()},n.kickOffLoginPing=function(){var t=this;return this.cancelLoginPing,this.loginPing=window.setTimeout(function(){return t.performLoginCheck().done(function(){if(!e.CurrentMember.Email)return n.redirectTo("login")})},this.ping.interval)},n.cancelLoginPing=function(){if(this.loginPing)return window.clearTimeout(this.loginPing),delete this.loginPing},n.updateUserWidget=function(){var n;if(e.CurrentMember.Email)return n=this.Cache.userWidget=this.Cache.userWidget||t.construct(),n.toggleEditorClass(e.isEditor)},n.fetchMembersPerson=function(){var t,n,r;return t=new $.Deferred,e.CurrentMemberPerson?(t.resolve(),t.promise()):(r=e.CurrentMember.PersonID,r?(n=e.Collections.Person.get(r),n?n._isFetchedWhenLoggedIn?(e.CurrentMemberPerson=n,t.resolve()):n.fetch({success:function(n){return n._isCompletelyFetched=!0,n._isFetchedWhenLoggedIn=!0,e.CurrentMemberPerson=n,t.resolve()}}):JJRestApi.getFromDomOrApi("Person",{name:"current-member-person",id:r}).done(function(n){var r;return _.isObject(n)?(r=e.handleFetchedModel("Person",n),r._isCompletelyFetched=!0,r._isFetchedWhenLoggedIn=!0,e.CurrentMemberPerson=r,t.resolve()):t.reject()}),t.promise()):(t.reject(),t.promise()))},n.Views.Login=Backbone.View.extend({tagName:"section",idAttribute:"login-form",template:"security/login-form",events:{"submit form":"submitLoginForm"},submitLoginForm:function(e){var t,r,i,s=this;return e.preventDefault(),r=this.$el.find('[name="password"]').val(),t=this.$el.find('[name="email"]').val(),i=this.$el.find('[name="remember"]').is(":checked")===!0?1:0,$.post(n.loginUrl,{pass:r,email:t,remember:i}).done(function(e){return n.handleUserServerResponse(e),s.render()}),!1},serialize:function(){return e.CurrentMember}}),n.Views.Logout=Backbone.View.extend({tagName:"section",idAttribute:"logging-out",template:"security/logging-out",serialize:function(){return e.CurrentMember}}),n}),define("modules/SuperProject",["app"],function(e){var t;return t=e.module(),t.Model=Backbone.JJRelationalModel.extend({idArrayOfRelationToClass:function(e,t){return t==null&&(t=void 0),this.get("ClassName")==="Project"&&e==="Project"?this.get("ChildProjects").getIDArray().concat(this.get("ParentProjects").getIDArray()):this.get("ClassName")===e?[]:(t=t?t:e+"s",this.get(t).getIDArray())},setRelCollByIds:function(e,t){var n,r,i,s,o=this;s=!1;if(i=this.get(e))n=i.model.prototype.storeIdentifier,r=this.idArrayOfRelationToClass(n,e),_.each(t,function(e){if(_.indexOf(r,e)<0)return s=!0,i.add(e)}),_.each(_.difference(r,t),function(t){var n;s=!0,n=i.get(t);if(n)return i.remove(n);if(e==="Projects")return i=o.get("ParentProjects"),i.remove(i.get(t))});return s}}),t}),define("modules/Project",["app","modules/SuperProject"],function(e,t){var n;return n=e.module(),JJRestApi.Modules.extend(n,function(e){return JJRestApi.extendModel("Project",t.Model,{foo:"bar"}),JJRestApi.extendCollection("Project",{foo:"bar"}),e.Views.Test=Backbone.View.extend({template:"head",tagName:"div",className:"head"})}),n});var __hasProp={}.hasOwnProperty,__extends=function(e,t){function r(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},__bind=function(e,t){return function(){return e.apply(t,arguments)}};(function(e,t){var n,r,i,s,o,u,a;return t.requestAnimFrame=function(){return t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||t.oRequestAnimationFrame||t.msRequestAnimationFrame||function(e,n){return t.setTimeout(e,1e3/60)}}(),t.debugGravity=!1,t.logger=function(){if(t.debugGravity)return console.log(arguments[0])},i=function(){function e(e,t,n,r){this.id=e,this.x=t,this.y=n,this.scaleFactor=r!=null?r:30}return e.prototype.update=function(e,t,n){this.x=e,this.y=t,this.angle=n},e.prototype.setAwake=function(e){this.isAwake=e},e.prototype.scale=function(){return this.scaleFactor},e.prototype.draw=function(){},e}(),u=function(t){function n(e,t,r,i,s,o){this.id=e,this.x=t,this.y=r,this.width=i!=null?i:0,this.height=s!=null?s:0,this.scaleFactor=o!=null?o:30,n.__super__.constructor.call(this,this.id,this.x,this.y,this.scaleFactor)}return __extends(n,t),n.prototype.color="red",n.prototype.sleepColor="gray",n.prototype.halfWidth=function(){return this.width/2},n.prototype.halfHeight=function(){return this.height/2},n.prototype.draw=function(){var t;t=e("[data-gravity-item="+this.id+"]");if(t.length)return e("[data-gravity-item="+this.id+"]").css({top:this.y*this.scale(),left:this.x*this.scale(),"margin-top":-this.height*this.scale()/2,"margin-left":-this.width*this.scale()/2,height:this.height*this.scale(),width:this.width*this.scale()})},n}(i),n=function(t){function n(t,r,i,s,o,u){var a;this.id=t,this.x=r,this.y=i,this.width=s!=null?s:0,this.height=o!=null?o:0,this.scaleFactor=u!=null?u:30,a=e("[data-gravity-item="+this.id+"]"),a.length||e('<div class="entity" data-gravity-item="'+this.id+'">'+this.id+"</div>").appendTo(".gravity"),n.__super__.constructor.call(this,this.id,this.x,this.y,this.scaleFactor)}return __extends(n,t),n}(u),s=function(e){function t(){return a=t.__super__.constructor.apply(this,arguments),a}return __extends(t,e),t.prototype.color="green",t.prototype.draw=function(){},t}(u),r=function(){function n(t,n,r,i,s){this.width=t,this.height=n,this.padding=r,this.workerOpts=s,this.loop=__bind(this.loop,this),this.init=function(){var e=this;return logger("Box2DHolder init"),this.setScale(i),this.useWorker=this.hasWebWorker(),document.addEventListener("webkitvisibilitychange",function(){return document.webkitHidden?e.stop():e.start()},!1),this.useWorker?this.initWorker():this.initNonWorker(),this.setDimensions(this.width,this.height),this.loop()},this.hasWebWorker=function(){return typeof Worker!="undefined"},this.initWorker=function(){var t=this;return this.worker=new Worker(this.workerOpts.physics),this.worker.onmessage=function(n){var r,i,s,o;if("log"===n.data.key){logger(n.data.log);return}i=n.data.bodiesState,t.bodiesState=e.extend({},t.bodiesState,i),o=[];for(r in t.bodiesState)s=i[r],t.world[r]?s?(t.world[r].setAwake(!0),t.bodiesState[r]=s,o.push(t.needToDraw=!0)):t.world[r].isAwake?(t.needToDraw=!0,o.push(t.world[r].setAwake(!1))):o.push(void 0):o.push(void 0);return o}},this.initNonWorker=function(){return alert("no webworker support :("),logger("init non worker")},this.init()}return n.prototype.useWorker=!1,n.prototype.worker=null,n.prototype.bodiesState={},n.prototype.world={},n.prototype.border={},n.prototype.box=null,n.prototype.msgID=0,n.prototype.needToDraw=!0,n.prototype.scaleFactor=30,n.prototype.setScale=function(e){logger("box2DHolder set scale to "+e),this.scaleFactor=e;if(this.worker)return this.worker.postMessage({key:"setscale",value:e})},n.prototype.setDimensions=function(e,t){this.width=e,this.height=t;if(this.worker)return this.worker.postMessage({key:"dimensions",width:this.n(this.width),height:this.n(this.height)}),logger("set dimensions: "+this.n(this.width)+" - "+this.n(this.height)),this.needToDraw=!0},n.prototype.add=function(e){var t,n;if(e.id==="gravity")return n=new s(e.id,this.n(e.left),this.n(e.top),this.scaleFactor),this.addGravity(n);if(e.width&&e.height)return t=new u(e.id,this.n(e.left),this.n(e.top),this.n(e.width),this.n(e.height),this.scaleFactor),this.addEntity(t)},n.prototype.n=function(e){return e/this.scaleFactor},n.prototype.w=function(e){return e+=this.n(this.padding*this.width)},n.prototype.h=function(e){return e+=this.n(this.padding*this.height)},n.prototype.looper=0,n.prototype.loop=function(e){return this.update(e),this.draw(),t.requestAnimFrame(this.loop)},n.prototype.start=function(){return this.worker.postMessage({key:"start"})},n.prototype.stop=function(){return this.worker.postMessage({key:"stop"})},n.prototype.addGravity=function(e){return logger("add Gravity"),this.worker.postMessage({key:"addEntity",entity:e})},n.prototype.addEntity=function(e){return logger("added entity '"+e.id+"'"),this.world[e.id]=e,this.worker.postMessage({key:"addEntity",entity:this.world[e.id]}),this.needToDraw=!0},n.prototype.update=function(e){var t,n,r,i;this.useWorker?this.needToDraw&&(this.worker.postMessage({key:"req",id:this.msgID}),this.msgID++):(this.box.update(),this.bodiesState=this.box.getState(),this.needToDraw=!0),i=[];for(n in this.bodiesState)t=this.world[n],r=this.bodiesState[n],t?i.push(t.update(this.w(r.x),this.h(r.y),r.a)):i.push(void 0);return i},n.prototype.draw=function(){var e,t,n;if(!this.needToDraw)return;n=this.world;for(t in n)e=n[t],e=this.world[t],e.draw();return this.needToDraw=!1},n}(),o={itemIdCount:0,implementationCount:0,implementations:{}},t.Storage=o,t.currentTooltip={},e.extend(e.fn,{RadialGravity:function(n){var i,s,u,a;return this.defaultOptions={elementSelector:null,itemIdPrefix:"gravity-item-",padding:0,box2d:{scale:100},worker:{physics:"physics.js"}},i="gravity-id",u=this,a=function(e){return o.implementations[e]},s={init:function(n){var u,f,l=this;return f=e.extend({},this.defaultOptions,n),u=function(){return o.itemIdCount++,o.itemIdCount},this.each(function(n,l){var c,h,p,d,v,m,g,y,b,w,E,S,x,T;return x=o.implementationCount,o.implementationCount++,o.implementations[x]={$container:null,box2DHolder:null,width:0,height:0,options:f},a=function(){return o.implementations[x]},S=function(){var n,r,i;r=a(),r.$container.css("min-height",e(t).height()),i=r.$container.width(),n=r.$container.height(),i-=f.padding*i,n-=f.padding*n,r.width=i,r.height=n;if(r.height<=0)return r.height=e(t).height()},E=function(){var e;return S(),e=a(),e.box2DHolder.setDimensions(e.width,e.height)},m=function(){return a().$container=e(l).data(i,x),S(),a().box2DHolder=new r(a().width,a().height,f.padding,f.box2d.scale,f.worker),g(),c(),p()},w=null,g=function(){var e=this;return t.onresize=function(e){return clearTimeout(w),w=setTimeout(function(){return E(),logger("on resize"),c()},10)}},v=function(){return f.itemIdPrefix+(""+x+"-")},d=function(){return v()+u()},c=function(){return s.add({id:"gravity",top:a().height/2,left:a().width/2},x)},b=function(t){var n,r,i,s,o;return r=Math.PI*2/t.length,s=o=n=0,i=a(),t.each(function(t,u){var a,f,l;return l=Math.random()*100,a=e(u),Math.random()>.5&&(l*=-1),f=Math.min(i.width,i.height)/2,s=Math.max(a.width(),Math.min(i.width-a.width(),f*Math.cos(n)+f+l)),o=Math.max(a.height(),Math.min(i.height-a.height(),f*Math.sin(n)+f+l)),console.log(s),console.log(o),u.style.position="absolute",u.style.left=s+"px",u.style.top=o+"px",n+=r})},T=function(t){return t.each(function(t,n){var r,i,s,o;r=e(n);if(!r.hasClass("resizable"))return;return s=Math.max(.2,Math.random()*1.8),o=r.width()*s,i=r.height()*s,r.width(o),r.height(i)})},y=function(t){var n,r,i;n=e("section[role=tooltip-content]",t),i=-20,r=function(t){var n,r;return r=i,n=e(t.tooltip),n.hasClass("qtip-pos-rb")&&(logger("inverse margin"),r*=-1),r};if(n.length)return t.qtip({content:{text:n.html()},show:{event:"mouseenter",effect:function(n){return t.addClass("has-tooltip"),e(this).stop(!0,!0).css({"margin-left":r(n)}).show().animate({"margin-left":0,opacity:1},200)}},hide:{event:"mouseleave",effect:function(n){return e(this).stop(!0,!0).animate({"margin-left":r(n),opacity:0},200,function(){return t.removeClass("has-tooltip"),e(this).hide()})}},position:{at:"right bottom",my:"left bottom",viewport:a().$container,adjust:{method:"flip shift",x:0,y:10}}}),logger(t.qtip("api").tooltip)},h=function(e){return e.imagesLoaded().done(function(t){return e.addClass("loaded"),y(e)})},p=function(){var t,n=this;return t=f.elementSelector?a().$container.find(f.elementSelector):a().$container.children(),T(t),b(t),e.each(t,function(t,n){var r,i,o,u;return r=e(n),u=r.position(),o=d(),h(r),i={id:o,width:r.width(),height:r.height(),top:u.top,left:u.left},r.attr("data-gravity-item",o),s.add(i,x)})},m(),!0})},show:function(){},hide:function(){},update:function(e){},add:function(t,n){return n===void 0?n=e(this).data(i):typeof n!="number"&&console.error("Couldn't add items to gravity container."),a(n).box2DHolder.add(t)}},s[n]?s[n].apply(this,Array.prototype.slice.call(arguments,1)):typeof n=="object"||!n?s.init.apply(this,arguments):(console.error("Method "+method+" does not exist on $.RadialGravity"),this)}})})(this.jQuery||this.Zepto,this),define("plugins/gravity/jquery.gravity",function(){}),define("modules/Gravity",["app","plugins/gravity/jquery.gravity"],function(e){var t;return t=e.module(),t.Views.Container=Backbone.View.extend({className:"gravity",initGravity:function(){return $(this.el).RadialGravity({worker:{physics:"/app/assets/js/plugins/gravity/backend/physics.js"}})},afterRender:function(){return this.initGravity()}}),t}),define("modules/Portfolio",["app","modules/Gravity"],function(e,t){var n;return n=e.module(),n.Config={person_group_length:4,group_project_title:"Group project"},n.Views.GravityContainer=t.Views.Container.extend({tagName:"section",beforeRender:function(){var e,t,r,i,s;console.log("portfolio before render"),t=this.collection;if(t){s=[];for(r=0,i=t.length;r<i;r++)e=t[r],s.push(this.insertView("",new n.Views.ListItem({model:e,linkTo:this.options.linkTo})));return s}}}),n.Views.ListItem=Backbone.View.extend({tagName:"article",className:"gravity-item resizable",template:"gravity-list-item",serialize:function(){var e;return e=this.model?this.model.toJSON():{},e.LinkTo=this.options.linkTo,e}}),n.Views.Detail=Backbone.View.extend({tagName:"article",className:"portfolio-detail",template:"portfolio-detail",beforeRender:function(){return this._codeEv=$.Event("code:kickoff",{bubbles:!1}),this._afterRenderEv=$.Event("portfoliodetail:rendered")},afterRender:function(){var e;return window.picturefill(),e=$(document),e.trigger(this._codeEv),e.trigger(this._afterRenderEv)},serialize:function(){var e,t,r=this;return e=this.model?this.model.toJSON():{},t=["Projects","ChildProjects","ParentProjects"],e.Persons.length>n.Config.person_group_length&&(e.IsGroup=!0),e.combinedProjects=[],_.each(t,function(t){if(_.isArray(e[t]))return e.combinedProjects=e.combinedProjects.concat(e[t])}),e}}),Handlebars.registerHelper("nameSummary",function(e){var t,r,i;return t=n.Config,e.length<t.person_group_length?(i="",r=e.length,_.each(e,function(e,t){i+='<a href="/about/'+e.UrlSlug+'/">'+e.FirstName+" "+e.Surname+"</a>";if(t<r-2)return i+=", ";if(t<r-1)return i+=" &amp; "}),i):t.group_project_title}),Handlebars.registerHelper("niceDate",function(e){var t;return!e.DateRangeNice&&!e.FrontendDate?!1:(t="",e.DateRangeNice?t+=e.DateRangeNice:e.FrontendDate&&(t+=e.FrontendDate),t)}),Handlebars.registerHelper("teaserMeta",function(){var e,t;return t=Handlebars.helpers.niceDate(this),this.ClassName==="Project"?(e=Handlebars.helpers.nameSummary(this.Persons),""+e+" // "+t):t}),Handlebars.registerHelper("portfoliolist",function(e,t,n){var r,i;return n||(n=t,t=""),r=0,i="<ul>",_.each(e,function(e){if(e.IsPortfolio&&e.IsPublished)return i+='<li><a href="/portfolio/'+e.UglyHash+'/">'+e.Title+"</a></li>",r++}),i+="</ul>",t+=r>1?"s":"",r?"<h4>"+t+"</h4>"+i:""}),Handlebars.registerHelper("commaSeparatedWebsites",function(e){var t;return t=[],_.each(e,function(e){return t.push('<a href="'+e.Link+'">'+e.Title+"</a>")}),t.join(", ")}),n}),define("modules/Person",["app","modules/Gravity","modules/Portfolio"],function(e,t,n){var r;return r=e.module(),JJRestApi.Modules.extend("Person",function(e){return JJRestApi.extendModel("Person",{getLinkingSlug:function(){return this.get("IsEmployee")?"employee":this.get("IsStudent")?"student":this.get("IsAlumni")?"alumni":""}}),JJRestApi.extendCollection("Person",{foo:"bar"})}),r.Views.GravityContainer=t.Views.Container.extend({tagName:"section",beforeRender:function(){var t,i,s,o,u,a,f,l,c,h,p,d;console.log("render person page with normal view"),i=[],u=this.model.relations,d=e.Config.ProjectTypes;for(a=0,c=d.length;a<c;a++){s=d[a];for(f=0,h=u.length;f<h;f++)o=u[f],o.collectionType===s&&(i=i.concat(this.model.get(o.key).models))}for(l=0,p=i.length;l<p;l++)t=i[l],t.get("IsPublished")&&this.insertView("",new n.Views.ListItem({model:t,linkTo:"about/"+this.model.get("UrlSlug")}));return this.insertView("",new r.Views.InfoItem({model:this.model}))}}),r.Views.InfoItem=Backbone.View.extend({tagName:"article",className:"gravity-item person-info",template:"person-info-item",serialize:function(){if(this.model)return this.model.toJSON()}}),r.Views.Custom=Backbone.View.extend({tagName:"div",className:"custom-templ",initialize:function(e){if(e.template)return this.template=e.template},serialize:function(){return this.model?this.model.toJSON():{}},beforeRender:function(){return this._ev=$.Event("template:ready",{bubbles:!1})},afterRender:function(){return $(document).trigger(this._ev)}}),Handlebars.registerHelper("personMeta",function(){var e,t,n;return t="",n=[],e=!1,this.IsStudent&&n.push("Student"),this.IsAlumni&&n.push("Alumni"),this.IsEmployee&&n.push("Employee"),this.IsExternal&&n.push("External"),n.length?(t+=n.join(", "),this.GraduationYear&&(t+=" // ",t+=this.MasterYear?this.MasterYear:this.GraduationYear),t):""}),Handlebars.registerHelper("website",function(){var e,t;return e=this.Link||"#",t=this.Title||e,'<a href="'+e+'">'+t+"</a>"}),r}),define("modules/Excursion",["app","modules/SuperProject"],function(e,t){var n;return n=e.module(),JJRestApi.Modules.extend("Excursion",function(e){return JJRestApi.extendModel("Excursion",t.Model,{foo:"bar"}),JJRestApi.extendCollection("Excursion",{foo:"bar"})}),n}),define("modules/Workshop",["app","modules/SuperProject"],function(e,t){var n;return n=e.module(),JJRestApi.Modules.extend("Workshop",function(e){return JJRestApi.extendModel("Workshop",t.Model,{foo:"bar"}),JJRestApi.extendCollection("Workshop",{foo:"bar"})}),n}),define("modules/Exhibition",["app","modules/SuperProject"],function(e,t){var n;return n=e.module(),JJRestApi.Modules.extend("Exhibition",function(e){return JJRestApi.extendModel("Exhibition",t.Model,{foo:"bar"}),JJRestApi.extendCollection("Exhibition",{foo:"bar"})}),n}),define("modules/CalendarEntry",["app"],function(e){var t;return t=e.module(),JJRestApi.Modules.extend("CalendarEntry",function(e){return JJRestApi.extendModel("CalendarEntry",{foo:"bar"}),JJRestApi.extendCollection("CalendarEntry",{foo:"bar"})}),t}),define("modules/PageError",["app"],function(e){var t;return t=e.module(),t.Views.FourOhFour=Backbone.View.extend({template:"404",tagName:"div",className:"page-error",serialize:function(){return{url:this.attributes["data-url"]}}}),t}),define("modules/Calendar",["app"],function(e){var t;return t=e.module(),t.Views.Container=Backbone.View.extend({id:"calendar-container",template:"calendar-container",initialize:function(e){return this.upcomingEvents=this.collection.where({IsUpcoming:!0})},serialize:function(){var e;return e={},this.upcomingEvents&&this.upcomingEvents.length&&(e.HasItems=!0),e},beforeRender:function(){var e,n,r,i,s;i=this.upcomingEvents,s=[];for(n=0,r=i.length;n<r;n++)e=i[n],s.push(this.insertView("#calendar-list",new t.Views.ListItem({model:e})));return s}}),t.Views.ListItem=Backbone.View.extend({tagName:"li",className:"calendar-list-item",template:"calendar-list-item",serialize:function(){return this.model?this.model.toJSON():{}}}),t.Views.Detail=Backbone.View.extend({tagName:"article",className:"portfolio-detail",template:"calendar-detail",afterRender:function(){return window.picturefill()},serialize:function(){return this.model?this.model.toJSON():{}}}),t}),define("modules/About",["app","modules/Gravity"],function(e,t){var n;return n=e.module(),n.Views.GravityContainer=t.Views.Container.extend({tagName:"section",template:"about-gravity",initialize:function(e){return this.groupImage=e.groupImage,this.persons=e.persons},beforeRender:function(){var e,t,r,i,s,o,u,a,f,l,c,h,p;if(this.persons){l=this.persons.students;for(i=0,u=l.length;i<u;i++)r=l[i],this.insertView("#student-list",new n.Views.PersonListItem({model:r}));c=this.persons.alumnis;for(s=0,a=c.length;s<a;s++)e=c[s],this.insertView("#alumni-list",new n.Views.PersonListItem({model:e}));h=this.persons.employees,p=[];for(o=0,f=h.length;o<f;o++)t=h[o],p.push(this.insertView("",new n.Views.EmployeeItem({model:t})));return p}},afterRender:function(){return $(document).trigger($.Event("about:rendered")),this.initGravity()},serialize:function(){return{GroupImage:this.groupImage}}}),n.Views.PersonListItem=Backbone.View.extend({tagName:"li",template:"person-list-item",serialize:function(){return this.model.toJSON()}}),n.Views.EmployeeItem=Backbone.View.extend({tagName:"section",className:"person gravity-item",template:"employee-item",serialize:function(){return this.model.toJSON()}}),n}),define("modules/NewProject",["app"],function(e){var t;return t=e.module(),t.Views.NewProject=Backbone.View.extend({tagName:"div",template:"security/create-project",events:{"submit form.create-project":"createNewProject","click .project-type-list a":"setProjectType"},hideForm:function(){return this.$field.blur(),this.formError(""),this.$form.removeClass("active")},showForm:function(){return this.$submit.text("Create "+this.projectType),this.$field.attr("placeholder",this.projectType+" Title").removeAttr("disabled").val("").focus(),this.formError(""),this.$form.addClass("active")},formError:function(e){return e?this.$error.html(e).addClass("active"):this.$error.removeClass("active")},setProjectType:function(e){var t,n;return t=$(e.target),t.closest("ul").find(".active").not(t).removeClass("active").end().end().end().toggleClass("active"),t.hasClass("active")?(this.$list.addClass("active"),n=$(e.currentTarget).data("type"),n&&(this.projectType=n),this.showForm()):(this.$list.removeClass("active"),this.projectType=null,this.hideForm()),!1},afterRender:function(){var e=this;return this.$list=$("ul.project-type-list"),this.$form=$("form.create-project"),this.$field=$("input",this.$form),this.$error=$(".form-error",this.$form),this.$submit=$("button[type=submit]",this.$form),this.$field.on("keyup",function(){if(e.$error.hasClass("active")&&e.$field.val())return e.formError("")})},createNewProject:function(t){var n,r,i,s,o,u=this;t.preventDefault(),o=this.$field.val(),n="",o||(n="Please fill in a title!"),this.projectType||(n="Please choose the type of your project!");if(n)this.formError(n),this.$field.focus();else if(s=e.CurrentMemberPerson)this.$field.attr("disabled","disabled"),r=JJRestApi.Model(this.projectType),i=new r({Title:o,Persons:s}),i.save(null,{success:function(){return u.$field.removeAttr("disabled"),i._isCompletelyFetched=!0,i._isFetchedWhenLoggedIn=!0,Backbone.history.navigate("/secured/edit/"+i.get("UglyHash")+"/",!0)},error:function(e){var t;return t="<h1>"+e.status+": "+e.statusText+"</h1><p>"+e.responseText+"</p>",u.formError(t),u.$field.removeAttr("disabled")}});return!1}}),t}),define("modules/DocImage",["app"],function(e,t,n){var r;return r=e.module(),JJRestApi.Modules.extend("DocImage",function(e){return JJRestApi.extendModel("DocImage",{isVisibleForMember:function(){var e,t=this;return e=!1,_.each(["Projects","Workshops","Exhibitions","Excursions"],function(n){if(t.get(n).findWhere({EditableByMember:!0}))return e=!0}),e}}),JJRestApi.extendCollection("DocImage",{foo:"bar"})})});var __hasProp={}.hasOwnProperty,__extends=function(e,t){function r(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};define("modules/NMMarkdownParser",["app","modules/DataRetrieval","modules/DocImage"],function(e,t,n){var r,i,s,o;return r=function(e){function n(){return s=n.__super__.constructor.apply(this,arguments),s}return __extends(n,e),n.prototype.className="DocImage",n.prototype.rule=/\[img\s{1,}(.*?)\]/gi,n.prototype.parseFound=function(e){return parseInt(e)},n.prototype.isVisibleForMember=function(e){return _.each},n.prototype.getData=function(e){var n,r=this;return this.data=[],n=new $.Deferred,t.forMultipleDocImages(e).done(function(e){var t;return t=[],_.each(e,function(e){if(e.isVisibleForMember())return t.push(e)}),_.each(t,function(e){var t;return t=e.get("Urls")._1200.Url,r.data.push({id:e.id,tag:'<span><img src="'+t+'" /></span>'})}),n.resolve()}),n},n}(CustomMarkdownParser),i=function(e){function t(){return o=t.__super__.constructor.apply(this,arguments),o}return __extends(t,e),t.prototype.rule=/\[embed\s{1,}(.*?)\]/gi,t.prototype.url="/_md_/oembed/",t}(CustomMarkdownParser),window.ImageMarkdownParser=r,window.OEmbedMarkdownParser=i}),define("modules/ProjectEditor",["app","modules/DataRetrieval","modules/Auth","modules/Portfolio","modules/NMMarkdownParser"],function(e,t,n,r){var i;return i=e.module(),i.Inst=function(){function t(t){this.model=t,this.containerView=new i.Views.Container({model:this.model}),this.previewView=new i.Views.Preview({model:this.model}),this.mainView=new i.Views.Main({model:this.model}),this.modelJSON=_.extend(this.model.toJSON(),{CurrentMemberPerson:e.CurrentMemberPerson.toJSON()}),Backbone.Events.trigger("projectEdited",this.model),this.model.on("saved",this.modelHasSaved,this)}return t.prototype.kickOffRender=function(){return e.layout.setViewAndRenderMaybe("#project-editor",this.containerView)},t.prototype.getFilterID=function(){return""+this.model.get("ClassName")+"-"+this.model.id},t.prototype.toggleView=function(){return this.containerView.toggleView()},t.prototype.galleryImageRemoved=function(e){var t;t=this.model.get("PreviewImage");if(t&&t.id===e)return this.previewView.removePreviewImage()},t.prototype.modelHasSaved=function(){var e,t;return t=this.model.get("Title"),e='[data-editor-name="Title"]',this.previewView.$el.find(e).text(t),this.mainView.$el.find(e).text(t)},t.prototype.cleanup=function(){return this.model.off("saved",this.modelHasChanged)},t}(),i.Views.Container=Backbone.View.extend({tagName:"div",className:"editor-project-container",template:"security/editor-project-container",ACTIVE:"active",beforeRender:function(){return this.setView(".editor-project-main",e.ProjectEditor.mainView),this.setView(".editor-project-preview",e.ProjectEditor.previewView)},toggleView:function(){var e,t,n;n=this.views;for(e in n)t=n[e],t.editor&&t.editor.trigger("editor.closepopovers");return $(".editor-project-main, .editor-project-preview").toggleClass(this.ACTIVE)}}),i.Views.Preview=Backbone.View.extend({tagName:"article",template:"security/editor-project-preview",FILLED:"filled",cleanup:function(){return this.uploadZone.cleanup()},initDropzone:function(){var n=this;return e.ProjectEditor.PreviewImageZone=this.uploadZone=new JJSingleImageUploadZone(".preview-image",{url:e.Config.DocImageUrl,additionalData:{projectId:e.ProjectEditor.model.id,projectClass:e.ProjectEditor.model.get("ClassName")},getFromCache:function(e){return t.forDocImage(e)},responseHandler:function(r){var i,s;return s=function(t,r){var i;i=t.get("Urls")._320,n.uploadZone.$dropzone.addClass(n.FILLED).html('<img src="'+i.Url+'" />'),_.indexOf(n.model.get("Images").getIDArray(),t.id)<0&&(i=[{FilterID:e.ProjectEditor.getFilterID(),UploadedToClass:"DocImage",id:t.id,url:r}],e.updateGalleryCache(i),Backbone.Events.trigger("DocImageAdded",i));if(n.model.get("PreviewImage")!==t)return n.model.set("PreviewImage",t),n.model.get("Images").add(t),n.model.rejectAndSave()},r instanceof Backbone.Model==1?(i=$("#editor-sidebar").find('li.DocImage img[data-id="'+r.id+'"]'),s(r,i.attr("src"))):t.forDocImage(r[0].id).done(function(e){return s(e,r[0].url)})}}),this},initEditor:function(){var e=this;return this.editor=new JJEditor($(".meta"),["InlineEditable","DateEditable","MarkdownEditable"]),this.editor.on("stateUpdate",function(t){var n,r,i,s;i=!1,s=t.ProjectPreview;for(n in s){r=s[n],n==="TeaserText"&&r&&(r=r.raw);if(!r)continue;e.model.get(n)!==r&&(i=!0,e.model.set(n,r))}if(i)return e.model.rejectAndSave()}),this},removePreviewImage:function(){return this.uploadZone.$dropzone.removeClass(this.FILLED).empty()},afterRender:function(){return this.initDropzone(),this.initEditor()},serialize:function(){return e.ProjectEditor.modelJSON}}),i.Views.Main=Backbone.View.extend({tagName:"article",template:"security/editor-project-main",initEditor:function(){var t,n=this;return this.editor=new JJEditor(this.$el,["InlineEditable","DateEditable","SplitMarkdownEditable","SelectEditable","SelectPersonEditable","SelectListEditable"]),t=this.editor.getComponentByName("ProjectMain.Text").markdown,_.extend(t.options,{additionalPOSTData:{projectId:e.ProjectEditor.model.id,projectClass:e.ProjectEditor.model.get("ClassName")},uploadResponseHandler:function(t){return e.updateGalleryCache(t),Backbone.Events.trigger("DocImageAdded",t)}}),this.editor.on("editor.open-split-markdown",function(){return $("#layout").addClass("open-split-markdown")}),this.editor.on("editor.close-split-markdown",function(){return $("#layout").removeClass("open-split-markdown")}),this.editor.on("stateUpdate",function(e){return n.stateUpdate(e)}),this},stateUpdate:function(n){var r,i,s,o,u,a,f=this;console.group("STATE UPDATE"),console.log("this: %o",this),console.log("state: ",n.ProjectMain),u=!1,a=n.ProjectMain;for(r in a)o=a[r],r==="Text"?(s=o.raw?o.raw:"",s!==this.model.get("Text")&&(u=!0,this.model.set("Text",s)),o.images&&_.each(o.images.ids,function(n,r){var i;i=!1,f.model.get("Images").each(function(e){if(e.id===n)return i=!0});if(!i)return t.forDocImage(n).done(function(t){var n,r;return f.model.get("Images").add(t),n=e.getFromGalleryCache("DocImage",t.id),r=[{FilterID:e.ProjectEditor.getFilterID(),UploadedToClass:"DocImage",id:t.id,url:n.url}],e.updateGalleryCache(r),Backbone.Events.trigger("DocImageAdded",r)})})):_.indexOf(["Excursion","Exhibition","Workshop","Project"],r)>=0?(i=r==="Project"&&this.model.get("ClassName")==="Project"?"ChildProjects":r+"s",this.model.setRelCollByIds(i,o)&&(u=!0)):r==="Person"?(o.push(e.CurrentMemberPerson.id),this.model.setRelCollByIds("Persons",o)&&(u=!0)):r==="Category"&&this.model.setRelCollByIds("Categories",o)&&(u=!0);console.groupEnd();if(u)return this.model.rejectAndSave()},populateSelectEditables:function(){var t,n,r,i,s,o,u=this;t={Person:function(t){var n,r,i;return r=[],n=e.CurrentMemberPerson.id,_.each(t,function(e){if(e.ID!==n)return r.push(e)}),i=_.without(u.model.get("Persons").getIDArray(),n),{source:r,values:i}},Category:function(e){return{source:e,values:u.model.get("Categories").getIDArray()}}},o=["Project","Excursion","Exhibition","Workshop"],r=function(e){return t[e]=function(t){var n,r;return n=[],_.each(t,function(t){if(u.model.get("ClassName")!==e||u.model.id!==t.ID)return n.push(t)}),r=u.model.idArrayOfRelationToClass(e),{source:n,values:r}}};for(i=0,s=o.length;i<s;i++)n=o[i],r(n);return console.log(t),$.getJSON(e.Config.BasicListUrl).done(function(e){var n,r,i,s,o;_.isObject(e)&&(u.basicList=e),n=["select-list","select-person"],r=u.editor.getComponentsByType("select");for(s=0,o=n.length;s<o;s++)i=n[s],r=r.concat(u.editor.getComponentsByType(i));if(r&&u.basicList)return $.each(r,function(e,n){var r,i;r=n.getDataName();if(u.basicList[r]){t[r]&&(i=t[r](u.basicList[r]));if(i)return n.setSource(i.source,!0),n.setValue(i.values,!0)}})})},serialize:function(){return e.ProjectEditor.modelJSON},afterRender:function(){return this.initEditor(),this.populateSelectEditables()}}),i}),define("router",["app","modules/Auth","modules/Project","modules/Person","modules/Excursion","modules/Workshop","modules/Exhibition","modules/CalendarEntry","modules/PageError","modules/Portfolio","modules/Calendar","modules/About","modules/ProjectSearch","modules/DataRetrieval","modules/NewProject","modules/ProjectEditor"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v){var m;return m=Backbone.Router.extend({mainDeferred:null,pendingAjax:[],initialize:function(e){var t=this;return JJRestApi.Events.bind("dfdAjax",function(e){return t.pendingAjax.push(e)})},rejectAndHandle:function(n){var r,i=this;return e.isEditor=!1,e.ProjectEditor&&(e.ProjectEditor.cleanup(),e.ProjectEditor=null),n=n||{},e.handleLinks(),n.noFadeOut||(e.addLoadingClasses(),e.startSpinner()),r=this.mainDeferred,r&&r.reject(),_.each(this.pendingAjax,function(e){if(e.readyState!==4)return e.abort()}),this.pending=[],this.mainDeferred=$.Deferred(),this.mainDeferred.done(function(){return t.updateUserWidget(),i.mainDeferred=null,e.removeLoadingClasses(),e.stopSpinner()})},routes:{"":"index","about/":"showAboutPage","about/:nameSlug/":"showPersonPage","about/:nameSlug/:uglyHash/":"showPersonDetailed","portfolio/":"showPortfolio","portfolio/search/:searchTerm/":"showPortfolio","portfolio/:uglyHash/":"showPortfolioDetailed","calendar/":"showCalendar","calendar/:urlHash/":"showCalendarDetailed","login/":"showLoginForm","logout/":"doLogout","secured/edit/:uglyHash/":"showEditProjectPage","secured/new/":"showCreateProjectPage","*url/":"catchAllRoute"},index:function(t){var n,r,i,s,o=this;return i=this.rejectAndHandle(),r=e.Config,e.Cache.WholePortfolio&&(r.Featured.present.flag=!0),s=p.forProjectsOverview(r.Featured),n=p.forCalendar("upcoming"),$.when(s,n).done(function(){return i.resolve()}),i.done(function(){var t,n,r;return n=e.useLayout("index"),e.Cache.Featured||(e.Cache.Featured=o.getProjectTypeModels({IsFeatured:!0,IsPublished:!0})),r=e.Cache.Featured,o.showGravityViewForModels(r,"portfolio",n),t=new l.Views.Container({collection:e.Collections.CalendarEntry}),n.setViewAndRenderMaybe("#calendar",t)})},showAboutPage:function(){var t,n,r;return n=this.rejectAndHandle(),t=p.forRandomGroupImage(),r=p.forPersonsOverview(),$.when(t,r).done(function(e){return n.resolve(e)}),n.done(function(t){var n,r,i,s;return r=e.useLayout("main",{customClass:"about"}),n=e.Collections.Person,i={students:n.where({IsStudent:!0}),alumnis:n.where({IsAlumni:!0}),employees:n.where({IsEmployee:!0})},s=new c.Views.GravityContainer({groupImage:t,persons:i}),r.setViewAndRenderMaybe("",s)})},showPersonPage:function(t){var n,i=this;return n=this.rejectAndHandle(),p.forDetailedObject("Person",t).done(function(e){return n.resolve(e)}),n.done(function(t){var n,s,o;return t?(n=e.useLayout("main"),s="",t.get("Templates").each(function(e){if(!e.get("IsDetail"))return s=e.get("Url")}),o=s?new r.Views.Custom({model:t,template:s}):new r.Views.GravityContainer({model:t}),n.setViewAndRenderMaybe("",o)):i.fourOhFour()})},showPersonDetailed:function(e,t){return this.showPortfolioDetailed(t,e)},showPortfolio:function(t){var n,r,i=this;return r=this.rejectAndHandle(),p.forProjectsOverview(e.Config.Portfolio).done(function(){return r.resolve()}),t&&console.info("searching for: %s",t),n=e.currentLayoutName==="portfolio"?!0:!1,r.done(function(){var r,s;return n||(r=e.useLayout("portfolio")),e.Cache.WholePortfolio||(e.Cache.WholePortfolio=i.getProjectTypeModels({IsPortfolio:!0,IsPublished:!0})),s=e.Cache.WholePortfolio,t&&(s=p.filterProjectTypesBySearchTerm(t)),n?console.log("add or remove models"):i.showGravityViewForModels(s,"portfolio",r)})},showPortfolioDetailed:function(t,n){var i,s,o=this;return s=this.rejectAndHandle(),i=e.resolveClassTypeByHash(t),i?(p.forDetailedObject(i,t).done(function(e){return s.resolve(e)}),s.done(function(t){var i,s,u,a;return!t||!t.get("IsPublished")||!n&&!t.get("IsPortfolio")?o.fourOhFour():(s=e.useLayout("main",{customClass:"detail"}),a="",n&&(u=t.get("Persons").where({UrlSlug:n}),u.length&&u[0].get("Templates").each(function(e){if(e.get("IsDetail"))return a=e.get("Url")})),i=a?new r.Views.Custom({model:t,template:a}):new f.Views.Detail({model:t}),s.setViewAndRenderMaybe("",i))})):(s.done(this.fourOhFour),s.resolve())},showCalendar:function(){return console.info("show whole calendar")},showCalendarDetailed:function(t){var n,r=this;return n=this.rejectAndHandle(),p.forDetailedObject("CalendarEntry",t).done(function(e){return n.resolve(e)}),n.done(function(t){var n,i;return t?(i=e.useLayout("main",{customClass:"detail"}),n=new l.Views.Detail({model:t}),i.setViewAndRenderMaybe("",n)):r.fourOhFour()})},showLoginForm:function(){var n;return n=this.rejectAndHandle(),console.info("login form. if logged in, redirect to dashboard"),t.performLoginCheck().done(function(){return n.resolve()}),n.done(function(){var n;return n=e.useLayout("main"),n.setViewAndRenderMaybe("",new t.Views.Login)})},doLogout:function(){var n,r;return this.mainDfd&&(this.mainDfd.reject(),this.mainDfd=null),r=e.useLayout("main"),n=$.Deferred(),e.CurrentMember?(r.setViewAndRenderMaybe("",new t.Views.Logout),n=t.logout()):n.resolve()},showCreateProjectPage:function(){var n,r=this;return n=this.rejectAndHandle(),t.performLoginCheck().done(function(){return e.CurrentMember.Email?n.resolve():r.fourOhFour()}),n.done(function(){var t;return t=e.useLayout("main"),t.setViewAndRenderMaybe("",new d.Views.NewProject)})},showEditProjectPage:function(n){var r,i,s=this;return i=this.rejectAndHandle(),e.isEditor=!0,r=e.resolveClassTypeByHash(n),t.canEdit({className:r,UglyHash:n}).fail(function(){return Backbone.history.navigate("/login/",!0)}).done(function(){return p.forDetailedObject(r,n,!0).done(function(e){return i.resolve(e)})}),i.fail(function(){return Backbone.history.navigate("/login/",!0)}).done(function(t){var n;return n=e.useLayout("editor"),e.ProjectEditor=new v.Inst(t),e.ProjectEditor.kickOffRender()})},catchAllRoute:function(e){return console.log("catch all route")},fourOhFour:function(){return this.rejectAndHandle().resolve().done(function(){var t,n;return n=e.useLayout("main"),t=new a.Views.FourOhFour({attributes:{"data-url":window.location.href}}),n.setViewAndRenderMaybe("",t)})},showGravityViewForModels:function(e,t,n){var r;return r=new f.Views.GravityContainer({collection:e,linkTo:t}),n.setViewAndRenderMaybe("#gravity-container",r)},getProjectTypeModels:function(t){var n,r,i,s,o;r=[],o=e.Config.ProjectTypes;for(i=0,s=o.length;i<s;i++)n=o[i],r=r.concat(e.Collections[n].where(t));return r}}),m}),function(e){var t,n,r;return t={},e(window).on("resize",function(){var n,r,i;i=[];for(r in t)n=t[r],n&&e.isFunction(n)?i.push(n()):i.push(void 0);return i}),e.addOnWindowResize=function(n,r){if(e.isFunction(r))return t[n]=r},e.removeOnWindowResize=function(e){if(t[e])return delete t[e]},r=function(t){if(!t)return;return e.each(t,function(t,n){var r,i,s,o,u,a;i=e(n.parent),r=e(n.child,i);if(!r.length)return;a=i.width(),u=i.height(),o=r.outerWidth(!0),r.length>1?(s=0,r.each(function(){return s+=e(this).outerHeight(!0)})):s=r.height();if(n.resize==="child")return r.height(a/o*s);if(n.resize==="parent")return i.height(s)})},n=function(){var t;t=e("iframe","article.portfolio-detail");if(!t.length)return;return t.each(function(t,n){var r,i,s,o,u;r=e(n),s=r.attr("width"),i=r.attr("height");if(!s||!i)return;return u=r.width(),o=u/s,r.height(i*o)})},e(document).on("portfoliodetail:rendered",n),e.addOnWindowResize("iframe",n),e(document).on("about:rendered",function(){return r([{parent:".group-image",child:"img",resize:"child"},{parent:".statement",child:"p",resize:"parent"}])})}(jQuery),define("plugins/misc/misc",function(){}),require(["app","router","modules/Auth","modules/Project","modules/Person","modules/Excursion","modules/Workshop","modules/Exhibition","modules/CalendarEntry","modules/RecycleBin","plugins/misc/spin.min","plugins/misc/misc"],function(e,t,n,r,i,s,o,u,a,f,l,c){return Backbone.JJRelational.Config.work_with_store=!0,e.Router=new t,e.Layout,e.PageInfos={},e.Collections={},e.Cache={},e.Cache.UserGallery={fetched:{Projects:!1,Person:!1},images:{Person:[],Projects:[]}},e.CurrentMember={},e.CurrentMemberPerson=null,e.ProjectEditor=null,e.origin=window.location.origin?window.location.origin:window.location.protocol+"//"+window.location.host,console.log(e),e.Config={ProjectTypes:["Project","Excursion","Workshop","Exhibition"],StoreHooks:["Project","Excursion","Workshop","Exhibition","Person","CalendarEntry","DocImage"],ClassEnc:{0:"Project",1:"Excursion",2:"Exhibition",3:"Workshop"},GalleryUrl:"imagery/gallery/",DocImageUrl:"imagery/images/docimage/",PersonImageUrl:"imagery/images/personimage/",BasicListUrl:"lists/all/",ChangeCredentialsUrl:"api/v2/Auth/credentials/",UrlSuffixes:{about_persons:"?search=IsExternal:0"},Featured:{present:{flag:!1,types:[]},domName:function(e){return"featured-"+e.toLowerCase()},urlSuffix:"?"+JJRestApi.objToUrlString({search:{IsFeatured:1},context:"view.portfolio_init"})},Portfolio:{present:{flag:!1,types:[]},domName:function(e){return"portfolio-"+e.toLowerCase()},urlSuffix:"?"+JJRestApi.objToUrlString({search:{IsPortfolio:1},context:"view.portfolio_init"})},Calendar:{upcoming:{flag:!1,url:"api/v2/UpcomingEvents.json"},whole:{flag:!1}},Person:{about_present:!1,name:"about-persons",urlSuffix:"?"+JJRestApi.objToUrlString({search:{IsExternal:0},context:"view.about_init",sort:"Surname"})},Detail:{CalendarEntry:{where:function(e){return{UrlHash:e}},domName:"detailed-calendar-item",urlSuffix:function(e){return"?"+JJRestApi.objToUrlString({search:{UrlHash:e},limit:1})}},Person:{where:function(e){return{UrlSlug:e}},domName:"detailed-person-item",urlSuffix:function(e){return"?"+JJRestApi.objToUrlString({search:{UrlSlug:e},limit:1})}},Project:{where:function(e){return{UglyHash:e}},domName:"detailed-project-item",urlSuffix:function(e){return"?"+JJRestApi.objToUrlString({search:{UglyHash:e},limit:1})}},Excursion:{where:function(e){return{UglyHash:e}},domName:"detailed-excursion-item",urlSuffix:function(e){return"?"+JJRestApi.objToUrlString({search:{UglyHash:e},limit:1})}},Workshop:{where:function(e){return{UglyHash:e}},domName:"detailed-workshop-item",urlSuffix:function(e){return"?"+JJRestApi.objToUrlString({search:{UglyHash:e},limit:1})}},Exhibition:{where:function(e){return{UglyHash:e}},domName:"detailed-exhibition-item",urlSuffix:function(e){return"?"+JJRestApi.objToUrlString({search:{UglyHash:e},limit:1})}}},Spinner:{lines:13,length:6,width:2,radius:7,corners:1,rotate:0,direction:1,color:"#262626",speed:1,trail:70,shadow:!1,hwaccel:!1,className:"spinner",zIndex:2e9,top:"auto",left:"auto"}},e.bindListeners=function(){var t,n,r,i,s;s=e.Config.StoreHooks,n=function(t){return Backbone.JJStore.Events.bind("added:"+t,function(n){var r;r=e.Collections[t];if(r)return r.add(n)})};for(r=0,i=s.length;r<i;r++)t=s[r],n(t);return!0},e.handleFetchedModels=function(e,t,n){var r,i,s,o,u;n=n||{},r=JJRestApi.Model(e),t=_.isArray(t)?t:[t],u=[];for(s=0,o=t.length;s<o;s++)i=t[s],u.push(new r(i));return u},e.handleFetchedModel=function(e,t,n){var r;return n=n||{},r=JJRestApi.Model(e),new r(t)},e.handleLinks=function(){var e;return e=Backbone.history.fragment,e="/"+e.substring(0,e.indexOf("/")+1),$("#wrapper .badge").find("a").each(function(t,n){var r;r=$(n),r.removeClass("active");if(r.attr("href")===e)return r.addClass("active")})},e.updateGalleryCache=function(e){var t,n=this;return t=function(e,t){return e.push({id:t.id,tag:t.tag,url:t.url})},_.each(e,function(e){var r;if(r=e.UploadedToClass){r==="DocImage"&&_.each(n.Cache.UserGallery.images.Projects,function(n){if(n.FilterID===e.FilterID)return t(n.Images,e)});if(r==="PersonImage")return t(n.Cache.UserGallery.images.Person,e)}})},e.removeFromGalleryCache=function(e,t){var n=this;return e==="PersonImage"&&_.each(this.Cache.UserGallery.images.Person,function(e,r){if(e.id===t)return delete n.Cache.UserGallery.images.Person[r]}),e==="DocImage"&&_.each(this.Cache.UserGallery.images.Projects,function(e,r){return _.each(e.Images,function(e,i){if(e.id===t)return delete n.Cache.UserGallery.images.Projects[r].Images[i]})}),!0},e.getFromGalleryCache=function(e,t){var n,r=this;return n=null,e==="PersonImage"&&_.each(this.Cache.UserGallery.images.Person,function(e,i){if(e.id===t)return n=r.Cache.UserGallery.images.Person[i]}),e==="DocImage"&&_.each(this.Cache.UserGallery.images.Projects,function(e,i){return _.each(e.Images,function(e,s){if(e.id===t)return n=r.Cache.UserGallery.images.Projects[i].Images[s]})}),n},e.initialLoggedInCheck=function(){return JJRestApi.getFromDomOrApi("current-member",{noAjax:!0}).done(function(e){return n.handleUserServerResponse(e)})},e.setupSpinner=function(){return this.$body=$("body"),this.$main=$("#main"),this.spinner={inst:new l(e.Config.Spinner),target:document.getElementById("spinner-target")}},e.startSpinner=function(){var e;return e=this.spinner,$(e.target).addClass("active"),e.inst.spin(e.target)},e.stopSpinner=function(){var e;return e=this.spinner,$(e.target).removeClass("active"),e.inst.stop()},e.addLoadingClasses=function(){return this.$body.addClass("isLoading"),this.$main.addClass("loading")},e.removeLoadingClasses=function(){return this.$body.removeClass("isLoading"),this.$main.removeClass("loading")},e.resolveClassTypeByHash=function(e){return this.Config.ClassEnc[e.substr(0,1)]},e.bindListeners(),Backbone.View.prototype.showMessageAt=function(e,t,n){var r;return r=$('<p class="'+n+'">'+e+"</p>"),r.appendTo(t),setTimeout(function(){return r.fadeOut().remove()},2e3)},Backbone.__pendingSaveReqs=[],Backbone.JJRelationalModel.prototype.rejectAndSave=function(){var e,t,n=this;return Array.prototype.push.call(arguments,null,{success:function(e){return e.trigger("saved")}}),t=this.save.apply(this,arguments),e=!1,_.each(Backbone.__pendingSaveReqs,function(r){if(r.cid===n.cid)return e=!0,r.xhr.readyState!==4&&r.xhr.abort(),r.xhr=t}),e||Backbone.__pendingSaveReqs.push({cid:this.cid,xhr:t}),t},Handlebars.registerHelper("stringCompare",function(e,t,n){return e===t?n(this):n.inverse(this)}),Handlebars.registerHelper("stringDiff",function(e,t,n){return e!==t?n(this):n.inverse(this)}),$(function(){return jQuery.event.props.push("dataTransfer"),$(document).on("dragenter dragover dragleave drop",function(e){return e.type==="dragenter"||e.type==="dragover"?$.fireGlobalDragEvent("dragstart",e.target,"file"):$.fireGlobalDragEvent(e.type,e.target,"file"),e.preventDefault()}),f.setup(),e.setupSpinner(),JJRestApi.hookSecurityToken(),JJRestApi.bootstrapWithStructure().done(function(){var t;return t=function(t){var n,r,i,s,o;o=[];for(i=0,s=t.length;i<s;i++)r=t[i],n=JJRestApi.Collection(r),o.push(e.Collections[r]=new n);return o},t(e.Config.StoreHooks),e.initialLoggedInCheck(),Backbone.history.start({pushState:!0})})}),$(document).on("click","a:not([data-bypass])",function(e){var t,n;t=$(this).attr("href"),n=this.protocol+"//";if(t&&t.slice(0,n.length)!==n&&t.indexOf("javascript:")!==0)return e.preventDefault(),Backbone.history.navigate(t,!0)})}),define("main",function(){}),require.config({deps:["main"],paths:{libs:"../assets/js/libs",plugins:"../assets/js/plugins",responsiveimage:"../../responsive-image/thirdparty/picturefill",jquery:"../assets/js/libs/jquery.min",underscore:"../assets/js/libs/underscore",backbone:"../assets/js/libs/backbone",handlebars:"../assets/js/libs/handlebars"},shim:{jquery:{exports:"$"},backbone:{deps:["underscore","jquery"],exports:"Backbone"},underscore:{exports:"_"},handlebars:{exports:"Handlebars"},"plugins/tooltip/jquery.qtip":["jquery"],"plugins/gravity/jquery.gravity":["plugins/tooltip/jquery.qtip"],"responsiveimage/picturefill":["responsiveimage/external/matchmedia"],"plugins/misc/spin.min":["jquery"],"plugins/misc/misc":["jquery"],"plugins/misc/jquery.list":["jquery"],"plugins/editor/jquery.jjfileupload":["jquery"],"plugins/editor/jquery.tabby":["jquery"],"plugins/misc/zebra_datepicker.src":["jquery"],"plugins/editor/jquery.editor-sidebar":["plugins/misc/misc"],"plugins/editor/jquery.jjdropzone":["plugins/editor/jquery.jjfileupload"],"plugins/editor/jquery.jjmarkdown":["plugins/editor/jquery.jjdropzone","plugins/editor/jquery.tabby","plugins/editor/jquery.jjfileupload","plugins/editor/marked_jjedit"],"plugins/editor/jquery.editor-popover":["plugins/tooltip/jquery.qtip","plugins/editor/jquery.jjmarkdown","plugins/misc/zebra_datepicker.src"],"plugins/backbone.layoutmanager":["backbone"],"plugins/backbone.JJRelational":["backbone"],"plugins/backbone.JJRestApi":["backbone"],"modules/NMMarkdownParser":["plugins/editor/jquery.jjmarkdown"]}}),define("config",function(){});