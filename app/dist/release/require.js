var requirejs,require,define;!function(a){function b(a,b){if(a&&"."===a.charAt(0)&&b){b=b.split("/"),b=b.slice(0,b.length-1),a=b.concat(a.split("/"));var c,d;for(c=0;d=a[c];c++)if("."===d)a.splice(c,1),c-=1;else if(".."===d){if(1===c&&(".."===a[2]||".."===a[0]))break;c>0&&(a.splice(c-1,2),c-=2)}a=a.join("/")}return a}function c(b,c){return function(){return i.apply(a,l.call(arguments,0).concat([b,c]))}}function d(a){return function(c){return b(c,a)}}function e(a){return function(b){j[a]=b}}function f(b){if(k.hasOwnProperty(b)){var c=k[b];delete k[b],h.apply(a,c)}return j[b]}function g(a,c){var e,g,h=a.indexOf("!");return-1!==h?(e=b(a.slice(0,h),c),a=a.slice(h+1),g=f(e),a=g&&g.normalize?g.normalize(a,d(c)):b(a,c)):a=b(a,c),{f:e?e+"!"+a:a,n:a,p:g}}var h,i,j={},k={},l=[].slice;"function"!=typeof define&&(h=function(b,d,h,i){var l,m,n,o,p,q,r=[];if(i||(i=b),"function"==typeof h){for(!d.length&&h.length&&(d=["require","exports","module"]),o=0;o<d.length;o++)if(q=g(d[o],i),n=q.f,"require"===n)r[o]=c(b);else if("exports"===n)r[o]=j[b]={},l=!0;else if("module"===n)m=r[o]={id:b,uri:"",exports:j[b]};else if(j.hasOwnProperty(n)||k.hasOwnProperty(n))r[o]=f(n);else{if(!q.p)throw b+" missing "+n;q.p.load(q.n,c(i,!0),e(n),{}),r[o]=j[n]}p=h.apply(j[b],r),b&&(m&&m.exports!==a?j[b]=m.exports:l||(j[b]=p))}else b&&(j[b]=h)},requirejs=i=function(b,c,d,e){return"string"==typeof b?f(g(b,c).f):(b.splice||(c.splice?(b=c,c=arguments[2]):b=[]),e?h(a,b,c,d):setTimeout(function(){h(a,b,c,d)},15),i)},i.config=function(){return i},require||(require=i),define=function(a,b,c){b.splice||(c=b,b=[]),define.unordered?k[a]=[a,b,c]:h(a,b,c)},define.amd={jQuery:!0})}(),function(a,b){function c(a){var b=a.length,c=ib.type(a);return ib.isWindow(a)?!1:1===a.nodeType&&b?!0:"array"===c||"function"!==c&&(0===b||"number"==typeof b&&b>0&&b-1 in a)}function d(a){var b=xb[a]={};return ib.each(a.match(kb)||[],function(a,c){b[c]=!0}),b}function e(a,c,d,e){if(ib.acceptData(a)){var f,g,h=ib.expando,i="string"==typeof c,j=a.nodeType,k=j?ib.cache:a,l=j?a[h]:a[h]&&h;if(l&&k[l]&&(e||k[l].data)||!i||d!==b)return l||(j?a[h]=l=_.pop()||ib.guid++:l=h),k[l]||(k[l]={},j||(k[l].toJSON=ib.noop)),("object"==typeof c||"function"==typeof c)&&(e?k[l]=ib.extend(k[l],c):k[l].data=ib.extend(k[l].data,c)),f=k[l],e||(f.data||(f.data={}),f=f.data),d!==b&&(f[ib.camelCase(c)]=d),i?(g=f[c],null==g&&(g=f[ib.camelCase(c)])):g=f,g}}function f(a,b,c){if(ib.acceptData(a)){var d,e,f,g=a.nodeType,i=g?ib.cache:a,j=g?a[ib.expando]:ib.expando;if(i[j]){if(b&&(f=c?i[j]:i[j].data)){ib.isArray(b)?b=b.concat(ib.map(b,ib.camelCase)):b in f?b=[b]:(b=ib.camelCase(b),b=b in f?[b]:b.split(" "));for(d=0,e=b.length;e>d;d++)delete f[b[d]];if(!(c?h:ib.isEmptyObject)(f))return}(c||(delete i[j].data,h(i[j])))&&(g?ib.cleanData([a],!0):ib.support.deleteExpando||i!=i.window?delete i[j]:i[j]=null)}}}function g(a,c,d){if(d===b&&1===a.nodeType){var e="data-"+c.replace(zb,"-$1").toLowerCase();if(d=a.getAttribute(e),"string"==typeof d){try{d="true"===d?!0:"false"===d?!1:"null"===d?null:+d+""===d?+d:yb.test(d)?ib.parseJSON(d):d}catch(f){}ib.data(a,c,d)}else d=b}return d}function h(a){var b;for(b in a)if(("data"!==b||!ib.isEmptyObject(a[b]))&&"toJSON"!==b)return!1;return!0}function i(){return!0}function j(){return!1}function k(a,b){do a=a[b];while(a&&1!==a.nodeType);return a}function l(a,b,c){if(b=b||0,ib.isFunction(b))return ib.grep(a,function(a,d){var e=!!b.call(a,d,a);return e===c});if(b.nodeType)return ib.grep(a,function(a){return a===b===c});if("string"==typeof b){var d=ib.grep(a,function(a){return 1===a.nodeType});if(Rb.test(b))return ib.filter(b,d,!c);b=ib.filter(b,d)}return ib.grep(a,function(a){return ib.inArray(a,b)>=0===c})}function m(a){var b=Ub.split("|"),c=a.createDocumentFragment();if(c.createElement)for(;b.length;)c.createElement(b.pop());return c}function n(a,b){return a.getElementsByTagName(b)[0]||a.appendChild(a.ownerDocument.createElement(b))}function o(a){var b=a.getAttributeNode("type");return a.type=(b&&b.specified)+"/"+a.type,a}function p(a){var b=ec.exec(a.type);return b?a.type=b[1]:a.removeAttribute("type"),a}function q(a,b){for(var c,d=0;null!=(c=a[d]);d++)ib._data(c,"globalEval",!b||ib._data(b[d],"globalEval"))}function r(a,b){if(1===b.nodeType&&ib.hasData(a)){var c,d,e,f=ib._data(a),g=ib._data(b,f),h=f.events;if(h){delete g.handle,g.events={};for(c in h)for(d=0,e=h[c].length;e>d;d++)ib.event.add(b,c,h[c][d])}g.data&&(g.data=ib.extend({},g.data))}}function s(a,b){var c,d,e;if(1===b.nodeType){if(c=b.nodeName.toLowerCase(),!ib.support.noCloneEvent&&b[ib.expando]){e=ib._data(b);for(d in e.events)ib.removeEvent(b,d,e.handle);b.removeAttribute(ib.expando)}"script"===c&&b.text!==a.text?(o(b).text=a.text,p(b)):"object"===c?(b.parentNode&&(b.outerHTML=a.outerHTML),ib.support.html5Clone&&a.innerHTML&&!ib.trim(b.innerHTML)&&(b.innerHTML=a.innerHTML)):"input"===c&&bc.test(a.type)?(b.defaultChecked=b.checked=a.checked,b.value!==a.value&&(b.value=a.value)):"option"===c?b.defaultSelected=b.selected=a.defaultSelected:("input"===c||"textarea"===c)&&(b.defaultValue=a.defaultValue)}}function t(a,c){var d,e,f=0,g=typeof a.getElementsByTagName!==V?a.getElementsByTagName(c||"*"):typeof a.querySelectorAll!==V?a.querySelectorAll(c||"*"):b;if(!g)for(g=[],d=a.childNodes||a;null!=(e=d[f]);f++)!c||ib.nodeName(e,c)?g.push(e):ib.merge(g,t(e,c));return c===b||c&&ib.nodeName(a,c)?ib.merge([a],g):g}function u(a){bc.test(a.type)&&(a.defaultChecked=a.checked)}function v(a,b){if(b in a)return b;for(var c=b.charAt(0).toUpperCase()+b.slice(1),d=b,e=yc.length;e--;)if(b=yc[e]+c,b in a)return b;return d}function w(a,b){return a=b||a,"none"===ib.css(a,"display")||!ib.contains(a.ownerDocument,a)}function x(a,b){for(var c,d,e,f=[],g=0,h=a.length;h>g;g++)d=a[g],d.style&&(f[g]=ib._data(d,"olddisplay"),c=d.style.display,b?(f[g]||"none"!==c||(d.style.display=""),""===d.style.display&&w(d)&&(f[g]=ib._data(d,"olddisplay",B(d.nodeName)))):f[g]||(e=w(d),(c&&"none"!==c||!e)&&ib._data(d,"olddisplay",e?c:ib.css(d,"display"))));for(g=0;h>g;g++)d=a[g],d.style&&(b&&"none"!==d.style.display&&""!==d.style.display||(d.style.display=b?f[g]||"":"none"));return a}function y(a,b,c){var d=rc.exec(b);return d?Math.max(0,d[1]-(c||0))+(d[2]||"px"):b}function z(a,b,c,d,e){for(var f=c===(d?"border":"content")?4:"width"===b?1:0,g=0;4>f;f+=2)"margin"===c&&(g+=ib.css(a,c+xc[f],!0,e)),d?("content"===c&&(g-=ib.css(a,"padding"+xc[f],!0,e)),"margin"!==c&&(g-=ib.css(a,"border"+xc[f]+"Width",!0,e))):(g+=ib.css(a,"padding"+xc[f],!0,e),"padding"!==c&&(g+=ib.css(a,"border"+xc[f]+"Width",!0,e)));return g}function A(a,b,c){var d=!0,e="width"===b?a.offsetWidth:a.offsetHeight,f=kc(a),g=ib.support.boxSizing&&"border-box"===ib.css(a,"boxSizing",!1,f);if(0>=e||null==e){if(e=lc(a,b,f),(0>e||null==e)&&(e=a.style[b]),sc.test(e))return e;d=g&&(ib.support.boxSizingReliable||e===a.style[b]),e=parseFloat(e)||0}return e+z(a,b,c||(g?"border":"content"),d,f)+"px"}function B(a){var b=W,c=uc[a];return c||(c=C(a,b),"none"!==c&&c||(jc=(jc||ib("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(b.documentElement),b=(jc[0].contentWindow||jc[0].contentDocument).document,b.write("<!doctype html><html><body>"),b.close(),c=C(a,b),jc.detach()),uc[a]=c),c}function C(a,b){var c=ib(b.createElement(a)).appendTo(b.body),d=ib.css(c[0],"display");return c.remove(),d}function D(a,b,c,d){var e;if(ib.isArray(b))ib.each(b,function(b,e){c||Ac.test(a)?d(a,e):D(a+"["+("object"==typeof e?b:"")+"]",e,c,d)});else if(c||"object"!==ib.type(b))d(a,b);else for(e in b)D(a+"["+e+"]",b[e],c,d)}function E(a){return function(b,c){"string"!=typeof b&&(c=b,b="*");var d,e=0,f=b.toLowerCase().match(kb)||[];if(ib.isFunction(c))for(;d=f[e++];)"+"===d[0]?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}function F(a,c,d,e){function f(i){var j;return g[i]=!0,ib.each(a[i]||[],function(a,i){var k=i(c,d,e);return"string"!=typeof k||h||g[k]?h?!(j=k):b:(c.dataTypes.unshift(k),f(k),!1)}),j}var g={},h=a===Rc;return f(c.dataTypes[0])||!g["*"]&&f("*")}function G(a,c){var d,e,f=ib.ajaxSettings.flatOptions||{};for(e in c)c[e]!==b&&((f[e]?a:d||(d={}))[e]=c[e]);return d&&ib.extend(!0,a,d),a}function H(a,c,d){var e,f,g,h,i=a.contents,j=a.dataTypes,k=a.responseFields;for(h in k)h in d&&(c[k[h]]=d[h]);for(;"*"===j[0];)j.shift(),f===b&&(f=a.mimeType||c.getResponseHeader("Content-Type"));if(f)for(h in i)if(i[h]&&i[h].test(f)){j.unshift(h);break}if(j[0]in d)g=j[0];else{for(h in d){if(!j[0]||a.converters[h+" "+j[0]]){g=h;break}e||(e=h)}g=g||e}return g?(g!==j[0]&&j.unshift(g),d[g]):b}function I(a,b){var c,d,e,f,g={},h=0,i=a.dataTypes.slice(),j=i[0];if(a.dataFilter&&(b=a.dataFilter(b,a.dataType)),i[1])for(e in a.converters)g[e.toLowerCase()]=a.converters[e];for(;d=i[++h];)if("*"!==d){if("*"!==j&&j!==d){if(e=g[j+" "+d]||g["* "+d],!e)for(c in g)if(f=c.split(" "),f[1]===d&&(e=g[j+" "+f[0]]||g["* "+f[0]])){e===!0?e=g[c]:g[c]!==!0&&(d=f[0],i.splice(h--,0,d));break}if(e!==!0)if(e&&a["throws"])b=e(b);else try{b=e(b)}catch(k){return{state:"parsererror",error:e?k:"No conversion from "+j+" to "+d}}}j=d}return{state:"success",data:b}}function J(){try{return new a.XMLHttpRequest}catch(b){}}function K(){try{return new a.ActiveXObject("Microsoft.XMLHTTP")}catch(b){}}function L(){return setTimeout(function(){$c=b}),$c=ib.now()}function M(a,b){ib.each(b,function(b,c){for(var d=(ed[b]||[]).concat(ed["*"]),e=0,f=d.length;f>e;e++)if(d[e].call(a,b,c))return})}function N(a,b,c){var d,e,f=0,g=dd.length,h=ib.Deferred().always(function(){delete i.elem}),i=function(){if(e)return!1;for(var b=$c||L(),c=Math.max(0,j.startTime+j.duration-b),d=c/j.duration||0,f=1-d,g=0,i=j.tweens.length;i>g;g++)j.tweens[g].run(f);return h.notifyWith(a,[j,f,c]),1>f&&i?c:(h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:ib.extend({},b),opts:ib.extend(!0,{specialEasing:{}},c),originalProperties:b,originalOptions:c,startTime:$c||L(),duration:c.duration,tweens:[],createTween:function(b,c){var d=ib.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(d),d},stop:function(b){var c=0,d=b?j.tweens.length:0;if(e)return this;for(e=!0;d>c;c++)j.tweens[c].run(1);return b?h.resolveWith(a,[j,b]):h.rejectWith(a,[j,b]),this}}),k=j.props;for(O(k,j.opts.specialEasing);g>f;f++)if(d=dd[f].call(j,a,k,j.opts))return d;return M(j,k),ib.isFunction(j.opts.start)&&j.opts.start.call(a,j),ib.fx.timer(ib.extend(i,{elem:a,anim:j,queue:j.opts.queue})),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}function O(a,b){var c,d,e,f,g;for(e in a)if(d=ib.camelCase(e),f=b[d],c=a[e],ib.isArray(c)&&(f=c[1],c=a[e]=c[0]),e!==d&&(a[d]=c,delete a[e]),g=ib.cssHooks[d],g&&"expand"in g){c=g.expand(c),delete a[d];for(e in c)e in a||(a[e]=c[e],b[e]=f)}else b[d]=f}function P(a,b,c){var d,e,f,g,h,i,j,k,l,m=this,n=a.style,o={},p=[],q=a.nodeType&&w(a);c.queue||(k=ib._queueHooks(a,"fx"),null==k.unqueued&&(k.unqueued=0,l=k.empty.fire,k.empty.fire=function(){k.unqueued||l()}),k.unqueued++,m.always(function(){m.always(function(){k.unqueued--,ib.queue(a,"fx").length||k.empty.fire()})})),1===a.nodeType&&("height"in b||"width"in b)&&(c.overflow=[n.overflow,n.overflowX,n.overflowY],"inline"===ib.css(a,"display")&&"none"===ib.css(a,"float")&&(ib.support.inlineBlockNeedsLayout&&"inline"!==B(a.nodeName)?n.zoom=1:n.display="inline-block")),c.overflow&&(n.overflow="hidden",ib.support.shrinkWrapBlocks||m.always(function(){n.overflow=c.overflow[0],n.overflowX=c.overflow[1],n.overflowY=c.overflow[2]}));for(e in b)if(g=b[e],ad.exec(g)){if(delete b[e],i=i||"toggle"===g,g===(q?"hide":"show"))continue;p.push(e)}if(f=p.length){h=ib._data(a,"fxshow")||ib._data(a,"fxshow",{}),"hidden"in h&&(q=h.hidden),i&&(h.hidden=!q),q?ib(a).show():m.done(function(){ib(a).hide()}),m.done(function(){var b;ib._removeData(a,"fxshow");for(b in o)ib.style(a,b,o[b])});for(e=0;f>e;e++)d=p[e],j=m.createTween(d,q?h[d]:0),o[d]=h[d]||ib.style(a,d),d in h||(h[d]=j.start,q&&(j.end=j.start,j.start="width"===d||"height"===d?1:0))}}function Q(a,b,c,d,e){return new Q.prototype.init(a,b,c,d,e)}function R(a,b){var c,d={height:a},e=0;for(b=b?1:0;4>e;e+=2-b)c=xc[e],d["margin"+c]=d["padding"+c]=a;return b&&(d.opacity=d.width=a),d}function S(a){return ib.isWindow(a)?a:9===a.nodeType?a.defaultView||a.parentWindow:!1}var T,U,V=typeof b,W=a.document,X=a.location,Y=a.jQuery,Z=a.$,$={},_=[],ab="1.9.1",bb=_.concat,cb=_.push,db=_.slice,eb=_.indexOf,fb=$.toString,gb=$.hasOwnProperty,hb=ab.trim,ib=function(a,b){return new ib.fn.init(a,b,U)},jb=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,kb=/\S+/g,lb=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,mb=/^(?:(<[\w\W]+>)[^>]*|#([\w-]*))$/,nb=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,ob=/^[\],:{}\s]*$/,pb=/(?:^|:|,)(?:\s*\[)+/g,qb=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,rb=/"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g,sb=/^-ms-/,tb=/-([\da-z])/gi,ub=function(a,b){return b.toUpperCase()},vb=function(a){(W.addEventListener||"load"===a.type||"complete"===W.readyState)&&(wb(),ib.ready())},wb=function(){W.addEventListener?(W.removeEventListener("DOMContentLoaded",vb,!1),a.removeEventListener("load",vb,!1)):(W.detachEvent("onreadystatechange",vb),a.detachEvent("onload",vb))};ib.fn=ib.prototype={jquery:ab,constructor:ib,init:function(a,c,d){var e,f;if(!a)return this;if("string"==typeof a){if(e="<"===a.charAt(0)&&">"===a.charAt(a.length-1)&&a.length>=3?[null,a,null]:mb.exec(a),!e||!e[1]&&c)return!c||c.jquery?(c||d).find(a):this.constructor(c).find(a);if(e[1]){if(c=c instanceof ib?c[0]:c,ib.merge(this,ib.parseHTML(e[1],c&&c.nodeType?c.ownerDocument||c:W,!0)),nb.test(e[1])&&ib.isPlainObject(c))for(e in c)ib.isFunction(this[e])?this[e](c[e]):this.attr(e,c[e]);return this}if(f=W.getElementById(e[2]),f&&f.parentNode){if(f.id!==e[2])return d.find(a);this.length=1,this[0]=f}return this.context=W,this.selector=a,this}return a.nodeType?(this.context=this[0]=a,this.length=1,this):ib.isFunction(a)?d.ready(a):(a.selector!==b&&(this.selector=a.selector,this.context=a.context),ib.makeArray(a,this))},selector:"",length:0,size:function(){return this.length},toArray:function(){return db.call(this)},get:function(a){return null==a?this.toArray():0>a?this[this.length+a]:this[a]},pushStack:function(a){var b=ib.merge(this.constructor(),a);return b.prevObject=this,b.context=this.context,b},each:function(a,b){return ib.each(this,a,b)},ready:function(a){return ib.ready.promise().done(a),this},slice:function(){return this.pushStack(db.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length,c=+a+(0>a?b:0);return this.pushStack(c>=0&&b>c?[this[c]]:[])},map:function(a){return this.pushStack(ib.map(this,function(b,c){return a.call(b,c,b)}))},end:function(){return this.prevObject||this.constructor(null)},push:cb,sort:[].sort,splice:[].splice},ib.fn.init.prototype=ib.fn,ib.extend=ib.fn.extend=function(){var a,c,d,e,f,g,h=arguments[0]||{},i=1,j=arguments.length,k=!1;for("boolean"==typeof h&&(k=h,h=arguments[1]||{},i=2),"object"==typeof h||ib.isFunction(h)||(h={}),j===i&&(h=this,--i);j>i;i++)if(null!=(f=arguments[i]))for(e in f)a=h[e],d=f[e],h!==d&&(k&&d&&(ib.isPlainObject(d)||(c=ib.isArray(d)))?(c?(c=!1,g=a&&ib.isArray(a)?a:[]):g=a&&ib.isPlainObject(a)?a:{},h[e]=ib.extend(k,g,d)):d!==b&&(h[e]=d));return h},ib.extend({noConflict:function(b){return a.$===ib&&(a.$=Z),b&&a.jQuery===ib&&(a.jQuery=Y),ib},isReady:!1,readyWait:1,holdReady:function(a){a?ib.readyWait++:ib.ready(!0)},ready:function(a){if(a===!0?!--ib.readyWait:!ib.isReady){if(!W.body)return setTimeout(ib.ready);ib.isReady=!0,a!==!0&&--ib.readyWait>0||(T.resolveWith(W,[ib]),ib.fn.trigger&&ib(W).trigger("ready").off("ready"))}},isFunction:function(a){return"function"===ib.type(a)},isArray:Array.isArray||function(a){return"array"===ib.type(a)},isWindow:function(a){return null!=a&&a==a.window},isNumeric:function(a){return!isNaN(parseFloat(a))&&isFinite(a)},type:function(a){return null==a?a+"":"object"==typeof a||"function"==typeof a?$[fb.call(a)]||"object":typeof a},isPlainObject:function(a){if(!a||"object"!==ib.type(a)||a.nodeType||ib.isWindow(a))return!1;try{if(a.constructor&&!gb.call(a,"constructor")&&!gb.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(c){return!1}var d;for(d in a);return d===b||gb.call(a,d)},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},error:function(a){throw Error(a)},parseHTML:function(a,b,c){if(!a||"string"!=typeof a)return null;"boolean"==typeof b&&(c=b,b=!1),b=b||W;var d=nb.exec(a),e=!c&&[];return d?[b.createElement(d[1])]:(d=ib.buildFragment([a],b,e),e&&ib(e).remove(),ib.merge([],d.childNodes))},parseJSON:function(c){return a.JSON&&a.JSON.parse?a.JSON.parse(c):null===c?c:"string"==typeof c&&(c=ib.trim(c),c&&ob.test(c.replace(qb,"@").replace(rb,"]").replace(pb,"")))?Function("return "+c)():(ib.error("Invalid JSON: "+c),b)},parseXML:function(c){var d,e;if(!c||"string"!=typeof c)return null;try{a.DOMParser?(e=new DOMParser,d=e.parseFromString(c,"text/xml")):(d=new ActiveXObject("Microsoft.XMLDOM"),d.async="false",d.loadXML(c))}catch(f){d=b}return d&&d.documentElement&&!d.getElementsByTagName("parsererror").length||ib.error("Invalid XML: "+c),d},noop:function(){},globalEval:function(b){b&&ib.trim(b)&&(a.execScript||function(b){a.eval.call(a,b)})(b)},camelCase:function(a){return a.replace(sb,"ms-").replace(tb,ub)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b,d){var e,f=0,g=a.length,h=c(a);if(d){if(h)for(;g>f&&(e=b.apply(a[f],d),e!==!1);f++);else for(f in a)if(e=b.apply(a[f],d),e===!1)break}else if(h)for(;g>f&&(e=b.call(a[f],f,a[f]),e!==!1);f++);else for(f in a)if(e=b.call(a[f],f,a[f]),e===!1)break;return a},trim:hb&&!hb.call(" ")?function(a){return null==a?"":hb.call(a)}:function(a){return null==a?"":(a+"").replace(lb,"")},makeArray:function(a,b){var d=b||[];return null!=a&&(c(Object(a))?ib.merge(d,"string"==typeof a?[a]:a):cb.call(d,a)),d},inArray:function(a,b,c){var d;if(b){if(eb)return eb.call(b,a,c);for(d=b.length,c=c?0>c?Math.max(0,d+c):c:0;d>c;c++)if(c in b&&b[c]===a)return c}return-1},merge:function(a,c){var d=c.length,e=a.length,f=0;if("number"==typeof d)for(;d>f;f++)a[e++]=c[f];else for(;c[f]!==b;)a[e++]=c[f++];return a.length=e,a},grep:function(a,b,c){var d,e=[],f=0,g=a.length;for(c=!!c;g>f;f++)d=!!b(a[f],f),c!==d&&e.push(a[f]);return e},map:function(a,b,d){var e,f=0,g=a.length,h=c(a),i=[];if(h)for(;g>f;f++)e=b(a[f],f,d),null!=e&&(i[i.length]=e);else for(f in a)e=b(a[f],f,d),null!=e&&(i[i.length]=e);return bb.apply([],i)},guid:1,proxy:function(a,c){var d,e,f;return"string"==typeof c&&(f=a[c],c=a,a=f),ib.isFunction(a)?(d=db.call(arguments,2),e=function(){return a.apply(c||this,d.concat(db.call(arguments)))},e.guid=a.guid=a.guid||ib.guid++,e):b},access:function(a,c,d,e,f,g,h){var i=0,j=a.length,k=null==d;if("object"===ib.type(d)){f=!0;for(i in d)ib.access(a,c,i,d[i],!0,g,h)}else if(e!==b&&(f=!0,ib.isFunction(e)||(h=!0),k&&(h?(c.call(a,e),c=null):(k=c,c=function(a,b,c){return k.call(ib(a),c)})),c))for(;j>i;i++)c(a[i],d,h?e:e.call(a[i],i,c(a[i],d)));return f?a:k?c.call(a):j?c(a[0],d):g},now:function(){return(new Date).getTime()}}),ib.ready.promise=function(b){if(!T)if(T=ib.Deferred(),"complete"===W.readyState)setTimeout(ib.ready);else if(W.addEventListener)W.addEventListener("DOMContentLoaded",vb,!1),a.addEventListener("load",vb,!1);else{W.attachEvent("onreadystatechange",vb),a.attachEvent("onload",vb);var c=!1;try{c=null==a.frameElement&&W.documentElement}catch(d){}c&&c.doScroll&&function e(){if(!ib.isReady){try{c.doScroll("left")}catch(a){return setTimeout(e,50)}wb(),ib.ready()}}()}return T.promise(b)},ib.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(a,b){$["[object "+b+"]"]=b.toLowerCase()}),U=ib(W);var xb={};ib.Callbacks=function(a){a="string"==typeof a?xb[a]||d(a):ib.extend({},a);var c,e,f,g,h,i,j=[],k=!a.once&&[],l=function(b){for(e=a.memory&&b,f=!0,h=i||0,i=0,g=j.length,c=!0;j&&g>h;h++)if(j[h].apply(b[0],b[1])===!1&&a.stopOnFalse){e=!1;break}c=!1,j&&(k?k.length&&l(k.shift()):e?j=[]:m.disable())},m={add:function(){if(j){var b=j.length;!function d(b){ib.each(b,function(b,c){var e=ib.type(c);"function"===e?a.unique&&m.has(c)||j.push(c):c&&c.length&&"string"!==e&&d(c)})}(arguments),c?g=j.length:e&&(i=b,l(e))}return this},remove:function(){return j&&ib.each(arguments,function(a,b){for(var d;(d=ib.inArray(b,j,d))>-1;)j.splice(d,1),c&&(g>=d&&g--,h>=d&&h--)}),this},has:function(a){return a?ib.inArray(a,j)>-1:!!j&&!!j.length},empty:function(){return j=[],this},disable:function(){return j=k=e=b,this},disabled:function(){return!j},lock:function(){return k=b,e||m.disable(),this},locked:function(){return!k},fireWith:function(a,b){return b=b||[],b=[a,b.slice?b.slice():b],!j||f&&!k||(c?k.push(b):l(b)),this},fire:function(){return m.fireWith(this,arguments),this},fired:function(){return!!f}};return m},ib.extend({Deferred:function(a){var b=[["resolve","done",ib.Callbacks("once memory"),"resolved"],["reject","fail",ib.Callbacks("once memory"),"rejected"],["notify","progress",ib.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){return e.done(arguments).fail(arguments),this},then:function(){var a=arguments;return ib.Deferred(function(c){ib.each(b,function(b,f){var g=f[0],h=ib.isFunction(a[b])&&a[b];e[f[1]](function(){var a=h&&h.apply(this,arguments);a&&ib.isFunction(a.promise)?a.promise().done(c.resolve).fail(c.reject).progress(c.notify):c[g+"With"](this===d?c.promise():this,h?[a]:arguments)})}),a=null}).promise()},promise:function(a){return null!=a?ib.extend(a,d):d}},e={};return d.pipe=d.then,ib.each(b,function(a,f){var g=f[2],h=f[3];d[f[1]]=g.add,h&&g.add(function(){c=h},b[1^a][2].disable,b[2][2].lock),e[f[0]]=function(){return e[f[0]+"With"](this===e?d:this,arguments),this},e[f[0]+"With"]=g.fireWith}),d.promise(e),a&&a.call(e,e),e},when:function(a){var b,c,d,e=0,f=db.call(arguments),g=f.length,h=1!==g||a&&ib.isFunction(a.promise)?g:0,i=1===h?a:ib.Deferred(),j=function(a,c,d){return function(e){c[a]=this,d[a]=arguments.length>1?db.call(arguments):e,d===b?i.notifyWith(c,d):--h||i.resolveWith(c,d)}};if(g>1)for(b=Array(g),c=Array(g),d=Array(g);g>e;e++)f[e]&&ib.isFunction(f[e].promise)?f[e].promise().done(j(e,d,f)).fail(i.reject).progress(j(e,c,b)):--h;return h||i.resolveWith(d,f),i.promise()}}),ib.support=function(){var b,c,d,e,f,g,h,i,j,k,l=W.createElement("div");if(l.setAttribute("className","t"),l.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",c=l.getElementsByTagName("*"),d=l.getElementsByTagName("a")[0],!c||!d||!c.length)return{};f=W.createElement("select"),h=f.appendChild(W.createElement("option")),e=l.getElementsByTagName("input")[0],d.style.cssText="top:1px;float:left;opacity:.5",b={getSetAttribute:"t"!==l.className,leadingWhitespace:3===l.firstChild.nodeType,tbody:!l.getElementsByTagName("tbody").length,htmlSerialize:!!l.getElementsByTagName("link").length,style:/top/.test(d.getAttribute("style")),hrefNormalized:"/a"===d.getAttribute("href"),opacity:/^0.5/.test(d.style.opacity),cssFloat:!!d.style.cssFloat,checkOn:!!e.value,optSelected:h.selected,enctype:!!W.createElement("form").enctype,html5Clone:"<:nav></:nav>"!==W.createElement("nav").cloneNode(!0).outerHTML,boxModel:"CSS1Compat"===W.compatMode,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,boxSizingReliable:!0,pixelPosition:!1},e.checked=!0,b.noCloneChecked=e.cloneNode(!0).checked,f.disabled=!0,b.optDisabled=!h.disabled;try{delete l.test}catch(m){b.deleteExpando=!1}e=W.createElement("input"),e.setAttribute("value",""),b.input=""===e.getAttribute("value"),e.value="t",e.setAttribute("type","radio"),b.radioValue="t"===e.value,e.setAttribute("checked","t"),e.setAttribute("name","t"),g=W.createDocumentFragment(),g.appendChild(e),b.appendChecked=e.checked,b.checkClone=g.cloneNode(!0).cloneNode(!0).lastChild.checked,l.attachEvent&&(l.attachEvent("onclick",function(){b.noCloneEvent=!1}),l.cloneNode(!0).click());for(k in{submit:!0,change:!0,focusin:!0})l.setAttribute(i="on"+k,"t"),b[k+"Bubbles"]=i in a||l.attributes[i].expando===!1;return l.style.backgroundClip="content-box",l.cloneNode(!0).style.backgroundClip="",b.clearCloneStyle="content-box"===l.style.backgroundClip,ib(function(){var c,d,e,f="padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;",g=W.getElementsByTagName("body")[0];g&&(c=W.createElement("div"),c.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",g.appendChild(c).appendChild(l),l.innerHTML="<table><tr><td></td><td>t</td></tr></table>",e=l.getElementsByTagName("td"),e[0].style.cssText="padding:0;margin:0;border:0;display:none",j=0===e[0].offsetHeight,e[0].style.display="",e[1].style.display="none",b.reliableHiddenOffsets=j&&0===e[0].offsetHeight,l.innerHTML="",l.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",b.boxSizing=4===l.offsetWidth,b.doesNotIncludeMarginInBodyOffset=1!==g.offsetTop,a.getComputedStyle&&(b.pixelPosition="1%"!==(a.getComputedStyle(l,null)||{}).top,b.boxSizingReliable="4px"===(a.getComputedStyle(l,null)||{width:"4px"}).width,d=l.appendChild(W.createElement("div")),d.style.cssText=l.style.cssText=f,d.style.marginRight=d.style.width="0",l.style.width="1px",b.reliableMarginRight=!parseFloat((a.getComputedStyle(d,null)||{}).marginRight)),typeof l.style.zoom!==V&&(l.innerHTML="",l.style.cssText=f+"width:1px;padding:1px;display:inline;zoom:1",b.inlineBlockNeedsLayout=3===l.offsetWidth,l.style.display="block",l.innerHTML="<div></div>",l.firstChild.style.width="5px",b.shrinkWrapBlocks=3!==l.offsetWidth,b.inlineBlockNeedsLayout&&(g.style.zoom=1)),g.removeChild(c),c=l=e=d=null)}),c=f=g=h=d=e=null,b}();var yb=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,zb=/([A-Z])/g;ib.extend({cache:{},expando:"jQuery"+(ab+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(a){return a=a.nodeType?ib.cache[a[ib.expando]]:a[ib.expando],!!a&&!h(a)},data:function(a,b,c){return e(a,b,c)},removeData:function(a,b){return f(a,b)},_data:function(a,b,c){return e(a,b,c,!0)},_removeData:function(a,b){return f(a,b,!0)},acceptData:function(a){if(a.nodeType&&1!==a.nodeType&&9!==a.nodeType)return!1;var b=a.nodeName&&ib.noData[a.nodeName.toLowerCase()];return!b||b!==!0&&a.getAttribute("classid")===b}}),ib.fn.extend({data:function(a,c){var d,e,f=this[0],h=0,i=null;if(a===b){if(this.length&&(i=ib.data(f),1===f.nodeType&&!ib._data(f,"parsedAttrs"))){for(d=f.attributes;d.length>h;h++)e=d[h].name,e.indexOf("data-")||(e=ib.camelCase(e.slice(5)),g(f,e,i[e]));ib._data(f,"parsedAttrs",!0)}return i}return"object"==typeof a?this.each(function(){ib.data(this,a)}):ib.access(this,function(c){return c===b?f?g(f,a,ib.data(f,a)):null:(this.each(function(){ib.data(this,a,c)}),b)},null,c,arguments.length>1,null,!0)},removeData:function(a){return this.each(function(){ib.removeData(this,a)})}}),ib.extend({queue:function(a,c,d){var e;return a?(c=(c||"fx")+"queue",e=ib._data(a,c),d&&(!e||ib.isArray(d)?e=ib._data(a,c,ib.makeArray(d)):e.push(d)),e||[]):b},dequeue:function(a,b){b=b||"fx";var c=ib.queue(a,b),d=c.length,e=c.shift(),f=ib._queueHooks(a,b),g=function(){ib.dequeue(a,b)};"inprogress"===e&&(e=c.shift(),d--),f.cur=e,e&&("fx"===b&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return ib._data(a,c)||ib._data(a,c,{empty:ib.Callbacks("once memory").add(function(){ib._removeData(a,b+"queue"),ib._removeData(a,c)})})}}),ib.fn.extend({queue:function(a,c){var d=2;return"string"!=typeof a&&(c=a,a="fx",d--),d>arguments.length?ib.queue(this[0],a):c===b?this:this.each(function(){var b=ib.queue(this,a,c);ib._queueHooks(this,a),"fx"===a&&"inprogress"!==b[0]&&ib.dequeue(this,a)})},dequeue:function(a){return this.each(function(){ib.dequeue(this,a)})},delay:function(a,b){return a=ib.fx?ib.fx.speeds[a]||a:a,b=b||"fx",this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,c){var d,e=1,f=ib.Deferred(),g=this,h=this.length,i=function(){--e||f.resolveWith(g,[g])};for("string"!=typeof a&&(c=a,a=b),a=a||"fx";h--;)d=ib._data(g[h],a+"queueHooks"),d&&d.empty&&(e++,d.empty.add(i));return i(),f.promise(c)}});var Ab,Bb,Cb=/[\t\r\n]/g,Db=/\r/g,Eb=/^(?:input|select|textarea|button|object)$/i,Fb=/^(?:a|area)$/i,Gb=/^(?:checked|selected|autofocus|autoplay|async|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped)$/i,Hb=/^(?:checked|selected)$/i,Ib=ib.support.getSetAttribute,Jb=ib.support.input;ib.fn.extend({attr:function(a,b){return ib.access(this,ib.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){ib.removeAttr(this,a)})},prop:function(a,b){return ib.access(this,ib.prop,a,b,arguments.length>1)},removeProp:function(a){return a=ib.propFix[a]||a,this.each(function(){try{this[a]=b,delete this[a]}catch(c){}})},addClass:function(a){var b,c,d,e,f,g=0,h=this.length,i="string"==typeof a&&a;if(ib.isFunction(a))return this.each(function(b){ib(this).addClass(a.call(this,b,this.className))});if(i)for(b=(a||"").match(kb)||[];h>g;g++)if(c=this[g],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(Cb," "):" ")){for(f=0;e=b[f++];)0>d.indexOf(" "+e+" ")&&(d+=e+" ");c.className=ib.trim(d)}return this},removeClass:function(a){var b,c,d,e,f,g=0,h=this.length,i=0===arguments.length||"string"==typeof a&&a;if(ib.isFunction(a))return this.each(function(b){ib(this).removeClass(a.call(this,b,this.className))});if(i)for(b=(a||"").match(kb)||[];h>g;g++)if(c=this[g],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(Cb," "):"")){for(f=0;e=b[f++];)for(;d.indexOf(" "+e+" ")>=0;)d=d.replace(" "+e+" "," ");c.className=a?ib.trim(d):""}return this},toggleClass:function(a,b){var c=typeof a,d="boolean"==typeof b;return ib.isFunction(a)?this.each(function(c){ib(this).toggleClass(a.call(this,c,this.className,b),b)}):this.each(function(){if("string"===c)for(var e,f=0,g=ib(this),h=b,i=a.match(kb)||[];e=i[f++];)h=d?h:!g.hasClass(e),g[h?"addClass":"removeClass"](e);else(c===V||"boolean"===c)&&(this.className&&ib._data(this,"__className__",this.className),this.className=this.className||a===!1?"":ib._data(this,"__className__")||"")})},hasClass:function(a){for(var b=" "+a+" ",c=0,d=this.length;d>c;c++)if(1===this[c].nodeType&&(" "+this[c].className+" ").replace(Cb," ").indexOf(b)>=0)return!0;return!1},val:function(a){var c,d,e,f=this[0];return arguments.length?(e=ib.isFunction(a),this.each(function(c){var f,g=ib(this);1===this.nodeType&&(f=e?a.call(this,c,g.val()):a,null==f?f="":"number"==typeof f?f+="":ib.isArray(f)&&(f=ib.map(f,function(a){return null==a?"":a+""})),d=ib.valHooks[this.type]||ib.valHooks[this.nodeName.toLowerCase()],d&&"set"in d&&d.set(this,f,"value")!==b||(this.value=f))})):f?(d=ib.valHooks[f.type]||ib.valHooks[f.nodeName.toLowerCase()],d&&"get"in d&&(c=d.get(f,"value"))!==b?c:(c=f.value,"string"==typeof c?c.replace(Db,""):null==c?"":c)):void 0}}),ib.extend({valHooks:{option:{get:function(a){var b=a.attributes.value;return!b||b.specified?a.value:a.text}},select:{get:function(a){for(var b,c,d=a.options,e=a.selectedIndex,f="select-one"===a.type||0>e,g=f?null:[],h=f?e+1:d.length,i=0>e?h:f?e:0;h>i;i++)if(c=d[i],!(!c.selected&&i!==e||(ib.support.optDisabled?c.disabled:null!==c.getAttribute("disabled"))||c.parentNode.disabled&&ib.nodeName(c.parentNode,"optgroup"))){if(b=ib(c).val(),f)return b;g.push(b)}return g},set:function(a,b){var c=ib.makeArray(b);return ib(a).find("option").each(function(){this.selected=ib.inArray(ib(this).val(),c)>=0}),c.length||(a.selectedIndex=-1),c}}},attr:function(a,c,d){var e,f,g,h=a.nodeType;return a&&3!==h&&8!==h&&2!==h?typeof a.getAttribute===V?ib.prop(a,c,d):(f=1!==h||!ib.isXMLDoc(a),f&&(c=c.toLowerCase(),e=ib.attrHooks[c]||(Gb.test(c)?Bb:Ab)),d===b?e&&f&&"get"in e&&null!==(g=e.get(a,c))?g:(typeof a.getAttribute!==V&&(g=a.getAttribute(c)),null==g?b:g):null!==d?e&&f&&"set"in e&&(g=e.set(a,d,c))!==b?g:(a.setAttribute(c,d+""),d):(ib.removeAttr(a,c),b)):void 0
},removeAttr:function(a,b){var c,d,e=0,f=b&&b.match(kb);if(f&&1===a.nodeType)for(;c=f[e++];)d=ib.propFix[c]||c,Gb.test(c)?!Ib&&Hb.test(c)?a[ib.camelCase("default-"+c)]=a[d]=!1:a[d]=!1:ib.attr(a,c,""),a.removeAttribute(Ib?c:d)},attrHooks:{type:{set:function(a,b){if(!ib.support.radioValue&&"radio"===b&&ib.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(a,c,d){var e,f,g,h=a.nodeType;return a&&3!==h&&8!==h&&2!==h?(g=1!==h||!ib.isXMLDoc(a),g&&(c=ib.propFix[c]||c,f=ib.propHooks[c]),d!==b?f&&"set"in f&&(e=f.set(a,d,c))!==b?e:a[c]=d:f&&"get"in f&&null!==(e=f.get(a,c))?e:a[c]):void 0},propHooks:{tabIndex:{get:function(a){var c=a.getAttributeNode("tabindex");return c&&c.specified?parseInt(c.value,10):Eb.test(a.nodeName)||Fb.test(a.nodeName)&&a.href?0:b}}}}),Bb={get:function(a,c){var d=ib.prop(a,c),e="boolean"==typeof d&&a.getAttribute(c),f="boolean"==typeof d?Jb&&Ib?null!=e:Hb.test(c)?a[ib.camelCase("default-"+c)]:!!e:a.getAttributeNode(c);return f&&f.value!==!1?c.toLowerCase():b},set:function(a,b,c){return b===!1?ib.removeAttr(a,c):Jb&&Ib||!Hb.test(c)?a.setAttribute(!Ib&&ib.propFix[c]||c,c):a[ib.camelCase("default-"+c)]=a[c]=!0,c}},Jb&&Ib||(ib.attrHooks.value={get:function(a,c){var d=a.getAttributeNode(c);return ib.nodeName(a,"input")?a.defaultValue:d&&d.specified?d.value:b},set:function(a,c,d){return ib.nodeName(a,"input")?(a.defaultValue=c,b):Ab&&Ab.set(a,c,d)}}),Ib||(Ab=ib.valHooks.button={get:function(a,c){var d=a.getAttributeNode(c);return d&&("id"===c||"name"===c||"coords"===c?""!==d.value:d.specified)?d.value:b},set:function(a,c,d){var e=a.getAttributeNode(d);return e||a.setAttributeNode(e=a.ownerDocument.createAttribute(d)),e.value=c+="","value"===d||c===a.getAttribute(d)?c:b}},ib.attrHooks.contenteditable={get:Ab.get,set:function(a,b,c){Ab.set(a,""===b?!1:b,c)}},ib.each(["width","height"],function(a,c){ib.attrHooks[c]=ib.extend(ib.attrHooks[c],{set:function(a,d){return""===d?(a.setAttribute(c,"auto"),d):b}})})),ib.support.hrefNormalized||(ib.each(["href","src","width","height"],function(a,c){ib.attrHooks[c]=ib.extend(ib.attrHooks[c],{get:function(a){var d=a.getAttribute(c,2);return null==d?b:d}})}),ib.each(["href","src"],function(a,b){ib.propHooks[b]={get:function(a){return a.getAttribute(b,4)}}})),ib.support.style||(ib.attrHooks.style={get:function(a){return a.style.cssText||b},set:function(a,b){return a.style.cssText=b+""}}),ib.support.optSelected||(ib.propHooks.selected=ib.extend(ib.propHooks.selected,{get:function(a){var b=a.parentNode;return b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex),null}})),ib.support.enctype||(ib.propFix.enctype="encoding"),ib.support.checkOn||ib.each(["radio","checkbox"],function(){ib.valHooks[this]={get:function(a){return null===a.getAttribute("value")?"on":a.value}}}),ib.each(["radio","checkbox"],function(){ib.valHooks[this]=ib.extend(ib.valHooks[this],{set:function(a,c){return ib.isArray(c)?a.checked=ib.inArray(ib(a).val(),c)>=0:b}})});var Kb=/^(?:input|select|textarea)$/i,Lb=/^key/,Mb=/^(?:mouse|contextmenu)|click/,Nb=/^(?:focusinfocus|focusoutblur)$/,Ob=/^([^.]*)(?:\.(.+)|)$/;ib.event={global:{},add:function(a,c,d,e,f){var g,h,i,j,k,l,m,n,o,p,q,r=ib._data(a);if(r){for(d.handler&&(j=d,d=j.handler,f=j.selector),d.guid||(d.guid=ib.guid++),(h=r.events)||(h=r.events={}),(l=r.handle)||(l=r.handle=function(a){return typeof ib===V||a&&ib.event.triggered===a.type?b:ib.event.dispatch.apply(l.elem,arguments)},l.elem=a),c=(c||"").match(kb)||[""],i=c.length;i--;)g=Ob.exec(c[i])||[],o=q=g[1],p=(g[2]||"").split(".").sort(),k=ib.event.special[o]||{},o=(f?k.delegateType:k.bindType)||o,k=ib.event.special[o]||{},m=ib.extend({type:o,origType:q,data:e,handler:d,guid:d.guid,selector:f,needsContext:f&&ib.expr.match.needsContext.test(f),namespace:p.join(".")},j),(n=h[o])||(n=h[o]=[],n.delegateCount=0,k.setup&&k.setup.call(a,e,p,l)!==!1||(a.addEventListener?a.addEventListener(o,l,!1):a.attachEvent&&a.attachEvent("on"+o,l))),k.add&&(k.add.call(a,m),m.handler.guid||(m.handler.guid=d.guid)),f?n.splice(n.delegateCount++,0,m):n.push(m),ib.event.global[o]=!0;a=null}},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q=ib.hasData(a)&&ib._data(a);if(q&&(k=q.events)){for(b=(b||"").match(kb)||[""],j=b.length;j--;)if(h=Ob.exec(b[j])||[],n=p=h[1],o=(h[2]||"").split(".").sort(),n){for(l=ib.event.special[n]||{},n=(d?l.delegateType:l.bindType)||n,m=k[n]||[],h=h[2]&&RegExp("(^|\\.)"+o.join("\\.(?:.*\\.|)")+"(\\.|$)"),i=f=m.length;f--;)g=m[f],!e&&p!==g.origType||c&&c.guid!==g.guid||h&&!h.test(g.namespace)||d&&d!==g.selector&&("**"!==d||!g.selector)||(m.splice(f,1),g.selector&&m.delegateCount--,l.remove&&l.remove.call(a,g));i&&!m.length&&(l.teardown&&l.teardown.call(a,o,q.handle)!==!1||ib.removeEvent(a,n,q.handle),delete k[n])}else for(n in k)ib.event.remove(a,n+b[j],c,d,!0);ib.isEmptyObject(k)&&(delete q.handle,ib._removeData(a,"events"))}},trigger:function(c,d,e,f){var g,h,i,j,k,l,m,n=[e||W],o=gb.call(c,"type")?c.type:c,p=gb.call(c,"namespace")?c.namespace.split("."):[];if(i=l=e=e||W,3!==e.nodeType&&8!==e.nodeType&&!Nb.test(o+ib.event.triggered)&&(o.indexOf(".")>=0&&(p=o.split("."),o=p.shift(),p.sort()),h=0>o.indexOf(":")&&"on"+o,c=c[ib.expando]?c:new ib.Event(o,"object"==typeof c&&c),c.isTrigger=!0,c.namespace=p.join("."),c.namespace_re=c.namespace?RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,c.result=b,c.target||(c.target=e),d=null==d?[c]:ib.makeArray(d,[c]),k=ib.event.special[o]||{},f||!k.trigger||k.trigger.apply(e,d)!==!1)){if(!f&&!k.noBubble&&!ib.isWindow(e)){for(j=k.delegateType||o,Nb.test(j+o)||(i=i.parentNode);i;i=i.parentNode)n.push(i),l=i;l===(e.ownerDocument||W)&&n.push(l.defaultView||l.parentWindow||a)}for(m=0;(i=n[m++])&&!c.isPropagationStopped();)c.type=m>1?j:k.bindType||o,g=(ib._data(i,"events")||{})[c.type]&&ib._data(i,"handle"),g&&g.apply(i,d),g=h&&i[h],g&&ib.acceptData(i)&&g.apply&&g.apply(i,d)===!1&&c.preventDefault();if(c.type=o,!(f||c.isDefaultPrevented()||k._default&&k._default.apply(e.ownerDocument,d)!==!1||"click"===o&&ib.nodeName(e,"a")||!ib.acceptData(e)||!h||!e[o]||ib.isWindow(e))){l=e[h],l&&(e[h]=null),ib.event.triggered=o;try{e[o]()}catch(q){}ib.event.triggered=b,l&&(e[h]=l)}return c.result}},dispatch:function(a){a=ib.event.fix(a);var c,d,e,f,g,h=[],i=db.call(arguments),j=(ib._data(this,"events")||{})[a.type]||[],k=ib.event.special[a.type]||{};if(i[0]=a,a.delegateTarget=this,!k.preDispatch||k.preDispatch.call(this,a)!==!1){for(h=ib.event.handlers.call(this,a,j),c=0;(f=h[c++])&&!a.isPropagationStopped();)for(a.currentTarget=f.elem,g=0;(e=f.handlers[g++])&&!a.isImmediatePropagationStopped();)(!a.namespace_re||a.namespace_re.test(e.namespace))&&(a.handleObj=e,a.data=e.data,d=((ib.event.special[e.origType]||{}).handle||e.handler).apply(f.elem,i),d!==b&&(a.result=d)===!1&&(a.preventDefault(),a.stopPropagation()));return k.postDispatch&&k.postDispatch.call(this,a),a.result}},handlers:function(a,c){var d,e,f,g,h=[],i=c.delegateCount,j=a.target;if(i&&j.nodeType&&(!a.button||"click"!==a.type))for(;j!=this;j=j.parentNode||this)if(1===j.nodeType&&(j.disabled!==!0||"click"!==a.type)){for(f=[],g=0;i>g;g++)e=c[g],d=e.selector+" ",f[d]===b&&(f[d]=e.needsContext?ib(d,this).index(j)>=0:ib.find(d,this,null,[j]).length),f[d]&&f.push(e);f.length&&h.push({elem:j,handlers:f})}return c.length>i&&h.push({elem:this,handlers:c.slice(i)}),h},fix:function(a){if(a[ib.expando])return a;var b,c,d,e=a.type,f=a,g=this.fixHooks[e];for(g||(this.fixHooks[e]=g=Mb.test(e)?this.mouseHooks:Lb.test(e)?this.keyHooks:{}),d=g.props?this.props.concat(g.props):this.props,a=new ib.Event(f),b=d.length;b--;)c=d[b],a[c]=f[c];return a.target||(a.target=f.srcElement||W),3===a.target.nodeType&&(a.target=a.target.parentNode),a.metaKey=!!a.metaKey,g.filter?g.filter(a,f):a},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){return null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode),a}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,c){var d,e,f,g=c.button,h=c.fromElement;return null==a.pageX&&null!=c.clientX&&(e=a.target.ownerDocument||W,f=e.documentElement,d=e.body,a.pageX=c.clientX+(f&&f.scrollLeft||d&&d.scrollLeft||0)-(f&&f.clientLeft||d&&d.clientLeft||0),a.pageY=c.clientY+(f&&f.scrollTop||d&&d.scrollTop||0)-(f&&f.clientTop||d&&d.clientTop||0)),!a.relatedTarget&&h&&(a.relatedTarget=h===a.target?c.toElement:h),a.which||g===b||(a.which=1&g?1:2&g?3:4&g?2:0),a}},special:{load:{noBubble:!0},click:{trigger:function(){return ib.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):b}},focus:{trigger:function(){if(this!==W.activeElement&&this.focus)try{return this.focus(),!1}catch(a){}},delegateType:"focusin"},blur:{trigger:function(){return this===W.activeElement&&this.blur?(this.blur(),!1):b},delegateType:"focusout"},beforeunload:{postDispatch:function(a){a.result!==b&&(a.originalEvent.returnValue=a.result)}}},simulate:function(a,b,c,d){var e=ib.extend(new ib.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?ib.event.trigger(e,null,b):ib.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()}},ib.removeEvent=W.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)}:function(a,b,c){var d="on"+b;a.detachEvent&&(typeof a[d]===V&&(a[d]=null),a.detachEvent(d,c))},ib.Event=function(a,c){return this instanceof ib.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||a.returnValue===!1||a.getPreventDefault&&a.getPreventDefault()?i:j):this.type=a,c&&ib.extend(this,c),this.timeStamp=a&&a.timeStamp||ib.now(),this[ib.expando]=!0,b):new ib.Event(a,c)},ib.Event.prototype={isDefaultPrevented:j,isPropagationStopped:j,isImmediatePropagationStopped:j,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=i,a&&(a.preventDefault?a.preventDefault():a.returnValue=!1)},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=i,a&&(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=i,this.stopPropagation()}},ib.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,b){ib.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj;return(!e||e!==d&&!ib.contains(d,e))&&(a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b),c}}}),ib.support.submitBubbles||(ib.event.special.submit={setup:function(){return ib.nodeName(this,"form")?!1:(ib.event.add(this,"click._submit keypress._submit",function(a){var c=a.target,d=ib.nodeName(c,"input")||ib.nodeName(c,"button")?c.form:b;d&&!ib._data(d,"submitBubbles")&&(ib.event.add(d,"submit._submit",function(a){a._submit_bubble=!0}),ib._data(d,"submitBubbles",!0))}),b)},postDispatch:function(a){a._submit_bubble&&(delete a._submit_bubble,this.parentNode&&!a.isTrigger&&ib.event.simulate("submit",this.parentNode,a,!0))},teardown:function(){return ib.nodeName(this,"form")?!1:(ib.event.remove(this,"._submit"),b)}}),ib.support.changeBubbles||(ib.event.special.change={setup:function(){return Kb.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(ib.event.add(this,"propertychange._change",function(a){"checked"===a.originalEvent.propertyName&&(this._just_changed=!0)}),ib.event.add(this,"click._change",function(a){this._just_changed&&!a.isTrigger&&(this._just_changed=!1),ib.event.simulate("change",this,a,!0)})),!1):(ib.event.add(this,"beforeactivate._change",function(a){var b=a.target;Kb.test(b.nodeName)&&!ib._data(b,"changeBubbles")&&(ib.event.add(b,"change._change",function(a){!this.parentNode||a.isSimulated||a.isTrigger||ib.event.simulate("change",this.parentNode,a,!0)}),ib._data(b,"changeBubbles",!0))}),b)},handle:function(a){var c=a.target;return this!==c||a.isSimulated||a.isTrigger||"radio"!==c.type&&"checkbox"!==c.type?a.handleObj.handler.apply(this,arguments):b},teardown:function(){return ib.event.remove(this,"._change"),!Kb.test(this.nodeName)}}),ib.support.focusinBubbles||ib.each({focus:"focusin",blur:"focusout"},function(a,b){var c=0,d=function(a){ib.event.simulate(b,a.target,ib.event.fix(a),!0)};ib.event.special[b]={setup:function(){0===c++&&W.addEventListener(a,d,!0)},teardown:function(){0===--c&&W.removeEventListener(a,d,!0)}}}),ib.fn.extend({on:function(a,c,d,e,f){var g,h;if("object"==typeof a){"string"!=typeof c&&(d=d||c,c=b);for(g in a)this.on(g,c,d,a[g],f);return this}if(null==d&&null==e?(e=c,d=c=b):null==e&&("string"==typeof c?(e=d,d=b):(e=d,d=c,c=b)),e===!1)e=j;else if(!e)return this;return 1===f&&(h=e,e=function(a){return ib().off(a),h.apply(this,arguments)},e.guid=h.guid||(h.guid=ib.guid++)),this.each(function(){ib.event.add(this,a,e,d,c)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,c,d){var e,f;if(a&&a.preventDefault&&a.handleObj)return e=a.handleObj,ib(a.delegateTarget).off(e.namespace?e.origType+"."+e.namespace:e.origType,e.selector,e.handler),this;if("object"==typeof a){for(f in a)this.off(f,c,a[f]);return this}return(c===!1||"function"==typeof c)&&(d=c,c=b),d===!1&&(d=j),this.each(function(){ib.event.remove(this,a,d,c)})},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)},trigger:function(a,b){return this.each(function(){ib.event.trigger(a,b,this)})},triggerHandler:function(a,c){var d=this[0];return d?ib.event.trigger(a,c,d,!0):b}}),function(a,b){function c(a){return ob.test(a+"")}function d(){var a,b=[];return a=function(c,d){return b.push(c+=" ")>y.cacheLength&&delete a[b.shift()],a[c]=d}}function e(a){return a[N]=!0,a}function f(a){var b=F.createElement("div");try{return a(b)}catch(c){return!1}finally{b=null}}function g(a,b,c,d){var e,f,g,h,i,j,k,n,o,p;if((b?b.ownerDocument||b:O)!==F&&E(b),b=b||F,c=c||[],!a||"string"!=typeof a)return c;if(1!==(h=b.nodeType)&&9!==h)return[];if(!H&&!d){if(e=pb.exec(a))if(g=e[1]){if(9===h){if(f=b.getElementById(g),!f||!f.parentNode)return c;if(f.id===g)return c.push(f),c}else if(b.ownerDocument&&(f=b.ownerDocument.getElementById(g))&&L(b,f)&&f.id===g)return c.push(f),c}else{if(e[2])return Z.apply(c,$.call(b.getElementsByTagName(a),0)),c;if((g=e[3])&&P.getByClassName&&b.getElementsByClassName)return Z.apply(c,$.call(b.getElementsByClassName(g),0)),c}if(P.qsa&&!I.test(a)){if(k=!0,n=N,o=b,p=9===h&&a,1===h&&"object"!==b.nodeName.toLowerCase()){for(j=l(a),(k=b.getAttribute("id"))?n=k.replace(sb,"\\$&"):b.setAttribute("id",n),n="[id='"+n+"'] ",i=j.length;i--;)j[i]=n+m(j[i]);o=nb.test(a)&&b.parentNode||b,p=j.join(",")}if(p)try{return Z.apply(c,$.call(o.querySelectorAll(p),0)),c}catch(q){}finally{k||b.removeAttribute("id")}}}return u(a.replace(gb,"$1"),b,c,d)}function h(a,b){var c=b&&a,d=c&&(~b.sourceIndex||W)-(~a.sourceIndex||W);if(d)return d;if(c)for(;c=c.nextSibling;)if(c===b)return-1;return a?1:-1}function i(a){return function(b){var c=b.nodeName.toLowerCase();return"input"===c&&b.type===a}}function j(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function k(a){return e(function(b){return b=+b,e(function(c,d){for(var e,f=a([],c.length,b),g=f.length;g--;)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function l(a,b){var c,d,e,f,h,i,j,k=T[a+" "];if(k)return b?0:k.slice(0);for(h=a,i=[],j=y.preFilter;h;){(!c||(d=hb.exec(h)))&&(d&&(h=h.slice(d[0].length)||h),i.push(e=[])),c=!1,(d=jb.exec(h))&&(c=d.shift(),e.push({value:c,type:d[0].replace(gb," ")}),h=h.slice(c.length));for(f in y.filter)!(d=mb[f].exec(h))||j[f]&&!(d=j[f](d))||(c=d.shift(),e.push({value:c,type:f,matches:d}),h=h.slice(c.length));if(!c)break}return b?h.length:h?g.error(a):T(a,i).slice(0)}function m(a){for(var b=0,c=a.length,d="";c>b;b++)d+=a[b].value;return d}function n(a,b,c){var d=b.dir,e=c&&"parentNode"===d,f=R++;return b.first?function(b,c,f){for(;b=b[d];)if(1===b.nodeType||e)return a(b,c,f)}:function(b,c,g){var h,i,j,k=Q+" "+f;if(g){for(;b=b[d];)if((1===b.nodeType||e)&&a(b,c,g))return!0}else for(;b=b[d];)if(1===b.nodeType||e)if(j=b[N]||(b[N]={}),(i=j[d])&&i[0]===k){if((h=i[1])===!0||h===x)return h===!0}else if(i=j[d]=[k],i[1]=a(b,c,g)||x,i[1]===!0)return!0}}function o(a){return a.length>1?function(b,c,d){for(var e=a.length;e--;)if(!a[e](b,c,d))return!1;return!0}:a[0]}function p(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;i>h;h++)(f=a[h])&&(!c||c(f,d,e))&&(g.push(f),j&&b.push(h));return g}function q(a,b,c,d,f,g){return d&&!d[N]&&(d=q(d)),f&&!f[N]&&(f=q(f,g)),e(function(e,g,h,i){var j,k,l,m=[],n=[],o=g.length,q=e||t(b||"*",h.nodeType?[h]:h,[]),r=!a||!e&&b?q:p(q,m,a,h,i),s=c?f||(e?a:o||d)?[]:g:r;if(c&&c(r,s,h,i),d)for(j=p(s,n),d(j,[],h,i),k=j.length;k--;)(l=j[k])&&(s[n[k]]=!(r[n[k]]=l));if(e){if(f||a){if(f){for(j=[],k=s.length;k--;)(l=s[k])&&j.push(r[k]=l);f(null,s=[],j,i)}for(k=s.length;k--;)(l=s[k])&&(j=f?_.call(e,l):m[k])>-1&&(e[j]=!(g[j]=l))}}else s=p(s===g?s.splice(o,s.length):s),f?f(null,g,s,i):Z.apply(g,s)})}function r(a){for(var b,c,d,e=a.length,f=y.relative[a[0].type],g=f||y.relative[" "],h=f?1:0,i=n(function(a){return a===b},g,!0),j=n(function(a){return _.call(b,a)>-1},g,!0),k=[function(a,c,d){return!f&&(d||c!==D)||((b=c).nodeType?i(a,c,d):j(a,c,d))}];e>h;h++)if(c=y.relative[a[h].type])k=[n(o(k),c)];else{if(c=y.filter[a[h].type].apply(null,a[h].matches),c[N]){for(d=++h;e>d&&!y.relative[a[d].type];d++);return q(h>1&&o(k),h>1&&m(a.slice(0,h-1)).replace(gb,"$1"),c,d>h&&r(a.slice(h,d)),e>d&&r(a=a.slice(d)),e>d&&m(a))}k.push(c)}return o(k)}function s(a,b){var c=0,d=b.length>0,f=a.length>0,h=function(e,h,i,j,k){var l,m,n,o=[],q=0,r="0",s=e&&[],t=null!=k,u=D,v=e||f&&y.find.TAG("*",k&&h.parentNode||h),w=Q+=null==u?1:Math.random()||.1;for(t&&(D=h!==F&&h,x=c);null!=(l=v[r]);r++){if(f&&l){for(m=0;n=a[m++];)if(n(l,h,i)){j.push(l);break}t&&(Q=w,x=++c)}d&&((l=!n&&l)&&q--,e&&s.push(l))}if(q+=r,d&&r!==q){for(m=0;n=b[m++];)n(s,o,h,i);if(e){if(q>0)for(;r--;)s[r]||o[r]||(o[r]=Y.call(j));o=p(o)}Z.apply(j,o),t&&!e&&o.length>0&&q+b.length>1&&g.uniqueSort(j)}return t&&(Q=w,D=u),s};return d?e(h):h}function t(a,b,c){for(var d=0,e=b.length;e>d;d++)g(a,b[d],c);return c}function u(a,b,c,d){var e,f,g,h,i,j=l(a);if(!d&&1===j.length){if(f=j[0]=j[0].slice(0),f.length>2&&"ID"===(g=f[0]).type&&9===b.nodeType&&!H&&y.relative[f[1].type]){if(b=y.find.ID(g.matches[0].replace(ub,vb),b)[0],!b)return c;a=a.slice(f.shift().value.length)}for(e=mb.needsContext.test(a)?0:f.length;e--&&(g=f[e],!y.relative[h=g.type]);)if((i=y.find[h])&&(d=i(g.matches[0].replace(ub,vb),nb.test(f[0].type)&&b.parentNode||b))){if(f.splice(e,1),a=d.length&&m(f),!a)return Z.apply(c,$.call(d,0)),c;break}}return B(a,j)(d,b,H,c,nb.test(a)),c}function v(){}var w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N="sizzle"+-new Date,O=a.document,P={},Q=0,R=0,S=d(),T=d(),U=d(),V=typeof b,W=1<<31,X=[],Y=X.pop,Z=X.push,$=X.slice,_=X.indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(this[b]===a)return b;return-1},ab="[\\x20\\t\\r\\n\\f]",bb="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",cb=bb.replace("w","w#"),db="([*^$|!~]?=)",eb="\\["+ab+"*("+bb+")"+ab+"*(?:"+db+ab+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+cb+")|)|)"+ab+"*\\]",fb=":("+bb+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+eb.replace(3,8)+")*)|.*)\\)|)",gb=RegExp("^"+ab+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ab+"+$","g"),hb=RegExp("^"+ab+"*,"+ab+"*"),jb=RegExp("^"+ab+"*([\\x20\\t\\r\\n\\f>+~])"+ab+"*"),kb=RegExp(fb),lb=RegExp("^"+cb+"$"),mb={ID:RegExp("^#("+bb+")"),CLASS:RegExp("^\\.("+bb+")"),NAME:RegExp("^\\[name=['\"]?("+bb+")['\"]?\\]"),TAG:RegExp("^("+bb.replace("w","w*")+")"),ATTR:RegExp("^"+eb),PSEUDO:RegExp("^"+fb),CHILD:RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ab+"*(even|odd|(([+-]|)(\\d*)n|)"+ab+"*(?:([+-]|)"+ab+"*(\\d+)|))"+ab+"*\\)|)","i"),needsContext:RegExp("^"+ab+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ab+"*((?:-\\d)?\\d*)"+ab+"*\\)|)(?=[^-]|$)","i")},nb=/[\x20\t\r\n\f]*[+~]/,ob=/^[^{]+\{\s*\[native code/,pb=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,qb=/^(?:input|select|textarea|button)$/i,rb=/^h\d$/i,sb=/'|\\/g,tb=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,ub=/\\([\da-fA-F]{1,6}[\x20\t\r\n\f]?|.)/g,vb=function(a,b){var c="0x"+b-65536;return c!==c?b:0>c?String.fromCharCode(c+65536):String.fromCharCode(55296|c>>10,56320|1023&c)};try{$.call(O.documentElement.childNodes,0)[0].nodeType}catch(wb){$=function(a){for(var b,c=[];b=this[a++];)c.push(b);return c}}A=g.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return b?"HTML"!==b.nodeName:!1},E=g.setDocument=function(a){var d=a?a.ownerDocument||a:O;return d!==F&&9===d.nodeType&&d.documentElement?(F=d,G=d.documentElement,H=A(d),P.tagNameNoComments=f(function(a){return a.appendChild(d.createComment("")),!a.getElementsByTagName("*").length}),P.attributes=f(function(a){a.innerHTML="<select></select>";var b=typeof a.lastChild.getAttribute("multiple");return"boolean"!==b&&"string"!==b}),P.getByClassName=f(function(a){return a.innerHTML="<div class='hidden e'></div><div class='hidden'></div>",a.getElementsByClassName&&a.getElementsByClassName("e").length?(a.lastChild.className="e",2===a.getElementsByClassName("e").length):!1}),P.getByName=f(function(a){a.id=N+0,a.innerHTML="<a name='"+N+"'></a><div name='"+N+"'></div>",G.insertBefore(a,G.firstChild);var b=d.getElementsByName&&d.getElementsByName(N).length===2+d.getElementsByName(N+0).length;return P.getIdNotName=!d.getElementById(N),G.removeChild(a),b}),y.attrHandle=f(function(a){return a.innerHTML="<a href='#'></a>",a.firstChild&&typeof a.firstChild.getAttribute!==V&&"#"===a.firstChild.getAttribute("href")})?{}:{href:function(a){return a.getAttribute("href",2)},type:function(a){return a.getAttribute("type")}},P.getIdNotName?(y.find.ID=function(a,b){if(typeof b.getElementById!==V&&!H){var c=b.getElementById(a);return c&&c.parentNode?[c]:[]}},y.filter.ID=function(a){var b=a.replace(ub,vb);return function(a){return a.getAttribute("id")===b}}):(y.find.ID=function(a,c){if(typeof c.getElementById!==V&&!H){var d=c.getElementById(a);return d?d.id===a||typeof d.getAttributeNode!==V&&d.getAttributeNode("id").value===a?[d]:b:[]}},y.filter.ID=function(a){var b=a.replace(ub,vb);return function(a){var c=typeof a.getAttributeNode!==V&&a.getAttributeNode("id");return c&&c.value===b}}),y.find.TAG=P.tagNameNoComments?function(a,c){return typeof c.getElementsByTagName!==V?c.getElementsByTagName(a):b}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if("*"===a){for(;c=f[e++];)1===c.nodeType&&d.push(c);return d}return f},y.find.NAME=P.getByName&&function(a,c){return typeof c.getElementsByName!==V?c.getElementsByName(name):b},y.find.CLASS=P.getByClassName&&function(a,c){return typeof c.getElementsByClassName===V||H?b:c.getElementsByClassName(a)},J=[],I=[":focus"],(P.qsa=c(d.querySelectorAll))&&(f(function(a){a.innerHTML="<select><option selected=''></option></select>",a.querySelectorAll("[selected]").length||I.push("\\["+ab+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)"),a.querySelectorAll(":checked").length||I.push(":checked")}),f(function(a){a.innerHTML="<input type='hidden' i=''/>",a.querySelectorAll("[i^='']").length&&I.push("[*^$]="+ab+"*(?:\"\"|'')"),a.querySelectorAll(":enabled").length||I.push(":enabled",":disabled"),a.querySelectorAll("*,:x"),I.push(",.*:")})),(P.matchesSelector=c(K=G.matchesSelector||G.mozMatchesSelector||G.webkitMatchesSelector||G.oMatchesSelector||G.msMatchesSelector))&&f(function(a){P.disconnectedMatch=K.call(a,"div"),K.call(a,"[s!='']:x"),J.push("!=",fb)}),I=RegExp(I.join("|")),J=RegExp(J.join("|")),L=c(G.contains)||G.compareDocumentPosition?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!!d&&1===d.nodeType&&!!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d))}:function(a,b){if(b)for(;b=b.parentNode;)if(b===a)return!0;return!1},M=G.compareDocumentPosition?function(a,b){var c;return a===b?(C=!0,0):(c=b.compareDocumentPosition&&a.compareDocumentPosition&&a.compareDocumentPosition(b))?1&c||a.parentNode&&11===a.parentNode.nodeType?a===d||L(O,a)?-1:b===d||L(O,b)?1:0:4&c?-1:1:a.compareDocumentPosition?-1:1}:function(a,b){var c,e=0,f=a.parentNode,g=b.parentNode,i=[a],j=[b];if(a===b)return C=!0,0;if(!f||!g)return a===d?-1:b===d?1:f?-1:g?1:0;if(f===g)return h(a,b);for(c=a;c=c.parentNode;)i.unshift(c);for(c=b;c=c.parentNode;)j.unshift(c);for(;i[e]===j[e];)e++;return e?h(i[e],j[e]):i[e]===O?-1:j[e]===O?1:0},C=!1,[0,0].sort(M),P.detectDuplicates=C,F):F},g.matches=function(a,b){return g(a,null,null,b)},g.matchesSelector=function(a,b){if((a.ownerDocument||a)!==F&&E(a),b=b.replace(tb,"='$1']"),!(!P.matchesSelector||H||J&&J.test(b)||I.test(b)))try{var c=K.call(a,b);if(c||P.disconnectedMatch||a.document&&11!==a.document.nodeType)return c}catch(d){}return g(b,F,null,[a]).length>0},g.contains=function(a,b){return(a.ownerDocument||a)!==F&&E(a),L(a,b)},g.attr=function(a,b){var c;return(a.ownerDocument||a)!==F&&E(a),H||(b=b.toLowerCase()),(c=y.attrHandle[b])?c(a):H||P.attributes?a.getAttribute(b):((c=a.getAttributeNode(b))||a.getAttribute(b))&&a[b]===!0?b:c&&c.specified?c.value:null},g.error=function(a){throw Error("Syntax error, unrecognized expression: "+a)},g.uniqueSort=function(a){var b,c=[],d=1,e=0;if(C=!P.detectDuplicates,a.sort(M),C){for(;b=a[d];d++)b===a[d-1]&&(e=c.push(d));for(;e--;)a.splice(c[e],1)}return a},z=g.getText=function(a){var b,c="",d=0,e=a.nodeType;if(e){if(1===e||9===e||11===e){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=z(a)}else if(3===e||4===e)return a.nodeValue}else for(;b=a[d];d++)c+=z(b);return c},y=g.selectors={cacheLength:50,createPseudo:e,match:mb,find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(ub,vb),a[3]=(a[4]||a[5]||"").replace(ub,vb),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||g.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&g.error(a[0]),a},PSEUDO:function(a){var b,c=!a[5]&&a[2];return mb.CHILD.test(a[0])?null:(a[4]?a[2]=a[4]:c&&kb.test(c)&&(b=l(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b)),a.slice(0,3))}},filter:{TAG:function(a){return"*"===a?function(){return!0}:(a=a.replace(ub,vb).toLowerCase(),function(b){return b.nodeName&&b.nodeName.toLowerCase()===a})},CLASS:function(a){var b=S[a+" "];return b||(b=RegExp("(^|"+ab+")"+a+"("+ab+"|$)"))&&S(a,function(a){return b.test(a.className||typeof a.getAttribute!==V&&a.getAttribute("class")||"")})},ATTR:function(a,b,c){return function(d){var e=g.attr(d,a);return null==e?"!="===b:b?(e+="","="===b?e===c:"!="===b?e!==c:"^="===b?c&&0===e.indexOf(c):"*="===b?c&&e.indexOf(c)>-1:"$="===b?c&&e.slice(-c.length)===c:"~="===b?(" "+e+" ").indexOf(c)>-1:"|="===b?e===c||e.slice(0,c.length+1)===c+"-":!1):!0}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),g="last"!==a.slice(-4),h="of-type"===b;return 1===d&&0===e?function(a){return!!a.parentNode}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?"nextSibling":"previousSibling",q=b.parentNode,r=h&&b.nodeName.toLowerCase(),s=!i&&!h;if(q){if(f){for(;p;){for(l=b;l=l[p];)if(h?l.nodeName.toLowerCase()===r:1===l.nodeType)return!1;o=p="only"===a&&!o&&"nextSibling"}return!0}if(o=[g?q.firstChild:q.lastChild],g&&s){for(k=q[N]||(q[N]={}),j=k[a]||[],n=j[0]===Q&&j[1],m=j[0]===Q&&j[2],l=n&&q.childNodes[n];l=++n&&l&&l[p]||(m=n=0)||o.pop();)if(1===l.nodeType&&++m&&l===b){k[a]=[Q,n,m];break}}else if(s&&(j=(b[N]||(b[N]={}))[a])&&j[0]===Q)m=j[1];else for(;(l=++n&&l&&l[p]||(m=n=0)||o.pop())&&((h?l.nodeName.toLowerCase()!==r:1!==l.nodeType)||!++m||(s&&((l[N]||(l[N]={}))[a]=[Q,m]),l!==b)););return m-=e,m===d||0===m%d&&m/d>=0}}},PSEUDO:function(a,b){var c,d=y.pseudos[a]||y.setFilters[a.toLowerCase()]||g.error("unsupported pseudo: "+a);return d[N]?d(b):d.length>1?(c=[a,a,"",b],y.setFilters.hasOwnProperty(a.toLowerCase())?e(function(a,c){for(var e,f=d(a,b),g=f.length;g--;)e=_.call(a,f[g]),a[e]=!(c[e]=f[g])}):function(a){return d(a,0,c)}):d}},pseudos:{not:e(function(a){var b=[],c=[],d=B(a.replace(gb,"$1"));return d[N]?e(function(a,b,c,e){for(var f,g=d(a,null,e,[]),h=a.length;h--;)(f=g[h])&&(a[h]=!(b[h]=f))}):function(a,e,f){return b[0]=a,d(b,null,f,c),!c.pop()}}),has:e(function(a){return function(b){return g(a,b).length>0}}),contains:e(function(a){return function(b){return(b.textContent||b.innerText||z(b)).indexOf(a)>-1}}),lang:e(function(a){return lb.test(a||"")||g.error("unsupported lang: "+a),a=a.replace(ub,vb).toLowerCase(),function(b){var c;do if(c=H?b.getAttribute("xml:lang")||b.getAttribute("lang"):b.lang)return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===G},focus:function(a){return a===F.activeElement&&(!F.hasFocus||F.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return a.disabled===!1},disabled:function(a){return a.disabled===!0},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeName>"@"||3===a.nodeType||4===a.nodeType)return!1;return!0},parent:function(a){return!y.pseudos.empty(a)},header:function(a){return rb.test(a.nodeName)},input:function(a){return qb.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||b.toLowerCase()===a.type)},first:k(function(){return[0]}),last:k(function(a,b){return[b-1]}),eq:k(function(a,b,c){return[0>c?c+b:c]}),even:k(function(a,b){for(var c=0;b>c;c+=2)a.push(c);return a}),odd:k(function(a,b){for(var c=1;b>c;c+=2)a.push(c);return a}),lt:k(function(a,b,c){for(var d=0>c?c+b:c;--d>=0;)a.push(d);return a}),gt:k(function(a,b,c){for(var d=0>c?c+b:c;b>++d;)a.push(d);return a})}};for(w in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})y.pseudos[w]=i(w);for(w in{submit:!0,reset:!0})y.pseudos[w]=j(w);B=g.compile=function(a,b){var c,d=[],e=[],f=U[a+" "];if(!f){for(b||(b=l(a)),c=b.length;c--;)f=r(b[c]),f[N]?d.push(f):e.push(f);f=U(a,s(e,d))}return f},y.pseudos.nth=y.pseudos.eq,y.filters=v.prototype=y.pseudos,y.setFilters=new v,E(),g.attr=ib.attr,ib.find=g,ib.expr=g.selectors,ib.expr[":"]=ib.expr.pseudos,ib.unique=g.uniqueSort,ib.text=g.getText,ib.isXMLDoc=g.isXML,ib.contains=g.contains}(a);var Pb=/Until$/,Qb=/^(?:parents|prev(?:Until|All))/,Rb=/^.[^:#\[\.,]*$/,Sb=ib.expr.match.needsContext,Tb={children:!0,contents:!0,next:!0,prev:!0};ib.fn.extend({find:function(a){var b,c,d,e=this.length;if("string"!=typeof a)return d=this,this.pushStack(ib(a).filter(function(){for(b=0;e>b;b++)if(ib.contains(d[b],this))return!0}));for(c=[],b=0;e>b;b++)ib.find(a,this[b],c);return c=this.pushStack(e>1?ib.unique(c):c),c.selector=(this.selector?this.selector+" ":"")+a,c},has:function(a){var b,c=ib(a,this),d=c.length;return this.filter(function(){for(b=0;d>b;b++)if(ib.contains(this,c[b]))return!0})},not:function(a){return this.pushStack(l(this,a,!1))},filter:function(a){return this.pushStack(l(this,a,!0))
},is:function(a){return!!a&&("string"==typeof a?Sb.test(a)?ib(a,this.context).index(this[0])>=0:ib.filter(a,this).length>0:this.filter(a).length>0)},closest:function(a,b){for(var c,d=0,e=this.length,f=[],g=Sb.test(a)||"string"!=typeof a?ib(a,b||this.context):0;e>d;d++)for(c=this[d];c&&c.ownerDocument&&c!==b&&11!==c.nodeType;){if(g?g.index(c)>-1:ib.find.matchesSelector(c,a)){f.push(c);break}c=c.parentNode}return this.pushStack(f.length>1?ib.unique(f):f)},index:function(a){return a?"string"==typeof a?ib.inArray(this[0],ib(a)):ib.inArray(a.jquery?a[0]:a,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){var c="string"==typeof a?ib(a,b):ib.makeArray(a&&a.nodeType?[a]:a),d=ib.merge(this.get(),c);return this.pushStack(ib.unique(d))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}}),ib.fn.andSelf=ib.fn.addBack,ib.each({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return ib.dir(a,"parentNode")},parentsUntil:function(a,b,c){return ib.dir(a,"parentNode",c)},next:function(a){return k(a,"nextSibling")},prev:function(a){return k(a,"previousSibling")},nextAll:function(a){return ib.dir(a,"nextSibling")},prevAll:function(a){return ib.dir(a,"previousSibling")},nextUntil:function(a,b,c){return ib.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return ib.dir(a,"previousSibling",c)},siblings:function(a){return ib.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return ib.sibling(a.firstChild)},contents:function(a){return ib.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:ib.merge([],a.childNodes)}},function(a,b){ib.fn[a]=function(c,d){var e=ib.map(this,b,c);return Pb.test(a)||(d=c),d&&"string"==typeof d&&(e=ib.filter(d,e)),e=this.length>1&&!Tb[a]?ib.unique(e):e,this.length>1&&Qb.test(a)&&(e=e.reverse()),this.pushStack(e)}}),ib.extend({filter:function(a,b,c){return c&&(a=":not("+a+")"),1===b.length?ib.find.matchesSelector(b[0],a)?[b[0]]:[]:ib.find.matches(a,b)},dir:function(a,c,d){for(var e=[],f=a[c];f&&9!==f.nodeType&&(d===b||1!==f.nodeType||!ib(f).is(d));)1===f.nodeType&&e.push(f),f=f[c];return e},sibling:function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c}});var Ub="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",Vb=/ jQuery\d+="(?:null|\d+)"/g,Wb=RegExp("<(?:"+Ub+")[\\s/>]","i"),Xb=/^\s+/,Yb=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Zb=/<([\w:]+)/,$b=/<tbody/i,_b=/<|&#?\w+;/,ac=/<(?:script|style|link)/i,bc=/^(?:checkbox|radio)$/i,cc=/checked\s*(?:[^=]|=\s*.checked.)/i,dc=/^$|\/(?:java|ecma)script/i,ec=/^true\/(.*)/,fc=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,gc={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:ib.support.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},hc=m(W),ic=hc.appendChild(W.createElement("div"));gc.optgroup=gc.option,gc.tbody=gc.tfoot=gc.colgroup=gc.caption=gc.thead,gc.th=gc.td,ib.fn.extend({text:function(a){return ib.access(this,function(a){return a===b?ib.text(this):this.empty().append((this[0]&&this[0].ownerDocument||W).createTextNode(a))},null,a,arguments.length)},wrapAll:function(a){if(ib.isFunction(a))return this.each(function(b){ib(this).wrapAll(a.call(this,b))});if(this[0]){var b=ib(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){for(var a=this;a.firstChild&&1===a.firstChild.nodeType;)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){return ib.isFunction(a)?this.each(function(b){ib(this).wrapInner(a.call(this,b))}):this.each(function(){var b=ib(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=ib.isFunction(a);return this.each(function(c){ib(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){ib.nodeName(this,"body")||ib(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(a){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&this.appendChild(a)})},prepend:function(){return this.domManip(arguments,!0,function(a){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&this.insertBefore(a,this.firstChild)})},before:function(){return this.domManip(arguments,!1,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return this.domManip(arguments,!1,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},remove:function(a,b){for(var c,d=0;null!=(c=this[d]);d++)(!a||ib.filter(a,[c]).length>0)&&(b||1!==c.nodeType||ib.cleanData(t(c)),c.parentNode&&(b&&ib.contains(c.ownerDocument,c)&&q(t(c,"script")),c.parentNode.removeChild(c)));return this},empty:function(){for(var a,b=0;null!=(a=this[b]);b++){for(1===a.nodeType&&ib.cleanData(t(a,!1));a.firstChild;)a.removeChild(a.firstChild);a.options&&ib.nodeName(a,"select")&&(a.options.length=0)}return this},clone:function(a,b){return a=null==a?!1:a,b=null==b?a:b,this.map(function(){return ib.clone(this,a,b)})},html:function(a){return ib.access(this,function(a){var c=this[0]||{},d=0,e=this.length;if(a===b)return 1===c.nodeType?c.innerHTML.replace(Vb,""):b;if(!("string"!=typeof a||ac.test(a)||!ib.support.htmlSerialize&&Wb.test(a)||!ib.support.leadingWhitespace&&Xb.test(a)||gc[(Zb.exec(a)||["",""])[1].toLowerCase()])){a=a.replace(Yb,"<$1></$2>");try{for(;e>d;d++)c=this[d]||{},1===c.nodeType&&(ib.cleanData(t(c,!1)),c.innerHTML=a);c=0}catch(f){}}c&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(a){var b=ib.isFunction(a);return b||"string"==typeof a||(a=ib(a).not(this).detach()),this.domManip([a],!0,function(a){var b=this.nextSibling,c=this.parentNode;c&&(ib(this).remove(),c.insertBefore(a,b))})},detach:function(a){return this.remove(a,!0)},domManip:function(a,c,d){a=bb.apply([],a);var e,f,g,h,i,j,k=0,l=this.length,m=this,q=l-1,r=a[0],s=ib.isFunction(r);if(s||!(1>=l||"string"!=typeof r||ib.support.checkClone)&&cc.test(r))return this.each(function(e){var f=m.eq(e);s&&(a[0]=r.call(this,e,c?f.html():b)),f.domManip(a,c,d)});if(l&&(j=ib.buildFragment(a,this[0].ownerDocument,!1,this),e=j.firstChild,1===j.childNodes.length&&(j=e),e)){for(c=c&&ib.nodeName(e,"tr"),h=ib.map(t(j,"script"),o),g=h.length;l>k;k++)f=j,k!==q&&(f=ib.clone(f,!0,!0),g&&ib.merge(h,t(f,"script"))),d.call(c&&ib.nodeName(this[k],"table")?n(this[k],"tbody"):this[k],f,k);if(g)for(i=h[h.length-1].ownerDocument,ib.map(h,p),k=0;g>k;k++)f=h[k],dc.test(f.type||"")&&!ib._data(f,"globalEval")&&ib.contains(i,f)&&(f.src?ib.ajax({url:f.src,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0}):ib.globalEval((f.text||f.textContent||f.innerHTML||"").replace(fc,"")));j=e=null}return this}}),ib.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){ib.fn[a]=function(a){for(var c,d=0,e=[],f=ib(a),g=f.length-1;g>=d;d++)c=d===g?this:this.clone(!0),ib(f[d])[b](c),cb.apply(e,c.get());return this.pushStack(e)}}),ib.extend({clone:function(a,b,c){var d,e,f,g,h,i=ib.contains(a.ownerDocument,a);if(ib.support.html5Clone||ib.isXMLDoc(a)||!Wb.test("<"+a.nodeName+">")?f=a.cloneNode(!0):(ic.innerHTML=a.outerHTML,ic.removeChild(f=ic.firstChild)),!(ib.support.noCloneEvent&&ib.support.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||ib.isXMLDoc(a)))for(d=t(f),h=t(a),g=0;null!=(e=h[g]);++g)d[g]&&s(e,d[g]);if(b)if(c)for(h=h||t(a),d=d||t(f),g=0;null!=(e=h[g]);g++)r(e,d[g]);else r(a,f);return d=t(f,"script"),d.length>0&&q(d,!i&&t(a,"script")),d=h=e=null,f},buildFragment:function(a,b,c,d){for(var e,f,g,h,i,j,k,l=a.length,n=m(b),o=[],p=0;l>p;p++)if(f=a[p],f||0===f)if("object"===ib.type(f))ib.merge(o,f.nodeType?[f]:f);else if(_b.test(f)){for(h=h||n.appendChild(b.createElement("div")),i=(Zb.exec(f)||["",""])[1].toLowerCase(),k=gc[i]||gc._default,h.innerHTML=k[1]+f.replace(Yb,"<$1></$2>")+k[2],e=k[0];e--;)h=h.lastChild;if(!ib.support.leadingWhitespace&&Xb.test(f)&&o.push(b.createTextNode(Xb.exec(f)[0])),!ib.support.tbody)for(f="table"!==i||$b.test(f)?"<table>"!==k[1]||$b.test(f)?0:h:h.firstChild,e=f&&f.childNodes.length;e--;)ib.nodeName(j=f.childNodes[e],"tbody")&&!j.childNodes.length&&f.removeChild(j);for(ib.merge(o,h.childNodes),h.textContent="";h.firstChild;)h.removeChild(h.firstChild);h=n.lastChild}else o.push(b.createTextNode(f));for(h&&n.removeChild(h),ib.support.appendChecked||ib.grep(t(o,"input"),u),p=0;f=o[p++];)if((!d||-1===ib.inArray(f,d))&&(g=ib.contains(f.ownerDocument,f),h=t(n.appendChild(f),"script"),g&&q(h),c))for(e=0;f=h[e++];)dc.test(f.type||"")&&c.push(f);return h=null,n},cleanData:function(a,b){for(var c,d,e,f,g=0,h=ib.expando,i=ib.cache,j=ib.support.deleteExpando,k=ib.event.special;null!=(c=a[g]);g++)if((b||ib.acceptData(c))&&(e=c[h],f=e&&i[e])){if(f.events)for(d in f.events)k[d]?ib.event.remove(c,d):ib.removeEvent(c,d,f.handle);i[e]&&(delete i[e],j?delete c[h]:typeof c.removeAttribute!==V?c.removeAttribute(h):c[h]=null,_.push(e))}}});var jc,kc,lc,mc=/alpha\([^)]*\)/i,nc=/opacity\s*=\s*([^)]*)/,oc=/^(top|right|bottom|left)$/,pc=/^(none|table(?!-c[ea]).+)/,qc=/^margin/,rc=RegExp("^("+jb+")(.*)$","i"),sc=RegExp("^("+jb+")(?!px)[a-z%]+$","i"),tc=RegExp("^([+-])=("+jb+")","i"),uc={BODY:"block"},vc={position:"absolute",visibility:"hidden",display:"block"},wc={letterSpacing:0,fontWeight:400},xc=["Top","Right","Bottom","Left"],yc=["Webkit","O","Moz","ms"];ib.fn.extend({css:function(a,c){return ib.access(this,function(a,c,d){var e,f,g={},h=0;if(ib.isArray(c)){for(f=kc(a),e=c.length;e>h;h++)g[c[h]]=ib.css(a,c[h],!1,f);return g}return d!==b?ib.style(a,c,d):ib.css(a,c)},a,c,arguments.length>1)},show:function(){return x(this,!0)},hide:function(){return x(this)},toggle:function(a){var b="boolean"==typeof a;return this.each(function(){(b?a:w(this))?ib(this).show():ib(this).hide()})}}),ib.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=lc(a,"opacity");return""===c?"1":c}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":ib.support.cssFloat?"cssFloat":"styleFloat"},style:function(a,c,d,e){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var f,g,h,i=ib.camelCase(c),j=a.style;if(c=ib.cssProps[i]||(ib.cssProps[i]=v(j,i)),h=ib.cssHooks[c]||ib.cssHooks[i],d===b)return h&&"get"in h&&(f=h.get(a,!1,e))!==b?f:j[c];if(g=typeof d,"string"===g&&(f=tc.exec(d))&&(d=(f[1]+1)*f[2]+parseFloat(ib.css(a,c)),g="number"),!(null==d||"number"===g&&isNaN(d)||("number"!==g||ib.cssNumber[i]||(d+="px"),ib.support.clearCloneStyle||""!==d||0!==c.indexOf("background")||(j[c]="inherit"),h&&"set"in h&&(d=h.set(a,d,e))===b)))try{j[c]=d}catch(k){}}},css:function(a,c,d,e){var f,g,h,i=ib.camelCase(c);return c=ib.cssProps[i]||(ib.cssProps[i]=v(a.style,i)),h=ib.cssHooks[c]||ib.cssHooks[i],h&&"get"in h&&(g=h.get(a,!0,d)),g===b&&(g=lc(a,c,e)),"normal"===g&&c in wc&&(g=wc[c]),""===d||d?(f=parseFloat(g),d===!0||ib.isNumeric(f)?f||0:g):g},swap:function(a,b,c,d){var e,f,g={};for(f in b)g[f]=a.style[f],a.style[f]=b[f];e=c.apply(a,d||[]);for(f in b)a.style[f]=g[f];return e}}),a.getComputedStyle?(kc=function(b){return a.getComputedStyle(b,null)},lc=function(a,c,d){var e,f,g,h=d||kc(a),i=h?h.getPropertyValue(c)||h[c]:b,j=a.style;return h&&(""!==i||ib.contains(a.ownerDocument,a)||(i=ib.style(a,c)),sc.test(i)&&qc.test(c)&&(e=j.width,f=j.minWidth,g=j.maxWidth,j.minWidth=j.maxWidth=j.width=i,i=h.width,j.width=e,j.minWidth=f,j.maxWidth=g)),i}):W.documentElement.currentStyle&&(kc=function(a){return a.currentStyle},lc=function(a,c,d){var e,f,g,h=d||kc(a),i=h?h[c]:b,j=a.style;return null==i&&j&&j[c]&&(i=j[c]),sc.test(i)&&!oc.test(c)&&(e=j.left,f=a.runtimeStyle,g=f&&f.left,g&&(f.left=a.currentStyle.left),j.left="fontSize"===c?"1em":i,i=j.pixelLeft+"px",j.left=e,g&&(f.left=g)),""===i?"auto":i}),ib.each(["height","width"],function(a,c){ib.cssHooks[c]={get:function(a,d,e){return d?0===a.offsetWidth&&pc.test(ib.css(a,"display"))?ib.swap(a,vc,function(){return A(a,c,e)}):A(a,c,e):b},set:function(a,b,d){var e=d&&kc(a);return y(a,b,d?z(a,c,d,ib.support.boxSizing&&"border-box"===ib.css(a,"boxSizing",!1,e),e):0)}}}),ib.support.opacity||(ib.cssHooks.opacity={get:function(a,b){return nc.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":b?"1":""},set:function(a,b){var c=a.style,d=a.currentStyle,e=ib.isNumeric(b)?"alpha(opacity="+100*b+")":"",f=d&&d.filter||c.filter||"";c.zoom=1,(b>=1||""===b)&&""===ib.trim(f.replace(mc,""))&&c.removeAttribute&&(c.removeAttribute("filter"),""===b||d&&!d.filter)||(c.filter=mc.test(f)?f.replace(mc,e):f+" "+e)}}),ib(function(){ib.support.reliableMarginRight||(ib.cssHooks.marginRight={get:function(a,c){return c?ib.swap(a,{display:"inline-block"},lc,[a,"marginRight"]):b}}),!ib.support.pixelPosition&&ib.fn.position&&ib.each(["top","left"],function(a,c){ib.cssHooks[c]={get:function(a,d){return d?(d=lc(a,c),sc.test(d)?ib(a).position()[c]+"px":d):b}}})}),ib.expr&&ib.expr.filters&&(ib.expr.filters.hidden=function(a){return 0>=a.offsetWidth&&0>=a.offsetHeight||!ib.support.reliableHiddenOffsets&&"none"===(a.style&&a.style.display||ib.css(a,"display"))},ib.expr.filters.visible=function(a){return!ib.expr.filters.hidden(a)}),ib.each({margin:"",padding:"",border:"Width"},function(a,b){ib.cssHooks[a+b]={expand:function(c){for(var d=0,e={},f="string"==typeof c?c.split(" "):[c];4>d;d++)e[a+xc[d]+b]=f[d]||f[d-2]||f[0];return e}},qc.test(a)||(ib.cssHooks[a+b].set=y)});var zc=/%20/g,Ac=/\[\]$/,Bc=/\r?\n/g,Cc=/^(?:submit|button|image|reset|file)$/i,Dc=/^(?:input|select|textarea|keygen)/i;ib.fn.extend({serialize:function(){return ib.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=ib.prop(this,"elements");return a?ib.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!ib(this).is(":disabled")&&Dc.test(this.nodeName)&&!Cc.test(a)&&(this.checked||!bc.test(a))}).map(function(a,b){var c=ib(this).val();return null==c?null:ib.isArray(c)?ib.map(c,function(a){return{name:b.name,value:a.replace(Bc,"\r\n")}}):{name:b.name,value:c.replace(Bc,"\r\n")}}).get()}}),ib.param=function(a,c){var d,e=[],f=function(a,b){b=ib.isFunction(b)?b():null==b?"":b,e[e.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};if(c===b&&(c=ib.ajaxSettings&&ib.ajaxSettings.traditional),ib.isArray(a)||a.jquery&&!ib.isPlainObject(a))ib.each(a,function(){f(this.name,this.value)});else for(d in a)D(d,a[d],c,f);return e.join("&").replace(zc,"+")},ib.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){ib.fn[b]=function(a,c){return arguments.length>0?this.on(b,null,a,c):this.trigger(b)}}),ib.fn.hover=function(a,b){return this.mouseenter(a).mouseleave(b||a)};var Ec,Fc,Gc=ib.now(),Hc=/\?/,Ic=/#.*$/,Jc=/([?&])_=[^&]*/,Kc=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Lc=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Mc=/^(?:GET|HEAD)$/,Nc=/^\/\//,Oc=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,Pc=ib.fn.load,Qc={},Rc={},Sc="*/".concat("*");try{Fc=X.href}catch(Tc){Fc=W.createElement("a"),Fc.href="",Fc=Fc.href}Ec=Oc.exec(Fc.toLowerCase())||[],ib.fn.load=function(a,c,d){if("string"!=typeof a&&Pc)return Pc.apply(this,arguments);var e,f,g,h=this,i=a.indexOf(" ");return i>=0&&(e=a.slice(i,a.length),a=a.slice(0,i)),ib.isFunction(c)?(d=c,c=b):c&&"object"==typeof c&&(g="POST"),h.length>0&&ib.ajax({url:a,type:g,dataType:"html",data:c}).done(function(a){f=arguments,h.html(e?ib("<div>").append(ib.parseHTML(a)).find(e):a)}).complete(d&&function(a,b){h.each(d,f||[a.responseText,b,a])}),this},ib.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(a,b){ib.fn[b]=function(a){return this.on(b,a)}}),ib.each(["get","post"],function(a,c){ib[c]=function(a,d,e,f){return ib.isFunction(d)&&(f=f||e,e=d,d=b),ib.ajax({url:a,type:c,dataType:f,data:d,success:e})}}),ib.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Fc,type:"GET",isLocal:Lc.test(Ec[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Sc,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":a.String,"text html":!0,"text json":ib.parseJSON,"text xml":ib.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?G(G(a,ib.ajaxSettings),b):G(ib.ajaxSettings,a)},ajaxPrefilter:E(Qc),ajaxTransport:E(Rc),ajax:function(a,c){function d(a,c,d,e){var f,l,s,t,v,x=c;2!==u&&(u=2,i&&clearTimeout(i),k=b,h=e||"",w.readyState=a>0?4:0,d&&(t=H(m,w,d)),a>=200&&300>a||304===a?(m.ifModified&&(v=w.getResponseHeader("Last-Modified"),v&&(ib.lastModified[g]=v),v=w.getResponseHeader("etag"),v&&(ib.etag[g]=v)),204===a?(f=!0,x="nocontent"):304===a?(f=!0,x="notmodified"):(f=I(m,t),x=f.state,l=f.data,s=f.error,f=!s)):(s=x,(a||!x)&&(x="error",0>a&&(a=0))),w.status=a,w.statusText=(c||x)+"",f?p.resolveWith(n,[l,x,w]):p.rejectWith(n,[w,x,s]),w.statusCode(r),r=b,j&&o.trigger(f?"ajaxSuccess":"ajaxError",[w,m,f?l:s]),q.fireWith(n,[w,x]),j&&(o.trigger("ajaxComplete",[w,m]),--ib.active||ib.event.trigger("ajaxStop")))}"object"==typeof a&&(c=a,a=b),c=c||{};var e,f,g,h,i,j,k,l,m=ib.ajaxSetup({},c),n=m.context||m,o=m.context&&(n.nodeType||n.jquery)?ib(n):ib.event,p=ib.Deferred(),q=ib.Callbacks("once memory"),r=m.statusCode||{},s={},t={},u=0,v="canceled",w={readyState:0,getResponseHeader:function(a){var b;if(2===u){if(!l)for(l={};b=Kc.exec(h);)l[b[1].toLowerCase()]=b[2];b=l[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return 2===u?h:null},setRequestHeader:function(a,b){var c=a.toLowerCase();return u||(a=t[c]=t[c]||a,s[a]=b),this},overrideMimeType:function(a){return u||(m.mimeType=a),this},statusCode:function(a){var b;if(a)if(2>u)for(b in a)r[b]=[r[b],a[b]];else w.always(a[w.status]);return this},abort:function(a){var b=a||v;return k&&k.abort(b),d(0,b),this}};if(p.promise(w).complete=q.add,w.success=w.done,w.error=w.fail,m.url=((a||m.url||Fc)+"").replace(Ic,"").replace(Nc,Ec[1]+"//"),m.type=c.method||c.type||m.method||m.type,m.dataTypes=ib.trim(m.dataType||"*").toLowerCase().match(kb)||[""],null==m.crossDomain&&(e=Oc.exec(m.url.toLowerCase()),m.crossDomain=!(!e||e[1]===Ec[1]&&e[2]===Ec[2]&&(e[3]||("http:"===e[1]?80:443))==(Ec[3]||("http:"===Ec[1]?80:443)))),m.data&&m.processData&&"string"!=typeof m.data&&(m.data=ib.param(m.data,m.traditional)),F(Qc,m,c,w),2===u)return w;j=m.global,j&&0===ib.active++&&ib.event.trigger("ajaxStart"),m.type=m.type.toUpperCase(),m.hasContent=!Mc.test(m.type),g=m.url,m.hasContent||(m.data&&(g=m.url+=(Hc.test(g)?"&":"?")+m.data,delete m.data),m.cache===!1&&(m.url=Jc.test(g)?g.replace(Jc,"$1_="+Gc++):g+(Hc.test(g)?"&":"?")+"_="+Gc++)),m.ifModified&&(ib.lastModified[g]&&w.setRequestHeader("If-Modified-Since",ib.lastModified[g]),ib.etag[g]&&w.setRequestHeader("If-None-Match",ib.etag[g])),(m.data&&m.hasContent&&m.contentType!==!1||c.contentType)&&w.setRequestHeader("Content-Type",m.contentType),w.setRequestHeader("Accept",m.dataTypes[0]&&m.accepts[m.dataTypes[0]]?m.accepts[m.dataTypes[0]]+("*"!==m.dataTypes[0]?", "+Sc+"; q=0.01":""):m.accepts["*"]);for(f in m.headers)w.setRequestHeader(f,m.headers[f]);if(!m.beforeSend||m.beforeSend.call(n,w,m)!==!1&&2!==u){v="abort";for(f in{success:1,error:1,complete:1})w[f](m[f]);if(k=F(Rc,m,c,w)){w.readyState=1,j&&o.trigger("ajaxSend",[w,m]),m.async&&m.timeout>0&&(i=setTimeout(function(){w.abort("timeout")},m.timeout));try{u=1,k.send(s,d)}catch(x){if(!(2>u))throw x;d(-1,x)}}else d(-1,"No Transport");return w}return w.abort()},getScript:function(a,c){return ib.get(a,b,c,"script")},getJSON:function(a,b,c){return ib.get(a,b,c,"json")}}),ib.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(a){return ib.globalEval(a),a}}}),ib.ajaxPrefilter("script",function(a){a.cache===b&&(a.cache=!1),a.crossDomain&&(a.type="GET",a.global=!1)}),ib.ajaxTransport("script",function(a){if(a.crossDomain){var c,d=W.head||ib("head")[0]||W.documentElement;return{send:function(b,e){c=W.createElement("script"),c.async=!0,a.scriptCharset&&(c.charset=a.scriptCharset),c.src=a.url,c.onload=c.onreadystatechange=function(a,b){(b||!c.readyState||/loaded|complete/.test(c.readyState))&&(c.onload=c.onreadystatechange=null,c.parentNode&&c.parentNode.removeChild(c),c=null,b||e(200,"success"))},d.insertBefore(c,d.firstChild)},abort:function(){c&&c.onload(b,!0)}}}});var Uc=[],Vc=/(=)\?(?=&|$)|\?\?/;ib.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=Uc.pop()||ib.expando+"_"+Gc++;return this[a]=!0,a}}),ib.ajaxPrefilter("json jsonp",function(c,d,e){var f,g,h,i=c.jsonp!==!1&&(Vc.test(c.url)?"url":"string"==typeof c.data&&!(c.contentType||"").indexOf("application/x-www-form-urlencoded")&&Vc.test(c.data)&&"data");return i||"jsonp"===c.dataTypes[0]?(f=c.jsonpCallback=ib.isFunction(c.jsonpCallback)?c.jsonpCallback():c.jsonpCallback,i?c[i]=c[i].replace(Vc,"$1"+f):c.jsonp!==!1&&(c.url+=(Hc.test(c.url)?"&":"?")+c.jsonp+"="+f),c.converters["script json"]=function(){return h||ib.error(f+" was not called"),h[0]},c.dataTypes[0]="json",g=a[f],a[f]=function(){h=arguments},e.always(function(){a[f]=g,c[f]&&(c.jsonpCallback=d.jsonpCallback,Uc.push(f)),h&&ib.isFunction(g)&&g(h[0]),h=g=b}),"script"):b});var Wc,Xc,Yc=0,Zc=a.ActiveXObject&&function(){var a;for(a in Wc)Wc[a](b,!0)};ib.ajaxSettings.xhr=a.ActiveXObject?function(){return!this.isLocal&&J()||K()}:J,Xc=ib.ajaxSettings.xhr(),ib.support.cors=!!Xc&&"withCredentials"in Xc,Xc=ib.support.ajax=!!Xc,Xc&&ib.ajaxTransport(function(c){if(!c.crossDomain||ib.support.cors){var d;return{send:function(e,f){var g,h,i=c.xhr();if(c.username?i.open(c.type,c.url,c.async,c.username,c.password):i.open(c.type,c.url,c.async),c.xhrFields)for(h in c.xhrFields)i[h]=c.xhrFields[h];c.mimeType&&i.overrideMimeType&&i.overrideMimeType(c.mimeType),c.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest");try{for(h in e)i.setRequestHeader(h,e[h])}catch(j){}i.send(c.hasContent&&c.data||null),d=function(a,e){var h,j,k,l;try{if(d&&(e||4===i.readyState))if(d=b,g&&(i.onreadystatechange=ib.noop,Zc&&delete Wc[g]),e)4!==i.readyState&&i.abort();else{l={},h=i.status,j=i.getAllResponseHeaders(),"string"==typeof i.responseText&&(l.text=i.responseText);try{k=i.statusText}catch(m){k=""}h||!c.isLocal||c.crossDomain?1223===h&&(h=204):h=l.text?200:404}}catch(n){e||f(-1,n)}l&&f(h,k,l,j)},c.async?4===i.readyState?setTimeout(d):(g=++Yc,Zc&&(Wc||(Wc={},ib(a).unload(Zc)),Wc[g]=d),i.onreadystatechange=d):d()},abort:function(){d&&d(b,!0)}}}});var $c,_c,ad=/^(?:toggle|show|hide)$/,bd=RegExp("^(?:([+-])=|)("+jb+")([a-z%]*)$","i"),cd=/queueHooks$/,dd=[P],ed={"*":[function(a,b){var c,d,e=this.createTween(a,b),f=bd.exec(b),g=e.cur(),h=+g||0,i=1,j=20;if(f){if(c=+f[2],d=f[3]||(ib.cssNumber[a]?"":"px"),"px"!==d&&h){h=ib.css(e.elem,a,!0)||c||1;do i=i||".5",h/=i,ib.style(e.elem,a,h+d);while(i!==(i=e.cur()/g)&&1!==i&&--j)}e.unit=d,e.start=h,e.end=f[1]?h+(f[1]+1)*c:c}return e}]};ib.Animation=ib.extend(N,{tweener:function(a,b){ib.isFunction(a)?(b=a,a=["*"]):a=a.split(" ");for(var c,d=0,e=a.length;e>d;d++)c=a[d],ed[c]=ed[c]||[],ed[c].unshift(b)},prefilter:function(a,b){b?dd.unshift(a):dd.push(a)}}),ib.Tween=Q,Q.prototype={constructor:Q,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||"swing",this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(ib.cssNumber[c]?"":"px")},cur:function(){var a=Q.propHooks[this.prop];return a&&a.get?a.get(this):Q.propHooks._default.get(this)},run:function(a){var b,c=Q.propHooks[this.prop];return this.pos=b=this.options.duration?ib.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):Q.propHooks._default.set(this),this}},Q.prototype.init.prototype=Q.prototype,Q.propHooks={_default:{get:function(a){var b;return null==a.elem[a.prop]||a.elem.style&&null!=a.elem.style[a.prop]?(b=ib.css(a.elem,a.prop,""),b&&"auto"!==b?b:0):a.elem[a.prop]},set:function(a){ib.fx.step[a.prop]?ib.fx.step[a.prop](a):a.elem.style&&(null!=a.elem.style[ib.cssProps[a.prop]]||ib.cssHooks[a.prop])?ib.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}},Q.propHooks.scrollTop=Q.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},ib.each(["toggle","show","hide"],function(a,b){var c=ib.fn[b];ib.fn[b]=function(a,d,e){return null==a||"boolean"==typeof a?c.apply(this,arguments):this.animate(R(b,!0),a,d,e)}}),ib.fn.extend({fadeTo:function(a,b,c,d){return this.filter(w).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=ib.isEmptyObject(a),f=ib.speed(b,c,d),g=function(){var b=N(this,ib.extend({},a),f);g.finish=function(){b.stop(!0)},(e||ib._data(this,"finish"))&&b.stop(!0)};return g.finish=g,e||f.queue===!1?this.each(g):this.queue(f.queue,g)},stop:function(a,c,d){var e=function(a){var b=a.stop;delete a.stop,b(d)};return"string"!=typeof a&&(d=c,c=a,a=b),c&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){var b=!0,c=null!=a&&a+"queueHooks",f=ib.timers,g=ib._data(this);if(c)g[c]&&g[c].stop&&e(g[c]);else for(c in g)g[c]&&g[c].stop&&cd.test(c)&&e(g[c]);for(c=f.length;c--;)f[c].elem!==this||null!=a&&f[c].queue!==a||(f[c].anim.stop(d),b=!1,f.splice(c,1));(b||!d)&&ib.dequeue(this,a)})},finish:function(a){return a!==!1&&(a=a||"fx"),this.each(function(){var b,c=ib._data(this),d=c[a+"queue"],e=c[a+"queueHooks"],f=ib.timers,g=d?d.length:0;for(c.finish=!0,ib.queue(this,a,[]),e&&e.cur&&e.cur.finish&&e.cur.finish.call(this),b=f.length;b--;)f[b].elem===this&&f[b].queue===a&&(f[b].anim.stop(!0),f.splice(b,1));for(b=0;g>b;b++)d[b]&&d[b].finish&&d[b].finish.call(this);delete c.finish})}}),ib.each({slideDown:R("show"),slideUp:R("hide"),slideToggle:R("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){ib.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),ib.speed=function(a,b,c){var d=a&&"object"==typeof a?ib.extend({},a):{complete:c||!c&&b||ib.isFunction(a)&&a,duration:a,easing:c&&b||b&&!ib.isFunction(b)&&b};return d.duration=ib.fx.off?0:"number"==typeof d.duration?d.duration:d.duration in ib.fx.speeds?ib.fx.speeds[d.duration]:ib.fx.speeds._default,(null==d.queue||d.queue===!0)&&(d.queue="fx"),d.old=d.complete,d.complete=function(){ib.isFunction(d.old)&&d.old.call(this),d.queue&&ib.dequeue(this,d.queue)},d},ib.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2}},ib.timers=[],ib.fx=Q.prototype.init,ib.fx.tick=function(){var a,c=ib.timers,d=0;for($c=ib.now();c.length>d;d++)a=c[d],a()||c[d]!==a||c.splice(d--,1);c.length||ib.fx.stop(),$c=b},ib.fx.timer=function(a){a()&&ib.timers.push(a)&&ib.fx.start()},ib.fx.interval=13,ib.fx.start=function(){_c||(_c=setInterval(ib.fx.tick,ib.fx.interval))},ib.fx.stop=function(){clearInterval(_c),_c=null},ib.fx.speeds={slow:600,fast:200,_default:400},ib.fx.step={},ib.expr&&ib.expr.filters&&(ib.expr.filters.animated=function(a){return ib.grep(ib.timers,function(b){return a===b.elem}).length}),ib.fn.offset=function(a){if(arguments.length)return a===b?this:this.each(function(b){ib.offset.setOffset(this,a,b)});var c,d,e={top:0,left:0},f=this[0],g=f&&f.ownerDocument;return g?(c=g.documentElement,ib.contains(c,f)?(typeof f.getBoundingClientRect!==V&&(e=f.getBoundingClientRect()),d=S(g),{top:e.top+(d.pageYOffset||c.scrollTop)-(c.clientTop||0),left:e.left+(d.pageXOffset||c.scrollLeft)-(c.clientLeft||0)}):e):void 0},ib.offset={setOffset:function(a,b,c){var d=ib.css(a,"position");"static"===d&&(a.style.position="relative");var e,f,g=ib(a),h=g.offset(),i=ib.css(a,"top"),j=ib.css(a,"left"),k=("absolute"===d||"fixed"===d)&&ib.inArray("auto",[i,j])>-1,l={},m={};k?(m=g.position(),e=m.top,f=m.left):(e=parseFloat(i)||0,f=parseFloat(j)||0),ib.isFunction(b)&&(b=b.call(a,c,h)),null!=b.top&&(l.top=b.top-h.top+e),null!=b.left&&(l.left=b.left-h.left+f),"using"in b?b.using.call(a,l):g.css(l)}},ib.fn.extend({position:function(){if(this[0]){var a,b,c={top:0,left:0},d=this[0];return"fixed"===ib.css(d,"position")?b=d.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),ib.nodeName(a[0],"html")||(c=a.offset()),c.top+=ib.css(a[0],"borderTopWidth",!0),c.left+=ib.css(a[0],"borderLeftWidth",!0)),{top:b.top-c.top-ib.css(d,"marginTop",!0),left:b.left-c.left-ib.css(d,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent||W.documentElement;a&&!ib.nodeName(a,"html")&&"static"===ib.css(a,"position");)a=a.offsetParent;return a||W.documentElement})}}),ib.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,c){var d=/Y/.test(c);ib.fn[a]=function(e){return ib.access(this,function(a,e,f){var g=S(a);return f===b?g?c in g?g[c]:g.document.documentElement[e]:a[e]:(g?g.scrollTo(d?ib(g).scrollLeft():f,d?f:ib(g).scrollTop()):a[e]=f,b)},a,e,arguments.length,null)}}),ib.each({Height:"height",Width:"width"},function(a,c){ib.each({padding:"inner"+a,content:c,"":"outer"+a},function(d,e){ib.fn[e]=function(e,f){var g=arguments.length&&(d||"boolean"!=typeof e),h=d||(e===!0||f===!0?"margin":"border");return ib.access(this,function(c,d,e){var f;return ib.isWindow(c)?c.document.documentElement["client"+a]:9===c.nodeType?(f=c.documentElement,Math.max(c.body["scroll"+a],f["scroll"+a],c.body["offset"+a],f["offset"+a],f["client"+a])):e===b?ib.css(c,d,h):ib.style(c,d,e,h)},c,g?e:b,g,null)}})}),a.jQuery=a.$=ib,"function"==typeof define&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return ib})}(window),function(){var a=this,b=a._,c={},d=Array.prototype,e=Object.prototype,f=Function.prototype,g=d.push,h=d.slice,i=d.concat,j=e.toString,k=e.hasOwnProperty,l=d.forEach,m=d.map,n=d.reduce,o=d.reduceRight,p=d.filter,q=d.every,r=d.some,s=d.indexOf,t=d.lastIndexOf,u=Array.isArray,v=Object.keys,w=f.bind,x=function(a){return a instanceof x?a:this instanceof x?(this._wrapped=a,void 0):new x(a)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=x),exports._=x):a._=x,x.VERSION="1.5.0";var y=x.each=x.forEach=function(a,b,d){if(null!=a)if(l&&a.forEach===l)a.forEach(b,d);else if(a.length===+a.length){for(var e=0,f=a.length;f>e;e++)if(b.call(d,a[e],e,a)===c)return}else for(var g in a)if(x.has(a,g)&&b.call(d,a[g],g,a)===c)return};x.map=x.collect=function(a,b,c){var d=[];return null==a?d:m&&a.map===m?a.map(b,c):(y(a,function(a,e,f){d.push(b.call(c,a,e,f))}),d)};var z="Reduce of empty array with no initial value";x.reduce=x.foldl=x.inject=function(a,b,c,d){var e=arguments.length>2;if(null==a&&(a=[]),n&&a.reduce===n)return d&&(b=x.bind(b,d)),e?a.reduce(b,c):a.reduce(b);if(y(a,function(a,f,g){e?c=b.call(d,c,a,f,g):(c=a,e=!0)}),!e)throw new TypeError(z);return c},x.reduceRight=x.foldr=function(a,b,c,d){var e=arguments.length>2;if(null==a&&(a=[]),o&&a.reduceRight===o)return d&&(b=x.bind(b,d)),e?a.reduceRight(b,c):a.reduceRight(b);var f=a.length;if(f!==+f){var g=x.keys(a);f=g.length}if(y(a,function(h,i,j){i=g?g[--f]:--f,e?c=b.call(d,c,a[i],i,j):(c=a[i],e=!0)}),!e)throw new TypeError(z);return c},x.find=x.detect=function(a,b,c){var d;return A(a,function(a,e,f){return b.call(c,a,e,f)?(d=a,!0):void 0
}),d},x.filter=x.select=function(a,b,c){var d=[];return null==a?d:p&&a.filter===p?a.filter(b,c):(y(a,function(a,e,f){b.call(c,a,e,f)&&d.push(a)}),d)},x.reject=function(a,b,c){return x.filter(a,function(a,d,e){return!b.call(c,a,d,e)},c)},x.every=x.all=function(a,b,d){b||(b=x.identity);var e=!0;return null==a?e:q&&a.every===q?a.every(b,d):(y(a,function(a,f,g){return(e=e&&b.call(d,a,f,g))?void 0:c}),!!e)};var A=x.some=x.any=function(a,b,d){b||(b=x.identity);var e=!1;return null==a?e:r&&a.some===r?a.some(b,d):(y(a,function(a,f,g){return e||(e=b.call(d,a,f,g))?c:void 0}),!!e)};x.contains=x.include=function(a,b){return null==a?!1:s&&a.indexOf===s?-1!=a.indexOf(b):A(a,function(a){return a===b})},x.invoke=function(a,b){var c=h.call(arguments,2),d=x.isFunction(b);return x.map(a,function(a){return(d?b:a[b]).apply(a,c)})},x.pluck=function(a,b){return x.map(a,function(a){return a[b]})},x.where=function(a,b,c){return x.isEmpty(b)?c?void 0:[]:x[c?"find":"filter"](a,function(a){for(var c in b)if(b[c]!==a[c])return!1;return!0})},x.findWhere=function(a,b){return x.where(a,b,!0)},x.max=function(a,b,c){if(!b&&x.isArray(a)&&a[0]===+a[0]&&a.length<65535)return Math.max.apply(Math,a);if(!b&&x.isEmpty(a))return-1/0;var d={computed:-1/0,value:-1/0};return y(a,function(a,e,f){var g=b?b.call(c,a,e,f):a;g>d.computed&&(d={value:a,computed:g})}),d.value},x.min=function(a,b,c){if(!b&&x.isArray(a)&&a[0]===+a[0]&&a.length<65535)return Math.min.apply(Math,a);if(!b&&x.isEmpty(a))return 1/0;var d={computed:1/0,value:1/0};return y(a,function(a,e,f){var g=b?b.call(c,a,e,f):a;g<d.computed&&(d={value:a,computed:g})}),d.value},x.shuffle=function(a){var b,c=0,d=[];return y(a,function(a){b=x.random(c++),d[c-1]=d[b],d[b]=a}),d};var B=function(a){return x.isFunction(a)?a:function(b){return b[a]}};x.sortBy=function(a,b,c){var d=B(b);return x.pluck(x.map(a,function(a,b,e){return{value:a,index:b,criteria:d.call(c,a,b,e)}}).sort(function(a,b){var c=a.criteria,d=b.criteria;if(c!==d){if(c>d||void 0===c)return 1;if(d>c||void 0===d)return-1}return a.index<b.index?-1:1}),"value")};var C=function(a,b,c,d){var e={},f=B(null==b?x.identity:b);return y(a,function(b,g){var h=f.call(c,b,g,a);d(e,h,b)}),e};x.groupBy=function(a,b,c){return C(a,b,c,function(a,b,c){(x.has(a,b)?a[b]:a[b]=[]).push(c)})},x.countBy=function(a,b,c){return C(a,b,c,function(a,b){x.has(a,b)||(a[b]=0),a[b]++})},x.sortedIndex=function(a,b,c,d){c=null==c?x.identity:B(c);for(var e=c.call(d,b),f=0,g=a.length;g>f;){var h=f+g>>>1;c.call(d,a[h])<e?f=h+1:g=h}return f},x.toArray=function(a){return a?x.isArray(a)?h.call(a):a.length===+a.length?x.map(a,x.identity):x.values(a):[]},x.size=function(a){return null==a?0:a.length===+a.length?a.length:x.keys(a).length},x.first=x.head=x.take=function(a,b,c){return null==a?void 0:null==b||c?a[0]:h.call(a,0,b)},x.initial=function(a,b,c){return h.call(a,0,a.length-(null==b||c?1:b))},x.last=function(a,b,c){return null==a?void 0:null==b||c?a[a.length-1]:h.call(a,Math.max(a.length-b,0))},x.rest=x.tail=x.drop=function(a,b,c){return h.call(a,null==b||c?1:b)},x.compact=function(a){return x.filter(a,x.identity)};var D=function(a,b,c){return b&&x.every(a,x.isArray)?i.apply(c,a):(y(a,function(a){x.isArray(a)||x.isArguments(a)?b?g.apply(c,a):D(a,b,c):c.push(a)}),c)};x.flatten=function(a,b){return D(a,b,[])},x.without=function(a){return x.difference(a,h.call(arguments,1))},x.uniq=x.unique=function(a,b,c,d){x.isFunction(b)&&(d=c,c=b,b=!1);var e=c?x.map(a,c,d):a,f=[],g=[];return y(e,function(c,d){(b?d&&g[g.length-1]===c:x.contains(g,c))||(g.push(c),f.push(a[d]))}),f},x.union=function(){return x.uniq(x.flatten(arguments,!0))},x.intersection=function(a){var b=h.call(arguments,1);return x.filter(x.uniq(a),function(a){return x.every(b,function(b){return x.indexOf(b,a)>=0})})},x.difference=function(a){var b=i.apply(d,h.call(arguments,1));return x.filter(a,function(a){return!x.contains(b,a)})},x.zip=function(){return x.unzip.apply(x,h.call(arguments))},x.unzip=function(){for(var a=x.max(x.pluck(arguments,"length").concat(0)),b=new Array(a),c=0;a>c;c++)b[c]=x.pluck(arguments,""+c);return b},x.object=function(a,b){if(null==a)return{};for(var c={},d=0,e=a.length;e>d;d++)b?c[a[d]]=b[d]:c[a[d][0]]=a[d][1];return c},x.indexOf=function(a,b,c){if(null==a)return-1;var d=0,e=a.length;if(c){if("number"!=typeof c)return d=x.sortedIndex(a,b),a[d]===b?d:-1;d=0>c?Math.max(0,e+c):c}if(s&&a.indexOf===s)return a.indexOf(b,c);for(;e>d;d++)if(a[d]===b)return d;return-1},x.lastIndexOf=function(a,b,c){if(null==a)return-1;var d=null!=c;if(t&&a.lastIndexOf===t)return d?a.lastIndexOf(b,c):a.lastIndexOf(b);for(var e=d?c:a.length;e--;)if(a[e]===b)return e;return-1},x.range=function(a,b,c){arguments.length<=1&&(b=a||0,a=0),c=arguments[2]||1;for(var d=Math.max(Math.ceil((b-a)/c),0),e=0,f=new Array(d);d>e;)f[e++]=a,a+=c;return f};var E=function(){};x.bind=function(a,b){var c,d;if(w&&a.bind===w)return w.apply(a,h.call(arguments,1));if(!x.isFunction(a))throw new TypeError;return c=h.call(arguments,2),d=function(){if(this instanceof d){E.prototype=a.prototype;var e=new E;E.prototype=null;var f=a.apply(e,c.concat(h.call(arguments)));return Object(f)===f?f:e}return a.apply(b,c.concat(h.call(arguments)))}},x.partial=function(a){var b=h.call(arguments,1);return function(){return a.apply(this,b.concat(h.call(arguments)))}},x.bindAll=function(a){var b=h.call(arguments,1);if(0===b.length)throw new Error("bindAll must be passed function names");return y(b,function(b){a[b]=x.bind(a[b],a)}),a},x.memoize=function(a,b){var c={};return b||(b=x.identity),function(){var d=b.apply(this,arguments);return x.has(c,d)?c[d]:c[d]=a.apply(this,arguments)}},x.delay=function(a,b){var c=h.call(arguments,2);return setTimeout(function(){return a.apply(null,c)},b)},x.defer=function(a){return x.delay.apply(x,[a,1].concat(h.call(arguments,1)))},x.throttle=function(a,b,c){var d,e,f,g=null,h=0;c||(c={});var i=function(){h=new Date,g=null,f=a.apply(d,e)};return function(){var j=new Date;!h&&c.leading===!1&&(h=j);var k=b-(j-h);return d=this,e=arguments,0>=k?(clearTimeout(g),g=null,h=j,f=a.apply(d,e)):!g&&c.trailing!==!1&&(g=setTimeout(i,k)),f}},x.debounce=function(a,b,c){var d,e=null;return function(){var f=this,g=arguments,h=function(){e=null,c||(d=a.apply(f,g))},i=c&&!e;return clearTimeout(e),e=setTimeout(h,b),i&&(d=a.apply(f,g)),d}},x.once=function(a){var b,c=!1;return function(){return c?b:(c=!0,b=a.apply(this,arguments),a=null,b)}},x.wrap=function(a,b){return function(){var c=[a];return g.apply(c,arguments),b.apply(this,c)}},x.compose=function(){var a=arguments;return function(){for(var b=arguments,c=a.length-1;c>=0;c--)b=[a[c].apply(this,b)];return b[0]}},x.after=function(a,b){return function(){return--a<1?b.apply(this,arguments):void 0}},x.keys=v||function(a){if(a!==Object(a))throw new TypeError("Invalid object");var b=[];for(var c in a)x.has(a,c)&&b.push(c);return b},x.values=function(a){var b=[];for(var c in a)x.has(a,c)&&b.push(a[c]);return b},x.pairs=function(a){var b=[];for(var c in a)x.has(a,c)&&b.push([c,a[c]]);return b},x.invert=function(a){var b={};for(var c in a)x.has(a,c)&&(b[a[c]]=c);return b},x.functions=x.methods=function(a){var b=[];for(var c in a)x.isFunction(a[c])&&b.push(c);return b.sort()},x.extend=function(a){return y(h.call(arguments,1),function(b){if(b)for(var c in b)a[c]=b[c]}),a},x.pick=function(a){var b={},c=i.apply(d,h.call(arguments,1));return y(c,function(c){c in a&&(b[c]=a[c])}),b},x.omit=function(a){var b={},c=i.apply(d,h.call(arguments,1));for(var e in a)x.contains(c,e)||(b[e]=a[e]);return b},x.defaults=function(a){return y(h.call(arguments,1),function(b){if(b)for(var c in b)void 0===a[c]&&(a[c]=b[c])}),a},x.clone=function(a){return x.isObject(a)?x.isArray(a)?a.slice():x.extend({},a):a},x.tap=function(a,b){return b(a),a};var F=function(a,b,c,d){if(a===b)return 0!==a||1/a==1/b;if(null==a||null==b)return a===b;a instanceof x&&(a=a._wrapped),b instanceof x&&(b=b._wrapped);var e=j.call(a);if(e!=j.call(b))return!1;switch(e){case"[object String]":return a==String(b);case"[object Number]":return a!=+a?b!=+b:0==a?1/a==1/b:a==+b;case"[object Date]":case"[object Boolean]":return+a==+b;case"[object RegExp]":return a.source==b.source&&a.global==b.global&&a.multiline==b.multiline&&a.ignoreCase==b.ignoreCase}if("object"!=typeof a||"object"!=typeof b)return!1;for(var f=c.length;f--;)if(c[f]==a)return d[f]==b;var g=a.constructor,h=b.constructor;if(g!==h&&!(x.isFunction(g)&&g instanceof g&&x.isFunction(h)&&h instanceof h))return!1;c.push(a),d.push(b);var i=0,k=!0;if("[object Array]"==e){if(i=a.length,k=i==b.length)for(;i--&&(k=F(a[i],b[i],c,d)););}else{for(var l in a)if(x.has(a,l)&&(i++,!(k=x.has(b,l)&&F(a[l],b[l],c,d))))break;if(k){for(l in b)if(x.has(b,l)&&!i--)break;k=!i}}return c.pop(),d.pop(),k};x.isEqual=function(a,b){return F(a,b,[],[])},x.isEmpty=function(a){if(null==a)return!0;if(x.isArray(a)||x.isString(a))return 0===a.length;for(var b in a)if(x.has(a,b))return!1;return!0},x.isElement=function(a){return!!a&&1===a.nodeType},x.isArray=u||function(a){return"[object Array]"==j.call(a)},x.isObject=function(a){return a===Object(a)},y(["Arguments","Function","String","Number","Date","RegExp"],function(a){x["is"+a]=function(b){return j.call(b)=="[object "+a+"]"}}),x.isArguments(arguments)||(x.isArguments=function(a){return!!a&&!!x.has(a,"callee")}),"function"!=typeof/./&&(x.isFunction=function(a){return"function"==typeof a}),x.isFinite=function(a){return isFinite(a)&&!isNaN(parseFloat(a))},x.isNaN=function(a){return x.isNumber(a)&&a!=+a},x.isBoolean=function(a){return a===!0||a===!1||"[object Boolean]"==j.call(a)},x.isNull=function(a){return null===a},x.isUndefined=function(a){return void 0===a},x.has=function(a,b){return k.call(a,b)},x.noConflict=function(){return a._=b,this},x.identity=function(a){return a},x.times=function(a,b,c){for(var d=Array(Math.max(0,a)),e=0;a>e;e++)d[e]=b.call(c,e);return d},x.random=function(a,b){return null==b&&(b=a,a=0),a+Math.floor(Math.random()*(b-a+1))};var G={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};G.unescape=x.invert(G.escape);var H={escape:new RegExp("["+x.keys(G.escape).join("")+"]","g"),unescape:new RegExp("("+x.keys(G.unescape).join("|")+")","g")};x.each(["escape","unescape"],function(a){x[a]=function(b){return null==b?"":(""+b).replace(H[a],function(b){return G[a][b]})}}),x.result=function(a,b){if(null==a)return void 0;var c=a[b];return x.isFunction(c)?c.call(a):c},x.mixin=function(a){y(x.functions(a),function(b){var c=x[b]=a[b];x.prototype[b]=function(){var a=[this._wrapped];return g.apply(a,arguments),M.call(this,c.apply(x,a))}})};var I=0;x.uniqueId=function(a){var b=++I+"";return a?a+b:b},x.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var J=/(.)^/,K={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},L=/\\|'|\r|\n|\t|\u2028|\u2029/g;x.template=function(a,b,c){var d;c=x.defaults({},c,x.templateSettings);var e=new RegExp([(c.escape||J).source,(c.interpolate||J).source,(c.evaluate||J).source].join("|")+"|$","g"),f=0,g="__p+='";a.replace(e,function(b,c,d,e,h){return g+=a.slice(f,h).replace(L,function(a){return"\\"+K[a]}),c&&(g+="'+\n((__t=("+c+"))==null?'':_.escape(__t))+\n'"),d&&(g+="'+\n((__t=("+d+"))==null?'':__t)+\n'"),e&&(g+="';\n"+e+"\n__p+='"),f=h+b.length,b}),g+="';\n",c.variable||(g="with(obj||{}){\n"+g+"}\n"),g="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+g+"return __p;\n";try{d=new Function(c.variable||"obj","_",g)}catch(h){throw h.source=g,h}if(b)return d(b,x);var i=function(a){return d.call(this,a,x)};return i.source="function("+(c.variable||"obj")+"){\n"+g+"}",i},x.chain=function(a){return x(a).chain()};var M=function(a){return this._chain?x(a).chain():a};x.mixin(x),y(["pop","push","reverse","shift","sort","splice","unshift"],function(a){var b=d[a];x.prototype[a]=function(){var c=this._wrapped;return b.apply(c,arguments),("shift"==a||"splice"==a)&&0===c.length&&delete c[0],M.call(this,c)}}),y(["concat","join","slice"],function(a){var b=d[a];x.prototype[a]=function(){return M.call(this,b.apply(this._wrapped,arguments))}}),x.extend(x.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}.call(this),define("underscore",function(a){return function(){var b;return b||a._}}(this)),function(){var a,b=this,c=b.Backbone,d=[],e=d.push,f=d.slice,g=d.splice;a="undefined"!=typeof exports?exports:b.Backbone={},a.VERSION="1.0.0";var h=b._;!h&&"undefined"!=typeof require&&(h=require("underscore")),a.$=b.jQuery||b.Zepto||b.ender||b.$,a.noConflict=function(){return b.Backbone=c,this},a.emulateHTTP=!1,a.emulateJSON=!1;var i=a.Events={on:function(a,b,c){if(!k(this,"on",a,[b,c])||!b)return this;this._events||(this._events={});var d=this._events[a]||(this._events[a]=[]);return d.push({callback:b,context:c,ctx:c||this}),this},once:function(a,b,c){if(!k(this,"once",a,[b,c])||!b)return this;var d=this,e=h.once(function(){d.off(a,e),b.apply(this,arguments)});return e._callback=b,this.on(a,e,c)},off:function(a,b,c){var d,e,f,g,i,j,l,m;if(!this._events||!k(this,"off",a,[b,c]))return this;if(!a&&!b&&!c)return this._events={},this;for(g=a?[a]:h.keys(this._events),i=0,j=g.length;j>i;i++)if(a=g[i],f=this._events[a]){if(this._events[a]=d=[],b||c)for(l=0,m=f.length;m>l;l++)e=f[l],(b&&b!==e.callback&&b!==e.callback._callback||c&&c!==e.context)&&d.push(e);d.length||delete this._events[a]}return this},trigger:function(a){if(!this._events)return this;var b=f.call(arguments,1);if(!k(this,"trigger",a,b))return this;var c=this._events[a],d=this._events.all;return c&&l(c,b),d&&l(d,arguments),this},stopListening:function(a,b,c){var d=this._listeners;if(!d)return this;var e=!b&&!c;"object"==typeof b&&(c=this),a&&((d={})[a._listenerId]=a);for(var f in d)d[f].off(b,c,this),e&&delete this._listeners[f];return this}},j=/\s+/,k=function(a,b,c,d){if(!c)return!0;if("object"==typeof c){for(var e in c)a[b].apply(a,[e,c[e]].concat(d));return!1}if(j.test(c)){for(var f=c.split(j),g=0,h=f.length;h>g;g++)a[b].apply(a,[f[g]].concat(d));return!1}return!0},l=function(a,b){var c,d=-1,e=a.length,f=b[0],g=b[1],h=b[2];switch(b.length){case 0:for(;++d<e;)(c=a[d]).callback.call(c.ctx);return;case 1:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f);return;case 2:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f,g);return;case 3:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f,g,h);return;default:for(;++d<e;)(c=a[d]).callback.apply(c.ctx,b)}},m={listenTo:"on",listenToOnce:"once"};h.each(m,function(a,b){i[b]=function(b,c,d){var e=this._listeners||(this._listeners={}),f=b._listenerId||(b._listenerId=h.uniqueId("l"));return e[f]=b,"object"==typeof c&&(d=this),b[a](c,d,this),this}}),i.bind=i.on,i.unbind=i.off,h.extend(a,i);var n=a.Model=function(a,b){var c,d=a||{};b||(b={}),this.cid=h.uniqueId("c"),this.attributes={},h.extend(this,h.pick(b,o)),b.parse&&(d=this.parse(d,b)||{}),(c=h.result(this,"defaults"))&&(d=h.defaults({},d,c)),this.set(d,b),this.changed={},this.initialize.apply(this,arguments)},o=["url","urlRoot","collection"];h.extend(n.prototype,i,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(){return h.clone(this.attributes)},sync:function(){return a.sync.apply(this,arguments)},get:function(a){return this.attributes[a]},escape:function(a){return h.escape(this.get(a))},has:function(a){return null!=this.get(a)},set:function(a,b,c){var d,e,f,g,i,j,k,l;if(null==a)return this;if("object"==typeof a?(e=a,c=b):(e={})[a]=b,c||(c={}),!this._validate(e,c))return!1;f=c.unset,i=c.silent,g=[],j=this._changing,this._changing=!0,j||(this._previousAttributes=h.clone(this.attributes),this.changed={}),l=this.attributes,k=this._previousAttributes,this.idAttribute in e&&(this.id=e[this.idAttribute]);for(d in e)b=e[d],h.isEqual(l[d],b)||g.push(d),h.isEqual(k[d],b)?delete this.changed[d]:this.changed[d]=b,f?delete l[d]:l[d]=b;if(!i){g.length&&(this._pending=!0);for(var m=0,n=g.length;n>m;m++)this.trigger("change:"+g[m],this,l[g[m]],c)}if(j)return this;if(!i)for(;this._pending;)this._pending=!1,this.trigger("change",this,c);return this._pending=!1,this._changing=!1,this},unset:function(a,b){return this.set(a,void 0,h.extend({},b,{unset:!0}))},clear:function(a){var b={};for(var c in this.attributes)b[c]=void 0;return this.set(b,h.extend({},a,{unset:!0}))},hasChanged:function(a){return null==a?!h.isEmpty(this.changed):h.has(this.changed,a)},changedAttributes:function(a){if(!a)return this.hasChanged()?h.clone(this.changed):!1;var b,c=!1,d=this._changing?this._previousAttributes:this.attributes;for(var e in a)h.isEqual(d[e],b=a[e])||((c||(c={}))[e]=b);return c},previous:function(a){return null!=a&&this._previousAttributes?this._previousAttributes[a]:null},previousAttributes:function(){return h.clone(this._previousAttributes)},fetch:function(a){a=a?h.clone(a):{},void 0===a.parse&&(a.parse=!0);var b=this,c=a.success;return a.success=function(d){return b.set(b.parse(d,a),a)?(c&&c(b,d,a),b.trigger("sync",b,d,a),void 0):!1},L(this,a),this.sync("read",this,a)},save:function(a,b,c){var d,e,f,g=this.attributes;if(null==a||"object"==typeof a?(d=a,c=b):(d={})[a]=b,!(!d||c&&c.wait||this.set(d,c)))return!1;if(c=h.extend({validate:!0},c),!this._validate(d,c))return!1;d&&c.wait&&(this.attributes=h.extend({},g,d)),void 0===c.parse&&(c.parse=!0);var i=this,j=c.success;return c.success=function(a){i.attributes=g;var b=i.parse(a,c);return c.wait&&(b=h.extend(d||{},b)),h.isObject(b)&&!i.set(b,c)?!1:(j&&j(i,a,c),i.trigger("sync",i,a,c),void 0)},L(this,c),e=this.isNew()?"create":c.patch?"patch":"update","patch"===e&&(c.attrs=d),f=this.sync(e,this,c),d&&c.wait&&(this.attributes=g),f},destroy:function(a){a=a?h.clone(a):{};var b=this,c=a.success,d=function(){b.trigger("destroy",b,b.collection,a)};if(a.success=function(e){(a.wait||b.isNew())&&d(),c&&c(b,e,a),b.isNew()||b.trigger("sync",b,e,a)},this.isNew())return a.success(),!1;L(this,a);var e=this.sync("delete",this,a);return a.wait||d(),e},url:function(){var a=h.result(this,"urlRoot")||h.result(this.collection,"url")||K();return this.isNew()?a:a+("/"===a.charAt(a.length-1)?"":"/")+encodeURIComponent(this.id)},parse:function(a){return a},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return null==this.id},isValid:function(a){return this._validate({},h.extend(a||{},{validate:!0}))},_validate:function(a,b){if(!b.validate||!this.validate)return!0;a=h.extend({},this.attributes,a);var c=this.validationError=this.validate(a,b)||null;return c?(this.trigger("invalid",this,c,h.extend(b||{},{validationError:c})),!1):!0}});var p=["keys","values","pairs","invert","pick","omit"];h.each(p,function(a){n.prototype[a]=function(){var b=f.call(arguments);return b.unshift(this.attributes),h[a].apply(h,b)}});var q=a.Collection=function(a,b){b||(b={}),b.url&&(this.url=b.url),b.model&&(this.model=b.model),void 0!==b.comparator&&(this.comparator=b.comparator),this._reset(),this.initialize.apply(this,arguments),a&&this.reset(a,h.extend({silent:!0},b))},r={add:!0,remove:!0,merge:!0},s={add:!0,merge:!1,remove:!1};h.extend(q.prototype,i,{model:n,initialize:function(){},toJSON:function(a){return this.map(function(b){return b.toJSON(a)})},sync:function(){return a.sync.apply(this,arguments)},add:function(a,b){return this.set(a,h.defaults(b||{},s))},remove:function(a,b){a=h.isArray(a)?a.slice():[a],b||(b={});var c,d,e,f;for(c=0,d=a.length;d>c;c++)f=this.get(a[c]),f&&(delete this._byId[f.id],delete this._byId[f.cid],e=this.indexOf(f),this.models.splice(e,1),this.length--,b.silent||(b.index=e,f.trigger("remove",f,this,b)),this._removeReference(f));return this},set:function(a,b){b=h.defaults(b||{},r),b.parse&&(a=this.parse(a,b)),h.isArray(a)||(a=a?[a]:[]);var c,d,f,i,j,k=b.at,l=this.comparator&&null==k&&b.sort!==!1,m=h.isString(this.comparator)?this.comparator:null,n=[],o=[],p={};for(c=0,d=a.length;d>c;c++)(f=this._prepareModel(a[c],b))&&((i=this.get(f))?(b.remove&&(p[i.cid]=!0),b.merge&&(i.set(f.attributes,b),l&&!j&&i.hasChanged(m)&&(j=!0))):b.add&&(n.push(f),f.on("all",this._onModelEvent,this),this._byId[f.cid]=f,null!=f.id&&(this._byId[f.id]=f)));if(b.remove){for(c=0,d=this.length;d>c;++c)p[(f=this.models[c]).cid]||o.push(f);o.length&&this.remove(o,b)}if(n.length&&(l&&(j=!0),this.length+=n.length,null!=k?g.apply(this.models,[k,0].concat(n)):e.apply(this.models,n)),j&&this.sort({silent:!0}),b.silent)return this;for(c=0,d=n.length;d>c;c++)(f=n[c]).trigger("add",f,this,b);return j&&this.trigger("sort",this,b),this},reset:function(a,b){b||(b={});for(var c=0,d=this.models.length;d>c;c++)this._removeReference(this.models[c]);return b.previousModels=this.models,this._reset(),this.add(a,h.extend({silent:!0},b)),b.silent||this.trigger("reset",this,b),this},push:function(a,b){return a=this._prepareModel(a,b),this.add(a,h.extend({at:this.length},b)),a},pop:function(a){var b=this.at(this.length-1);return this.remove(b,a),b},unshift:function(a,b){return a=this._prepareModel(a,b),this.add(a,h.extend({at:0},b)),a},shift:function(a){var b=this.at(0);return this.remove(b,a),b},slice:function(a,b){return this.models.slice(a,b)},get:function(a){return null==a?void 0:this._byId[null!=a.id?a.id:a.cid||a]},at:function(a){return this.models[a]},where:function(a,b){return h.isEmpty(a)?b?void 0:[]:this[b?"find":"filter"](function(b){for(var c in a)if(a[c]!==b.get(c))return!1;return!0})},findWhere:function(a){return this.where(a,!0)},sort:function(a){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return a||(a={}),h.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(h.bind(this.comparator,this)),a.silent||this.trigger("sort",this,a),this},sortedIndex:function(a,b,c){b||(b=this.comparator);var d=h.isFunction(b)?b:function(a){return a.get(b)};return h.sortedIndex(this.models,a,d,c)},pluck:function(a){return h.invoke(this.models,"get",a)},fetch:function(a){a=a?h.clone(a):{},void 0===a.parse&&(a.parse=!0);var b=a.success,c=this;return a.success=function(d){var e=a.reset?"reset":"set";c[e](d,a),b&&b(c,d,a),c.trigger("sync",c,d,a)},L(this,a),this.sync("read",this,a)},create:function(a,b){if(b=b?h.clone(b):{},!(a=this._prepareModel(a,b)))return!1;b.wait||this.add(a,b);var c=this,d=b.success;return b.success=function(e){b.wait&&c.add(a,b),d&&d(a,e,b)},a.save(null,b),a},parse:function(a){return a},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(a,b){if(a instanceof n)return a.collection||(a.collection=this),a;b||(b={}),b.collection=this;var c=new this.model(a,b);return c._validate(a,b)?c:(this.trigger("invalid",this,a,b),!1)},_removeReference:function(a){this===a.collection&&delete a.collection,a.off("all",this._onModelEvent,this)},_onModelEvent:function(a,b,c,d){("add"!==a&&"remove"!==a||c===this)&&("destroy"===a&&this.remove(b,d),b&&a==="change:"+b.idAttribute&&(delete this._byId[b.previous(b.idAttribute)],null!=b.id&&(this._byId[b.id]=b)),this.trigger.apply(this,arguments))}});var t=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","indexOf","shuffle","lastIndexOf","isEmpty","chain"];h.each(t,function(a){q.prototype[a]=function(){var b=f.call(arguments);return b.unshift(this.models),h[a].apply(h,b)}});var u=["groupBy","countBy","sortBy"];h.each(u,function(a){q.prototype[a]=function(b,c){var d=h.isFunction(b)?b:function(a){return a.get(b)};return h[a](this.models,d,c)}});var v=a.View=function(a){this.cid=h.uniqueId("view"),this._configure(a||{}),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},w=/^(\S+)\s*(.*)$/,x=["model","collection","el","id","attributes","className","tagName","events"];h.extend(v.prototype,i,{tagName:"div",$:function(a){return this.$el.find(a)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(b,c){return this.$el&&this.undelegateEvents(),this.$el=b instanceof a.$?b:a.$(b),this.el=this.$el[0],c!==!1&&this.delegateEvents(),this},delegateEvents:function(a){if(!a&&!(a=h.result(this,"events")))return this;this.undelegateEvents();for(var b in a){var c=a[b];if(h.isFunction(c)||(c=this[a[b]]),c){var d=b.match(w),e=d[1],f=d[2];c=h.bind(c,this),e+=".delegateEvents"+this.cid,""===f?this.$el.on(e,c):this.$el.on(e,f,c)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_configure:function(a){this.options&&(a=h.extend({},h.result(this,"options"),a)),h.extend(this,h.pick(a,x)),this.options=a},_ensureElement:function(){if(this.el)this.setElement(h.result(this,"el"),!1);else{var b=h.extend({},h.result(this,"attributes"));this.id&&(b.id=h.result(this,"id")),this.className&&(b["class"]=h.result(this,"className"));var c=a.$("<"+h.result(this,"tagName")+">").attr(b);this.setElement(c,!1)}}}),a.sync=function(b,c,d){var e=y[b];h.defaults(d||(d={}),{emulateHTTP:a.emulateHTTP,emulateJSON:a.emulateJSON});var f={type:e,dataType:"json"};if(d.url||(f.url=h.result(c,"url")||K()),null==d.data&&c&&("create"===b||"update"===b||"patch"===b)&&(f.contentType="application/json",f.data=JSON.stringify(d.attrs||c.toJSON(d))),d.emulateJSON&&(f.contentType="application/x-www-form-urlencoded",f.data=f.data?{model:f.data}:{}),d.emulateHTTP&&("PUT"===e||"DELETE"===e||"PATCH"===e)){f.type="POST",d.emulateJSON&&(f.data._method=e);var g=d.beforeSend;d.beforeSend=function(a){return a.setRequestHeader("X-HTTP-Method-Override",e),g?g.apply(this,arguments):void 0}}"GET"!==f.type&&!d.emulateJSON&&(f.processData=!1),"PATCH"===f.type&&window.ActiveXObject&&(!window.external||!window.external.msActiveXFilteringEnabled)&&(f.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var i=d.xhr=a.ajax(h.extend(f,d));return c.trigger("request",c,i,d),i};var y={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};a.ajax=function(){return a.$.ajax.apply(a.$,arguments)};var z=a.Router=function(a){a||(a={}),a.routes&&(this.routes=a.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},A=/\((.*?)\)/g,B=/(\(\?)?:\w+/g,C=/\*\w+/g,D=/[\-{}\[\]+?.,\\\^$|#\s]/g;h.extend(z.prototype,i,{initialize:function(){},route:function(b,c,d){h.isRegExp(b)||(b=this._routeToRegExp(b)),h.isFunction(c)&&(d=c,c=""),d||(d=this[c]);var e=this;return a.history.route(b,function(f){var g=e._extractParameters(b,f);d&&d.apply(e,g),e.trigger.apply(e,["route:"+c].concat(g)),e.trigger("route",c,g),a.history.trigger("route",e,c,g)}),this},navigate:function(b,c){return a.history.navigate(b,c),this},_bindRoutes:function(){if(this.routes){this.routes=h.result(this,"routes");for(var a,b=h.keys(this.routes);null!=(a=b.pop());)this.route(a,this.routes[a])}},_routeToRegExp:function(a){return a=a.replace(D,"\\$&").replace(A,"(?:$1)?").replace(B,function(a,b){return b?a:"([^/]+)"}).replace(C,"(.*?)"),new RegExp("^"+a+"$")},_extractParameters:function(a,b){var c=a.exec(b).slice(1);return h.map(c,function(a){return a?decodeURIComponent(a):null})}});var E=a.History=function(){this.handlers=[],h.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},F=/^[#\/]|\s+$/g,G=/^\/+|\/+$/g,H=/msie [\w.]+/,I=/\/$/;E.started=!1,h.extend(E.prototype,i,{interval:50,getHash:function(a){var b=(a||this).location.href.match(/#(.*)$/);return b?b[1]:""},getFragment:function(a,b){if(null==a)if(this._hasPushState||!this._wantsHashChange||b){a=this.location.pathname;var c=this.root.replace(I,"");a.indexOf(c)||(a=a.substr(c.length))}else a=this.getHash();return a.replace(F,"")},start:function(b){if(E.started)throw new Error("Backbone.history has already been started");E.started=!0,this.options=h.extend({},{root:"/"},this.options,b),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var c=this.getFragment(),d=document.documentMode,e=H.exec(navigator.userAgent.toLowerCase())&&(!d||7>=d);this.root=("/"+this.root+"/").replace(G,"/"),e&&this._wantsHashChange&&(this.iframe=a.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(c)),this._hasPushState?a.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!e?a.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=c;var f=this.location,g=f.pathname.replace(/[^\/]$/,"$&/")===this.root;return this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!g?(this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0):(this._wantsPushState&&this._hasPushState&&g&&f.hash&&(this.fragment=this.getHash().replace(F,""),this.history.replaceState({},document.title,this.root+this.fragment+f.search)),this.options.silent?void 0:this.loadUrl())},stop:function(){a.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),E.started=!1},route:function(a,b){this.handlers.unshift({route:a,callback:b})},checkUrl:function(){var a=this.getFragment();return a===this.fragment&&this.iframe&&(a=this.getFragment(this.getHash(this.iframe))),a===this.fragment?!1:(this.iframe&&this.navigate(a),this.loadUrl()||this.loadUrl(this.getHash()),void 0)},loadUrl:function(a){var b=this.fragment=this.getFragment(a),c=h.any(this.handlers,function(a){return a.route.test(b)?(a.callback(b),!0):void 0});return c},navigate:function(a,b){if(!E.started)return!1;if(b&&b!==!0||(b={trigger:b}),a=this.getFragment(a||""),this.fragment!==a){this.fragment=a;var c=this.root+a;if(this._hasPushState)this.history[b.replace?"replaceState":"pushState"]({},document.title,c);else{if(!this._wantsHashChange)return this.location.assign(c);this._updateHash(this.location,a,b.replace),this.iframe&&a!==this.getFragment(this.getHash(this.iframe))&&(b.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,a,b.replace))}b.trigger&&this.loadUrl(a)}},_updateHash:function(a,b,c){if(c){var d=a.href.replace(/(javascript:|#).*$/,"");a.replace(d+"#"+b)}else a.hash="#"+b}}),a.history=new E;var J=function(a,b){var c,d=this;c=a&&h.has(a,"constructor")?a.constructor:function(){return d.apply(this,arguments)},h.extend(c,d,b);var e=function(){this.constructor=c};return e.prototype=d.prototype,c.prototype=new e,a&&h.extend(c.prototype,a),c.__super__=d.prototype,c};n.extend=q.extend=z.extend=v.extend=E.extend=J;var K=function(){throw new Error('A "url" property or function must be specified')},L=function(a,b){var c=b.error;b.error=function(d){c&&c(a,d,b),a.trigger("error",a,d,b)}}}.call(this),define("backbone",["underscore","jquery"],function(a){return function(){var b;return b||a.Backbone}}(this));var Handlebars={};!function(a,b){a.VERSION="1.0.0",a.COMPILER_REVISION=4,a.REVISION_CHANGES={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:">= 1.0.0"},a.helpers={},a.partials={};var c=Object.prototype.toString,d="[object Function]",e="[object Object]";a.registerHelper=function(b,d,f){if(c.call(b)===e){if(f||d)throw new a.Exception("Arg not supported with multiple helpers");a.Utils.extend(this.helpers,b)}else f&&(d.not=f),this.helpers[b]=d},a.registerPartial=function(b,d){c.call(b)===e?a.Utils.extend(this.partials,b):this.partials[b]=d},a.registerHelper("helperMissing",function(a){if(2===arguments.length)return b;throw new Error("Missing helper: '"+a+"'")}),a.registerHelper("blockHelperMissing",function(b,e){var f=e.inverse||function(){},g=e.fn,h=c.call(b);return h===d&&(b=b.call(this)),b===!0?g(this):b===!1||null==b?f(this):"[object Array]"===h?b.length>0?a.helpers.each(b,e):f(this):g(b)
}),a.K=function(){},a.createFrame=Object.create||function(b){a.K.prototype=b;var c=new a.K;return a.K.prototype=null,c},a.logger={DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,methodMap:{0:"debug",1:"info",2:"warn",3:"error"},log:function(b,c){if(a.logger.level<=b){var d=a.logger.methodMap[b];"undefined"!=typeof console&&console[d]&&console[d].call(console,c)}}},a.log=function(b,c){a.logger.log(b,c)},a.registerHelper("each",function(b,e){var f,g=e.fn,h=e.inverse,i=0,j="",k=c.call(b);if(k===d&&(b=b.call(this)),e.data&&(f=a.createFrame(e.data)),b&&"object"==typeof b)if(b instanceof Array)for(var l=b.length;l>i;i++)f&&(f.index=i),j+=g(b[i],{data:f});else for(var m in b)b.hasOwnProperty(m)&&(f&&(f.key=m),j+=g(b[m],{data:f}),i++);return 0===i&&(j=h(this)),j}),a.registerHelper("if",function(b,e){var f=c.call(b);return f===d&&(b=b.call(this)),!b||a.Utils.isEmpty(b)?e.inverse(this):e.fn(this)}),a.registerHelper("unless",function(b,c){return a.helpers["if"].call(this,b,{fn:c.inverse,inverse:c.fn})}),a.registerHelper("with",function(b,e){var f=c.call(b);return f===d&&(b=b.call(this)),a.Utils.isEmpty(b)?void 0:e.fn(b)}),a.registerHelper("log",function(b,c){var d=c.data&&null!=c.data.level?parseInt(c.data.level,10):1;a.log(d,b)});var f=["description","fileName","lineNumber","message","name","number","stack"];a.Exception=function(){for(var a=Error.prototype.constructor.apply(this,arguments),b=0;b<f.length;b++)this[f[b]]=a[f[b]]},a.Exception.prototype=new Error,a.SafeString=function(a){this.string=a},a.SafeString.prototype.toString=function(){return this.string.toString()};var g={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},h=/[&<>"'`]/g,i=/[&<>"'`]/,j=function(a){return g[a]||"&amp;"};a.Utils={extend:function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])},escapeExpression:function(b){return b instanceof a.SafeString?b.toString():null==b||b===!1?"":(b=b.toString(),i.test(b)?b.replace(h,j):b)},isEmpty:function(a){return a||0===a?"[object Array]"===c.call(a)&&0===a.length?!0:!1:!0}},a.VM={template:function(b){var c={escapeExpression:a.Utils.escapeExpression,invokePartial:a.VM.invokePartial,programs:[],program:function(b,c,d){var e=this.programs[b];return d?e=a.VM.program(b,c,d):e||(e=this.programs[b]=a.VM.program(b,c)),e},merge:function(b,c){var d=b||c;return b&&c&&(d={},a.Utils.extend(d,c),a.Utils.extend(d,b)),d},programWithDepth:a.VM.programWithDepth,noop:a.VM.noop,compilerInfo:null};return function(d,e){e=e||{};var f=b.call(c,a,d,e.helpers,e.partials,e.data),g=c.compilerInfo||[],h=g[0]||1,i=a.COMPILER_REVISION;if(h!==i){if(i>h){var j=a.REVISION_CHANGES[i],k=a.REVISION_CHANGES[h];throw"Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+j+") or downgrade your runtime to an older version ("+k+")."}throw"Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+g[1]+")."}return f}},programWithDepth:function(a,b,c){var d=Array.prototype.slice.call(arguments,3),e=function(a,e){return e=e||{},b.apply(this,[a,e.data||c].concat(d))};return e.program=a,e.depth=d.length,e},program:function(a,b,c){var d=function(a,d){return d=d||{},b(a,d.data||c)};return d.program=a,d.depth=0,d},noop:function(){return""},invokePartial:function(c,d,e,f,g,h){var i={helpers:f,partials:g,data:h};if(c===b)throw new a.Exception("The partial "+d+" could not be found");if(c instanceof Function)return c(e,i);if(!a.compile)throw new a.Exception("The partial "+d+" could not be compiled when running in runtime-only mode");return g[d]=a.compile(c,{data:h!==b}),g[d](e,i)}},a.template=a.VM.template}(Handlebars),define("handlebars",function(a){return function(){var b;return b||a.Handlebars}}(this)),function(a){var b,c=a.Backbone,d=a._,e=c.$,f=c.View.prototype._configure,g=(c.View.prototype.render,Array.prototype.push),h=Array.prototype.concat,i=Array.prototype.splice,j=c.View.extend({constructor:function(a){a=a||{},j.setupView(this,a),c.View.call(this,a)},insertView:function(a,b){return b?this.setView(a,b,!0):this.setView(a,!0)},insertViews:function(a){return d.isArray(a)?this.setViews({"":a}):(d.each(a,function(b,c){a[c]=d.isArray(b)?b:[b]}),this.setViews(a))},getView:function(a){return null==a&&(a=arguments[1]),this.getViews(a).first().value()},getViews:function(a){var b=d.chain(this.views).map(function(a){return d.isArray(a)?a:[a]},this).flatten().value();return"string"==typeof a?d.chain([this.views[a]]).flatten():"object"==typeof a?d.chain([d.where(b,a)]).flatten():d.chain("function"==typeof a?d.filter(b,a):b)},removeView:function(a){return this.getViews(a).each(function(a){a.remove()})},setView:function(a,b,c){var e,f,g,i=this;if("string"!=typeof a&&(c=b,b=a,a=""),this.views=this.views||{},e=b.__manager__,f=this.views[a],!e)throw new Error("Please set `View#manage` property with selector '"+a+"' to `true`.");return g=b.getAllOptions(),e.parent=i,e.selector=a,b.on("all",function(a){"beforeRender"!==a&&"afterRender"!==a&&i.trigger.apply(i,arguments)},b),c?(this.views[a]=h.call([],f||[],b),e.insert=!0,b):(e.hasRendered&&g.partial(i.$el,b.$el,i.__manager__,e),f&&d.each(h.call([],f),function(a){a.remove()}),this.views[a]=b)},setViews:function(a){return d.each(a,function(a,b){return d.isArray(a)?d.each(a,function(a){this.insertView(b,a)},this):(this.setView(b,a),void 0)},this),this},render:function(){function a(){function a(){var a=e.afterRender;a&&a.call(c,c),c.trigger("afterRender",c)}var b;return h&&(e.contains(h.el,c.el)||e.partial(h.$el,c.$el,i,f)),c.delegateEvents(),f.hasRendered=!0,(b=f.queue.shift())?b():delete f.queue,i&&i.queue?h.once("afterRender",a):a(),k.resolveWith(c,[c])}function b(){var b=c.getAllOptions(),e=c.__manager__,f=e.parent;f&&f.__manager__,c._render(j._viewRender,b).done(function(){if(!d.keys(c.views).length)return a();var e=d.map(c.views,function(a){var b=d.isArray(a);return b&&a.length?d.reduce(a.slice(1),function(a,b){return a.then(function(){return b.render()})},a[0].render()):b?a:a.render()});b.when(e).done(a)})}var c=this,e=c.getAllOptions(),f=c.__manager__,h=f.parent,i=h&&h.__manager__,k=e.deferred();return f.queue?g.call(f.queue,b):(f.queue=[],b(c,k)),k.view=c,k},remove:function(){return j._removeView(this,!0),this._remove.apply(this,arguments)},getAllOptions:function(){return d.extend({},this,j.prototype.options,this.options)}},{_cache:{},_makeAsync:function(a,b){var c=a.deferred();return c.async=function(){return c._isAsync=!0,b},c},_viewRender:function(a,b){function c(c){c&&(l.noel?(k=e(c),a.$el.slice(1).remove(),a.$el.replaceWith(k),a.setElement(k,!1)):b.html(a.$el,c)),i.resolveWith(a,[a])}function f(a,d){var e,f=j._makeAsync(b,function(a){c(a)});j.cache(g,d),d&&(e=b.render.call(f,d,a)),f._isAsync||c(e)}var g,h,i,k,l=a.__manager__;return{render:function(){var c=a.serialize||b.serialize,e=a.template||b.template;return d.isFunction(c)&&(c=c.call(a)),i=j._makeAsync(b,function(a){f(c,a)}),"string"==typeof e&&(g=b.prefix+e),(h=j.cache(g))?(f(c,h,g),i):("string"==typeof e?h=b.fetch.call(i,b.prefix+e):"function"==typeof e?h=e:null!=e&&(h=b.fetch.call(i,e)),i._isAsync||f(c,h),i)}}},_removeViews:function(a,b){"boolean"==typeof a&&(b=a,a=this),a=a||this,a.getViews().each(function(a){(a.__manager__.hasRendered||b)&&j._removeView(a,b)})},_removeView:function(a,b){var c,e=a.__manager__,f="boolean"==typeof a.keep?a.keep:a.options.keep;if(!f&&(e.insert===!0||b)){if(j.cleanViews(a),a._removeViews(!0),a.$el.remove(),!e.parent)return;if(c=e.parent.views[e.selector],d.isArray(c))return d.each(d.clone(c),function(a,b){a&&a.__manager__===e&&i.call(c,b,1)});delete e.parent.views[e.selector]}},cache:function(a,b){return a in this._cache&&null==b?this._cache[a]:null!=a&&null!=b?this._cache[a]=b:void 0},cleanViews:function(a){d.each(h.call([],a),function(a){a.unbind(),a.model instanceof c.Model&&a.model.off(null,null,a),a.collection instanceof c.Collection&&a.collection.off(null,null,a),a.stopListening(),d.result(a,"cleanup")})},configure:function(a){d.extend(j.prototype.options,a),a.manage&&(c.View.prototype.manage=!0),a.el===!1&&(c.View.prototype.el=!1)},setupView:function(a,e){d.each(h.call([],a),function(a){if(!a.__manager__){var f,g,i,k=j.prototype,l=d.pick(a,b);d.defaults(a,{views:{},__manager__:{},_removeViews:j._removeViews,_removeView:j._removeView},j.prototype),e=a.options=d.defaults(e||{},a.options,k.options),i=d.pick(e,h.call(["events"],d.values(e.events))),d.extend(a,i),(l.render===j.prototype.render||l.render===c.View.prototype.render)&&delete l.render,d.extend(e,l),a._remove=c.View.prototype.remove,a._render=function(a,b){var c=this,d=c.__manager__,e=b.beforeRender;return d.hasRendered&&this._removeViews(),e&&e.call(this,this),this.trigger("beforeRender",this),a(this,b).render()},a.render=j.prototype.render,a.remove!==k.remove&&(a._remove=a.remove,a.remove=k.remove),f=e.views||a.views,d.keys(f).length&&(g=f,a.views={},a.setViews(g)),a.options.template?a.options.template=e.template:a.template&&(e.template=a.template)}})}});c.Layout=j,j.VERSION="0.8.5",c.View.prototype._configure=function(a){var b,c;return("el"in a?a.el===!1:this.el===!1)&&(b=!0),c=f.apply(this,arguments),(a.manage||this.manage)&&j.setupView(this),this.__manager__&&(this.__manager__.noel=b),c},j.prototype.options={prefix:"",deferred:function(){return e.Deferred()},fetch:function(a){return d.template(e(a).html())},partial:function(a,b,c,d){if(d.selector)if(c.noel){var e=a.filter(d.selector);a=e.length?e:a.find(d.selector)}else a=a.find(d.selector);d.insert?this.insert(a,b):this.html(a,b)},html:function(a,b){a.html(b)},insert:function(a,b){a.append(b)},when:function(a){return e.when.apply(null,a)},render:function(a,b){return a(b)},contains:function(a,b){return e.contains(a,b)}},b=d.keys(j.prototype.options)}("object"==typeof global?global:this),define("plugins/backbone.layoutmanager",function(){}),function(){var a,b,c,d,e,f,g,h,i,j,k;return"undefined"==typeof window?(k=require("underscore"),a=require("backbone"),b=module.exports=a):(k=window._,a=window.Backbone,b=window),a.JJStore={},a.JJStore.Models={},a.JJStore.Events=k.extend({},a.Events),a.JJStore.__registerModelType=function(a){return this.Models[a]||(this.Models[a]=[]),this.Models[a]},a.JJStore.__registerModelInStore=function(b,c){var d;return d=this.__registerModelType(b),this.__modelExistsInStore(d,c)||(d.push(c),a.JJStore.Events.trigger("added:"+b,c)),!0},a.JJStore.__removeModelFromStore=function(a){var b;return b=this.Models[a.storeIdentifier],k.find(b,function(c,d){return c===a?(b.splice(d,1),!0):void 0}),!0},a.JJStore.__modelExistsInStore=function(a,b){return k.isString(a)&&(a=this.Models[a]),k.contains(a,b)},a.JJStore.getModelByProperty=function(a,b,c,d){var e;return k.isString(a)&&(a=this.Models[a]),e=void 0,a&&(e=k.find(a,function(a){var e;return e=a,d&&(e=e.attributes),e[b]===c?!0:void 0})),e},a.JJStore._byId=function(a,b){return this.getModelByProperty(a,"id",b,!1)},a.JJStore._byCid=function(a,b){return this.getModelByProperty(a,"cid",b,!1)},a.JJRelational={},a.JJRelational.VERSION="0.2.6",a.JJRelational.Config={url_id_appendix:"?ids=",work_with_store:!0},a.JJRelational.CollectionTypes={},a.JJRelational.__getObjectByName=function(a){var c;return c=k.reduce(a.split("."),function(a,b){return a[b]},b),c!==b?c:null},a.JJRelational.registerCollectionTypes=function(b){var c,d;if(!k.isObject(b))return!1;for(d in b)c=b[d],a.JJRelational.CollectionTypes[d]=c;return!0},a.JJRelational.__getCollectionType=function(b){var c,d,e;e=a.JJRelational.CollectionTypes;for(d in e)if(c=e[d],d===b)return c;return a.Collection},a.Model.prototype.__save=a.Model.prototype.save,a.JJRelationalModel=a.Model.extend({relationsInstalled:!1,constructor:function(b,c){var d,e;return a.JJRelational.Config.work_with_store&&k.isObject(b)&&(e=b[this.idAttribute])&&(d=a.JJStore._byId(this.storeIdentifier,e)),d?(d.set(b,c),d):(a.Model.apply(this,arguments),this.__prepopulate_rel_atts(),a.JJStore.__registerModelInStore(this.storeIdentifier,this),this.__populate_rels_with_atts(b,c),a.JJStore.Events.trigger("created:"+this.storeIdentifier,this),this)},__prepopulate_rel_atts:function(){var b,c,d,e,f,g,i,j,l,m;if(this.relations){for(m=this.relations,d=j=0,l=m.length;l>j;d=++j){if(g=m[d],f=g.relatedModel,g.includeInJSON=g.includeInJSON?g.includeInJSON:[],g.includeInJSON=k.isArray(g.includeInJSON)?g.includeInJSON:[g.includeInJSON],e=k.indexOf(g.includeInJSON,"id"),e>=0&&this.idAttribute&&(g.includeInJSON[e]=this.idAttribute),void 0===f||0==f.prototype instanceof a.JJRelationalModel)if(k.isString(f)){if(c=a.JJRelational.__getObjectByName(f),!c||1!=c.prototype instanceof a.JJRelationalModel)throw new TypeError('relatedModel "'+f+'" is neither a reference to a JJRelationalModel nor a string referring to an object in the global oject');f=this.relations[d].relatedModel=c}else k.isFunction(f)&&(f=this.relations[d].relatedModel=f.call(this));g&&!h(g)&&(b=a.JJRelational.__getCollectionType(g.collectionType))?(i=new b,i._relational={owner:this,ownerKey:g.key,reverseKey:g.reverseKey,idQueue:[]}):i=null,this.attributes[g.key]=i,a.JJStore.Events.bind("created:"+f.prototype.storeIdentifier,this.newModelInStore,this)}this.bind("destroy",this._destroyAllRelations)}return this.relationsInstalled=!0,this},__populate_rels_with_atts:function(b,c){var d,e,f,g,h,i;for(d in b)if(g=b[d],e=this.getRelationByKey(d)){if(1==g instanceof a.Collection)throw new TypeError('The attribute "'+d+'" is a collection. You should not replace whole collections in a relational attribute. Please use the direct reference to the model array (Backbone.Collection.models)');for(g=k.isArray(g)?g:[g],h=0,i=g.length;i>h;h++)f=g[h],this.checkAndAdd(f,e,c)}return this},save:function(b,c,d){var e,f,i,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C=this;if(s=null,f=this.attributes,k.isObject(b)||!b?(i=b,d=c):null!==b&&(i={},i[b]=c),d=d?k.clone(d):{},d.isSave=!0,!(!i||d&&d.wait||this.set(i,d)))return!1;if(d=k.extend({validate:!0},d),!this._validate(i,d))return!1;if(i&&d.wait&&(this.attributes=k.extend({},f,i)),e=function(){var a,b,c;return b=d.success,d.contentType||(d.contentType="application/json"),d.data||(d.data=JSON.stringify(C.toJSON({isSave:!0}))),void 0===d.parse&&(d.parse=!0),d.success=function(a){var c;return C.attributes=f,c=C.parse(a,d),d.wait&&(c=k.extend(i||{},c)),k.isObject(c)&&!C.set(c,d)?!1:(b&&b(C,a,d),C.trigger("sync",C,a,d))},j(C,d),a=C.isNew()?"create":d.patch?"patch":"update","patch"===a&&(d.attrs=i),c=C.sync(a,C,d),i&&d.wait&&(C.attributes=f),c},d.ignoreSaveOnModels||(d.ignoreSaveOnModels=[this]),q=[],m=function(b){return b&&b instanceof a.JJRelationalModel&&b.isNew()?q.push({model:b,done:!1}):void 0},l=function(){var a,b,c,d;for(k.isEmpty(q)&&(s=e()),a=!0,c=0,d=q.length;d>c;c++)b=q[c],b.done===!1&&(a=!1);return a?s=e():void 0},this.relations)for(A=this.relations,u=0,x=A.length;x>u;u++)if(r=A[u],t=this.get(r.key),h(r))m(t);else if(g(r))for(B=t.models,v=0,y=B.length;y>v;v++)n=B[v],m(n);for(k.isEmpty(q)&&(s=e()),w=0,z=q.length;z>w;w++)o=q[w],k.indexOf(d.ignoreSaveOnModels,o.model)<=-1?(d.ignoreSaveOnModels.push(o.model),p=k.clone(d),p.success=function(b){var c,d;for(c=0,d=q.length;d>c;c++)o=q[c],o.model.cid===b.cid&&(o.done=!0);return a.JJStore.Events.trigger("created:"+b.storeIdentifier,b),l()},o.model.save({},p)):(o.done=!0,l());return s},set:function(a,b,c){var d,e,f,g,h,i,j,l,m,n,o,p,q,r,s;if(null===a)return this;if("object"==typeof a?(d=a,c=b):(d={},d[a]=b),c=c||{},!this._validate(d,c))return!1;m=c.unset,l=c.silent,f=[],g=this._changing,this._changing=!0,g||(this._previousAttributes=k.clone(this.attributes),this.changed={}),h=this.attributes,i=this._previousAttributes,this.idAttribute in d&&(this.id=d[this.idAttribute]);for(a in d)if(o=d[a],k.isEqual(h[a],o)||f.push(a),k.isEqual(i[a],o)?delete this.changed[a]:this.changed[a]=b,(j=this.getRelationByKey(a))&&this.relationsInstalled)for(this._emptyRelation(j),o=k.isArray(o)?o:[o],p=0,r=o.length;r>p;p++)n=o[p],m||this.checkAndAdd(n,j,c);else m?delete h[a]:h[a]=o;if(!l)for(f.length&&(this._pending=!0),q=0,s=f.length;s>q;q++)e=f[q],this.trigger("change:"+e,this,h[e],c);if(g)return this;if(!l)for(;this._pending;)this._pending=!1,this.trigger("change",this,c);return this._pending=!1,this._changing=!1,this},_validate:function(b,c){var d,e,f,g,h,i;if(!c.validate||!this.validate)return!0;for(b=k.extend({},this.attributes,b),i=this.relations,g=0,h=i.length;h>g;g++)e=i[g],f=b[e.key],1==f instanceof a.Collection&&(b[e.key]=f.models);return d=this.validationError=this.validate(b,c)||null,d?(this.trigger("invalid",this,d,k.extend(c||{},{validationError:d})),!1):!0},toJSON:function(a){var b,c,d,e,f,i,j,l,m,n,o;if(a=a||{},a.withRelIDs)return this.toJSONWithRelIDs();if(c=k.clone(this.attributes),a.bypass)return c;if(a.isSave)for(n=this.relations,i=0,l=n.length;l>i;i++)f=n[i],a.scaffold&&k.indexOf(a.scaffold,f.key)<0||(b=f.includeInJSON,d=f.key,e=this.get(d),h(f)?c[f.key]=e?1==e instanceof f.relatedModel?0===b.length?e.toJSONWithRelIDs():1===b.length?e.get(b[0]):e.toJSON({isSave:!0,scaffold:b}):k.indexOf(b,f.relatedModel.prototype.idAttribute)>=0?e:null:null:g(f)&&(0===b.length?c[f.key]=e.toJSON({withRelIDs:!0}):1===b.length?c[f.key]=e.getArrayForAttribute(b[0]):(c[f.key]=e.toJSON({isSave:!0,scaffold:b}),k.indexOf(b,"id")>=0&&c[f.key].push(e._relational.idQueue))));else for(o=this.relations,j=0,m=o.length;m>j;j++)f=o[j],e=this.get(f.key),h(f)?c[f.key]=1==e instanceof f.relatedModel?e.toJSONWithRelIDs():e:g(f)&&(c[f.key]=e.toJSON({withRelIDs:!0}));return a.scaffold&&(c=k.pick.apply(window,[c,a.scaffold])),c},toJSONWithRelIDs:function(){var a,b,c,d,e,f;for(a=k.clone(this.attributes),f=this.relations,d=0,e=f.length;e>d;d++)c=f[d],b=this.get(c.key),h(c)?a[c.key]=1==b instanceof c.relatedModel?b.id:b:g(c)&&(a[c.key]=b.getIDArray());return a},checkAndAdd:function(b,c,d){var e,f,i,j;if(d=d||{},i=c.relatedModel,1==b instanceof i)this.addToRelation(b,c,!1);else if(k.isObject(b)&&0==b instanceof a.Model)f=new i(b),this.addToRelation(f,c,!1);else if(j=i.prototype.storeIdentifier,e=a.JJStore._byId(j,b)){if(d.ignoreModel===e)return;this.addToRelation(e,c,!1)}else g(c)?this.get(c.key).addToIdQueue(b):h(c)&&this.setHasOneRelation(c,b,!0);return this},newModelInStore:function(a){var b,c,d,e;return b=a.id,b&&(e=this.getRelationByIdentifier(a.storeIdentifier),e&&(h(e)?b===this.get(e.key)&&this.addToRelation(a,e,!1):g(e)&&(d=this.get(e.key),c=d._relational.idQueue,k.indexOf(c,b)>-1&&this.addToRelation(a,e,!1)))),void 0},addToRelation:function(a,b,c){return k.isObject(b)||(b=this.getRelationByKey(b)),b&&1==a instanceof b.relatedModel&&(h(b)?this.get(b.key)!==a&&this.setHasOneRelation(b,a,c):g(b)&&this.get(b.key).add(a,{silentRelation:c})),this},setHasOneRelation:function(a,b,c){var d;return k.isObject(a)||(a=this.getRelationByKey(a)),d=this.get(a.key),this.attributes[a.key]=b,c?void 0:(1==d instanceof a.relatedModel&&d.removeFromRelation(a.reverseKey,this,!0),1==b instanceof a.relatedModel&&b.addToRelation(this,a.reverseKey,!0),this)},removeFromRelation:function(a,b,c){var d;return k.isObject(a)||(a=this.getRelationByKey(a)),a&&(h(a)?this.setHasOneRelation(a,null,c):g(a)&&(d=this.get(a.key),1==b instanceof a.relatedModel?d.remove(b,{silentRelation:c}):d.removeFromIdQueue(b))),this},_emptyRelation:function(a){var b;return h(a)?this.setHasOneRelation(a,null,!1):g(a)&&(b=this.get(a.key),b._cleanup()),this},_destroyAllRelations:function(){var b,c,d,e,f;for(a.JJStore.__removeModelFromStore(this),f=this.relations,d=0,e=f.length;e>d;d++)c=f[d],this.unbind("destroy",this._destroyAllRelations),a.JJStore.Events.unbind("created:"+c.relatedModel.prototype.storeIdentifier,this.newModelInStore,this),h(c)&&(b=this.get(c.key))?this.setHasOneRelation(c,null,!1):g(c)&&this.get(c.key)._cleanup();return this},getIdQueueLength:function(a){var b;if(k.isObject(a)||(a=this.getRelationByKey(a)),a){if(h(a))return b=this.get(a.key),b&&1!=b instanceof a.relatedModel?1:0;if(g(a))return this.get(a.key)._relational.idQueue.length}return 0},clearIdQueue:function(a){var b,c;return k.isObject(a)||(a=this.getRelationByKey(a)),a&&(h(a)?(c=this.get(a.key),c&&0==c instanceof a.relatedModel&&this.set(a.key,null,{silentRelation:!0})):g(a)&&(b=this.get(a.key),b._relational.idQueue=[])),this},fetchByIdQueue:function(b,c){var d,e,i,l,m=this;if(k.isObject(b)||(b=this.getRelationByKey(b)),b)if(g(b))this.get(b.key).fetchByIdQueue(c);else if(h(b)&&(d=this.get(b.key),d&&0==d instanceof b.relatedModel))return e=b.relatedModel,c=c?k.clone(c):{},l=f(e.prototype,"url"),l+=a.JJRelational.Config.url_id_appendix+d,c.url=l,void 0===c.parse&&(c.parse=!0),i=c.success,c.success=function(a){var d;return m.setHasOneRelation(b,null,!0),c.ignoreModel=m,d=new e(e.prototype.parse(a[0]),c),m.set(b.key,d),i&&i(d,a),d.trigger("sync",d,a,c)},j(this,c),this.sync.call(this,"read",this,c);return this},getRelationByKey:function(a){var b,c,d,e;for(e=this.relations,c=0,d=e.length;d>c;c++)if(b=e[c],b.key===a)return b;return!1},getRelationByReverseKey:function(a){var b,c,d,e;for(e=this.relations,c=0,d=e.length;d>c;c++)if(b=e[c],b.reverseKey===a)return b;return!1},getRelationByIdentifier:function(a){var b,c,d,e;for(e=this.relations,c=0,d=e.length;d>c;c++)if(b=e[c],b.relatedModel.prototype.storeIdentifier===a)return b;return!1}}),a.Collection.prototype.fetchByIdQueueOfModels=function(b,c){var e,f,i,l,m=this;return this.model&&1==this.model.prototype instanceof a.JJRelationalModel&&(i=this.model.prototype.getRelationByKey(b),f=i.relatedModel,e=[],h(i)?this.each(function(a){var c;return c=a.get(b),c&&0==c instanceof f?e.push(c):void 0}):g(i)&&this.each(function(a){var c;return c=a.get(b),e=k.union(e,c._relational.idQueue)}),e.length>0)?(c.url=d(f.prototype,e),void 0===c.parse&&(c.parse=!0),l=c.success,c.success=function(b){var d,e,g,h,j,n,o,p;if(g=[],i.collectionType&&(d=a.JJRelational.__getCollectionType(i.collectionType)))g=d.prototype.parse(b);else if(k.isArray(b))for(j=0,o=b.length;o>j;j++)h=b[j],k.isObject(h)&&g.push(f.prototype.parse(h));for(n=0,p=g.length;p>n;n++)e=g[n],new f(e);return l&&l(m,b),m.trigger("sync",m,b,c)},j(this,c),this.sync.call(this,"read",this,c)):(c.success&&c.success(this),this)},a.Collection.prototype.__set=a.Collection.prototype.set,a.Collection.prototype.set=function(b,c){var d,e,f,g,h,i,j,l,m,n,o,p,q;if(!this._relational)return this.__set(b,c);if(this._relational){for(c||(c={}),k.isArray(b)||(b=[b]),j=[],g=[],f=[],l=0,o=b.length;o>l;l++){if(h=b[l],0==h instanceof a.Model)if(k.isObject(h))h=this._prepareModel(h,c);else{if(!(d=a.JJStore._byId(this.model.prototype.storeIdentifier,h))){f.push(h);break}h=d}if(h){if(0==h instanceof this.model)throw new TypeError('Invalid model to be added to collection with relation key "'+this._relational.ownerKey+'"');j.push(h),h.id&&g.push(h.id)}}for(this.removeFromIdQueue(g),m=0,p=f.length;p>m;m++)e=f[m],this.addToIdQueue(e);if(!c.silentRelation)for(n=0,q=j.length;q>n;n++)i=j[n],i.addToRelation(this._relational.owner,this._relational.reverseKey,!0);c.silentRelation=!1,a.JJRelational.Config.work_with_store&&(c.merge=!1)}return this.__set(j,c)},a.Collection.prototype.__remove=a.Collection.prototype.remove,a.Collection.prototype.remove=function(b,c){var d=this;return this._relational?(c||(c={}),b=k.isArray(b)?b.slice():[b],k.each(b,function(b){return 1!=b instanceof a.Model||(d.__remove(b,c),c.silentRelation)?void 0:d._relatedModelRemoved(b,c)}),this):this.__remove(b,c)},a.Collection.prototype._cleanup=function(){return this.remove(this.models,{silentRelation:!1}),this._relational.idQueue=[],this},a.Collection.prototype._relatedModelRemoved=function(a,b){var c;return c=b.silentRelation?!1:!0,a.removeFromRelation(this._relational.reverseKey,this._relational.owner,c),this},a.Collection.prototype.__reset=a.Collection.prototype.reset,a.Collection.prototype.reset=function(a,b){return this._relational&&this._cleanup(),this.__reset(a,b),this},a.Collection.prototype.__fetch=a.Collection.prototype.fetch,a.Collection.prototype.fetch=function(b){var c,d=this;return b=b?k.clone(b):{},void 0===b.parse&&(b.parse=!0),c=b.success,b.success=function(e){var f,g,h,i,j,l,m,n,o,p,q,r;for(j=d.model.prototype.idAttribute,p=d.model.prototype.storeIdentifier,n=d.parse(e),h=[],f=[],f.push(n),q=0,r=n.length;r>q;q++)o=n[q],i=o[j],g=a.JJStore._byId(p,i),g&&(g.set(o,b),h.push(g),f.push(o));return n=k.without.apply(window,f),d._relational&&(b.ignoreModel=d._relational.owner),m=h.concat(n),l=b.reset?"reset":"set",b.reset||(b.merge=!1),d[l](m,b),c&&c(d,e),d.trigger("sync",d,e,b)},j(this,b),this.sync.call(this,"read",this,b)},a.Collection.prototype.fetchByIdQueue=function(a){var b,c,e=this;return a=a?k.clone(a):{},b=this._relational.idQueue,b.length>0?(a.url=d(this,b),void 0===a.parse&&(a.parse=!0),c=a.success,a.success=function(b){return a.ignoreModel=e._relational.owner,e._relational.idQueue=[],e.add(e.parse(b),a),c&&c(e,b),e.trigger("sync",e,b,a)},j(this,a),this.sync.call(this,"read",this,a)):this},a.Collection.prototype.addToIdQueue=function(a){var b;return b=this._relational.idQueue,b.push(a),this._relational.idQueue=k.uniq(b),this},a.Collection.prototype.removeFromIdQueue=function(a){var b;return a=k.isArray?a:[a],b=[this._relational.idQueue].concat(a),this._relational.idQueue=k.without.apply(window,b),this},a.Collection.prototype.getIDArray=function(){var a;return a=[],this.each(function(b){return b.id?a.push(b.id):void 0}),k.union(a,this._relational.idQueue)},a.Collection.prototype.getArrayForAttribute=function(a){var b;return a===this.model.prototype.idAttribute?this.getIDArray():(b=[],this.each(function(c){return b.push(c.get(a))}),b)},j=function(a,b){var c;return c=b.error,b.error=function(d){return c&&c(a,d,b),a.trigger("error",a,d,b)}},c=function(b){var c,d;for(c in b)d=b[c],d instanceof a.Collection&&d._relational&&(b[c]=d.models.concat(d._relational.idQueue));return b},f=function(a,b){return a&&a[b]?k.isFunction(a[b])?a[b]():a[b]:null},e=function(a,b){var c;return c=f(a,"urlRoot")||f(a.collection,"url")||i(),c+("/"===c.charAt(c.length-1)?"":"/")+encodeURIComponent(b?b:a.id)},d=function(b,c){var d;return d=f(b,"url"),d?d+=a.JJRelational.Config.url_id_appendix+c.join(","):(i(),!1)},i=function(){throw new Error('A "url" property or function must be specified')},h=function(a){return"has_one"===a.type?!0:!1},g=function(a){return"has_many"===a.type||"many_many"===a.type?!0:!1},this}(),define("plugins/backbone.JJRelational",function(){});var JJRestApi;JJRestApi={url:"/api/v2/",extension:"json",structurID:"api-structure"},JJRestApi.Models={},JJRestApi.Collections={},JJRestApi.Modules={},JJRestApi.Modules._modules=[],JJRestApi.Events=_.extend({},Backbone.Events),JJRestApi.Model=function(a){return this.Models[a]?this.Models[a]:!1},JJRestApi.Collection=function(a){return this.Collections[a]?this.Collections[a]:!1},JJRestApi.Modules.extend=function(a,b){return JJRestApi.Modules._modules.push({module:a,extension:b}),!0},JJRestApi.extendModel=function(a,b,c){var d;return d=this.Model(a),0==b.prototype instanceof Backbone.Model&&(c=b,b=d),c||(c={}),d?this.Models[a]=b.extend(c):void 0},JJRestApi.extendCollection=function(a,b,c){var d;return d=this.Collection(a),0==b instanceof Backbone.Collection&&(c=b,b=d),c||(c={}),d?this.Collections[a]=b.extend(c):void 0},JJRestApi.setObjectUrl=function(a,b){return b=b||{},this.url+a+(b.id?"/"+b.id:"")+"."+this.extension},JJRestApi.hookSecurityToken=function(){return JJRestApi.getFromDomOrApi("SecurityID",{noAjax:!0}).done(function(a){return a.SecurityID?$(document).bind("ajaxSend",function(b,c){return c.setRequestHeader(a.RequestHeader,a.SecurityID)}):void 0})},JJRestApi.getFromDomOrApi=function(a,b){var c,d,e,f,g;return b=b||{},f=b.name?b.name:a.toLowerCase(),c=$("#api-"+f),c.length?(d=$.trim(c.html()),"application/json"===c.attr("type")&&(d=d?$.parseJSON(d):null),e=new $.Deferred,e.resolve(d),e.promise()):b.noAjax?$.Deferred().resolve(null):(g=b.url?b.url:JJRestApi.setObjectUrl(a,b),b.urlSuffix&&(g+=b.urlSuffix),e=$.getJSON(g),JJRestApi.Events.trigger("dfdAjax",e),e)},JJRestApi.objToUrlString=function(a){var b,c,d,e,f,g,h;e="";for(c in a){if(h=a[c],"search"===c){f="s=";for(b in h)g=h[b],f+=encodeURIComponent(b)+":",f+=_.isArray(g)?encodeURIComponent(g.join("|")):encodeURIComponent(g),f+=";";e+=f}else e+=encodeURIComponent(c)+"="+encodeURIComponent(h);e+="&"}return d=e.length,e.lastIndexOf("&")===d-1&&(e=e.substr(0,d-1)),e},JJRestApi.bootstrapWithStructure=function(){var a;return a=JJRestApi.getFromDomOrApi("Structure"),a.done(function(a){return JJRestApi.Bootstrap(a)}),a.fail(function(){throw new Error("Structure could not be loaded.")}),a},JJRestApi.Bootstrap=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t=this;if(e=[],i=function(a){var b;switch(a){case"belongs_to":b="has_one";break;case"has_one":b="has_one";break;case"has_many":b="has_many";break;case"many_many":b="many_many";break;case"belongs_many_many":b="many_many"}return b},h=function(a,b){var c,d;return c=i(b.Type),d={type:c,relatedModel:function(){return JJRestApi.Model(b.ClassName)},key:b.Key,reverseKey:b.ReverseKey,includeInJSON:["id"]},"has_one"!==c&&(d.collectionType=b.ClassName,e.push(b.ClassName)),d},j=function(a){return(a="has_many")?!0:!1},b=function(a,b,c){var d,e,f,g,i,j,k,l;g={defaults:{}},k=[];for(e in b)j=b[e],(i=h(a,j))&&k.push(i);if(k.length&&(g.relations=k),g.storeIdentifier=a,g.url=function(){return this.id?JJRestApi.url+this.storeIdentifier+"/"+this.id+"."+JJRestApi.extension:this.urlRoot},g.urlRoot=t.setObjectUrl(a),g.idAttribute="ID",c&&c.DefaultFields){l=c.DefaultFields;for(f in l)d=l[f],g.defaults[d]=null}return t.Models[a]=t.Model(a).extend(g),!0},f=a.Config||!1,g=a.Config?a.Objs:a,g){for(c in g)m=g[c],this.Models[c]=Backbone.JJRelationalModel.extend({}),this.Collections[c]=Backbone.Collection.extend({url:this.setObjectUrl(c),comparator:function(a){return a.id},parse:function(a){return a}});for(r=JJRestApi.Modules._modules,n=0,p=r.length;p>n;n++)k=r[n],k.extension.call(window,k.module);for(c in g)m=g[c],b(c,m,f),this.Collections[c]=this.Collection(c).extend({model:this.Model(c)});for(d={},s=_.uniq(e),o=0,q=s.length;q>o;o++)l=s[o],d[l]=this.Collection(l);return Backbone.JJRelational.registerCollectionTypes(d),!1}},define("plugins/backbone.JJRestApi",function(){}),window.matchMedia=window.matchMedia||function(a){var b,c=a.documentElement,d=c.firstElementChild||c.firstChild,e=a.createElement("body"),f=a.createElement("div");return f.id="mq-test-1",f.style.cssText="position:absolute;top:-100em",e.appendChild(f),function(a){return f.innerHTML='&shy;<style media="'+a+'"> #mq-test-1 { width: 42px; }</style>',c.insertBefore(e,d),b=42==f.offsetWidth,c.removeChild(e),{matches:b,media:a}}}(document),define("responsiveimage/external/matchmedia",function(){}),function(a){a.picturefill_opts={wrapperTag:"span",imageTag:"span"},a.picturefill=function(b){b=b||a.picturefill_opts;for(var c=a.document.getElementsByTagName(b.wrapperTag),d=0,e=c.length;e>d;d++)if(null!==c[d].getAttribute("data-picture")){for(var f=c[d].getElementsByTagName(b.imageTag),g=[],h=c[d].offsetWidth,i=0,j=f.length;j>i;i++){var k=f[i].getAttribute("data-media");c[i].getAttribute("data-ratio"),(!k||a.matchMedia&&a.matchMedia(k).matches)&&g.push(f[i])}var l,m=c[d].getElementsByTagName("img")[0];g.length?(m||(m=a.document.createElement("img"),m.alt=c[d].getAttribute("data-alt"),c[d].appendChild(m)),l=g.pop(),m.src=l.getAttribute("data-src"),m.height=h/parseFloat(l.getAttribute("data-ratio"),10)):m&&c[d].removeChild(m)}},a.addEventListener?(a.addEventListener("resize",a.picturefill,!1),a.addEventListener("DOMContentLoaded",function(){a.picturefill(),a.removeEventListener("load",a.picturefill,!1)},!1),a.addEventListener("load",a.picturefill,!1)):a.attachEvent&&a.attachEvent("onload",a.picturefill)}(this),define("responsiveimage/picturefill",function(){}),define("app",["jquery","underscore","backbone","handlebars","plugins/backbone.layoutmanager","plugins/backbone.JJRelational","plugins/backbone.JJRestApi","responsiveimage/picturefill"],function(a,b,c,d){var e,f;
return f={root:"/",pendingTemplateReqs:{}},e=window.JST=window.JST||{},c.NMLayout=c.Layout.extend({setViewAndRenderMaybe:function(a,b){return this.setView(a,b),this.__manager__.hasRendered?b.render():void 0},insertViewAndRenderMaybe:function(a,b){return this.insertView(a,b),this.__manager__.hasRendered?b.render():void 0}}),c.Layout.configure({manage:!0,prefix:"app/templates/",pendingAjaxRequests:{},fetch:function(b){var g,h,i;return h=void 0,i=b.replace(c.Layout.prototype.options.prefix,""),0===i.indexOf("/")?b=i.substring(1):b+=".html",e[b]?e[b]:(h=this.async(),(g=f.pendingTemplateReqs[b])?g.then(function(){return h(e[b])}):(g=a.ajax({url:f.root+"app/"+b}),f.pendingTemplateReqs[b]=g,g.then(function(a){return e[b]=d.compile(a),e[b].__compiled__=!0,delete f.pendingTemplateReqs[b],h(e[b])})),g)}}),b.extend(f,{module:function(a){return b.extend({Views:{}},a)},useLayout:function(d,e){var f,g,h,i,j;return e=e||{},h=e.customClass?e.customClass:d,this.layout&&this.layout.getAllOptions().template==="layouts/"+d?(i=this.layout,i.customClass&&i.$el.removeClass(i.customClass),h&&(i.customClass=h,i.$el.addClass(h)),this.layout):(this.layout&&this.layout.remove(),j=new c.NMLayout(b.extend({template:"layouts/"+d,className:"layout "+h,id:"layout"},e)),a("#main").empty().append(j.el),a(j.el).css("height","100%"),g=this.currentLayoutName,f=a("body"),g&&f.removeClass(g),f.addClass(d),this.currentLayoutName=d,j.render(),this.layout=j,j)}},c.Events)}),function(a,b){function c(b,c){var e,f,g,h=b.nodeName.toLowerCase();return"area"===h?(e=b.parentNode,f=e.name,b.href&&f&&"map"===e.nodeName.toLowerCase()?(g=a("img[usemap=#"+f+"]")[0],!!g&&d(g)):!1):(/input|select|textarea|button|object/.test(h)?!b.disabled:"a"===h?b.href||c:c)&&d(b)}function d(b){return a.expr.filters.visible(b)&&!a(b).parents().addBack().filter(function(){return"hidden"===a.css(this,"visibility")}).length}var e=0,f=/^ui-id-\d+$/;a.ui=a.ui||{},a.ui.version||(a.extend(a.ui,{version:"1.10.0",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),a.fn.extend({_focus:a.fn.focus,focus:function(b,c){return"number"==typeof b?this.each(function(){var d=this;setTimeout(function(){a(d).focus(),c&&c.call(d)},b)}):this._focus.apply(this,arguments)},scrollParent:function(){var b;return b=a.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(a.css(this,"position"))&&/(auto|scroll)/.test(a.css(this,"overflow")+a.css(this,"overflow-y")+a.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(a.css(this,"overflow")+a.css(this,"overflow-y")+a.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!b.length?a(document):b},zIndex:function(c){if(c!==b)return this.css("zIndex",c);if(this.length)for(var d,e,f=a(this[0]);f.length&&f[0]!==document;){if(d=f.css("position"),("absolute"===d||"relative"===d||"fixed"===d)&&(e=parseInt(f.css("zIndex"),10),!isNaN(e)&&0!==e))return e;f=f.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++e)})},removeUniqueId:function(){return this.each(function(){f.test(this.id)&&a(this).removeAttr("id")})}}),a.extend(a.expr[":"],{data:a.expr.createPseudo?a.expr.createPseudo(function(b){return function(c){return!!a.data(c,b)}}):function(b,c,d){return!!a.data(b,d[3])},focusable:function(b){return c(b,!isNaN(a.attr(b,"tabindex")))},tabbable:function(b){var d=a.attr(b,"tabindex"),e=isNaN(d);return(e||d>=0)&&c(b,!e)}}),a("<a>").outerWidth(1).jquery||a.each(["Width","Height"],function(c,d){function e(b,c,d,e){return a.each(f,function(){c-=parseFloat(a.css(b,"padding"+this))||0,d&&(c-=parseFloat(a.css(b,"border"+this+"Width"))||0),e&&(c-=parseFloat(a.css(b,"margin"+this))||0)}),c}var f="Width"===d?["Left","Right"]:["Top","Bottom"],g=d.toLowerCase(),h={innerWidth:a.fn.innerWidth,innerHeight:a.fn.innerHeight,outerWidth:a.fn.outerWidth,outerHeight:a.fn.outerHeight};a.fn["inner"+d]=function(c){return c===b?h["inner"+d].call(this):this.each(function(){a(this).css(g,e(this,c)+"px")})},a.fn["outer"+d]=function(b,c){return"number"!=typeof b?h["outer"+d].call(this,b):this.each(function(){a(this).css(g,e(this,b,!0,c)+"px")})}}),a.fn.addBack||(a.fn.addBack=function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}),a("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(a.fn.removeData=function(b){return function(c){return arguments.length?b.call(this,a.camelCase(c)):b.call(this)}}(a.fn.removeData)),a.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),a.support.selectstart="onselectstart"in document.createElement("div"),a.fn.extend({disableSelection:function(){return this.bind((a.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(a){a.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),a.extend(a.ui,{plugin:{add:function(b,c,d){var e,f=a.ui[b].prototype;for(e in d)f.plugins[e]=f.plugins[e]||[],f.plugins[e].push([c,d[e]])},call:function(a,b,c){var d,e=a.plugins[b];if(e&&a.element[0].parentNode&&11!==a.element[0].parentNode.nodeType)for(d=0;d<e.length;d++)a.options[e[d][0]]&&e[d][1].apply(a.element,c)}},hasScroll:function(b,c){if("hidden"===a(b).css("overflow"))return!1;var d=c&&"left"===c?"scrollLeft":"scrollTop",e=!1;return b[d]>0?!0:(b[d]=1,e=b[d]>0,b[d]=0,e)}}))}(jQuery),define("plugins/visualsearch/jquery.ui.core",function(){}),function(a,b){var c=0,d=Array.prototype.slice,e=a.cleanData;a.cleanData=function(b){for(var c,d=0;null!=(c=b[d]);d++)try{a(c).triggerHandler("remove")}catch(f){}e(b)},a.widget=function(b,c,d){var e,f,g,h,i={},j=b.split(".")[0];b=b.split(".")[1],e=j+"-"+b,d||(d=c,c=a.Widget),a.expr[":"][e.toLowerCase()]=function(b){return!!a.data(b,e)},a[j]=a[j]||{},f=a[j][b],g=a[j][b]=function(a,b){return this._createWidget?(arguments.length&&this._createWidget(a,b),void 0):new g(a,b)},a.extend(g,f,{version:d.version,_proto:a.extend({},d),_childConstructors:[]}),h=new c,h.options=a.widget.extend({},h.options),a.each(d,function(b,d){return a.isFunction(d)?(i[b]=function(){var a=function(){return c.prototype[b].apply(this,arguments)},e=function(a){return c.prototype[b].apply(this,a)};return function(){var b,c=this._super,f=this._superApply;return this._super=a,this._superApply=e,b=d.apply(this,arguments),this._super=c,this._superApply=f,b}}(),void 0):(i[b]=d,void 0)}),g.prototype=a.widget.extend(h,{widgetEventPrefix:f?h.widgetEventPrefix:b},i,{constructor:g,namespace:j,widgetName:b,widgetFullName:e}),f?(a.each(f._childConstructors,function(b,c){var d=c.prototype;a.widget(d.namespace+"."+d.widgetName,g,c._proto)}),delete f._childConstructors):c._childConstructors.push(g),a.widget.bridge(b,g)},a.widget.extend=function(c){for(var e,f,g=d.call(arguments,1),h=0,i=g.length;i>h;h++)for(e in g[h])f=g[h][e],g[h].hasOwnProperty(e)&&f!==b&&(c[e]=a.isPlainObject(f)?a.isPlainObject(c[e])?a.widget.extend({},c[e],f):a.widget.extend({},f):f);return c},a.widget.bridge=function(c,e){var f=e.prototype.widgetFullName||c;a.fn[c]=function(g){var h="string"==typeof g,i=d.call(arguments,1),j=this;return g=!h&&i.length?a.widget.extend.apply(null,[g].concat(i)):g,h?this.each(function(){var d,e=a.data(this,f);return e?a.isFunction(e[g])&&"_"!==g.charAt(0)?(d=e[g].apply(e,i),d!==e&&d!==b?(j=d&&d.jquery?j.pushStack(d.get()):d,!1):void 0):a.error("no such method '"+g+"' for "+c+" widget instance"):a.error("cannot call methods on "+c+" prior to initialization; "+"attempted to call method '"+g+"'")}):this.each(function(){var b=a.data(this,f);b?b.option(g||{})._init():a.data(this,f,new e(g,this))}),j}},a.Widget=function(){},a.Widget._childConstructors=[],a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(b,d){d=a(d||this.defaultElement||this)[0],this.element=a(d),this.uuid=c++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=a.widget.extend({},this.options,this._getCreateOptions(),b),this.bindings=a(),this.hoverable=a(),this.focusable=a(),d!==this&&(a.data(d,this.widgetFullName,this),this._on(!0,this.element,{remove:function(a){a.target===d&&this.destroy()}}),this.document=a(d.style?d.ownerDocument:d.document||d),this.window=a(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:a.noop,_getCreateEventData:a.noop,_create:a.noop,_init:a.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(a.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled "+"ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:a.noop,widget:function(){return this.element},option:function(c,d){var e,f,g,h=c;if(0===arguments.length)return a.widget.extend({},this.options);if("string"==typeof c)if(h={},e=c.split("."),c=e.shift(),e.length){for(f=h[c]=a.widget.extend({},this.options[c]),g=0;g<e.length-1;g++)f[e[g]]=f[e[g]]||{},f=f[e[g]];if(c=e.pop(),d===b)return f[c]===b?null:f[c];f[c]=d}else{if(d===b)return this.options[c]===b?null:this.options[c];h[c]=d}return this._setOptions(h),this},_setOptions:function(a){var b;for(b in a)this._setOption(b,a[b]);return this},_setOption:function(a,b){return this.options[a]=b,"disabled"===a&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!b).attr("aria-disabled",b),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(b,c,d){var e,f=this;"boolean"!=typeof b&&(d=c,c=b,b=!1),d?(c=e=a(c),this.bindings=this.bindings.add(c)):(d=c,c=this.element,e=this.widget()),a.each(d,function(d,g){function h(){return b||f.options.disabled!==!0&&!a(this).hasClass("ui-state-disabled")?("string"==typeof g?f[g]:g).apply(f,arguments):void 0}"string"!=typeof g&&(h.guid=g.guid=g.guid||h.guid||a.guid++);var i=d.match(/^(\w+)\s*(.*)$/),j=i[1]+f.eventNamespace,k=i[2];k?e.delegate(k,j,h):c.bind(j,h)})},_off:function(a,b){b=(b||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,a.unbind(b).undelegate(b)},_delay:function(a,b){function c(){return("string"==typeof a?d[a]:a).apply(d,arguments)}var d=this;return setTimeout(c,b||0)},_hoverable:function(b){this.hoverable=this.hoverable.add(b),this._on(b,{mouseenter:function(b){a(b.currentTarget).addClass("ui-state-hover")},mouseleave:function(b){a(b.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(b){this.focusable=this.focusable.add(b),this._on(b,{focusin:function(b){a(b.currentTarget).addClass("ui-state-focus")},focusout:function(b){a(b.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(b,c,d){var e,f,g=this.options[b];if(d=d||{},c=a.Event(c),c.type=(b===this.widgetEventPrefix?b:this.widgetEventPrefix+b).toLowerCase(),c.target=this.element[0],f=c.originalEvent,f)for(e in f)e in c||(c[e]=f[e]);return this.element.trigger(c,d),!(a.isFunction(g)&&g.apply(this.element[0],[c].concat(d))===!1||c.isDefaultPrevented())}},a.each({show:"fadeIn",hide:"fadeOut"},function(b,c){a.Widget.prototype["_"+b]=function(d,e,f){"string"==typeof e&&(e={effect:e});var g,h=e?e===!0||"number"==typeof e?c:e.effect||c:b;e=e||{},"number"==typeof e&&(e={duration:e}),g=!a.isEmptyObject(e),e.complete=f,e.delay&&d.delay(e.delay),g&&a.effects&&a.effects.effect[h]?d[b](e):h!==b&&d[h]?d[h](e.duration,e.easing,f):d.queue(function(c){a(this)[b](),f&&f.call(d[0]),c()})}})}(jQuery),define("plugins/visualsearch/jquery.ui.widget",function(){}),function(a){var b=0;a.widget("ui.autocomplete",{version:"1.10.0",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},pending:0,_create:function(){var b,c,d;this.isMultiLine=this._isMultiLine(),this.valueMethod=this.element[this.element.is("input,textarea")?"val":"text"],this.isNewMenu=!0,this.element.addClass("ui-autocomplete-input").attr("autocomplete","off"),this._on(this.element,{keydown:function(e){if(this.element.prop("readOnly"))return b=!0,d=!0,c=!0,void 0;b=!1,d=!1,c=!1;var f=a.ui.keyCode;switch(e.keyCode){case f.PAGE_UP:b=!0,this._move("previousPage",e);break;case f.PAGE_DOWN:b=!0,this._move("nextPage",e);break;case f.UP:b=!0,this._keyEvent("previous",e);break;case f.DOWN:b=!0,this._keyEvent("next",e);break;case f.ENTER:case f.NUMPAD_ENTER:this.menu.active&&(b=!0,e.preventDefault(),this.menu.select(e));break;case f.TAB:this.menu.active&&this.menu.select(e);break;case f.ESCAPE:this.menu.element.is(":visible")&&(this._value(this.term),this.close(e),e.preventDefault());break;default:c=!0,this._searchTimeout(e)}},keypress:function(d){if(b)return b=!1,d.preventDefault(),void 0;if(!c){var e=a.ui.keyCode;switch(d.keyCode){case e.PAGE_UP:this._move("previousPage",d);break;case e.PAGE_DOWN:this._move("nextPage",d);break;case e.UP:this._keyEvent("previous",d);break;case e.DOWN:this._keyEvent("next",d)}}},input:function(a){return d?(d=!1,a.preventDefault(),void 0):(this._searchTimeout(a),void 0)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(a){return this.cancelBlur?(delete this.cancelBlur,void 0):(clearTimeout(this.searching),this.close(a),this._change(a),void 0)}}),this._initSource(),this.menu=a("<ul>").addClass("ui-autocomplete").appendTo(this._appendTo()).menu({input:a(),role:null}).zIndex(this.element.zIndex()+1).hide().data("ui-menu"),this._on(this.menu.element,{mousedown:function(b){b.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur});var c=this.menu.element[0];a(b.target).closest(".ui-menu-item").length||this._delay(function(){var b=this;this.document.one("mousedown",function(d){d.target!==b.element[0]&&d.target!==c&&!a.contains(c,d.target)&&b.close()})})},menufocus:function(b,c){if(this.isNewMenu&&(this.isNewMenu=!1,b.originalEvent&&/^mouse/.test(b.originalEvent.type)))return this.menu.blur(),this.document.one("mousemove",function(){a(b.target).trigger(b.originalEvent)}),void 0;var d=c.item.data("ui-autocomplete-item");!1!==this._trigger("focus",b,{item:d})?b.originalEvent&&/^key/.test(b.originalEvent.type)&&this._value(d.value):this.liveRegion.text(d.value)},menuselect:function(a,b){var c=b.item.data("ui-autocomplete-item"),d=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=d,this._delay(function(){this.previous=d,this.selectedItem=c})),!1!==this._trigger("select",a,{item:c})&&this._value(c.value),this.term=this._value(),this.close(a),this.selectedItem=c}}),this.liveRegion=a("<span>",{role:"status","aria-live":"polite"}).addClass("ui-helper-hidden-accessible").insertAfter(this.element),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(a,b){this._super(a,b),"source"===a&&this._initSource(),"appendTo"===a&&this.menu.element.appendTo(this._appendTo()),"disabled"===a&&b&&this.xhr&&this.xhr.abort()},_appendTo:function(){var b=this.options.appendTo;return b&&(b=b.jquery||b.nodeType?a(b):this.document.find(b).eq(0)),b||(b=this.element.closest(".ui-front")),b.length||(b=this.document[0].body),b},_isMultiLine:function(){return this.element.is("textarea")?!0:this.element.is("input")?!1:this.element.prop("isContentEditable")},_initSource:function(){var b,c,d=this;a.isArray(this.options.source)?(b=this.options.source,this.source=function(c,d){d(a.ui.autocomplete.filter(b,c.term))}):"string"==typeof this.options.source?(c=this.options.source,this.source=function(b,e){d.xhr&&d.xhr.abort(),d.xhr=a.ajax({url:c,data:b,dataType:"json",success:function(a){e(a)},error:function(){e([])}})}):this.source=this.options.source},_searchTimeout:function(a){clearTimeout(this.searching),this.searching=this._delay(function(){this.term!==this._value()&&(this.selectedItem=null,this.search(null,a))},this.options.delay)},search:function(a,b){return a=null!=a?a:this._value(),this.term=this._value(),a.length<this.options.minLength?this.close(b):this._trigger("search",b)!==!1?this._search(a):void 0},_search:function(a){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:a},this._response())},_response:function(){var a=this,c=++b;return function(d){c===b&&a.__response(d),a.pending--,a.pending||a.element.removeClass("ui-autocomplete-loading")}},__response:function(a){a&&(a=this._normalize(a)),this._trigger("response",null,{content:a}),!this.options.disabled&&a&&a.length&&!this.cancelSearch?(this._suggest(a),this._trigger("open")):this._close()},close:function(a){this.cancelSearch=!0,this._close(a)},_close:function(a){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",a))},_change:function(a){this.previous!==this._value()&&this._trigger("change",a,{item:this.selectedItem})},_normalize:function(b){return b.length&&b[0].label&&b[0].value?b:a.map(b,function(b){return"string"==typeof b?{label:b,value:b}:a.extend({label:b.label||b.value,value:b.value||b.label},b)})},_suggest:function(b){var c=this.menu.element.empty().zIndex(this.element.zIndex()+1);this._renderMenu(c,b),this.menu.refresh(),c.show(),this._resizeMenu(),c.position(a.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var a=this.menu.element;a.outerWidth(Math.max(a.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(b,c){var d=this;a.each(c,function(a,c){d._renderItemData(b,c)})},_renderItemData:function(a,b){return this._renderItem(a,b).data("ui-autocomplete-item",b)},_renderItem:function(b,c){return a("<li>").append(a("<a>").text(c.label)).appendTo(b)},_move:function(a,b){return this.menu.element.is(":visible")?this.menu.isFirstItem()&&/^previous/.test(a)||this.menu.isLastItem()&&/^next/.test(a)?(this._value(this.term),this.menu.blur(),void 0):(this.menu[a](b),void 0):(this.search(null,b),void 0)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(a,b){(!this.isMultiLine||this.menu.element.is(":visible"))&&(this._move(a,b),b.preventDefault())}}),a.extend(a.ui.autocomplete,{escapeRegex:function(a){return a.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(b,c){var d=new RegExp(a.ui.autocomplete.escapeRegex(c),"i");return a.grep(b,function(a){return d.test(a.label||a.value||a)})}}),a.widget("ui.autocomplete",a.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(a){return a+(a>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(a){var b;this._superApply(arguments),this.options.disabled||this.cancelSearch||(b=a&&a.length?this.options.messages.results(a.length):this.options.messages.noResults,this.liveRegion.text(b))}})}(jQuery),define("plugins/visualsearch/jquery.ui.autocomplete",function(){}),function(a){a.widget("ui.menu",{version:"1.10.0",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content ui-corner-all").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}).bind("click"+this.eventNamespace,a.proxy(function(a){this.options.disabled&&a.preventDefault()},this)),this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true"),this._on({"mousedown .ui-menu-item > a":function(a){a.preventDefault()},"click .ui-state-disabled > a":function(a){a.preventDefault()},"click .ui-menu-item:has(a)":function(b){var c=a(b.target).closest(".ui-menu-item");!this.mouseHandled&&c.not(".ui-state-disabled").length&&(this.mouseHandled=!0,this.select(b),c.has(".ui-menu").length?this.expand(b):this.element.is(":focus")||(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(b){var c=a(b.currentTarget);c.siblings().children(".ui-state-active").removeClass("ui-state-active"),this.focus(b,c)},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(a,b){var c=this.active||this.element.children(".ui-menu-item").eq(0);b||this.focus(a,c)},blur:function(b){this._delay(function(){a.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(b)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(b){a(b.target).closest(".ui-menu").length||this.collapseAll(b),this.mouseHandled=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").children("a").removeUniqueId().removeClass("ui-corner-all ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var b=a(this);b.data("ui-menu-submenu-carat")&&b.remove()}),this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(b){function c(a){return a.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}var d,e,f,g,h,i=!0;switch(b.keyCode){case a.ui.keyCode.PAGE_UP:this.previousPage(b);break;case a.ui.keyCode.PAGE_DOWN:this.nextPage(b);break;case a.ui.keyCode.HOME:this._move("first","first",b);break;case a.ui.keyCode.END:this._move("last","last",b);break;case a.ui.keyCode.UP:this.previous(b);break;case a.ui.keyCode.DOWN:this.next(b);break;case a.ui.keyCode.LEFT:this.collapse(b);break;case a.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(b);break;case a.ui.keyCode.ENTER:case a.ui.keyCode.SPACE:this._activate(b);break;case a.ui.keyCode.ESCAPE:this.collapse(b);break;default:i=!1,e=this.previousFilter||"",f=String.fromCharCode(b.keyCode),g=!1,clearTimeout(this.filterTimer),f===e?g=!0:f=e+f,h=new RegExp("^"+c(f),"i"),d=this.activeMenu.children(".ui-menu-item").filter(function(){return h.test(a(this).children("a").text())}),d=g&&-1!==d.index(this.active.next())?this.active.nextAll(".ui-menu-item"):d,d.length||(f=String.fromCharCode(b.keyCode),h=new RegExp("^"+c(f),"i"),d=this.activeMenu.children(".ui-menu-item").filter(function(){return h.test(a(this).children("a").text())})),d.length?(this.focus(b,d),d.length>1?(this.previousFilter=f,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter):delete this.previousFilter}i&&b.preventDefault()},_activate:function(a){this.active.is(".ui-state-disabled")||(this.active.children("a[aria-haspopup='true']").length?this.expand(a):this.select(a))},refresh:function(){var b,c=this.options.icons.submenu,d=this.element.find(this.options.menus);d.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-corner-all").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var b=a(this),d=b.prev("a"),e=a("<span>").addClass("ui-menu-icon ui-icon "+c).data("ui-menu-submenu-carat",!0);d.attr("aria-haspopup","true").prepend(e),b.attr("aria-labelledby",d.attr("id"))}),b=d.add(this.element),b.children(":not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","presentation").children("a").uniqueId().addClass("ui-corner-all").attr({tabIndex:-1,role:this._itemRole()}),b.children(":not(.ui-menu-item)").each(function(){var b=a(this);/[^\-—–\s]/.test(b.text())||b.addClass("ui-widget-content ui-menu-divider")}),b.children(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!a.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(a,b){"icons"===a&&this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(b.submenu),this._super(a,b)},focus:function(a,b){var c,d;this.blur(a,a&&"focus"===a.type),this._scrollIntoView(b),this.active=b.first(),d=this.active.children("a").addClass("ui-state-focus"),this.options.role&&this.element.attr("aria-activedescendant",d.attr("id")),this.active.parent().closest(".ui-menu-item").children("a:first").addClass("ui-state-active"),a&&"keydown"===a.type?this._close():this.timer=this._delay(function(){this._close()},this.delay),c=b.children(".ui-menu"),c.length&&/^mouse/.test(a.type)&&this._startOpening(c),this.activeMenu=b.parent(),this._trigger("focus",a,{item:b})},_scrollIntoView:function(b){var c,d,e,f,g,h;this._hasScroll()&&(c=parseFloat(a.css(this.activeMenu[0],"borderTopWidth"))||0,d=parseFloat(a.css(this.activeMenu[0],"paddingTop"))||0,e=b.offset().top-this.activeMenu.offset().top-c-d,f=this.activeMenu.scrollTop(),g=this.activeMenu.height(),h=b.height(),0>e?this.activeMenu.scrollTop(f+e):e+h>g&&this.activeMenu.scrollTop(f+e-g+h))},blur:function(a,b){b||clearTimeout(this.timer),this.active&&(this.active.children("a").removeClass("ui-state-focus"),this.active=null,this._trigger("blur",a,{item:this.active}))},_startOpening:function(a){clearTimeout(this.timer),"true"===a.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close(),this._open(a)},this.delay))},_open:function(b){var c=a.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(b.parents(".ui-menu")).hide().attr("aria-hidden","true"),b.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(c)},collapseAll:function(b,c){clearTimeout(this.timer),this.timer=this._delay(function(){var d=c?this.element:a(b&&b.target).closest(this.element.find(".ui-menu"));d.length||(d=this.element),this._close(d),this.blur(b),this.activeMenu=d},this.delay)},_close:function(a){a||(a=this.active?this.active.parent():this.element),a.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find("a.ui-state-active").removeClass("ui-state-active")},collapse:function(a){var b=this.active&&this.active.parent().closest(".ui-menu-item",this.element);b&&b.length&&(this._close(),this.focus(a,b))},expand:function(a){var b=this.active&&this.active.children(".ui-menu ").children(".ui-menu-item").first();b&&b.length&&(this._open(b.parent()),this._delay(function(){this.focus(a,b)}))},next:function(a){this._move("next","first",a)},previous:function(a){this._move("prev","last",a)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(a,b,c){var d;this.active&&(d="first"===a||"last"===a?this.active["first"===a?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[a+"All"](".ui-menu-item").eq(0)),d&&d.length&&this.active||(d=this.activeMenu.children(".ui-menu-item")[b]()),this.focus(c,d)},nextPage:function(b){var c,d,e;return this.active?(this.isLastItem()||(this._hasScroll()?(d=this.active.offset().top,e=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return c=a(this),c.offset().top-d-e<0}),this.focus(b,c)):this.focus(b,this.activeMenu.children(".ui-menu-item")[this.active?"last":"first"]())),void 0):(this.next(b),void 0)},previousPage:function(b){var c,d,e;return this.active?(this.isFirstItem()||(this._hasScroll()?(d=this.active.offset().top,e=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return c=a(this),c.offset().top-d+e>0}),this.focus(b,c)):this.focus(b,this.activeMenu.children(".ui-menu-item").first())),void 0):(this.next(b),void 0)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(b){this.active=this.active||a(b.target).closest(".ui-menu-item");var c={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(b,!0),this._trigger("select",b,c)}})}(jQuery),define("plugins/visualsearch/jquery.ui.menu",function(){}),function(){var a=jQuery;window.VS||(window.VS={}),VS.app||(VS.app={}),VS.ui||(VS.ui={}),VS.model||(VS.model={}),VS.utils||(VS.utils={}),VS.VERSION="0.4.0",VS.VisualSearch=function(b){var c={container:"",query:"",autosearch:!0,unquotable:[],remainder:"text",showFacets:!0,callbacks:{search:a.noop,focus:a.noop,blur:a.noop,facetMatches:a.noop,valueMatches:a.noop}};if(this.options=_.extend({},c,b),this.options.callbacks=_.extend({},c.callbacks,b.callbacks),VS.app.hotkeys.initialize(),this.searchQuery=new VS.model.SearchQuery,this.searchBox=new VS.ui.SearchBox({app:this,showFacets:this.options.showFacets}),b.container){var d=this.searchBox.render().el;a(this.options.container).html(d)}return this.searchBox.value(this.options.query||""),a(window).bind("unload",function(){}),this},VS.init=function(a){return new VS.VisualSearch(a)}}(),function(){var a=jQuery;VS.ui.SearchBox=Backbone.View.extend({id:"search",events:{"click .VS-cancel-search-box":"clearSearch","mousedown .VS-search-box":"maybeFocusSearch","dblclick .VS-search-box":"highlightSearch","click .VS-search-box":"maybeTripleClick"},manage:!1,initialize:function(){this.app=this.options.app,this.flags={allSelected:!1},this.facetViews=[],this.inputViews=[],_.bindAll(this,"renderFacets","_maybeDisableFacets","disableFacets","deselectAllFacets","addedFacet","removedFacet","changedFacet"),this.app.searchQuery.bind("reset",this.renderFacets).bind("add",this.addedFacet).bind("remove",this.removedFacet).bind("change",this.changedFacet),a(document).bind("keydown",this._maybeDisableFacets)},render:function(){return a(this.el).append(JST.search_box({})),a(document.body).setMode("no","search"),this},value:function(a){return null==a?this.serialize():this.setQuery(a)},serialize:function(){var a=[],b=this.inputViews.length;return this.app.searchQuery.each(_.bind(function(b,c){a.push(this.inputViews[c].value()),a.push(b.serialize())},this)),b&&a.push(this.inputViews[b-1].value()),_.compact(a).join(" ")},selected:function(){return _.select(this.facetViews,function(a){return"is"==a.modes.editing||"is"==a.modes.selected})},selectedModels:function(){return _.pluck(this.selected(),"model")},setQuery:function(a){this.currentQuery=a,VS.app.SearchParser.parse(this.app,a)},viewPosition:function(a){var b="facet"==a.type?this.facetViews:this.inputViews,c=_.indexOf(b,a);return-1==c&&(c=0),c},searchEvent:function(a){var b=this.value();this.focusSearch(a),this.value(b),this.app.options.callbacks.search(b,this.app.searchQuery)},addFacet:function(a,b,c){if(a=VS.utils.inflector.trim(a),b=VS.utils.inflector.trim(b||""),a){var d=new VS.model.SearchFacet({category:a,value:b||"",app:this.app});this.app.searchQuery.add(d,{at:c})}},addedFacet:function(a){this.renderFacets();var b=_.detect(this.facetViews,function(b){return b.model==a?!0:void 0});_.defer(function(){b.enableEdit()})},changedFacet:function(){this.renderFacets()
},removedFacet:function(){},renderFacets:function(){this.facetViews=[],this.inputViews=[],this.$(".VS-search-inner").empty(),this.app.searchQuery.each(_.bind(this.renderFacet,this)),this.renderSearchInput(),this.renderPlaceholder()},renderFacet:function(a,b){var c=new VS.ui.SearchFacet({app:this.app,model:a,order:b});return this.renderSearchInput(),this.facetViews.push(c),this.$(".VS-search-inner").children().eq(2*b).after(c.render().el),c.calculateSize(),_.defer(_.bind(c.calculateSize,c)),c},renderSearchInput:function(){var a=new VS.ui.SearchInput({position:this.inputViews.length,app:this.app,showFacets:this.options.showFacets});this.$(".VS-search-inner").append(a.render().el),this.inputViews.push(a)},renderPlaceholder:function(){var a=this.$(".VS-placeholder");this.app.searchQuery.length?a.addClass("VS-hidden"):a.removeClass("VS-hidden").text(this.app.options.placeholder)},clearSearch:function(a){var b=_.bind(function(){this.disableFacets(),this.value(""),this.flags.allSelected=!1,this.searchEvent(a),this.focusSearch(a)},this);this.app.options.callbacks.clearSearch?this.app.options.callbacks.clearSearch(b):b()},selectAllFacets:function(){this.flags.allSelected=!0,a(document).one("click.selectAllFacets",this.deselectAllFacets),_.each(this.facetViews,function(a){a.selectFacet()}),_.each(this.inputViews,function(a){a.selectText()})},allSelected:function(a){return a&&(this.flags.allSelected=!1),this.flags.allSelected},deselectAllFacets:function(b){if(this.disableFacets(),this.$(b.target).is(".category,input")){var c=a(b.target).closest(".search_facet,.search_input"),d=_.detect(this.facetViews.concat(this.inputViews),function(a){return a.el==c[0]});"facet"==d.type?d.selectFacet():"input"==d.type&&_.defer(function(){d.enableEdit(!0)})}},disableFacets:function(b){_.each(this.inputViews,function(a){a&&a!=b&&("is"==a.modes.editing||"is"==a.modes.selected)&&a.disableEdit()}),_.each(this.facetViews,function(a){a&&a!=b&&("is"==a.modes.editing||"is"==a.modes.selected)&&(a.disableEdit(),a.deselectFacet())}),this.flags.allSelected=!1,this.removeFocus(),a(document).unbind("click.selectAllFacets")},resizeFacets:function(a){_.each(this.facetViews,function(b){(!a||b==a)&&b.resize()})},_maybeDisableFacets:function(a){return this.flags.allSelected&&"backspace"==VS.app.hotkeys.key(a)?(a.preventDefault(),this.clearSearch(a),!1):(this.flags.allSelected&&VS.app.hotkeys.printable(a)&&this.clearSearch(a),void 0)},focusNextFacet:function(a,b,c){c=c||{};var d=this.facetViews.length,e=c.viewPosition||this.viewPosition(a);if(c.skipToFacet){if(c.skipToFacet&&"text"==a.type&&d==e&&b>=0)return!1}else"text"==a.type&&b>0&&(b-=1),"facet"==a.type&&0>b&&(b+=1);var f,g=Math.min(d,e+b);return"text"==a.type?(g>=0&&d>g?f=this.facetViews[g]:g==d&&(f=this.inputViews[this.inputViews.length-1]),f&&c.selectFacet&&"facet"==f.type?f.selectFacet():f&&(f.enableEdit(),f.setCursorAtEnd(b||c.startAtEnd))):"facet"==a.type&&(c.skipToFacet?g>=d||0>g?(f=_.last(this.inputViews),f.enableEdit()):(f=this.facetViews[g],f.enableEdit(),f.setCursorAtEnd(b||c.startAtEnd)):(f=this.inputViews[g],f.enableEdit())),c.selectText&&f.selectText(),this.resizeFacets(),!0},maybeFocusSearch:function(b){(a(b.target).is(".VS-search-box")||a(b.target).is(".VS-search-inner")||"keydown"==b.type)&&this.focusSearch(b)},focusSearch:function(a,b){var c=this.inputViews[this.inputViews.length-1];c.enableEdit(b),b||c.setCursorAtEnd(-1),"keydown"==a.type&&(c.keydown(a),c.box.trigger("keydown")),_.defer(_.bind(function(){this.$("input:focus").length||c.enableEdit(b)},this))},highlightSearch:function(b){if(a(b.target).is(".VS-search-box")||a(b.target).is(".VS-search-inner")||"keydown"==b.type){var c=this.inputViews[this.inputViews.length-1];c.startTripleClickTimer(),this.focusSearch(b,!0)}},maybeTripleClick:function(a){var b=this.inputViews[this.inputViews.length-1];return b.maybeTripleClick(a)},addFocus:function(){this.app.options.callbacks.focus(),this.$(".VS-search-box").addClass("VS-focus")},removeFocus:function(){this.app.options.callbacks.blur();var a=_.any(this.facetViews.concat(this.inputViews),function(a){return a.isFocused()});a||this.$(".VS-search-box").removeClass("VS-focus")},showFacetCategoryMenu:function(a){if(a.preventDefault(),a.stopPropagation(),this.facetCategoryMenu&&"is"==this.facetCategoryMenu.modes.open)return this.facetCategoryMenu.close();var b=[{title:"Account",onClick:_.bind(this.addFacet,this,"account","")},{title:"Project",onClick:_.bind(this.addFacet,this,"project","")},{title:"Filter",onClick:_.bind(this.addFacet,this,"filter","")},{title:"Access",onClick:_.bind(this.addFacet,this,"access","")}],c=this.facetCategoryMenu||(this.facetCategoryMenu=new dc.ui.Menu({items:b,standalone:!0}));return this.$(".VS-icon-search").after(c.render().open().content),!1}})}(),function(){var a=jQuery;VS.ui.SearchFacet=Backbone.View.extend({type:"facet",className:"search_facet",events:{"click .category":"selectFacet","keydown input":"keydown","mousedown input":"enableEdit","mouseover .VS-icon-cancel":"showDelete","mouseout .VS-icon-cancel":"hideDelete","click .VS-icon-cancel":"remove"},manage:!1,initialize:function(){this.flags={canClose:!1},_.bindAll(this,"set","keydown","deselectFacet","deferDisableEdit")},render:function(){return a(this.el).html(JST.search_facet({model:this.model})),this.setMode("not","editing"),this.setMode("not","selected"),this.box=this.$("input"),this.box.val(this.model.label()),this.box.bind("blur",this.deferDisableEdit),this.box.bind("input propertychange",this.keydown),this.setupAutocomplete(),this},calculateSize:function(){this.box.autoGrowInput(),this.box.unbind("updated.autogrow"),this.box.bind("updated.autogrow",_.bind(this.moveAutocomplete,this))},resize:function(a){this.box.trigger("resize.autogrow",a)},setupAutocomplete:function(){console.log(this),this.box.autocomplete({source:_.bind(this.autocompleteValues,this),appendTo:this.$el,minLength:0,delay:0,autoFocus:!0,position:{offset:"0 5"},create:_.bind(function(){a(this.el).find(".ui-autocomplete-input").css("z-index","auto")},this),select:_.bind(function(a,b){a.preventDefault();var c=this.model.get("value");return this.set(b.item.value),(c!=b.item.value||this.box.val()!=b.item.value)&&(this.options.app.options.autosearch?this.search(a):(this.options.app.searchBox.renderFacets(),this.options.app.searchBox.focusNextFacet(this,1,{viewPosition:this.options.order}))),!1},this),open:_.bind(function(){var b=this.box;this.box.autocomplete("widget").find(".ui-menu-item").each(function(){var c=a(this),d=c.data("item.autocomplete")||c.data("ui-autocomplete-item");d.value==b.val()&&b.data("uiAutocomplete").menu.activate&&b.data("uiAutocomplete").menu.activate(new a.Event("mouseover"),c)})},this)}),this.box.autocomplete("widget").addClass("VS-interface")},moveAutocomplete:function(){var a=this.box.data("uiAutocomplete");a&&a.menu.element.position({my:"left top",at:"left bottom",of:this.box.data("uiAutocomplete").element,collision:"flip",offset:"0 5"})},searchAutocomplete:function(){var a=this.box.data("uiAutocomplete");if(a){var b=a.menu.element;a.search(),b.outerWidth(Math.max(b.width("").outerWidth(),a.element.outerWidth()))}},closeAutocomplete:function(){var a=this.box.data("uiAutocomplete");a&&a.close()},autocompleteValues:function(b,c){var d=this.model.get("category"),e=this.model.get("value"),f=b.term;this.options.app.options.callbacks.valueMatches(d,f,function(b,d){if(d=d||{},b=b||[],f&&e!=f)if(d.preserveMatches)c(b);else{var g=VS.utils.inflector.escapeRegExp(f||""),h=new RegExp("\\b"+g,"i");b=a.grep(b,function(a){return h.test(a)||h.test(a.value)||h.test(a.label)})}d.preserveOrder?c(b):c(_.sortBy(b,function(a){return a==e||a.value==e?"":a}))})},set:function(a){a&&this.model.set({value:a})},search:function(a,b){b||(b=1),this.closeAutocomplete(),this.options.app.searchBox.searchEvent(a),_.defer(_.bind(function(){this.options.app.searchBox.focusNextFacet(this,b,{viewPosition:this.options.order})},this))},enableEdit:function(){"is"!=this.modes.editing&&(this.setMode("is","editing"),this.deselectFacet(),""==this.box.val()&&this.box.val(this.model.get("value"))),this.flags.canClose=!1,this.options.app.searchBox.disableFacets(this),this.options.app.searchBox.addFocus(),_.defer(_.bind(function(){this.options.app.searchBox.addFocus()},this)),this.resize(),this.searchAutocomplete(),this.box.focus()},deferDisableEdit:function(){this.flags.canClose=!0,_.delay(_.bind(function(){this.flags.canClose&&!this.box.is(":focus")&&"is"==this.modes.editing&&"is"!=this.modes.selected&&this.disableEdit()},this),250)},disableEdit:function(){var a=VS.utils.inflector.trim(this.box.val());a!=this.model.get("value")&&this.set(a),this.flags.canClose=!1,this.box.selectRange(0,0),this.box.blur(),this.setMode("not","editing"),this.closeAutocomplete(),this.options.app.searchBox.removeFocus()},selectFacet:function(b){b&&b.preventDefault();var c=this.options.app.searchBox.allSelected();if("is"!=this.modes.selected)return this.box.is(":focus")&&(this.box.setCursorPosition(0),this.box.blur()),this.flags.canClose=!1,this.closeAutocomplete(),this.setMode("is","selected"),this.setMode("not","editing"),(!c||b)&&(a(document).unbind("keydown.facet",this.keydown),a(document).unbind("click.facet",this.deselectFacet),_.defer(_.bind(function(){a(document).unbind("keydown.facet").bind("keydown.facet",this.keydown),a(document).unbind("click.facet").one("click.facet",this.deselectFacet)},this)),this.options.app.searchBox.disableFacets(this),this.options.app.searchBox.addFocus()),!1},deselectFacet:function(b){return b&&b.preventDefault(),"is"==this.modes.selected&&(this.setMode("not","selected"),this.closeAutocomplete(),this.options.app.searchBox.removeFocus()),a(document).unbind("keydown.facet",this.keydown),a(document).unbind("click.facet",this.deselectFacet),!1},isFocused:function(){return this.box.is(":focus")},showDelete:function(){a(this.el).addClass("search_facet_maybe_delete")},hideDelete:function(){a(this.el).removeClass("search_facet_maybe_delete")},setCursorAtEnd:function(a){-1==a?this.box.setCursorPosition(this.box.val().length):this.box.setCursorPosition(0)},remove:function(a){var b=this.model.get("value");this.deselectFacet(),this.disableEdit(),this.options.app.searchQuery.remove(this.model),b&&this.options.app.options.autosearch?this.search(a,-1):(this.options.app.searchBox.renderFacets(),this.options.app.searchBox.focusNextFacet(this,-1,{viewPosition:this.options.order}))},selectText:function(){this.box.selectRange(0,this.box.val().length)},keydown:function(a){var b=VS.app.hotkeys.key(a);if("enter"==b&&this.box.val())this.disableEdit(),this.search(a);else if("left"==b)"is"==this.modes.selected?(this.deselectFacet(),this.options.app.searchBox.focusNextFacet(this,-1,{startAtEnd:-1})):0==this.box.getCursorPosition()&&!this.box.getSelection().length&&this.selectFacet();else if("right"==b)"is"==this.modes.selected?(a.preventDefault(),this.deselectFacet(),this.setCursorAtEnd(0),this.enableEdit()):this.box.getCursorPosition()==this.box.val().length&&(a.preventDefault(),this.disableEdit(),this.options.app.searchBox.focusNextFacet(this,1));else if(VS.app.hotkeys.shift&&"tab"==b)a.preventDefault(),this.options.app.searchBox.focusNextFacet(this,-1,{startAtEnd:-1,skipToFacet:!0,selectText:!0});else if("tab"==b)a.preventDefault(),this.options.app.searchBox.focusNextFacet(this,1,{skipToFacet:!0,selectText:!0});else{if(VS.app.hotkeys.command&&(97==a.which||65==a.which))return a.preventDefault(),this.options.app.searchBox.selectAllFacets(),!1;VS.app.hotkeys.printable(a)&&"is"==this.modes.selected?(this.options.app.searchBox.focusNextFacet(this,-1,{startAtEnd:-1}),this.remove(a)):"backspace"==b&&("is"==this.modes.selected?(a.preventDefault(),this.remove(a)):0==this.box.getCursorPosition()&&!this.box.getSelection().length&&(a.preventDefault(),this.selectFacet()))}null==a.which?_.defer(_.bind(this.resize,this,a)):this.resize(a)}})}(),function(){var a=jQuery;VS.ui.SearchInput=Backbone.View.extend({type:"text",className:"search_input ui-menu",events:{"keypress input":"keypress","keydown input":"keydown","click input":"maybeTripleClick","dblclick input":"startTripleClickTimer"},manage:!1,initialize:function(){this.app=this.options.app,this.flags={canClose:!1},_.bindAll(this,"removeFocus","addFocus","moveAutocomplete","deferDisableEdit")},render:function(){return a(this.el).html(JST.search_input({})),this.setMode("not","editing"),this.setMode("not","selected"),this.box=this.$("input"),this.box.autoGrowInput(),this.box.bind("updated.autogrow",this.moveAutocomplete),this.box.bind("blur",this.deferDisableEdit),this.box.bind("focus",this.addFocus),this.setupAutocomplete(),this},setupAutocomplete:function(){this.box.autocomplete({minLength:this.options.showFacets?0:1,delay:50,autoFocus:!0,appendTo:this.$el,position:{offset:"0 -1"},source:_.bind(this.autocompleteValues,this),create:_.bind(function(){a(this.el).find(".ui-autocomplete-input").css("z-index","auto")},this),select:_.bind(function(a,b){a.preventDefault();var c=this.addTextFacetRemainder(b.item.value),d=this.options.position+(c?1:0);return this.app.searchBox.addFacet(b.item instanceof String?b.item:b.item.value,"",d),!1},this)}),this.box.data("uiAutocomplete")._renderMenu=function(a,b){var c="";_.each(b,_.bind(function(b){b.category&&b.category!=c&&(a.append('<li class="ui-autocomplete-category">'+b.category+"</li>"),c=b.category),this._renderItemData?this._renderItemData(a,b):this._renderItem(a,b)},this))},this.box.autocomplete("widget").addClass("VS-interface")},autocompleteValues:function(b,c){var d=b.term,e=d.match(/\w+\*?$/),f=VS.utils.inflector.escapeRegExp(e&&e[0]||"");this.app.options.callbacks.facetMatches(function(b,d){d=d||{},b=b||[];var e=new RegExp("^"+f,"i"),g=a.grep(b,function(a){return a&&e.test(a.label||a)});d.preserveOrder?c(g):c(_.sortBy(g,function(a){return a.label?a.category+"-"+a.label:a}))})},closeAutocomplete:function(){var a=this.box.data("uiAutocomplete");a&&a.close()},moveAutocomplete:function(){var a=this.box.data("uiAutocomplete");a&&a.menu.element.position({my:"left top",at:"left bottom",of:this.box.data("uiAutocomplete").element,collision:"none",offset:"0 -1"})},searchAutocomplete:function(){var a=this.box.data("uiAutocomplete");if(a){var b=a.menu.element;a.search(),b.outerWidth(Math.max(b.width("").outerWidth(),a.element.outerWidth()))}},addTextFacetRemainder:function(a){var b=this.box.val(),c=b.match(/\b(\w+)$/);if(!c)return"";var d=new RegExp(c[0],"i");return 0==a.search(d)&&(b=b.replace(/\b(\w+)$/,"")),b=b.replace("^s+|s+$",""),b&&this.app.searchBox.addFacet(this.app.options.remainder,b,this.options.position),b},enableEdit:function(a){this.addFocus(),a&&this.selectText(),this.box.focus()},addFocus:function(){this.flags.canClose=!1,this.app.searchBox.allSelected()||this.app.searchBox.disableFacets(this),this.app.searchBox.addFocus(),this.setMode("is","editing"),this.setMode("not","selected"),this.app.searchBox.allSelected()||this.searchAutocomplete()},disableEdit:function(){this.box.blur(),this.removeFocus()},removeFocus:function(){this.flags.canClose=!1,this.app.searchBox.removeFocus(),this.setMode("not","editing"),this.setMode("not","selected"),this.closeAutocomplete()},deferDisableEdit:function(){this.flags.canClose=!0,_.delay(_.bind(function(){this.flags.canClose&&!this.box.is(":focus")&&"is"==this.modes.editing&&this.disableEdit()},this),250)},startTripleClickTimer:function(){this.tripleClickTimer=setTimeout(_.bind(function(){this.tripleClickTimer=null},this),500)},maybeTripleClick:function(a){return this.tripleClickTimer?(a.preventDefault(),this.app.searchBox.selectAllFacets(),!1):void 0},isFocused:function(){return this.box.is(":focus")},value:function(){return this.box.val()},setCursorAtEnd:function(a){-1==a?this.box.setCursorPosition(this.box.val().length):this.box.setCursorPosition(0)},selectText:function(){this.box.selectRange(0,this.box.val().length),this.app.searchBox.allSelected()?this.setMode("is","selected"):this.box.focus()},search:function(a,b){b||(b=0),this.closeAutocomplete(),this.app.searchBox.searchEvent(a),_.defer(_.bind(function(){this.app.searchBox.focusNextFacet(this,b)},this))},keypress:function(a){var b=VS.app.hotkeys.key(a);if("enter"==b)return this.search(a,100);if(VS.app.hotkeys.colon(a)){this.box.trigger("resize.autogrow",a);var c=this.box.val(),d=[];this.app.options.callbacks.facetMatches&&this.app.options.callbacks.facetMatches(function(a){d=a});var e=_.map(d,function(a){return a.label?a.label:a});if(_.contains(e,c)){a.preventDefault();var f=this.addTextFacetRemainder(c),g=this.options.position+(f?1:0);return this.app.searchBox.addFacet(c,"",g),!1}}else if("backspace"==b&&0==this.box.getCursorPosition()&&!this.box.getSelection().length)return a.preventDefault(),a.stopPropagation(),a.stopImmediatePropagation(),this.app.searchBox.resizeFacets(),!1},keydown:function(a){var b=VS.app.hotkeys.key(a);if("left"==b)0==this.box.getCursorPosition()&&(a.preventDefault(),this.app.searchBox.focusNextFacet(this,-1,{startAtEnd:-1}));else if("right"==b)this.box.getCursorPosition()==this.box.val().length&&(a.preventDefault(),this.app.searchBox.focusNextFacet(this,1,{selectFacet:!0}));else if(VS.app.hotkeys.shift&&"tab"==b)a.preventDefault(),this.app.searchBox.focusNextFacet(this,-1,{selectText:!0});else if("tab"==b){var c=this.box.val();if(c.length){a.preventDefault();var d=this.addTextFacetRemainder(c),e=this.options.position+(d?1:0);c!=d&&this.app.searchBox.addFacet(c,"",e)}else{var f=this.app.searchBox.focusNextFacet(this,0,{skipToFacet:!0,selectText:!0});f&&a.preventDefault()}}else{if(VS.app.hotkeys.command&&"a"==String.fromCharCode(a.which).toLowerCase())return a.preventDefault(),this.app.searchBox.selectAllFacets(),!1;if("backspace"!=b||this.app.searchBox.allSelected()){if("end"==b){var g=this.app.searchBox.inputViews[this.app.searchBox.inputViews.length-1];g.setCursorAtEnd(-1)}else if("home"==b){var g=this.app.searchBox.inputViews[0];g.setCursorAtEnd(-1)}}else if(0==this.box.getCursorPosition()&&!this.box.getSelection().length)return a.preventDefault(),this.app.searchBox.focusNextFacet(this,-1,{backspace:!0}),!1}this.box.trigger("resize.autogrow",a)}})}(),function(){var a=jQuery;Backbone.View.prototype.setMode=function(b,c){this.modes||(this.modes={}),this.modes[c]!==b&&(a(this.el).setMode(b,c),this.modes[c]=b)}}(),function(){var a=jQuery;VS.app.hotkeys={KEYS:{16:"shift",17:"command",91:"command",93:"command",224:"command",13:"enter",37:"left",38:"upArrow",39:"right",40:"downArrow",46:"delete",8:"backspace",35:"end",36:"home",9:"tab",188:"comma"},initialize:function(){_.bindAll(this,"down","up","blur"),a(document).bind("keydown",this.down),a(document).bind("keyup",this.up),a(window).bind("blur",this.blur)},down:function(a){var b=this.KEYS[a.which];b&&(this[b]=!0)},up:function(a){var b=this.KEYS[a.which];b&&(this[b]=!1)},blur:function(){for(var a in this.KEYS)this[this.KEYS[a]]=!1},key:function(a){return this.KEYS[a.which]},colon:function(a){var b=a.which;return b&&":"==String.fromCharCode(b)},printable:function(a){var b=a.which;if("keydown"==a.type){if(32==b||b>=48&&90>=b||b>=96&&111>=b||b>=186&&192>=b||b>=219&&222>=b)return!0}else if(b>=32&&126>=b||b>=160&&500>=b||":"==String.fromCharCode(b))return!0;return!1}}}(),function(){VS.utils.inflector={trim:function(a){return a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")},escapeRegExp:function(a){return a.replace(/([.*+?^${}()|[\]\/\\])/g,"\\$1")}}}(),function(){var a=jQuery;a.fn.extend({setMode:function(a,b){b=b||"mode";var c=new RegExp("\\w+_"+b+"(\\s|$)","g"),d=null===a?"":a+"_"+b;return this.each(function(){this.className=(this.className.replace(c,"")+" "+d).replace(/\s\s/g," ")}),d},autoGrowInput:function(){return this.each(function(){var b=a(this),c=a("<div />").css({opacity:0,top:-9999,left:-9999,position:"absolute",whiteSpace:"nowrap"}).addClass("VS-input-width-tester").addClass("VS-interface"),d="keydown.autogrow keypress.autogrow resize.autogrow change.autogrow";b.next(".VS-input-width-tester").remove(),b.after(c),b.unbind(d).bind(d,function(a,d){d&&(a=d);var e=b.val();if("backspace"==VS.app.hotkeys.key(a)){var f=b.getCursorPosition();f>0&&(e=e.slice(0,f-1)+e.slice(f,e.length))}else VS.app.hotkeys.printable(a)&&!VS.app.hotkeys.command&&(e+=String.fromCharCode(a.which));e=e.replace(/&/g,"&amp;").replace(/\s/g,"&nbsp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),c.html(e),b.width(c.width()+3+parseInt(b.css("min-width"))),b.trigger("updated.autogrow")}),b.trigger("resize.autogrow")})},getCursorPosition:function(){var b=0,c=this.get(0);if(document.selection){c.focus();var d=document.selection.createRange(),e=document.selection.createRange().text.length;d.moveStart("character",-c.value.length),b=d.text.length-e}else c&&a(c).is(":visible")&&null!=c.selectionStart&&(b=c.selectionStart);return b},setCursorPosition:function(b){return this.each(function(){return a(this).selectRange(b,b)})},selectRange:function(a,b){return this.filter(":visible").each(function(){if(this.setSelectionRange)this.focus(),this.setSelectionRange(a,b);else if(this.createTextRange){var c=this.createTextRange();c.collapse(!0),c.moveEnd("character",b),c.moveStart("character",a),b-a>=0&&c.select()}})},getSelection:function(){var a=this[0];if(null!=a.selectionStart){var b=a.selectionStart,c=a.selectionEnd;return{start:b,end:c,length:c-b,text:a.value.substr(b,c-b)}}if(document.selection){var d=document.selection.createRange();if(d){var e=a.createTextRange(),f=e.duplicate();e.moveToBookmark(d.getBookmark()),f.setEndPoint("EndToStart",e);var b=f.text.length,c=b+d.text.length;return{start:b,end:c,length:c-b,text:d.text}}}return{start:0,end:0,length:0}}})}(),function(){var a="('[^']+'|\"[^\"]+\")",b="('[^']+'|\"[^\"]+\"|[^'\"\\s]\\S*)",c=b+":\\s*";VS.app.SearchParser={ALL_FIELDS:new RegExp(c+b,"g"),CATEGORY:new RegExp(c),parse:function(a,b){var c=this._extractAllFacets(a,b);return a.searchQuery.reset(c),c},_extractAllFacets:function(a,b){for(var c=[],d=b;b;){var e,f;d=b;var g=this._extractNextField(b);if(g?-1!=g.indexOf(":")?(e=g.match(this.CATEGORY)[1].replace(/(^['"]|['"]$)/g,""),f=g.replace(this.CATEGORY,"").replace(/(^['"]|['"]$)/g,""),b=VS.utils.inflector.trim(b.replace(g,""))):-1==g.indexOf(":")&&(e=a.options.remainder,f=g,b=VS.utils.inflector.trim(b.replace(f,""))):(e=a.options.remainder,f=this._extractSearchText(b),b=VS.utils.inflector.trim(b.replace(f,""))),e&&f){var h=new VS.model.SearchFacet({category:e,value:VS.utils.inflector.trim(f),app:a});c.push(h)}if(d==b)break}return c},_extractNextField:function(c){var d=new RegExp("^\\s*(\\S+)\\s+(?="+a+b+")"),e=c.match(d);return e&&e.length>=1?e[1]:this._extractFirstField(c)},_extractFirstField:function(a){var b=a.match(this.ALL_FIELDS);return b&&b.length&&b[0]},_extractSearchText:function(a){a=a||"";var b=VS.utils.inflector.trim(a.replace(this.ALL_FIELDS,""));return b}}}(),function(){VS.model.SearchFacet=Backbone.Model.extend({serialize:function(){var a=this.quoteCategory(this.get("category")),b=VS.utils.inflector.trim(this.get("value")),c=this.get("app").options.remainder;return b?(!_.contains(this.get("app").options.unquotable||[],a)&&a!=c&&(b=this.quoteValue(b)),a!=c?a+=": ":a="",a+b):""},quoteCategory:function(a){var b=/"/.test(a),c=/'/.test(a),d=/\s/.test(a);return b&&!c?"'"+a+"'":d||c&&!b?'"'+a+'"':a},quoteValue:function(a){var b=/"/.test(a),c=/'/.test(a);return b&&!c?"'"+a+"'":'"'+a+'"'},label:function(){return this.get("label")||this.get("value")}})}(),function(){VS.model.SearchQuery=Backbone.Collection.extend({model:VS.model.SearchFacet,serialize:function(){return this.map(function(a){return a.serialize()}).join(" ")},facets:function(){return this.map(function(a){var b={};return b[a.get("category")]=a.get("value"),b})},find:function(a){var b=this.detect(function(b){return b.get("category").toLowerCase()==a.toLowerCase()});return b&&b.get("value")},count:function(a){return this.select(function(b){return b.get("category").toLowerCase()==a.toLowerCase()}).length},values:function(a){var b=this.select(function(b){return b.get("category").toLowerCase()==a.toLowerCase()});return _.map(b,function(a){return a.get("value")})},has:function(a,b){return this.any(function(c){var d=c.get("category").toLowerCase()==a.toLowerCase();return b?d&&c.get("value")==b:d})},withoutCategory:function(){var a=_.map(_.toArray(arguments),function(a){return a.toLowerCase()});return this.map(function(b){return _.include(a,b.get("category").toLowerCase())?void 0:b.serialize()}).join(" ")}})}(),function(){window.JST=window.JST||{},window.JST.search_box=_.template('<div class="VS-search">\n  <div class="VS-search-box-wrapper VS-search-box">\n    <div class="VS-icon VS-icon-search"></div>\n    <div class="VS-placeholder"></div>\n    <div class="VS-search-inner"></div>\n    <div class="VS-icon VS-icon-cancel VS-cancel-search-box" title="clear search"></div>\n  </div>\n</div>'),window.JST.search_facet=_.template('<% if (model.has(\'category\')) { %>\n  <div class="category"><%= model.get(\'category\') %>:</div>\n<% } %>\n\n<div class="search_facet_input_container">\n  <input type="text" class="search_facet_input ui-menu VS-interface" value="" />\n</div>\n\n<div class="search_facet_remove VS-icon VS-icon-cancel"></div>'),window.JST.search_input=_.template('<input type="text" class="ui-menu" />')}(),define("plugins/visualsearch/visualsearch",function(){}),define("modules/ProjectSearch",["app","plugins/visualsearch/visualsearch"],function(a){var b,c=this;return b={fields:{Title:"partial",Space:"partial",Location:"partial",Text:function(a,c){return b.test(a,"TeaserText",c,"partial")},Type:function(a,c){return b.test(a,"ClassName",c,"partial")},Category:function(a,c){var d;return a.Categories&&a.Categories.length?(d=!0,_.each(c,function(c){var e;return e=!1,_.each(a.Categories,function(a){return b.exactMatchFilter(a,"Title",c)?e=!0:void 0}),e?void 0:d=!1}),d):!1},Person:function(a,c){var d;return a.Persons&&a.Persons.length?(d=!0,_.each(b.partializeArray(c),function(b){var c;return c=!1,_.each(a.Persons,function(a){var d;return d=(a.FirstName?a.FirstName+" ":"")+(a.Surname?a.Surname:""),d.indexOf(b)>=0?c=!0:void 0}),c?void 0:d=!1}),d):!1}},transformSearchTerm:function(a){var b,c,d,e,f,g,h;for(c={},a=decodeURI(a),h=a.split(";"),f=0,g=h.length;g>f;f++)d=h[f],b=d.split(":"),e=null,b.length>1&&(e=b[1].split("|")),c[b[0]]=e;return c},makeSearchTerm:function(a){var b,c,d,e,f,g,h;b=[];for(d in a){for(f=a[d],c=[],_.isArray(f)||(f=[f]),g=0,h=f.length;h>g;g++)e=f[g],e&&c.push(e);c.length&&b.push(""+d+":"+c.join("|"))}return encodeURI(b.join(";"))},partializeArray:function(a){var b,c,d,e;for(b=[],d=0,e=a.length;e>d;d++)c=a[d],b=b.concat(c.split(" "));return b},test:function(a,b,c,d){var e,f,g,h,i,j;if(f=!0,_.isArray(c)||(c=[c]),g=d||this.fields[b],g)if(_.isFunction(g))f=g.call(this,a,c);else for("exact"===g?e="exactMatchFilter":(e="partialMatchFilter",c=this.partializeArray(c)),i=0,j=c.length;j>i;i++)if(h=c[i],!this[e](a,b,h))return!1;return f},partialMatchFilter:function(a,b,c){var d;return a.hasOwnProperty(b)?(d=a[b].toLowerCase(),d.indexOf(c.toLowerCase())>=0?!0:!1):!1},exactMatchFilter:function(a,b,c){return a.hasOwnProperty(b)?c.toLowerCase()===a[b].toLowerCase()?!0:!1:!1}},b.getVisualSearchMatches=function(){var b,c,d,e,f,g,h,i;for(e=a.wholePortfolioJSON(),b={Title:[],Space:[],Location:[],Person:[],Year:[],Type:["Project","Exhibition","Excursion","Workshop"]},g=[],c=[],d=[],_.each(e,function(a){var e;return a.Title&&b.Title.push(a.Title),a.Space&&b.Space.push(a.Space),a.Location&&b.Location.push(a.Location),a.YearSearch&&(e=parseInt(a.YearSearch)),e&&g.push(e),_.each(a.Persons,function(a){var b;return a.FirstName&&a.Surname&&(b=""+a.Surname+", "+a.FirstName,_.indexOf(d,b)<0)?(c.push({label:b,value:""+a.FirstName+" "+a.Surname}),d.push(b)):void 0})}),b.Person=_.sortBy(c,function(a){return a.label}),g=_.sortBy(_.uniq(g),function(a){return-1*a}),h=0,i=g.length;i>h;h++)f=g[h],b.Year.push(f.toString());return b},b.View=Backbone.View.extend({template:"searchbar",id:"searchbar",search:{Category:[]},events:{"click .category-filter a":"updateCategorySearch","click .btn":"switchSearchView"},initialize:function(a){return a.searchTerm&&(this.search=b.transformSearchTerm(a.searchTerm)),this.search.Category?void 0:this.search.Category=[]},switchSearchView:function(a){return a.preventDefault(),$(a.target).removeClass("active").blur(),this.$el.find("section").toggleClass("active"),!1},doSearch:function(){var a,c;return c=b.makeSearchTerm(this.search),a=c?"/portfolio/search/"+c+"/":"/portfolio/",Backbone.history.navigate(a,!0)},updateCategorySearch:function(a){var b,c,d,e;return a.preventDefault(),b=$(a.target),b.blur(),e=b.data("title"),c=_.indexOf(this.search.Category,e),0>c?(this.search.Category.push(e),d="addClass"):(this.search.Category.splice(c,1),d="removeClass"),b[d]("active"),this.doSearch(),!1},initVisualSearch:function(){var a,c,d=this;return a=this.$el.find(".visualsearch"),c=b.VisualSearchMatches=b.VisualSearchMatches||b.getVisualSearchMatches(),this.visualSearch=VS.init({container:a,remainder:"Text",callbacks:{search:function(a,b){return d.search={Category:d.search.Category},b.each(function(a){var b;return b=a.get("category"),d.search[b]||(d.search[b]=[]),d.search[b].push(a.get("value"))}),console.log(d.search),d.doSearch()},facetMatches:function(a){return a(["Type","Person","Title","Year","Space","Location"])},valueMatches:function(a,b,d){switch(a){case"Person":return d(c.Person);case"Title":return d(c.Title);case"Year":return d(c.Year);case"Space":return d(c.Space);case"Location":return d(c.Location);case"Type":return d(c.Type)}}}}),this.prePopulateSearchBox(),console.log("Project search view: %o",this.search),console.log(this.visualSearch)},prePopulateSearchBox:function(){var a,b,c,d,e,f,g;b="",g=this.search;for(a in g)if(d=g[a],"Category"!==a)for(e=0,f=d.length;f>e;e++)c=d[e],b+='"'+a+'": "'+c+'" ';return this.visualSearch.searchBox.value(b)},updateCategoryClasses:function(){return c=this,this.$el.find(".category-filter ul a").each(function(){var a,b,d,e,f,g,h;for(a=$(this),d=a.data("title").toLowerCase(),g=c.search.Category,h=[],e=0,f=g.length;f>e;e++)b=g[e],b.toLowerCase()===d?h.push(a.addClass("active")):h.push(void 0);return h})},afterRender:function(){return this.updateCategoryClasses(),this.initVisualSearch()},serialize:function(){var b;return b={},b.Categories=_.map(a.Collections.Category.models,function(a){return{ID:a.id,Title:a.get("Title")}}),b}}),b}),define("modules/DataRetrieval",["app","modules/ProjectSearch"],function(a,b){var c;return c={forProjectsOverview:function(b){var c,d,e,f,g,h,i,j;if(d=b.present,f=a.Config.ProjectTypes,g=new $.Deferred,d.flag)g.resolve();else{for(c=[],h=function(d){var e;return e={name:b.domName(d),urlSuffix:b.urlSuffix},c.push(JJRestApi.getFromDomOrApi(d,e).done(function(b){return a.handleFetchedModels(d,b)}))},i=0,j=f.length;j>i;i++)e=f[i],h(e);$.when.apply(this,c).done(function(){return d.flag=!0,g.resolve()})}return g.promise()},filterProjectTypesBySearchTerm:function(c){var d,e,f,g;return g=a.Cache.WholePortfolio,f=b.transformSearchTerm(c),console.log("Search obj found by data retrieval: %o",f),e=_.filter(a.wholePortfolioJSON(),function(a){return e=!0,_.each(f,function(c,d){return b.test(a,d,c)?void 0:e=!1}),e}),d=_.map(e,function(a){return function(a){return _.find(g,function(b){return b.id===a.ID&&b.get("ClassName")===a.ClassName})}(a)})},forCalendar:function(b){var c,d,e;return c=a.Config.Calendar[b],d=new $.Deferred,c.flag?d.resolve():(e=_.clone(c),e.name=b+"-calendar",JJRestApi.getFromDomOrApi("CalendarEntry",e).done(function(e){var f,g,h;if(e){if("upcoming"===b)for(g=0,h=e.length;h>g;g++)f=e[g],f.IsUpcoming=!0;a.handleFetchedModels("CalendarEntry",e),c.flag=!0,"whole"===b&&(a.Config.Calendar.upcoming.flag=!0)}return d.resolve()})),d.promise()},forCategories:function(){var b;return b=new $.Deferred,a.CategoriesFetched?b.resolve():JJRestApi.getFromDomOrApi("Category").done(function(c){return c&&_.isArray(c)&&(a.handleFetchedModels("Category",c),a.CategoriesFetched=!0),b.resolve()
}),b.promise()},forPersonsOverview:function(){var b,c,d;return b=a.Config.Person,c=new $.Deferred,b.about_present?c.resolve():(d=_.clone(b),JJRestApi.getFromDomOrApi("Person",d).done(function(d){return b.about_present=!0,a.handleFetchedModels("Person",d),c.resolve()})),c.promise()},forDetailedObject:function(b,c,d){var e,f,g,h,i,j,k,l,m=this;return f=a.Config.Detail[b],j={name:f.domName,urlSuffix:f.urlSuffix(c)},i=function(){var c;return c=new $.Deferred,JJRestApi.getFromDomOrApi(b,j).done(function(d){var e;return d||c.resolve(null),d=_.isArray(d)?d:[d],e=1===d.length?a.handleFetchedModel(b,d[0]):null,e&&(e._isCompletelyFetched=!0,a.CurrentMember&&(e._isFetchedWhenLoggedIn=!0)),c.resolve(e)}),c.promise()},g=new $.Deferred,e=a.Collections[b],l=f.where(c),h=e.findWhere(l),h?(h._isCompletelyFetched&&(k=!0),d&&!h._isFetchedWhenLoggedIn&&(k=!1),k?g.resolve(h):(j.noAjax=!0,i().done(function(a){return a&&a.cid===h.cid?g.resolve(a):m.fetchExistingModelCompletely(h).done(function(a){return g.resolve(a)})}))):i().done(function(a){return g.resolve(a)}),g.promise()},forRandomGroupImage:function(){var b,c,d;return d=a.PageInfos,b=new $.Deferred,c=function(){var a;return a=d.GroupImages,a&&a.length>0?a[Math.floor(Math.random()*a.length)]:null},d.GroupImages?b.resolve(c()):JJRestApi.getFromDomOrApi("GroupImage").done(function(a){return d.GroupImages=a,b.resolve(c())}),b.promise()},forUserGallery:function(b){var c,d,e;return e=a.Cache.UserGallery,c=new $.Deferred,e.fetched[b]?c.resolve(e):(d=$.getJSON(a.Config.GalleryUrl+b+"/").done(function(a){return e.images[b]=a,e.fetched[b]=!0,c.resolve(e)}),c.fail(function(){return 4!==d.readyState?d.abort():void 0})),c},forDocImage:function(b){var c,d;return c=new $.Deferred,(d=a.Collections.DocImage.get(b))?c.resolve(d):JJRestApi.getFromDomOrApi("DocImage",{id:b}).done(function(b){return b?c.resolve(a.handleFetchedModel("DocImage",b)):c.reject()}),c.promise()},forMultipleDocImages:function(b){var c,d,e,f;return c=new $.Deferred,e=[],d=[],_.each(b,function(b){var c;return(c=a.Collections.DocImage.get(b))?d.push(c):e.push(b)}),e.length?(f=JJRestApi.setObjectUrl("DocImage")+Backbone.JJRelational.Config.url_id_appendix+e.join(","),this._docImagesReq&&4!==this._docImagesReq.readyState&&this._docImagesReq.abort(),this._docImagesReq=$.getJSON(f,function(b){return $.isArray(b)&&(d=d.concat(a.handleFetchedModels("DocImage",b))),c.resolve(d)}),c):(c.resolve(d),c)},fetchExistingModelCompletely:function(b){var c;return c=new $.Deferred,b.fetch({success:function(b){return c.resolve(b),b._isCompletelyFetched=!0,a.CurrentMember?b._isFetchedWhenLoggedIn=!0:void 0}}),c.promise()}}}),define("modules/RecycleBin",["app"],function(a){var b;return b={},b.setup=function(){var a,b,c=this;return b=function(){return a.addClass("done"),setTimeout(function(){return a.removeClass("done")},1e3)},this.$bin=a=$("#recycle-bin").removeClass("done"),a.on("dragenter dragleave drop",function(a){var b;return b="dragenter"===a.type?"addClass":"removeClass",$(a.target)[b]("dragover")}),a.on("drop",function(){var d,e,f,g,h;return g=c.activeRecycleDrag,c.activeRecycleDrag=null,g&&g.className?(a.addClass("processing"),d=g.model.ID?g.model.ID:g.model.id,c.removeViewAndData(g),(e=Backbone.JJStore._byId(g.className,d))?(e.destroy(),b(),a.removeClass("processing")):(h=JJRestApi.setObjectUrl(g.className,{id:d}),f=$.ajax({url:h,contentType:"json",type:"DELETE"}),f.always(function(){return a.removeClass("processing")}),f.done(function(){return b()}))):void 0})},b.removeViewAndData=function(b){return b.view.$el.trigger("dragend"),$("body").removeClass("drag-inline"),"PersonImage"===b.className||"DocImage"===b.className?(a.removeFromGalleryCache(b.className,b.model.id),b.view.liveRemoval()):b.view.remove()},b.setViewAsRecyclable=function(a){var b,c=this;return b={view:a,model:a.model},b.className=a.className?a.className:a.model.ClassName,a.$el.on("dragstart dragend",function(a){var d;return $.fireGlobalDragEvent(a.type,a.target),"dragstart"===a.type?(d="addClass",c.activeRecycleDrag=b):(c.activeRecycleDrag=null,d="removeClass"),c.$bin[d]("active")})},b}),define("modules/Website",["app","modules/RecycleBin"],function(a,b){var c;return c=a.module(),c.Views.ListView=Backbone.View.extend({tagName:"li",template:"website-list-item",className:"Website",serialize:function(){return{ID:this.model.id,Title:this.model.get("Title"),Link:this.model.get("Link")}},afterRender:function(){return b.setViewAsRecyclable(this)}}),c}),function(a,b){"object"==typeof exports?module.exports=b():"function"==typeof define&&define.amd?define("plugins/misc/spin.min",b):a.Spinner=b()}(this,function(){function a(a,b){var c,d=document.createElement(a||"div");for(c in b)d[c]=b[c];return d}function b(a){for(var b=1,c=arguments.length;c>b;b++)a.appendChild(arguments[b]);return a}function c(a,b,c,d){var e=["opacity",b,~~(100*a),c,d].join("-"),f=.01+100*(c/d),g=Math.max(1-(1-a)/b*(100-f),a),h=j.substring(0,j.indexOf("Animation")).toLowerCase(),i=h&&"-"+h+"-"||"";return l[e]||(m.insertRule("@"+i+"keyframes "+e+"{"+"0%{opacity:"+g+"}"+f+"%{opacity:"+a+"}"+(f+.01)+"%{opacity:1}"+(f+b)%100+"%{opacity:"+a+"}"+"100%{opacity:"+g+"}"+"}",m.cssRules.length),l[e]=1),e}function d(a,b){var c,d,e=a.style;if(void 0!==e[b])return b;for(b=b.charAt(0).toUpperCase()+b.slice(1),d=0;d<k.length;d++)if(c=k[d]+b,void 0!==e[c])return c}function e(a,b){for(var c in b)a.style[d(a,c)||c]=b[c];return a}function f(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)void 0===a[d]&&(a[d]=c[d])}return a}function g(a){for(var b={x:a.offsetLeft,y:a.offsetTop};a=a.offsetParent;)b.x+=a.offsetLeft,b.y+=a.offsetTop;return b}function h(a){return"undefined"==typeof this?new h(a):(this.opts=f(a||{},h.defaults,n),void 0)}function i(){function c(b,c){return a("<"+b+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',c)}m.addRule(".spin-vml","behavior:url(#default#VML)"),h.prototype.lines=function(a,d){function f(){return e(c("group",{coordsize:j+" "+j,coordorigin:-i+" "+-i}),{width:j,height:j})}function g(a,g,h){b(l,b(e(f(),{rotation:360/d.lines*a+"deg",left:~~g}),b(e(c("roundrect",{arcsize:d.corners}),{width:i,height:d.width,left:d.radius,top:-d.width>>1,filter:h}),c("fill",{color:d.color,opacity:d.opacity}),c("stroke",{opacity:0}))))}var h,i=d.length+d.width,j=2*i,k=2*-(d.width+d.length)+"px",l=e(f(),{position:"absolute",top:k,left:k});if(d.shadow)for(h=1;h<=d.lines;h++)g(h,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(h=1;h<=d.lines;h++)g(h);return b(a,l)},h.prototype.opacity=function(a,b,c,d){var e=a.firstChild;d=d.shadow&&d.lines||0,e&&b+d<e.childNodes.length&&(e=e.childNodes[b+d],e=e&&e.firstChild,e=e&&e.firstChild,e&&(e.opacity=c))}}var j,k=["webkit","Moz","ms","O"],l={},m=function(){var c=a("style",{type:"text/css"});return b(document.getElementsByTagName("head")[0],c),c.sheet||c.styleSheet}(),n={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:"#000",direction:1,speed:1,trail:100,opacity:.25,fps:20,zIndex:2e9,className:"spinner",top:"auto",left:"auto",position:"relative"};h.defaults={},f(h.prototype,{spin:function(b){this.stop();var c,d,f=this,h=f.opts,i=f.el=e(a(0,{className:h.className}),{position:h.position,width:0,zIndex:h.zIndex}),k=h.radius+h.length+h.width;if(b&&(b.insertBefore(i,b.firstChild||null),d=g(b),c=g(i),e(i,{left:("auto"==h.left?d.x-c.x+(b.offsetWidth>>1):parseInt(h.left,10)+k)+"px",top:("auto"==h.top?d.y-c.y+(b.offsetHeight>>1):parseInt(h.top,10)+k)+"px"})),i.setAttribute("role","progressbar"),f.lines(i,f.opts),!j){var l,m=0,n=(h.lines-1)*(1-h.direction)/2,o=h.fps,p=o/h.speed,q=(1-h.opacity)/(p*h.trail/100),r=p/h.lines;!function s(){m++;for(var a=0;a<h.lines;a++)l=Math.max(1-(m+(h.lines-a)*r)%p*q,h.opacity),f.opacity(i,a*h.direction+n,l,h);f.timeout=f.el&&setTimeout(s,~~(1e3/o))}()}return f},stop:function(){var a=this.el;return a&&(clearTimeout(this.timeout),a.parentNode&&a.parentNode.removeChild(a),this.el=void 0),this},lines:function(d,f){function g(b,c){return e(a(),{position:"absolute",width:f.length+f.width+"px",height:f.width+"px",background:b,boxShadow:c,transformOrigin:"left",transform:"rotate("+~~(360/f.lines*i+f.rotate)+"deg) translate("+f.radius+"px"+",0)",borderRadius:(f.corners*f.width>>1)+"px"})}for(var h,i=0,k=(f.lines-1)*(1-f.direction)/2;i<f.lines;i++)h=e(a(),{position:"absolute",top:1+~(f.width/2)+"px",transform:f.hwaccel?"translate3d(0,0,0)":"",opacity:f.opacity,animation:j&&c(f.opacity,f.trail,k+i*f.direction,f.lines)+" "+1/f.speed+"s linear infinite"}),f.shadow&&b(h,e(g("#000","0 0 4px #000"),{top:"2px"})),b(d,b(h,g(f.color,"0 0 1px rgba(0,0,0,.1)")));return d},opacity:function(a,b,c){b<a.childNodes.length&&(a.childNodes[b].style.opacity=c)}});var o=e(a("group"),{behavior:"url(#default#VML)"});return!d(o,"transform")&&o.adj?i():j=d(o,"animation"),h}),function(a){var b="list",c="1.2.4",d=!0,e={headerSelector:"dt",zIndex:1,fakeHeaderClass:"ui-"+b+"-fakeheader"},f={log:function(){if(d&&window.console&&window.console.log)try{window.console.log.apply(console,arguments)}catch(a){window.console.log(arguments)}},updateHeader:function(a,c){var d=a.data(b);d&&(d.fakeHeader=c.clone().removeAttr("id").addClass(d.settings.fakeHeaderClass),d.fakeHeader.css({position:"absolute",top:0,width:d.headers.width(),zIndex:d.settings.zIndex}),a.data(b,d).children(0).eq(0).replaceWith(d.fakeHeader))},events:{resize:function(){var c=a(this),d=c.data(b);d&&(d.fakeHeader.width(d.headers.width()),d.wrapper.css("maxHeight",c.css("maxHeight")))},scroll:function(){var c=a(this),d=c.data(b);if(d){var e=null,g=d.headers.eq(d.currentHeader),h=d.currentHeader>=d.headers.length-1?null:d.headers.eq(d.currentHeader+1),i=d.currentHeader<=0?null:d.headers.eq(d.currentHeader-1),j=!1;if(d.containerTop=c.offset().top+parseInt(c.css("marginTop"),10)+parseInt(c.css("borderTopWidth"),10),d.fakeHeader.css("top",0),null!==i){var k=g.offset().top,l=g.outerHeight();k>d.containerTop&&(d.fakeHeader.css("top",k-l-d.containerTop),f.updateHeader(c,i),d.currentHeader=d.currentHeader-1,j=!0),k-l>d.containerTop&&(d.fakeHeader.css("top",0),e=d.currentHeader-1)}if(null!==h){var k=h.offset().top,l=h.outerHeight();k-l<d.containerTop&&d.fakeHeader.css("top",k-l-d.containerTop),k<d.containerTop&&(d.fakeHeader.css("top",0),e=d.currentHeader+1)}if(null!==e){var m=d.headers.eq(e);d.currentHeader=e,f.updateHeader(c,m),j=!0}var n=d.wrapper.scrollTop()>=d.wrapper.prop("scrollHeight")-d.wrapper.height();(j||n||d.max&&!n)&&c.trigger("headingChange",[d.currentHeader,d.headers.eq(d.currentHeader),n]),d.max=n,c.data(b,d)}}}},g={init:function(c){return a(this).each(function(){var d=a.extend({},e);"object"==typeof c&&a.extend(d,c);var g=a(this),h=g.data(b);h||(h={target:g,wrapper:g.wrapInner('<div class="ui-'+b+'" />').find(".ui-"+b),settings:d,headers:[],containerTop:0,currentHeader:0,fakeHeader:null,scrolllist:[],original:{position:"",overflowX:"",overflowY:""},max:!1},g.addClass("-"+b+"-container").css({position:"absolute"==g.css("position")?"absolute":"relative",overflowY:"hidden"}),h.headers=g.find(h.settings.headerSelector),h.fakeHeader=h.headers.eq(0).clone().removeAttr("id").addClass(h.settings.fakeHeaderClass),h.wrapper.bind("scroll."+b,a.proxy(f.events.scroll,g)).css({height:"100%",maxHeight:g.css("maxHeight"),overflowY:"scroll",position:"relative"}),h.fakeHeader.css({position:"absolute",top:0,width:h.headers.width(),zIndex:h.settings.zIndex}),a(window).bind("resize."+b,a.proxy(f.events.resize,g)),g.data(b,h).prepend(h.fakeHeader))})},header:function(){var c=a(this),d=c.data(b);return d?d.currentHeader:void 0},scrollTo:function(c,d,e,g){return this.each(function(){var h=a(this),i=h.data(b);if(i&&void 0!==c&&!isNaN(c)&&c>=0&&c<i.headers.length){var j=i.headers.eq(c),k=j.position().top+i.wrapper.scrollTop()+parseInt(j.css("borderTopWidth"),10)+parseInt(j.css("borderBottomWidth"),10);d?i.wrapper.stop().animate({scrollTop:k},d,e,g):(i.wrapper.stop().scrollTop(k),i.currentHeader=c,f.updateHeader(h,j),h.trigger("headingChange",[c,j]),h.data(b,i))}})},option:function(c,d){var e=a(this),f=e.data(b);return f?"undefined"==typeof c?f.settings:!c in f.settings?!1:"undefined"==typeof d?f.settings[c]:(f.settings[c]=d,e):void 0},version:function(a){if(a){var d=c.split("."),e=(Number(d[0])||1)+"",f=(Number(d[1])||0)+"",g=(Number(d[2])||0)+"",h="000";return Number(h.slice(0,3-e.length)+e+h.slice(0,3-f.length)+f+h.slice(0,3-g.length)+g)}return b+" v"+c},destroy:function(){return this.each(function(){var c=a(this),d=c.data(b);d&&(d.wrapper.children().unwrap(),d.fakeHeader.remove(),c.css(d.original).removeData(b).removeClass("-"+b+"-container").unbind("."+b))})}};a.fn[b]=function(c){return g[c]?g[c].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof c&&c?(a.error("Method "+c+" does not exist on jQuery."+b),void 0):g.init.apply(this,arguments)},a[b]={},a[b].log=function(a){return void 0!==a&&(d=a),d}}(jQuery),define("plugins/misc/jquery.list",function(){}),function(a){var b;return b=function(){function b(){}return b["do"]=function(b,c,d,e,f,g,h){var i,j,k,l,m,n,o,p;if(m=null,c.removeClass("failed done"),a(".progress-text, .progress",c).remove(),i=a("<div />",{"class":"progress"}).height(0).appendTo(c),j=a("<div />",{"class":"progress-text"}).appendTo(c),n=b.dataTransfer.files,o=new FormData,h&&n.length>h&&(n=array_slice(n,0,3)),a.each(n,function(a,b){return b.type.match(g)?o.append(b.name,b):m="Sorry, but "+b.name+" is no image, bitch!"}),e)for(k in e)l=e[k],o.append(k,l);return m?(console.log(m),p=new a.Deferred,p.reject({error:m})):(c.addClass("uploading"),p=a.ajax({url:d,data:o,processData:!1,contentType:!1,type:"POST",xhr:function(){var a;return a=new XMLHttpRequest,a.upload.onprogress=function(a){var b;return a.lengthComputable?(b=Math.round(100*(a.loaded/a.total)),j.html(b+"%"),i.height(b+"%")):void 0},a}})),p.pipe(function(b){return b.error?a.Deferred().reject(b):b}).fail(function(){return c.addClass("failed"),j.text(f),setTimeout(function(){return c.removeClass("dragover")},3e3)}).always(function(){return c.removeClass("uploading"),i.remove(),j.remove()}).done(function(){return c.addClass("done"),setTimeout(function(){return c.removeClass("dragover")},1e3)})},b}(),window.JJFileUpload=b}(jQuery),define("plugins/editor/jquery.jjfileupload",function(){});var __hasProp={}.hasOwnProperty,__extends=function(a,b){function c(){this.constructor=a}for(var d in b)__hasProp.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};!function(a){var b,c,d;return a.globalDragStart=a.Callbacks(),a.globalDragEnd=a.Callbacks(),a.dragLeaveTimeout=null,a.fireGlobalDragEvent=function(b,c,d){var e;return null==d&&(d="inline"),e="dragstart"===b?"Start":"End",a["globalDrag"+e].fire({type:d,target:c})},a.globalDragStart.add(function(b){return a.dragLeaveTimeout&&clearTimeout(a.dragLeaveTimeout),a("body").addClass("dragover drag-"+b.type)}),a.globalDragEnd.add(function(b){return a.dragLeaveTimeout&&clearTimeout(a.dragLeaveTimeout),a.dragLeaveTimeout=setTimeout(function(){return a("body").removeClass("dragover drag-"+b.type)},200)}),d=function(){function b(b,c){this.options=a.extend({},this.defaults,c),this.$dropzone=b instanceof jQuery?b:a(b),this.$dropzone.addClass("dropzone")}return b.prototype.fileMatch="image.*",b.prototype.defaults={url:null,errorMsg:"Sorry, but there has been an error.",additionalData:null,responseHandler:function(a){return console.log("UPLOAD DATA"),console.log(a)}},b.prototype.$dropzone=null,b.prototype.maxAllowed=null,b.prototype.cleanup=function(){return this.$dropzone.off("dragenter dragleave drop")},b.prototype.deferredUpload=function(b){var c,d=this;return c=JJFileUpload["do"](b,this.$dropzone,this.options.url,this.options.additionalData,this.options.errorMsg,this.fileMatch,this.maxAllowed),c.done(function(b){return b=a.parseJSON(b),d.options.responseHandler(b)})},b}(),b=function(b){function c(a,b){c.__super__.constructor.call(this,a,b),this.dragAndDropSetup()}return __extends(c,b),c.prototype.dragAndDropSetup=function(){var b,c=this;return b=this.$dropzone,b.on("dragenter",function(){return a(this).addClass("dragover")}),b.on("dragleave",function(){return a(this).removeClass("dragover")}),b.on("drop",function(d){return c.deferredUpload(d).always(function(){return a.fireGlobalDragEvent(d.type,d.target),b.removeClass("dragover")})})},c}(d),c=function(b){function c(a,b){c.__super__.constructor.call(this,a,b),window.dropzoneIDCount++,this.dropzoneID="jjdrop-"+window.dropzoneIDCount,this.dragAndDropSetup()}return __extends(c,b),c.prototype.setAsActiveDraggable=function(b){return"dragstart"!==b.type?this._activeDraggableId=null:(this._activeDraggableId=a(b.target).data("id"),this._activeDraggableId?void 0:this._activeDraggableId=a(b.target).parent().data("id"))},c.prototype.setAsDraggable=function(b){var c=this;return this.draggables||(this.draggables=[]),b.length?(this.draggables.push(b),b.on("dragstart."+this.dropzoneID+" dragend."+this.dropzoneID,function(b){return a.fireGlobalDragEvent(b.type,b.target),c.setAsActiveDraggable(b)})):void 0},c.prototype.cleanup=function(){var a,b,d,e,f;if(c.__super__.cleanup.call(this),this.draggables){for(e=this.draggables,f=[],b=0,d=e.length;d>b;b++)a=e[b],f.push(a.off("dragstart."+this.dropzoneID+" dragend."+this.dropzoneID));return f}},c.prototype.dragAndDropSetup=function(){var b,c=this;return b=this.$dropzone,b.on("dragenter",function(){return a(this).addClass("dragover")}),b.on("dragleave drop",function(){return a(this).removeClass("dragover")}),b.on("drop",function(b){var d,e;if(a.fireGlobalDragEvent(b.type,b.target),e=c._activeDraggableId){if(c._activeDraggableId=null,d=c.options.getFromCache(e))return d.done?d.done(c.options.responseHandler):c.options.responseHandler(d)}else if(b.dataTransfer.files.length)return c.deferredUpload(b)})},c}(d),window.dropzoneIDCount=0,window.JJSimpleImagesUploadZone=b,window.JJSingleImageUploadZone=c}(jQuery),define("plugins/editor/jquery.jjdropzone",function(){}),function(a){function b(a,b,e){var f=a.scrollTop;a.setSelectionRange?c(a,b,e):document.selection&&d(a,b,e),a.scrollTop=f}function c(a,b,c){var d=a.selectionStart,e=a.selectionEnd;if(d==e)b?"	"==a.value.substring(d-c.tabString.length,d)?(a.value=a.value.substring(0,d-c.tabString.length)+a.value.substring(d),a.focus(),a.setSelectionRange(d-c.tabString.length,d-c.tabString.length)):"	"==a.value.substring(d,d+c.tabString.length)&&(a.value=a.value.substring(0,d)+a.value.substring(d+c.tabString.length),a.focus(),a.setSelectionRange(d,d)):(a.value=a.value.substring(0,d)+c.tabString+a.value.substring(d),a.focus(),a.setSelectionRange(d+c.tabString.length,d+c.tabString.length));else{var f=a.value.split("\n"),g=new Array,h=0,i=0;for(var j in f)i=h+f[j].length,g.push({start:h,end:i,selected:d>=h&&i>d||i>=e&&e>h||h>d&&e>i}),h=i+1;var k=0;for(var j in g)if(g[j].selected){var l=g[j].start+k;b&&c.tabString==a.value.substring(l,l+c.tabString.length)?(a.value=a.value.substring(0,l)+a.value.substring(l+c.tabString.length),k-=c.tabString.length):b||(a.value=a.value.substring(0,l)+c.tabString+a.value.substring(l),k+=c.tabString.length)}a.focus();var m=d+(k>0?c.tabString.length:0>k?-c.tabString.length:0),n=e+k;a.setSelectionRange(m,n)}}function d(b,c,d){var e=document.selection.createRange();if(b==e.parentElement())if(""==e.text)if(c){var f=e.getBookmark();e.moveStart("character",-d.tabString.length),d.tabString==e.text?e.text="":(e.moveToBookmark(f),e.moveEnd("character",d.tabString.length),d.tabString==e.text&&(e.text="")),e.collapse(!0),e.select()}else e.text=d.tabString,e.collapse(!1),e.select();else{var g=e.text,h=g.length,i=g.split("\r\n"),j=document.body.createTextRange();j.moveToElementText(b),j.setEndPoint("EndToStart",e);var k=j.text,l=k.split("\r\n"),m=k.length,n=document.body.createTextRange();n.moveToElementText(b),n.setEndPoint("StartToEnd",e);var o=n.text,p=document.body.createTextRange();p.moveToElementText(b),p.setEndPoint("StartToEnd",j);var q=p.text,r=a(b).html();a("#r3").text(m+" + "+h+" + "+o.length+" = "+r.length),m+q.length<r.length?(l.push(""),m+=2,c&&d.tabString==i[0].substring(0,d.tabString.length)?i[0]=i[0].substring(d.tabString.length):c||(i[0]=d.tabString+i[0])):c&&d.tabString==l[l.length-1].substring(0,d.tabString.length)?l[l.length-1]=l[l.length-1].substring(d.tabString.length):c||(l[l.length-1]=d.tabString+l[l.length-1]);for(var s=1;s<i.length;s++)c&&d.tabString==i[s].substring(0,d.tabString.length)?i[s]=i[s].substring(d.tabString.length):c||(i[s]=d.tabString+i[s]);1==l.length&&0==m&&(c&&d.tabString==i[0].substring(0,d.tabString.length)?i[0]=i[0].substring(d.tabString.length):c||(i[0]=d.tabString+i[0])),m+h+o.length<r.length&&(i.push(""),h+=2),j.text=l.join("\r\n"),e.text=i.join("\r\n");var t=document.body.createTextRange();t.moveToElementText(b),m>0?t.setEndPoint("StartToEnd",j):t.setEndPoint("StartToStart",j),t.setEndPoint("EndToEnd",e),t.select()}}a.fn.tabby=function(c){var d=a.extend({},a.fn.tabby.defaults,c),e=a.fn.tabby.pressed;return this.each(function(){$this=a(this);var c=a.meta?a.extend({},d,$this.data()):d;$this.bind("keydown",function(d){var f=a.fn.tabby.catch_kc(d);return 16==f&&(e.shft=!0),17==f&&(e.ctrl=!0,setTimeout("$.fn.tabby.pressed.ctrl = false;",1e3)),18==f&&(e.alt=!0,setTimeout("$.fn.tabby.pressed.alt = false;",1e3)),9!=f||e.ctrl||e.alt?void 0:(d.preventDefault,e.last=f,setTimeout("$.fn.tabby.pressed.last = null;",0),b(a(d.target).get(0),e.shft,c),!1)}).bind("keyup",function(b){16==a.fn.tabby.catch_kc(b)&&(e.shft=!1)}).bind("blur",function(b){9==e.last&&a(b.target).one("focus",function(){e.last=null}).get(0).focus()})})},a.fn.tabby.catch_kc=function(a){return a.keyCode?a.keyCode:a.charCode?a.charCode:a.which},a.fn.tabby.pressed={shft:!1,ctrl:!1,alt:!1,last:null},a.fn.tabby.defaults={tabString:String.fromCharCode(9)}}(jQuery),define("plugins/editor/jquery.tabby",function(){}),function(){function a(a){this.tokens=[],this.strs=[],this.tokens.links={},this.options=a||h.defaults,this.rules=i.normal,this.options.gfm&&(this.rules=this.options.tables?i.tables:i.gfm)}function b(a,b){if(this.options=b||h.defaults,this.links=a,this.rules=j.normal,!this.links)throw new Error("Tokens array requires a `links` property.");this.options.gfm?this.rules=this.options.breaks?j.breaks:j.gfm:this.options.pedantic&&(this.rules=j.pedantic)}function c(a){this.tokens=[],this.token=null,this.options=a||h.defaults}function d(a,b){return a.replace(b?/&/g:/&(?!#?\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function e(a,b){return a=a.source,b=b||"",function c(d,e){return d?(e=e.source||e,e=e.replace(/(^|[^\[])\^/g,"$1"),a=a.replace(d,e),c):new RegExp(a,b)}}function f(){}function g(a){for(var b,c,d=1;d<arguments.length;d++){b=arguments[d];for(c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])}return a}function h(b,e,f){if(f||"function"==typeof e){f||(f=e,e=null),e&&(e=g({},h.defaults,e));var i=a.lex(i,e),j=e.highlight,k=0,l=i.length,m=0;if(!j||j.length<3)return f(null,c.parse(i,e));for(var n=function(){delete e.highlight;var a=c.parse(i,e);return e.highlight=j,f(null,a)};l>m;m++)(function(a){return"code"===a.type?(k++,j(a.text,a.lang,function(b,c){return null==c||c===a.text?--k||n():(a.text=c,a.escaped=!0,--k||n(),void 0)})):void 0})(i[m])}else try{return e&&(e=g({},h.defaults,e)),c.parse(a.lex(b,e),e,b)}catch(o){if(o.message+="\nPlease report this to https://github.com/chjj/marked.",(e||h.defaults).silent)return"<p>An error occured:</p><pre>"+d(o.message+"",!0)+"</pre>";throw o}}var i={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,fences:f,hr:/^( *[-*_]){3,} *(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *#* *(?:\n+|$)/,nptable:f,lheading:/^([^\n]+)\n *(=|-){3,} *\n*/,blockquote:/^( *>[^\n]+(\n[^\n]+)*\n*)+/,list:/^( *)(bull) [\s\S]+?(?:hr|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:/^ *(?:comment|closed|closing) *(?:\n{2,}|\s*$)/,def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +["(]([^\n]+)[")])? *(?:\n+|$)/,table:f,paragraph:/^((?:[^\n]+\n?(?!hr|heading|lheading|blockquote|tag|def))+)\n*/,text:/^[^\n]+/};i.bullet=/(?:[*+-]|\d+\.)/,i.item=/^( *)(bull) [^\n]*(?:\n(?!\1bull )[^\n]*)*/,i.item=e(i.item,"gm")(/bull/g,i.bullet)(),i.list=e(i.list)(/bull/g,i.bullet)("hr",/\n+(?=(?: *[-*_]){3,} *(?:\n+|$))/)(),i._tag="(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:/|@)\\b",i.html=e(i.html)("comment",/<!--[\s\S]*?-->/)("closed",/<(tag)[\s\S]+?<\/\1>/)("closing",/<tag(?:"[^"]*"|'[^']*'|[^'">])*?>/)(/tag/g,i._tag)(),i.paragraph=e(i.paragraph)("hr",i.hr)("heading",i.heading)("lheading",i.lheading)("blockquote",i.blockquote)("tag","<"+i._tag)("def",i.def)(),i.normal=g({},i),i.gfm=g({},i.normal,{fences:/^ *(`{3,}|~{3,}) *(\S+)? *\n([\s\S]+?)\s*\1 *(?:\n+|$)/,paragraph:/^/}),i.gfm.paragraph=e(i.paragraph)("(?!","(?!"+i.gfm.fences.source.replace("\\1","\\2")+"|")(),i.tables=g({},i.gfm,{nptable:/^ *(\S.*\|.*)\n *([-:]+ *\|[-| :]*)\n((?:.*\|.*(?:\n|$))*)\n*/,table:/^ *\|(.+)\n *\|( *[-:]+[-| :]*)\n((?: *\|.*(?:\n|$))*)\n*/}),a.rules=i,a.lex=function(b,c){var d=new a(c);return d.lex(b)},a.prototype.lex=function(a){return a=a.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    ").replace(/\u00a0/g," ").replace(/\u2424/g,"\n"),this.token(a,!0)},a.prototype.token=function(a,b){var c,d,e,f,g,h,j,k,l,m,a=a.replace(/^ +$/gm,""),n=0;for(m=a;a;)if(n&&(this.tokens[this.tokens.length-1].origin=m.substring(0,m.indexOf(a))),m=a,n++,(e=this.rules.newline.exec(a))&&(a=a.substring(e[0].length),e[0].length>1&&this.tokens.push({type:"space"})),e=this.rules.code.exec(a))a=a.substring(e[0].length),e=e[0].replace(/^ {4}/gm,""),this.tokens.push({type:"code",text:this.options.pedantic?e:e.replace(/\n+$/,"")});else if(e=this.rules.fences.exec(a))a=a.substring(e[0].length),this.tokens.push({type:"code",lang:e[2],text:e[3]});else if(e=this.rules.heading.exec(a))a=a.substring(e[0].length),this.tokens.push({type:"heading",depth:e[1].length,text:e[2]});else if(b&&(e=this.rules.nptable.exec(a))){for(a=a.substring(e[0].length),h={type:"table",header:e[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:e[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:e[3].replace(/\n$/,"").split("\n")},k=0;k<h.align.length;k++)h.align[k]=/^ *-+: *$/.test(h.align[k])?"right":/^ *:-+: *$/.test(h.align[k])?"center":/^ *:-+ *$/.test(h.align[k])?"left":null;for(k=0;k<h.cells.length;k++)h.cells[k]=h.cells[k].split(/ *\| */);this.tokens.push(h)}else if(e=this.rules.lheading.exec(a))a=a.substring(e[0].length),this.tokens.push({type:"heading",depth:"="===e[2]?1:2,text:e[1]});else if(e=this.rules.hr.exec(a))a=a.substring(e[0].length),this.tokens.push({type:"hr"});else if(e=this.rules.blockquote.exec(a))a=a.substring(e[0].length),this.tokens.push({type:"blockquote_start"}),e=e[0].replace(/^ *> ?/gm,""),this.token(e,b),this.tokens.push({type:"blockquote_end"});else if(e=this.rules.list.exec(a)){for(a=a.substring(e[0].length),f=e[2],this.tokens.push({type:"list_start",ordered:f.length>1}),e=e[0].match(this.rules.item),c=!1,l=e.length,k=0;l>k;k++)h=e[k],j=h.length,h=h.replace(/^ *([*+-]|\d+\.) +/,""),~h.indexOf("\n ")&&(j-=h.length,h=this.options.pedantic?h.replace(/^ {1,4}/gm,""):h.replace(new RegExp("^ {1,"+j+"}","gm"),"")),this.options.smartLists&&k!==l-1&&(g=i.bullet.exec(e[k+1])[0],f!==g&&!(f.length>1&&g.length>1)&&(a=e.slice(k+1).join("\n")+a,k=l-1)),d=c||/\n\n(?!\s*$)/.test(h),k!==l-1&&(c="\n"===h[h.length-1],d||(d=c)),this.tokens.push({type:d?"loose_item_start":"list_item_start"}),this.token(h,!1),this.tokens.push({type:"list_item_end"});this.tokens.push({type:"list_end"})}else if(e=this.rules.html.exec(a))a=a.substring(e[0].length),this.tokens.push({type:this.options.sanitize?"paragraph":"html",pre:"pre"===e[1]||"script"===e[1],text:e[0]});else if(b&&(e=this.rules.def.exec(a)))a=a.substring(e[0].length),this.tokens.links[e[1].toLowerCase()]={href:e[2],title:e[3]};else if(b&&(e=this.rules.table.exec(a))){for(a=a.substring(e[0].length),h={type:"table",header:e[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:e[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:e[3].replace(/(?: *\| *)?\n$/,"").split("\n")},k=0;k<h.align.length;k++)h.align[k]=/^ *-+: *$/.test(h.align[k])?"right":/^ *:-+: *$/.test(h.align[k])?"center":/^ *:-+ *$/.test(h.align[k])?"left":null;for(k=0;k<h.cells.length;k++)h.cells[k]=h.cells[k].replace(/^ *\| *| *\| *$/g,"").split(/ *\| */);this.tokens.push(h)}else if(b&&(e=this.rules.paragraph.exec(a)))a=a.substring(e[0].length),this.tokens.push({type:"paragraph",text:"\n"===e[1][e[1].length-1]?e[1].slice(0,-1):e[1]});else if(e=this.rules.text.exec(a))a=a.substring(e[0].length),this.tokens.push({type:"text",text:e[0]});else if(a)throw new Error("Infinite loop on byte: "+a.charCodeAt(0));return this.tokens&&this.tokens.length&&(this.tokens[this.tokens.length-1].origin=m),this.tokens};var j={escape:/^\\([\\`*{}\[\]()#+\-.!_>])/,autolink:/^<([^ >]+(@|:\/)[^ >]+)>/,url:f,tag:/^<!--[\s\S]*?-->|^<\/?\w+(?:"[^"]*"|'[^']*'|[^'">])*?>/,link:/^!?\[(inside)\]\(href\)/,reflink:/^!?\[(inside)\]\s*\[([^\]]*)\]/,nolink:/^!?\[((?:\[[^\]]*\]|[^\[\]])*)\]/,strong:/^__([\s\S]+?)__(?!_)|^\*\*([\s\S]+?)\*\*(?!\*)/,em:/^\b_((?:__|[\s\S])+?)_\b|^\*((?:\*\*|[\s\S])+?)\*(?!\*)/,code:/^(`+)\s*([\s\S]*?[^`])\s*\1(?!`)/,br:/^ {2,}\n(?!\s*$)/,del:f,cite:/^""([\s\S]+?)""/,text:/^[\s\S]+?(?=[\\<!\[_"*`]| {2,}\n|$)/};j._inside=/(?:\[[^\]]*\]|[^\]]|\](?=[^\[]*\]))*/,j._href=/\s*<?([^\s]*?)>?(?:\s+['"]([\s\S]*?)['"])?\s*/,j.link=e(j.link)("inside",j._inside)("href",j._href)(),j.reflink=e(j.reflink)("inside",j._inside)(),j.normal=g({},j),j.pedantic=g({},j.normal,{strong:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/}),j.gfm=g({},j.normal,{escape:e(j.escape)("])","~|])")(),url:/^(https?:\/\/[^\s<]+[^<.,:;"')\]\s])/,del:/^~~(?=\S)([\s\S]*?\S)~~/,text:e(j.text)("]|","~]|")("|","|https?://|")()}),j.breaks=g({},j.gfm,{br:e(j.br)("{2,}","*")(),text:e(j.gfm.text)("{2,}","*")()}),b.rules=j,b.output=function(a,c,d){var e=new b(c,d);return e.output(a)},b.prototype.output=function(a){for(var b,c,e,f,g="";a;)if(f=this.rules.escape.exec(a))a=a.substring(f[0].length),g+=f[1];else if(f=this.rules.autolink.exec(a))a=a.substring(f[0].length),"@"===f[2]?(c=":"===f[1][6]?this.mangle(f[1].substring(7)):this.mangle(f[1]),e=this.mangle("mailto:")+c):(c=d(f[1]),e=c),g+='<a href="'+e+'">'+c+"</a>";else if(f=this.rules.url.exec(a))a=a.substring(f[0].length),c=d(f[1]),e=c,g+='<a href="'+e+'">'+c+"</a>";else if(f=this.rules.tag.exec(a))a=a.substring(f[0].length),g+=this.options.sanitize?d(f[0]):f[0];else if(f=this.rules.link.exec(a))a=a.substring(f[0].length),g+=this.outputLink(f,{href:f[2],title:f[3]});else if((f=this.rules.reflink.exec(a))||(f=this.rules.nolink.exec(a))){if(a=a.substring(f[0].length),b=(f[2]||f[1]).replace(/\s+/g," "),b=this.links[b.toLowerCase()],!b||!b.href){g+=f[0][0],a=f[0].substring(1)+a;continue}g+=this.outputLink(f,b)}else if(f=this.rules.strong.exec(a))a=a.substring(f[0].length),g+="<strong>"+this.output(f[2]||f[1])+"</strong>";else if(f=this.rules.cite.exec(a))a=a.substring(f[0].length),g+="<cite>"+this.output(f[2]||f[1])+"</cite>";else if(f=this.rules.em.exec(a))a=a.substring(f[0].length),g+="<em>"+this.output(f[2]||f[1])+"</em>";else if(f=this.rules.code.exec(a))a=a.substring(f[0].length),g+="<code>"+d(f[2],!0)+"</code>";else if(f=this.rules.br.exec(a))a=a.substring(f[0].length),g+="<br>";else if(f=this.rules.del.exec(a))a=a.substring(f[0].length),g+="<del>"+this.output(f[1])+"</del>";else if(f=this.rules.text.exec(a))a=a.substring(f[0].length),g+=d(f[0]);else if(a)throw new Error("Infinite loop on byte: "+a.charCodeAt(0));return g},b.prototype.outputLink=function(a,b){return"!"!==a[0][0]?'<a href="'+d(b.href)+'"'+(b.title?' title="'+d(b.title)+'"':"")+">"+this.output(a[1])+"</a>":'<img src="'+d(b.href)+'" alt="'+d(a[1])+'"'+(b.title?' title="'+d(b.title)+'"':"")+">"},b.prototype.smartypants=function(a){return this.options.smartypants?a.replace(/--/g,"—").replace(/'([^']*)'/g,"‘$1’").replace(/"([^"]*)"/g,"“$1”").replace(/\.{3}/g,"…"):a
},b.prototype.mangle=function(a){for(var b,c="",d=a.length,e=0;d>e;e++)b=a.charCodeAt(e),Math.random()>.5&&(b="x"+b.toString(16)),c+="&#"+b+";";return c},c.parse=function(a,b,d){var e=new c(b);return e.parse(a,d)},c.prototype.parse=function(a,c){for(var d=[],e=0;e<a.length;e++)node=a[e],d.push(c.indexOf(node.origin));this.inline=new b(a.links,this.options),this.tokens=a.reverse();for(var f="";this.next();){var g=this.tok(),h=d[0],i=g.indexOf(">");g&&(g=[g.slice(0,i),' data-editor-pos="'+h+'"',g.slice(i)].join("")),d.shift(),f+=g}return f},c.prototype.next=function(){return this.token=this.tokens.pop()},c.prototype.peek=function(){return this.tokens[this.tokens.length-1]||0},c.prototype.parseText=function(){for(var a=this.token.text;"text"===this.peek().type;)a+="\n"+this.next().text;return this.inline.output(a)},c.prototype.tok=function(){switch(this.token.type){case"space":return"";case"hr":return"<hr>\n";case"heading":return"<h"+this.token.depth+">"+this.inline.output(this.token.text)+"</h"+this.token.depth+">\n";case"code":if(this.options.highlight){var a=this.options.highlight(this.token.text,this.token.lang);null!=a&&a!==this.token.text&&(this.token.escaped=!0,this.token.text=a)}return this.token.escaped||(this.token.text=d(this.token.text,!0)),"<pre><code"+(this.token.lang?' class="'+this.options.langPrefix+this.token.lang+'"':"")+">"+this.token.text+"</code></pre>\n";case"table":var b,c,e,f,g,h="";for(h+="<thead>\n<tr>\n",c=0;c<this.token.header.length;c++)b=this.inline.output(this.token.header[c]),h+=this.token.align[c]?'<th align="'+this.token.align[c]+'">'+b+"</th>\n":"<th>"+b+"</th>\n";for(h+="</tr>\n</thead>\n",h+="<tbody>\n",c=0;c<this.token.cells.length;c++){for(e=this.token.cells[c],h+="<tr>\n",g=0;g<e.length;g++)f=this.inline.output(e[g]),h+=this.token.align[g]?'<td align="'+this.token.align[g]+'">'+f+"</td>\n":"<td>"+f+"</td>\n";h+="</tr>\n"}return h+="</tbody>\n","<table>\n"+h+"</table>\n";case"blockquote_start":for(var h="";"blockquote_end"!==this.next().type;)h+=this.tok();return"<blockquote>\n"+h+"</blockquote>\n";case"list_start":for(var i=this.token.ordered?"ol":"ul",h="";"list_end"!==this.next().type;)h+=this.tok();return"<"+i+">\n"+h+"</"+i+">\n";case"list_item_start":for(var h="";"list_item_end"!==this.next().type;)h+="text"===this.token.type?this.parseText():this.tok();return"<li>"+h+"</li>\n";case"loose_item_start":for(var h="";"list_item_end"!==this.next().type;)h+=this.tok();return"<li>"+h+"</li>\n";case"html":return this.token.pre||this.options.pedantic?this.token.text:this.inline.output(this.token.text);case"paragraph":return"<p>"+this.inline.output(this.token.text)+"</p>\n";case"text":return"<p>"+this.parseText()+"</p>\n"}},f.exec=f,h.options=h.setOptions=function(a){return g(h.defaults,a),h},h.defaults={gfm:!0,tables:!0,breaks:!1,pedantic:!1,sanitize:!1,smartLists:!1,silent:!1,highlight:null,langPrefix:"lang-"},h.Parser=c,h.parser=c.parse,h.Lexer=a,h.lexer=a.lex,h.InlineLexer=b,h.inlineLexer=b.output,h.parse=h,"object"==typeof exports?module.exports=h:this.marked=h}.call(function(){return this||("undefined"!=typeof window?window:global)}()),define("plugins/editor/marked_jjedit",function(){}),function(a){var b,c,d;return d=function(){function b(b,c){var d;d=null,this.$preview=null,this.currentDrag=null,this.inlineElementDragged=null,this.dragCount=0,this.fileDragPermitted=!0,this.pendingAjax=[],this.customParsers={},this.firstTimeRendered=!1,this.options=a.extend({},this.defaults,c),this.$input=b instanceof jQuery?b:a(b),this.$input._val=this.$input[this.options.contentGetter],this.$preview=this.options.preview instanceof jQuery?this.options.preview:a(this.options.preview),this.initialize()}var c;return b.prototype.defaults={preview:"#preview",parsingDelay:200,dragAndDropAllowed:!0,hideDropzoneDelay:1e3,errorMsg:"Sorry, but there has been an error.",contentGetter:"val",customParsers:{},customParserOptions:{},afterRender:null,onChange:null,onBlur:null,imageUrl:"/imagery/images/docimage/",placeholder:"PLACEHOLDER",charlimit:0,additionalPOSTData:null,uploadResponseHandler:null},c=function(c){var d;return"dragstart"===c.type?(d=a(c.target).data("md-tag"),d||(d=a(c.target).parent().data("md-tag")),d=d.replace("\\[","[").replace("\\]","]")):d=null,a.fireGlobalDragEvent(c.type,c.target),b._activeDraggable=d},b.setAsDraggable=function(a){return b.draggables||(b.draggables=[]),a=a.filter("[data-md-tag]"),a.length?(b.draggables.push(a),a.on("dragstart dragend",c)):void 0},b.cleanupDraggables=function(){return b.draggables?a.each(b.draggables,function(a,b){return b.off("dragstart dragend")}):void 0},b.prototype.cleanup=function(){return this.$input.remove(),this.$preview.remove(),this.$dropzone?this.$dropzone.remove():void 0},b.prototype.initialize=function(){var b,c,d,e,f=this;return a.each(this.options.customParsers,function(a,b){var c,d;return d=window[b],d?(c=f.options.customParserOptions[a],f.customParsers[a]=new d(c)):void 0}),c=this.$input,d=this.$preview,f=this,c.tabby().trigger("keyup"),this.delayTimeout=null,c.off("keyup").on("keyup",function(){var b,d,e;return b=a(this),d=f.options.charlimit,d>0&&c._val().length>d&&c._val(c._val().substring(0,d)),e&&clearTimeout(e),e=setTimeout(function(){return f.parseMarkdown()},f.options.parsingDelay)}),b=c.add(d),e=null,b.on("scroll",function(){var b,f;return f=a(this),b=f.is(c)?d:c,e&&e.is(b)?!1:(e=f,b[0].scrollTop=this.scrollTop*b[0].scrollHeight/this.scrollHeight,setTimeout(function(){return e=null},200))}),f.parseMarkdown(),this.options.dragAndDropAllowed&&this.dragAndDropSetup(),this},b.prototype.parseMarkdown=function(){var b,c,d,e=this;return a.each(this.pendingAjax,function(a,b){return 4!==b.readyState&&b.abort?b.abort():void 0}),c=this.$input._val(),b=marked(c),d=[],a.each(this.customParsers,function(a,b){var f,g;return f=b.findIDs(c),g=b.getData(f),d.push(g),b.noAjax?void 0:e.pendingAjax.push(g)}),a.when.apply(a,d).then(function(){var d;return e.pendingAjax=[],a.each(e.customParsers,function(a,c){return b=c.parseMarkdown(b)}),e.$preview.trigger("markdown:replaced"),0===c.length?e.$preview.html(e.options.placeholder):e.$preview.html(b),e.inlineDragAndDropSetup(),e.options.afterRender&&e.options.afterRender(),d={raw:c},e.customParsers.images&&(d.images=e.customParsers.images.returnIds()),e.options.onChange&&e.firstTimeRendered&&e.options.onChange(d),e.firstTimeRendered=!0})},b.prototype.dragAndDropSetup=function(){var c,d,e,f,g=this;return c=this.$preview,d=this.options.hideDropzoneDelay,c.on("dragover",function(b){var d,f,h,i,j,k;return g.currentDrag||(g.currentDrag={$dropzone:a("<div>",{"class":"dropzone"})},g.dragCount++,c.data("dragid",g.dragCount),g.currentDrag.$dropzone.data("dragid",g.dragCount)),e(),i=g.currentDrag,d=i.$dropzone,i.hideDropzoneTimeout&&clearTimeout(g.currentDrag.hideDropzoneTimeout),f=a(b.target),f.is(d)?void 0:(k=!1,f.is(c)?k=!0:f.attr("data-editor-pos")||(h=f.closest("[data-editor-pos]"),h.length?f=h:(f=c,k=!0)),j=k?"appendTo":"insertBefore",i.$target=f,d[j].call(d,f))}),c.on("drop",function(b){var c;return c=a(b.originalEvent.originalTarget),g.currentDrag&&!c.is(g.currentDrag.$dropzone)?(f(),!1):void 0}),f=function(){return g.currentDrag?(clearTimeout(g.currentDrag.hideDropzoneTimeout),g.currentDrag.hideDropzoneTimeout=setTimeout(function(){return g.currentDrag.$dropzone.hide().detach().show()},d)):void 0},c.on("dragleave",f),e=function(){var c;return g.currentDrag.dropHandlerBound?!1:(g.currentDrag.dropHandlerBound=!0,c=g.currentDrag.$dropzone,c.on("dragenter",function(){return a(this).addClass("dragover")}),c.on("dragleave",function(){return a(this).removeClass("dragover")}),c.on("drop",function(d){var e,f,h,i,j,k;return e=g.currentDrag.$target,i=g.currentDrag.hideDropzoneTimeout,i&&clearTimeout(i),c.off("drop"),g.currentDrag=null,f=new a.Deferred,f.done(function(){return c.remove(),g.parseMarkdown()}),(h=g.inlineElementDragged)?(g.moveInlineElement(a(h),e),g.inlineElementDragged=null,f.resolve()):(j=b._activeDraggable)?(g.insertAtEditorPosByEl(e,j+"  \n\n"),b._activeDraggable=null,f.resolve()):d.dataTransfer.files.length?(k=JJFileUpload["do"](d,c,g.options.imageUrl,g.options.additionalPOSTData,g.options.errorMsg,"image.*"),k.done(function(b){var c,d,h,i,j;for(b=a.parseJSON(b),g.options.uploadResponseHandler&&g.options.uploadResponseHandler(b),h="",i=0,j=b.length;j>i;i++)d=b[i],h+="[img "+d.id+"]";return c="  \n\n",g.insertAtEditorPosByEl(e,h+c),f.resolve()})):c.remove()}))}},b.prototype.inlineDragAndDropSetup=function(){var a,b,c=this;return b=this.$preview,a=b.find("[data-md-tag]"),c=this,a.on("dragstart",function(){return c.inlineElementDragged=this}),a.on("dragend",function(){return c.inlineElementDragged=null}),b.on("markdown:replace",function(){return a.off("dragstart dragend")})},b.prototype.moveInlineElement=function(a,b){var c,d,e;return d=a.data("md-tag").replace(/\\/g,""),c=d+"  \n\n",e=a.data("editor-pos"),!b.is(this.$preview)&&b.data("editor-pos")<e&&(e+=c.length),this.insertAtEditorPosByEl(b,c),this.removeAtEditorPos(e,d)},b.prototype.removeAtEditorPos=function(a,b){var c,d,e;return e=this.$input._val(),c=b.length,d="  \n\n",e.substring(a+c,a+c+d.length)===d&&(c+=d.length),e=[e.slice(0,a),e.slice(a+c)].join(""),this.$input._val(e)},b.prototype.insertAtEditorPosByEl=function(a,b){var c,d;return d=this.$input._val(),a.is(this.$preview)?d+=b:(c=a.data("editor-pos"),d=[d.slice(0,c),b,d.slice(c)].join("")),this.$input._val(d)},b}(),c={findIDs:function(){},parseFound:function(){},getUrl:function(){},getData:function(){},parseMarkdown:function(){},returnIds:function(){}},b=function(){function a(a){var b,c;if(this.cache=[],a)for(b in a)c=a[b],this[b]=c}return a.prototype.url="",a}(),b.prototype.findIDs=function(b){var c,d,e,f;for(this._raw=b,f=[],e=[];c=this.rule.exec(b);)f.push(c),d=this.parseFound(c[1]),a.inArray(d,e)<0&&e.push(d);return this._tempReplacements=f,e},b.prototype.parseFound=function(a){return a},b.prototype.getUrl=function(a){return this.url+"?ids="+a.join(",")},b.prototype.getData=function(b){var c,d,e,f,g=this;return d=[],e=[],c=new a.Deferred,a.each(b,function(b,c){var f;return f=null,a.each(g.cache,function(a,b){b.id===c&&(f=b)}),f?e.push(f):d.push(c)}),d.length?(f=this.getUrl(d),a.getJSON(f).done(function(b){return a.isArray(b)?(g.cache=g.cache.concat(b),e=e.concat(b),g.data=e):void 0})):(this.data=e,c.resolve(),c)},b.prototype.parseMarkdown=function(b){var c,d,e,f,g=this;return c=function(a,b,c){var d;return d=a.indexOf(">"),[a.slice(0,d)," data-"+b+'="'+c+'"',a.slice(d)].join("")},d=[],e=this._raw,f=[],a.each(this._tempReplacements,function(d,e){var h,i,j,k;return i=null,h=g.parseFound(e[1]),a.each(g.data,function(a,b){b.id===h&&(i=b)}),i?(f.push(i.id),j=e[0].replace("[","\\[").replace("]","\\]"),k=c(i.tag,"editor-pos",e.index),k=c(k,"md-tag",j),b=b.replace(e[0],k)):void 0}),this._raw=null,this._tempReplacements=null,this.usedIds=a.unique(f),b},b.prototype.returnIds=function(){var a;return a={ids:this.usedIds},this.className&&(a.className=this.className),a},window.JJMarkdownEditor=d,window.CustomMarkdownParser=b}(jQuery),define("plugins/editor/jquery.jjmarkdown",function(){}),function(a){function b(b,c,d,e){this.id=d,this.target=b,this.tooltip=v,this.elements=elements={target:b},this._id=I+"-"+d,this.timers={img:{}},this.options=c,this.plugins={},this.cache=cache={event:{},target:a(),disabled:u,attr:e,onTooltip:u,lastClass:""},this.rendered=this.destroyed=this.disabled=this.waiting=this.hiddenDuringWait=this.positioning=this.triggering=u}function c(b){return b===v||"object"!==a.type(b)}function d(b){return!(a.isFunction(b)||b&&b.attr||b.length||"object"===a.type(b)&&(b.jquery||b.then))}function e(b){var e,f,g,h;return c(b)?u:(c(b.metadata)&&(b.metadata={type:b.metadata}),"content"in b&&(e=b.content,c(e)||e.jquery||e.done?e=b.content={text:f=d(e)?u:e}:f=e.text,"ajax"in e&&(g=e.ajax,h=g&&g.once!==u,delete e.ajax,e.text=function(b,c){var d=f||a(this).attr(c.options.content.attr)||"Loading...",e=a.ajax(a.extend({},g,{context:c})).then(g.success,v,g.error).then(function(a){return a&&h&&c.set("content.text",a),a},function(a,b,d){c.destroyed||0===a.status||c.set("content.text",b+": "+d)});return h?d:(c.set("content.text",d),e)}),"title"in e&&(c(e.title)||(e.button=e.title.button,e.title=e.title.text),d(e.title||u)&&(e.title=u))),"position"in b&&c(b.position)&&(b.position={my:b.position,at:b.position}),"show"in b&&c(b.show)&&(b.show=b.show.jquery?{target:b.show}:b.show===t?{ready:t}:{event:b.show}),"hide"in b&&c(b.hide)&&(b.hide=b.hide.jquery?{target:b.hide}:{event:b.hide}),"style"in b&&c(b.style)&&(b.style={classes:b.style}),a.each(H,function(){this.sanitize&&this.sanitize(b)}),b)}function f(a,b){for(var c,d=0,e=a,f=b.split(".");e=e[f[d++]];)d<f.length&&(c=e);return[c||a,f.pop()]}function g(a,b){var c,d,e;for(c in this.checks)for(d in this.checks[c])(e=new RegExp(d,"i").exec(a))&&(b.push(e),("builtin"===c||this.plugins[c])&&this.checks[c][d].apply(this.plugins[c]||this,b))}function h(a){return L.concat("").join(a?"-"+a+" ":" ")}function i(b){if(this.tooltip.hasClass(S))return u;clearTimeout(this.timers.show),clearTimeout(this.timers.hide);var c=a.proxy(function(){this.toggle(t,b)},this);this.options.show.delay>0?this.timers.show=setTimeout(c,this.options.show.delay):c()}function j(b){if(this.tooltip.hasClass(S))return u;var c=a(b.relatedTarget),d=c.closest(M)[0]===this.tooltip[0],e=c[0]===this.options.show.target[0];if(clearTimeout(this.timers.show),clearTimeout(this.timers.hide),this!==c[0]&&"mouse"===this.options.position.target&&d||this.options.hide.fixed&&/mouse(out|leave|move)/.test(b.type)&&(d||e))try{b.preventDefault(),b.stopImmediatePropagation()}catch(f){}else{var g=a.proxy(function(){this.toggle(u,b)},this);this.options.hide.delay>0?this.timers.hide=setTimeout(g,this.options.hide.delay):g()}}function k(b){return this.tooltip.hasClass(S)||!this.options.hide.inactive?u:(clearTimeout(this.timers.inactive),this.timers.inactive=setTimeout(a.proxy(function(){this.hide(b)},this),this.options.hide.inactive),void 0)}function l(a){this.rendered&&this.tooltip[0].offsetWidth>0&&this.reposition(a)}function m(b,c,d){a(document.body).delegate(b,(c.split?c:c.join(Y+" "))+Y,function(){var b=o.api[a.attr(this,K)];b&&!b.disabled&&d.apply(b,arguments)})}function n(c,d,f){var g,h,i,j,k,l=a(document.body),m=c[0]===document?l:c,n=c.metadata?c.metadata(f.metadata):v,p="html5"===f.metadata.type&&n?n[f.metadata.name]:v,r=c.data(f.metadata.name||"qtipopts");try{r="string"==typeof r?a.parseJSON(r):r}catch(s){}if(j=a.extend(t,{},o.defaults,f,"object"==typeof r?e(r):v,e(p||n)),h=j.position,j.id=d,"boolean"==typeof j.content.text){if(i=c.attr(j.content.attr),j.content.attr===u||!i)return u;j.content.text=i}if(h.container.length||(h.container=l),h.target===u&&(h.target=m),j.show.target===u&&(j.show.target=m),j.show.solo===t&&(j.show.solo=h.container.closest("body")),j.hide.target===u&&(j.hide.target=m),j.position.viewport===t&&(j.position.viewport=h.container),h.container=h.container.eq(0),h.at=new q(h.at,t),h.my=new q(h.my),c.data(I))if(j.overwrite)c.qtip("destroy");else if(j.overwrite===u)return u;return c.attr(J,d),j.suppress&&(k=c.attr("title"))&&c.removeAttr("title").attr(U,k).attr("title",""),g=new b(c,j,d,!!i),c.data(I,g),c.one("remove.qtip-"+d+" removeqtip.qtip-"+d,function(){var b;(b=a(this).data(I))&&b.destroy()}),g}var o,p,q,r,s,t=!0,u=!1,v=null,w="x",x="y",y="width",z="height",A="top",B="left",C="bottom",D="right",E="center",F="flipinvert",G="shift",H={},I="qtip",J="data-hasqtip",K="data-qtip-id",L=["ui-widget","ui-tooltip"],M="."+I,N="click dblclick mousedown mouseup mousemove mouseleave mouseenter".split(" "),O=I+"-fixed",P=I+"-default",Q=I+"-focus",R=I+"-hover",S=I+"-disabled",T="_replacedByqTip",U="oldtitle";BROWSER={ie:function(){for(var a=3,b=document.createElement("div");(b.innerHTML="<!--[if gt IE "+ ++a+"]><i></i><![endif]-->")&&b.getElementsByTagName("i")[0];);return a>4?a:0/0}(),iOS:parseFloat((""+(/CPU.*OS ([0-9_]{1,5})|(CPU like).*AppleWebKit.*Mobile/i.exec(navigator.userAgent)||[0,""])[1]).replace("undefined","3_2").replace("_",".").replace("_",""))||u},p=b.prototype,p.render=function(b){if(this.rendered||this.destroyed)return this;var c=this,d=this.options,e=this.cache,f=this.elements,g=d.content.text,h=d.content.title,i=d.content.button,j=d.position,k="."+this._id+" ",l=[];return a.attr(this.target[0],"aria-describedby",this._id),this.tooltip=f.tooltip=tooltip=a("<div/>",{id:this._id,"class":[I,P,d.style.classes,I+"-pos-"+d.position.my.abbrev()].join(" "),width:d.style.width||"",height:d.style.height||"",tracking:"mouse"===j.target&&j.adjust.mouse,role:"alert","aria-live":"polite","aria-atomic":u,"aria-describedby":this._id+"-content","aria-hidden":t}).toggleClass(S,this.disabled).attr(K,this.id).data(I,this).appendTo(j.container).append(f.content=a("<div />",{"class":I+"-content",id:this._id+"-content","aria-atomic":t})),this.rendered=-1,this.positioning=t,h&&(this._createTitle(),a.isFunction(h)||l.push(this._updateTitle(h,u))),i&&this._createButton(),a.isFunction(g)||l.push(this._updateContent(g,u)),this.rendered=t,this._setWidget(),a.each(d.events,function(b,c){a.isFunction(c)&&tooltip.bind(("toggle"===b?["tooltipshow","tooltiphide"]:["tooltip"+b]).join(k)+k,c)}),a.each(H,function(a){var b;"render"===this.initialize&&(b=this(c))&&(c.plugins[a]=b)}),this._assignEvents(),a.when.apply(a,l).then(function(){c._trigger("render"),c.positioning=u,!c.hiddenDuringWait&&(d.show.ready||b)&&c.toggle(t,e.event,u),c.hiddenDuringWait=u}),o.api[this.id]=this,this},p.destroy=function(b){function c(){if(!this.destroyed){this.destroyed=t;var b=this.target,c=b.attr(U);this.rendered&&this.tooltip.stop(1,0).find("*").remove().end().remove(),a.each(this.plugins,function(){this.destroy&&this.destroy()}),clearTimeout(this.timers.show),clearTimeout(this.timers.hide),this._unassignEvents(),b.removeData(I).removeAttr(K).removeAttr("aria-describedby"),this.options.suppress&&c&&b.attr("title",c).removeAttr(U),this._unbind(b),this.options=this.elements=this.cache=this.timers=this.plugins=this.mouse=v,delete o.api[this.id]}}return this.destroyed?this.target:(b!==t&&this.rendered?(tooltip.one("tooltiphidden",a.proxy(c,this)),!this.triggering&&this.hide()):c.call(this),this.target)},r=p.checks={builtin:{"^id$":function(b,c,d,e){var f=d===t?o.nextid:d,g=I+"-"+f;f!==u&&f.length>0&&!a("#"+g).length?(this._id=g,this.rendered&&(this.tooltip[0].id=this._id,this.elements.content[0].id=this._id+"-content",this.elements.title[0].id=this._id+"-title")):b[c]=e},"^prerender":function(a,b,c){c&&!this.rendered&&this.render(this.options.show.ready)},"^content.text$":function(a,b,c){this._updateContent(c)},"^content.attr$":function(a,b,c,d){this.options.content.text===this.target.attr(d)&&this._updateContent(this.target.attr(c))},"^content.title$":function(a,b,c){return c?(c&&!this.elements.title&&this._createTitle(),this._updateTitle(c),void 0):this._removeTitle()},"^content.button$":function(a,b,c){this._updateButton(c)},"^content.title.(text|button)$":function(a,b,c){this.set("content."+b,c)},"^position.(my|at)$":function(a,b,c){"string"==typeof c&&(a[b]=new q(c,"at"===b))},"^position.container$":function(a,b,c){this.tooltip.appendTo(c)},"^show.ready$":function(a,b,c){c&&(!this.rendered&&this.render(t)||this.toggle(t))},"^style.classes$":function(a,b,c,d){this.tooltip.removeClass(d).addClass(c)},"^style.width|height":function(a,b,c){this.tooltip.css(b,c)},"^style.widget|content.title":function(){this._setWidget()},"^style.def":function(a,b,c){this.tooltip.toggleClass(P,!!c)},"^events.(render|show|move|hide|focus|blur)$":function(b,c,d){tooltip[(a.isFunction(d)?"":"un")+"bind"]("tooltip"+c,d)},"^(show|hide|position).(event|target|fixed|inactive|leave|distance|viewport|adjust)":function(){var a=this.options.position;tooltip.attr("tracking","mouse"===a.target&&a.adjust.mouse),this._unassignEvents(),this._assignEvents()}}},p.get=function(a){if(this.destroyed)return this;var b=f(this.options,a.toLowerCase()),c=b[0][b[1]];return c.precedance?c.string():c};var V=/^position\.(my|at|adjust|target|container|viewport)|style|content|show\.ready/i,W=/^prerender|show\.ready/i;p.set=function(b,c){if(this.destroyed)return this;var d,h=this.rendered,i=u,j=this.options;return this.checks,"string"==typeof b?(d=b,b={},b[d]=c):b=a.extend({},b),a.each(b,function(c,d){if(!h&&!W.test(c))return delete b[c],void 0;var e,g=f(j,c.toLowerCase());e=g[0][g[1]],g[0][g[1]]=d&&d.nodeType?a(d):d,i=V.test(c)||i,b[c]=[g[0],g[1],d,e]}),e(j),this.positioning=t,a.each(b,a.proxy(g,this)),this.positioning=u,this.rendered&&this.tooltip[0].offsetWidth>0&&i&&this.reposition("mouse"===j.position.target?v:this.cache.event),this},p._update=function(b,c,d){var e=this,f=this.cache;return this.rendered&&b?(a.isFunction(b)&&(b=b.call(this.elements.target,f.event,this)||""),a.isFunction(b.then)?(f.waiting=t,b.then(function(a){return f.waiting=u,e._update(a,c,d)},v,function(a){return e._update(a,c,d)})):b===u||!b&&""!==b?u:(b.jquery&&b.length>0?c.children().detach().end().append(b.css({display:"block"})):c.html(b),f.waiting=t,c.imagesLoaded().done(function(a){f.waiting=u,d!==u&&e.rendered&&e.tooltip[0].offsetWidth>0&&e.reposition(f.event,!a.length)}).promise())):u},p._updateContent=function(a,b){this._update(a,this.elements.content,b)},p._updateTitle=function(a,b){this._update(a,this.elements.title,b)===u&&this._removeTitle(u)},p._createTitle=function(){var b=this.elements,c=this._id+"-title";b.titlebar&&this._removeTitle(),b.titlebar=a("<div />",{"class":I+"-titlebar "+(this.options.style.widget?h("header"):"")}).append(b.title=a("<div />",{id:c,"class":I+"-title","aria-atomic":t})).insertBefore(b.content).delegate(".qtip-close","mousedown keydown mouseup keyup mouseout",function(b){a(this).toggleClass("ui-state-active ui-state-focus","down"===b.type.substr(-4))}).delegate(".qtip-close","mouseover mouseout",function(b){a(this).toggleClass("ui-state-hover","mouseover"===b.type)}),this.options.content.button&&this._createButton()},p._removeTitle=function(a){var b=this.elements;b.title&&(b.titlebar.remove(),b.titlebar=b.title=b.button=v,a!==u&&this.reposition())},p.reposition=function(b,c){if(!this.rendered||this.positioning||this.destroyed)return this;this.positioning=t;var d,e,f=this.cache,g=this.tooltip,h=this.options.position,i=h.target,j=h.my,k=h.at,l=h.viewport,m=h.container,n=h.adjust,o=n.method.split(" "),p=g.outerWidth(u),q=g.outerHeight(u),r=0,s=0,v=g.css("position"),w={left:0,top:0},x=g[0].offsetWidth>0,y=b&&"scroll"===b.type,z=a(window),F=m[0].ownerDocument,G=this.mouse;if(a.isArray(i)&&2===i.length)k={x:B,y:A},w={left:i[0],top:i[1]};else if("mouse"===i&&(b&&b.pageX||f.event.pageX))k={x:B,y:A},b=!G||!G.pageX||!n.mouse&&b&&b.pageX?(!b||"resize"!==b.type&&"scroll"!==b.type?b&&b.pageX&&"mousemove"===b.type?b:(!n.mouse||this.options.show.distance)&&f.origin&&f.origin.pageX?f.origin:b:f.event)||b||f.event||G||{}:G,"static"!==v&&(w=m.offset()),F.body.offsetWidth!==(window.innerWidth||F.documentElement.clientWidth)&&(e=a(F.body).offset()),w={left:b.pageX-w.left+(e&&e.left||0),top:b.pageY-w.top+(e&&e.top||0)},n.mouse&&y&&(w.left-=G.scrollX-z.scrollLeft(),w.top-=G.scrollY-z.scrollTop());else{if("event"===i&&b&&b.target&&"scroll"!==b.type&&"resize"!==b.type?f.target=a(b.target):"event"!==i&&(f.target=a(i.jquery?i:elements.target)),i=f.target,i=a(i).eq(0),0===i.length)return this;i[0]===document||i[0]===window?(r=BROWSER.iOS?window.innerWidth:i.width(),s=BROWSER.iOS?window.innerHeight:i.height(),i[0]===window&&(w={top:(l||i).scrollTop(),left:(l||i).scrollLeft()})):H.imagemap&&i.is("area")?d=H.imagemap(this,i,k,H.viewport?o:u):H.svg&&i[0].ownerSVGElement?d=H.svg(this,i,k,H.viewport?o:u):(r=i.outerWidth(u),s=i.outerHeight(u),w=i.offset()),d&&(r=d.width,s=d.height,e=d.offset,w=d.position),w=this.reposition.offset(i,w,m),(BROWSER.iOS>3.1&&BROWSER.iOS<4.1||BROWSER.iOS>=4.3&&BROWSER.iOS<4.33||!BROWSER.iOS&&"fixed"===v)&&(w.left-=z.scrollLeft(),w.top-=z.scrollTop()),(!d||d&&d.adjustable!==u)&&(w.left+=k.x===D?r:k.x===E?r/2:0,w.top+=k.y===C?s:k.y===E?s/2:0)}return w.left+=n.x+(j.x===D?-p:j.x===E?-p/2:0),w.top+=n.y+(j.y===C?-q:j.y===E?-q/2:0),H.viewport?(w.adjusted=H.viewport(this,w,h,r,s,p,q),e&&w.adjusted.left&&(w.left+=e.left),e&&w.adjusted.top&&(w.top+=e.top)):w.adjusted={left:0,top:0},this._trigger("move",[w,l.elem||l],b)?(delete w.adjusted,c===u||!x||isNaN(w.left)||isNaN(w.top)||"mouse"===i||!a.isFunction(h.effect)?g.css(w):a.isFunction(h.effect)&&(h.effect.call(g,this,a.extend({},w)),g.queue(function(b){a(this).css({opacity:"",height:""}),BROWSER.ie&&this.style.removeAttribute("filter"),b()})),this.positioning=u,this):this},p.reposition.offset=function(b,c,d){function e(a,b){c.left+=b*a.scrollLeft(),c.top+=b*a.scrollTop()}if(!d[0])return c;var f,g,h,i,j=a(b[0].ownerDocument),k=!!BROWSER.ie&&"CSS1Compat"!==document.compatMode,l=d[0];do"static"!==(g=a.css(l,"position"))&&("fixed"===g?(h=l.getBoundingClientRect(),e(j,-1)):(h=a(l).position(),h.left+=parseFloat(a.css(l,"borderLeftWidth"))||0,h.top+=parseFloat(a.css(l,"borderTopWidth"))||0),c.left-=h.left+(parseFloat(a.css(l,"marginLeft"))||0),c.top-=h.top+(parseFloat(a.css(l,"marginTop"))||0),!f&&"hidden"!==(i=a.css(l,"overflow"))&&"visible"!==i&&(f=a(l)));while(l=l.offsetParent);return f&&(f[0]!==j[0]||k)&&e(f,1),c};var X=(q=p.reposition.Corner=function(a,b){a=(""+a).replace(/([A-Z])/," $1").replace(/middle/gi,E).toLowerCase(),this.x=(a.match(/left|right/i)||a.match(/center/)||["inherit"])[0].toLowerCase(),this.y=(a.match(/top|bottom|center/i)||["inherit"])[0].toLowerCase(),this.forceY=!!b;var c=a.charAt(0);this.precedance="t"===c||"b"===c?x:w}).prototype;X.invert=function(a,b){this[a]=this[a]===B?D:this[a]===D?B:b||this[a]},X.string=function(){var a=this.x,b=this.y;return a===b?a:this.precedance===x||this.forceY&&"center"!==b?b+" "+a:a+" "+b},X.abbrev=function(){var a=this.string().split(" ");return a[0].charAt(0)+(a[1]&&a[1].charAt(0)||"")},X.clone=function(){return new q(this.string(),this.forceY)},p.toggle=function(b,c){var d=this.cache,e=this.options,f=this.tooltip;if(c){if(/over|enter/.test(c.type)&&/out|leave/.test(d.event.type)&&e.show.target.add(c.target).length===e.show.target.length&&f.has(c.relatedTarget).length)return this;d.event=a.extend({},c)}if(this.waiting&&!b&&(this.hiddenDuringWait=t),!this.rendered)return b?this.render(1):this;if(this.destroyed||this.disabled)return this;var g,h,i=b?"show":"hide",j=this.options[i],k=(this.options[b?"hide":"show"],this.options.position),l=this.options.content,m=this.tooltip.css("width"),n=this.tooltip[0].offsetWidth>0,o=b||1===j.target.length,p=!c||j.target.length<2||d.target[0]===c.target;return(typeof b).search("boolean|number")&&(b=!n),g=!f.is(":animated")&&n===b&&p,h=g?v:!!this._trigger(i,[90]),h!==u&&b&&this.focus(c),!h||g?this:(a.attr(f[0],"aria-hidden",!b),b?(d.origin=a.extend({},this.mouse),a.isFunction(l.text)&&this._updateContent(l.text,u),a.isFunction(l.title)&&this._updateTitle(l.title,u),!s&&"mouse"===k.target&&k.adjust.mouse&&(a(document).bind("mousemove."+I,this._storeMouse),s=t),m||f.css("width",f.outerWidth(u)),this.reposition(c,arguments[2]),m||f.css("width",""),!j.solo||("string"==typeof j.solo?a(j.solo):a(M,j.solo)).not(f).not(j.target).qtip("hide",a.Event("tooltipsolo"))):(clearTimeout(this.timers.show),delete d.origin,s&&!a(M+'[tracking="true"]:visible',j.solo).not(f).length&&(a(document).unbind("mousemove."+I),s=u),this.blur(c)),after=a.proxy(function(){b?(BROWSER.ie&&f[0].style.removeAttribute("filter"),f.css("overflow",""),"string"==typeof j.autofocus&&a(this.options.show.autofocus,f).focus(),this.options.show.target.trigger("qtip-"+this.id+"-inactive")):f.css({display:"",visibility:"",opacity:"",left:"",top:""}),this._trigger(b?"visible":"hidden")},this),j.effect===u||o===u?(f[i](),after()):a.isFunction(j.effect)?(f.stop(1,1),j.effect.call(f,this),f.queue("fx",function(a){after(),a()})):f.fadeTo(90,b?1:0,after),b&&j.target.trigger("qtip-"+this.id+"-inactive"),this)},p.show=function(a){return this.toggle(t,a)},p.hide=function(a){return this.toggle(u,a)},p.focus=function(b){if(!this.rendered||this.destroyed)return this;var c=a(M),d=this.tooltip,e=parseInt(d[0].style.zIndex,10),f=o.zindex+c.length;return d.hasClass(Q)||this._trigger("focus",[f],b)&&(e!==f&&(c.each(function(){this.style.zIndex>e&&(this.style.zIndex=this.style.zIndex-1)}),c.filter("."+Q).qtip("blur",b)),d.addClass(Q)[0].style.zIndex=f),this},p.blur=function(a){return!this.rendered||this.destroyed?this:(this.tooltip.removeClass(Q),this._trigger("blur",[this.tooltip.css("zIndex")],a),this)},p.disable=function(a){return this.destroyed?this:("boolean"!=typeof a&&(a=!this.tooltip.hasClass(S)&&!this.disabled),this.rendered&&this.tooltip.toggleClass(S,a).attr("aria-disabled",a),this.disabled=!!a,this)},p.enable=function(){return this.disable(u)},p._createButton=function(){var b=this,c=this.elements,d=c.tooltip,e=this.options.content.button,f="string"==typeof e,g=f?e:"Close tooltip";c.button&&c.button.remove(),c.button=e.jquery?e:a("<a />",{"class":"qtip-close "+(this.options.style.widget?"":I+"-icon"),title:g,"aria-label":g}).prepend(a("<span />",{"class":"ui-icon ui-icon-close",html:"&times;"})),c.button.appendTo(c.titlebar||d).attr("role","button").click(function(a){return d.hasClass(S)||b.hide(a),u})},p._updateButton=function(a){if(!this.rendered)return u;var b=this.elements.button;a?this._createButton():b.remove()},p._setWidget=function(){var a=this.options.style.widget,b=this.elements,c=b.tooltip,d=c.hasClass(S);c.removeClass(S),S=a?"ui-state-disabled":"qtip-disabled",c.toggleClass(S,d),c.toggleClass("ui-helper-reset "+h(),a).toggleClass(P,this.options.style.def&&!a),b.content&&b.content.toggleClass(h("content"),a),b.titlebar&&b.titlebar.toggleClass(h("header"),a),b.button&&b.button.toggleClass(I+"-icon",!a)},p._storeMouse=function(a){this.mouse={pageX:a.pageX,pageY:a.pageY,type:"mousemove",scrollX:window.pageXOffset||document.body.scrollLeft||document.documentElement.scrollLeft,scrollY:window.pageYOffset||document.body.scrollTop||document.documentElement.scrollTop}},p._bind=function(b,c,d,e,f){var g="."+this._id+(e?"-"+e:"");c.length&&a(b).bind((c.split?c:c.join(g+" "))+g,a.proxy(d,f||this))},p._unbind=function(b,c){a(b).unbind("."+this._id+(c?"-"+c:""))};var Y="."+I;a(function(){m(M,["mouseenter","mouseleave"],function(b){var c="mouseenter"===b.type,d=a(b.currentTarget),e=a(b.relatedTarget||b.target),f=this.options;c?(this.focus(b),d.hasClass(O)&&!d.hasClass(S)&&clearTimeout(this.timers.hide)):"mouse"===f.position.target&&f.hide.event&&f.show.target&&!e.closest(f.show.target[0]).length&&this.hide(b),d.toggleClass(R,c)}),m("["+K+"]",N,k)}),p._trigger=function(b,c,d){var e=a.Event("tooltip"+b);return e.originalEvent=d&&a.extend({},d)||this.cache.event||v,this.triggering=t,this.tooltip.trigger(e,[this].concat(c||[])),this.triggering=u,!e.isDefaultPrevented()},p._assignEvents=function(){var b=this.options,c=b.position,d=this.tooltip,e=b.show.target,f=b.hide.target,g=c.container,h=c.viewport,m=a(document),n=(a(document.body),a(window)),p=b.show.event?a.trim(""+b.show.event).split(" "):[],q=b.hide.event?a.trim(""+b.hide.event).split(" "):[],r=[];/mouse(out|leave)/i.test(b.hide.event)&&"window"===b.hide.leave&&this._bind(m,["mouseout","blur"],function(a){!/select|option/.test(a.target.nodeName)&&!a.relatedTarget&&this.hide(a)}),b.hide.fixed?f=f.add(d.addClass(O)):/mouse(over|enter)/i.test(b.show.event)&&this._bind(f,"mouseleave",function(){clearTimeout(this.timers.show)}),(""+b.hide.event).indexOf("unfocus")>-1&&this._bind(g.closest("html"),["mousedown","touchstart"],function(b){var c=a(b.target),d=this.rendered&&!this.tooltip.hasClass(S)&&this.tooltip[0].offsetWidth>0,e=c.parents(M).filter(this.tooltip[0]).length>0;c[0]!==this.target[0]&&c[0]!==this.tooltip[0]&&!e&&!this.target.has(c[0]).length&&d&&this.hide(b)}),"number"==typeof b.hide.inactive&&(this._bind(e,"qtip-"+this.id+"-inactive",k),this._bind(f.add(d),o.inactiveEvents,k,"-inactive")),q=a.map(q,function(b){var c=a.inArray(b,p);
return c>-1&&f.add(e).length===f.length?(r.push(p.splice(c,1)[0]),void 0):b}),this._bind(e,p,i),this._bind(f,q,j),this._bind(e,r,function(a){(this.tooltip[0].offsetWidth>0?j:i).call(this,a)}),this._bind(e.add(d),"mousemove",function(a){if("number"==typeof b.hide.distance){var c=this.cache.origin||{},d=this.options.hide.distance,e=Math.abs;(e(a.pageX-c.pageX)>=d||e(a.pageY-c.pageY)>=d)&&this.hide(a)}this._storeMouse(a)}),"mouse"===c.target&&c.adjust.mouse&&(b.hide.event&&this._bind(e,["mouseenter","mouseleave"],function(a){this.cache.onTarget="mouseenter"===a.type}),this._bind(m,"mousemove",function(a){this.rendered&&this.cache.onTarget&&!this.tooltip.hasClass(S)&&this.tooltip[0].offsetWidth>0&&this.reposition(a)})),(c.adjust.resize||h.length)&&this._bind(a.event.special.resize?h:n,"resize",l),c.adjust.scroll&&this._bind(n.add(c.container),"scroll",l)},p._unassignEvents=function(){var b=[this.options.show.target[0],this.options.hide.target[0],this.rendered&&this.tooltip[0],this.options.position.container[0],this.options.position.viewport[0],this.options.position.container.closest("html")[0],window,document];this.rendered?this._unbind(a([]).pushStack(a.grep(b,function(a){return"object"==typeof a}))):a(b[0]).unbind("."+this._id+"-create")},o=a.fn.qtip=function(b,c,d){var f=(""+b).toLowerCase(),g=v,h=a.makeArray(arguments).slice(1),i=h[h.length-1],j=this[0]?a.data(this[0],I):v;return!arguments.length&&j||"api"===f?j:"string"==typeof b?(this.each(function(){var b=a.data(this,I);if(!b)return t;if(i&&i.timeStamp&&(b.cache.event=i),!c||"option"!==f&&"options"!==f)b[f]&&b[f].apply(b,h);else{if(void 0===d&&!a.isPlainObject(c))return g=b.get(c),u;b.set(c,d)}}),g!==v?g:this):"object"!=typeof b&&arguments.length?void 0:(j=e(a.extend(t,{},b)),o.bind.call(this,j,i))},o.bind=function(b,c){return this.each(function(d){function e(b){function c(){j.render("object"==typeof b||f.show.ready),g.show.add(g.hide).unbind(i)}return j.disabled?u:(j.cache.event=a.extend({},b),j.cache.target=b?a(b.target):[void 0],f.show.delay>0?(clearTimeout(j.timers.show),j.timers.show=setTimeout(c,f.show.delay),h.show!==h.hide&&g.hide.bind(h.hide,function(){clearTimeout(j.timers.show)})):c(),void 0)}var f,g,h,i,j,k;return k=a.isArray(b.id)?b.id[d]:b.id,k=!k||k===u||k.length<1||o.api[k]?o.nextid++:k,i=".qtip-"+k+"-create",j=n(a(this),k,b),j===u?t:(o.api[k]=j,f=j.options,a.each(H,function(){"initialize"===this.initialize&&this(j)}),g={show:f.show.target,hide:f.hide.target},h={show:a.trim(""+f.show.event).replace(/ /g,i+" ")+i,hide:a.trim(""+f.hide.event).replace(/ /g,i+" ")+i},/mouse(over|enter)/i.test(h.show)&&!/mouse(out|leave)/i.test(h.hide)&&(h.hide+=" mouseleave"+i),g.show.bind("mousemove"+i,function(a){j._storeMouse(a),j.cache.onTarget=t}),g.show.bind(h.show,e),(f.show.ready||f.prerender)&&e(c),void 0)})},o.api={},a.each({attr:function(b,c){if(this.length){var d=this[0],e="title",f=a.data(d,"qtip");if(b===e&&f&&"object"==typeof f&&f.options.suppress)return arguments.length<2?a.attr(d,U):(f&&f.options.content.attr===e&&f.cache.attr&&f.set("content.text",c),this.attr(U,c))}return a.fn["attr"+T].apply(this,arguments)},clone:function(b){var c=(a([]),a.fn["clone"+T].apply(this,arguments));return b||c.filter("["+U+"]").attr("title",function(){return a.attr(this,U)}).removeAttr(U),c}},function(b,c){if(!c||a.fn[b+T])return t;var d=a.fn[b+T]=a.fn[b];a.fn[b]=function(){return c.apply(this,arguments)||d.apply(this,arguments)}}),a.ui||(a["cleanData"+T]=a.cleanData,a.cleanData=function(b){for(var c,d=0;(c=a(b[d])).length&&c.attr(K);d++)try{c.triggerHandler("removeqtip")}catch(e){}a["cleanData"+T](b)}),o.version="2.0.1-101",o.nextid=0,o.inactiveEvents=N,o.zindex=15e3,o.defaults={prerender:u,id:u,overwrite:t,suppress:t,content:{text:t,attr:"title",title:u,button:u},position:{my:"top left",at:"bottom right",target:u,container:u,viewport:u,adjust:{x:0,y:0,mouse:t,scroll:t,resize:t,method:"flipinvert flipinvert"},effect:function(b,c){a(this).animate(c,{duration:200,queue:u})}},show:{target:u,event:"mouseenter",effect:t,delay:90,solo:u,ready:u,autofocus:u},hide:{target:u,event:"mouseleave",effect:t,delay:0,fixed:u,inactive:u,leave:"window",distance:u},style:{classes:"",widget:u,width:u,height:u,def:t},events:{render:v,move:v,show:v,hide:v,toggle:v,visible:v,hidden:v,focus:v,blur:v}},H.viewport=function(a,b,c,d,e,f,g){function h(a,c,d,e,f,g,h,i,k){var l=b[f],m=n[a],p=o[a],q=d===G,r=-v.offset[f]+t.offset[f]+t["scroll"+f],s=m===f?k:m===g?-k:-k/2,u=p===f?i:p===g?-i:-i/2,w=J&&J.size?J.size[h]||0:0,x=J&&J.corner&&J.corner.precedance===a&&!q?w:0,y=r-l+x,z=l+k-t[h]-r+x,A=s-(n.precedance===a||m===n[c]?u:0)-(p===E?i/2:0);return q?(x=J&&J.corner&&J.corner.precedance===c?w:0,A=(m===f?1:-1)*s-x,b[f]+=y>0?y:z>0?-z:0,b[f]=Math.max(-v.offset[f]+t.offset[f]+(x&&J.corner[a]===E?J.offset:0),l-A,Math.min(Math.max(-v.offset[f]+t.offset[f]+t[h],l+A),b[f]))):(e*=d===F?2:0,y>0&&(m!==f||z>0)?(b[f]-=A+e,j.invert(a,f)):z>0&&(m!==g||y>0)&&(b[f]-=(m===E?-A:A)+e,j.invert(a,g)),b[f]<r&&-b[f]>z&&(b[f]=l,j=n.clone())),b[f]-l}var i,j,k,l=c.target,m=a.elements.tooltip,n=c.my,o=c.at,p=c.adjust,q=p.method.split(" "),r=q[0],s=q[1]||q[0],t=c.viewport,v=c.container,H=a.cache,J=a.plugins.tip,K={left:0,top:0};return t.jquery&&l[0]!==window&&l[0]!==document.body&&"none"!==p.method?(i="fixed"===m.css("position"),t={elem:t,width:t[0]===window?t.width():t.outerWidth(u),height:t[0]===window?t.height():t.outerHeight(u),scrollleft:i?0:t.scrollLeft(),scrolltop:i?0:t.scrollTop(),offset:t.offset()||{left:0,top:0}},v={elem:v,scrollLeft:v.scrollLeft(),scrollTop:v.scrollTop(),offset:v.offset()||{left:0,top:0}},("shift"!==r||"shift"!==s)&&(j=n.clone()),K={left:"none"!==r?h(w,x,r,p.x,B,D,y,d,f):0,top:"none"!==s?h(x,w,s,p.y,A,C,z,e,g):0},j&&H.lastClass!==(k=I+"-pos-"+j.abbrev())&&m.removeClass(a.cache.lastClass).addClass(a.cache.lastClass=k),K):K}}(jQuery),function(a,b){var c="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==";a.fn.imagesLoaded=function(d){function e(){var b=a(m),c=a(n);i&&(n.length?i.reject(k,b,c):i.resolve(k)),a.isFunction(d)&&d.call(h,k,b,c)}function f(a){g(a.target,"error"===a.type)}function g(b,d){b.src!==c&&-1===a.inArray(b,l)&&(l.push(b),d?n.push(b):m.push(b),a.data(b,"imagesLoaded",{isBroken:d,src:b.src}),j&&i.notifyWith(a(b),[d,k,a(m),a(n)]),k.length===l.length&&(setTimeout(e),k.unbind(".imagesLoaded",f)))}var h=this,i=a.isFunction(a.Deferred)?a.Deferred():0,j=a.isFunction(i.notify),k=h.find("img").add(h.filter("img")),l=[],m=[],n=[];return a.isPlainObject(d)&&a.each(d,function(a,b){"callback"===a?d=b:i&&i[a](b)}),k.length?k.bind("load.imagesLoaded error.imagesLoaded",f).each(function(d,e){var f=e.src,h=a.data(e,"imagesLoaded");return h&&h.src===f?(g(e,h.isBroken),void 0):e.complete&&e.naturalWidth!==b?(g(e,0===e.naturalWidth||0===e.naturalHeight),void 0):((e.readyState||e.complete)&&(e.src=c,e.src=f),void 0)}):e(),i?i.promise(h):h}}(jQuery),define("plugins/tooltip/jquery.qtip",function(){}),function(a){a.Zebra_DatePicker=function(b,c){var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J={always_show_clear:!1,always_visible:!1,days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],days_abbr:!1,direction:0,disabled_dates:!1,enabled_dates:!1,first_day_of_week:1,format:"Y-m-d",inside:!0,lang_clear_date:"Clear",months:["January","February","March","April","May","June","July","August","September","October","November","December"],months_abbr:!1,offset:[5,-5],pair:!1,readonly_element:!0,select_other_months:!1,show_icon:!0,show_other_months:!0,show_week_number:!1,start_date:!1,view:"days",weekend_days:[0,6],zero_pad:!1,onChange:null,onClear:null,onSelect:null},K=this;K.settings={};var L=a(b),M=function(y){y||(K.settings=a.extend({},J,c)),K.settings.readonly_element&&L.attr("readonly","readonly");var E={days:["d","j","D"],months:["F","m","M","n","t"],years:["o","Y","y"]},F=!1,G=!1,M=!1;for(type in E)a.each(E[type],function(a,b){K.settings.format.indexOf(b)>-1&&("days"==type?F=!0:"months"==type?G=!0:"years"==type&&(M=!0))});H=F&&G&&M?["years","months","days"]:!F&&G&&M?["years","months"]:F||G||!M?F||!G||M?["years","months","days"]:["months"]:["years"],-1==a.inArray(K.settings.view,H)&&(K.settings.view=H[H.length-1]),x=[],w=[];for(var P,Q=0;2>Q;Q++)P=0==Q?K.settings.disabled_dates:K.settings.enabled_dates,a.isArray(P)&&P.length>0&&a.each(P,function(){for(var b=this.split(" "),c=0;4>c;c++){b[c]||(b[c]="*"),b[c]=b[c].indexOf(",")>-1?b[c].split(","):new Array(b[c]);for(var d=0;d<b[c].length;d++)if(b[c][d].indexOf("-")>-1){var e=b[c][d].match(/^([0-9]+)\-([0-9]+)/);if(null!=e){for(var f=ab(e[1]);f<=ab(e[2]);f++)-1==a.inArray(f,b[c])&&b[c].push(f+"");b[c].splice(d,1)}}for(d=0;d<b[c].length;d++)b[c][d]=isNaN(ab(b[c][d]))?b[c][d]:ab(b[c][d])}0==Q?x.push(b):w.push(b)});var R,S,T=new Date,U=K.settings.reference_date?K.settings.reference_date:L.data("zdp_reference_date")&&void 0!=L.data("zdp_reference_date")?L.data("zdp_reference_date"):T;if(z=void 0,A=void 0,o=U.getMonth(),l=T.getMonth(),p=U.getFullYear(),m=T.getFullYear(),q=U.getDate(),n=T.getDate(),K.settings.direction===!0)z=U;else if(K.settings.direction===!1)A=U,D=A.getMonth(),C=A.getFullYear(),B=A.getDate();else if(!a.isArray(K.settings.direction)&&W(K.settings.direction)&&ab(K.settings.direction)>0||a.isArray(K.settings.direction)&&((R=N(K.settings.direction[0]))||K.settings.direction[0]===!0||W(K.settings.direction[0])&&K.settings.direction[0]>0)&&((S=N(K.settings.direction[1]))||K.settings.direction[1]===!1||W(K.settings.direction[1])&&K.settings.direction[1]>=0))z=R?R:new Date(p,o,q+(a.isArray(K.settings.direction)?ab(K.settings.direction[0]===!0?0:K.settings.direction[0]):ab(K.settings.direction))),o=z.getMonth(),p=z.getFullYear(),q=z.getDate(),S&&+S>=+z?A=S:!S&&K.settings.direction[1]!==!1&&a.isArray(K.settings.direction)&&(A=new Date(p,o,q+ab(K.settings.direction[1]))),A&&(D=A.getMonth(),C=A.getFullYear(),B=A.getDate());else if(!a.isArray(K.settings.direction)&&W(K.settings.direction)&&ab(K.settings.direction)<0||a.isArray(K.settings.direction)&&(K.settings.direction[0]===!1||W(K.settings.direction[0])&&K.settings.direction[0]<0)&&((R=N(K.settings.direction[1]))||W(K.settings.direction[1])&&K.settings.direction[1]>=0))A=new Date(p,o,q+(a.isArray(K.settings.direction)?ab(K.settings.direction[0]===!1?0:K.settings.direction[0]):ab(K.settings.direction))),D=A.getMonth(),C=A.getFullYear(),B=A.getDate(),R&&+A>+R?z=R:!R&&a.isArray(K.settings.direction)&&(z=new Date(C,D,B-ab(K.settings.direction[1]))),z&&(o=z.getMonth(),p=z.getFullYear(),q=z.getDate());else if(a.isArray(K.settings.disabled_dates)&&K.settings.disabled_dates.length>0)for(var X in x)if("*"==x[X][0]&&"*"==x[X][1]&&"*"==x[X][2]&&"*"==x[X][3]){var $=[];if(a.each(w,function(){var a=this;"*"!=a[2][0]&&$.push(parseInt(a[2][0]+("*"==a[1][0]?"12":_(a[1][0],2))+("*"==a[0][0]?"*"==a[1][0]?"31":new Date(a[2][0],a[1][0],0).getDate():_(a[0][0],2)),10))}),$.sort(),$.length>0){var cb=($[0]+"").match(/([0-9]{4})([0-9]{2})([0-9]{2})/);p=parseInt(cb[1],10),o=parseInt(cb[2],10)-1,q=parseInt(cb[3],10)}break}if(V(p,o,q)){for(;V(p);)z?(p++,o=0):(p--,o=11);for(;V(p,o);)z?(o++,q=1):(o--,q=new Date(p,o+1,0).getDate()),o>11?(p++,o=0,q=1):0>o&&(p--,o=11,q=new Date(p,o+1,0).getDate());for(;V(p,o,q);)z?q++:q--;T=new Date(p,o,q),p=T.getFullYear(),o=T.getMonth(),q=T.getDate()}var db=N(L.val()||(K.settings.start_date?K.settings.start_date:""));if(db&&V(db.getFullYear(),db.getMonth(),db.getDate())&&L.val(""),bb(db),!K.settings.always_visible){if(!y){if(K.settings.show_icon){var eb='<button type="button" class="Zebra_DatePicker_Icon'+("disabled"==L.attr("disabled")?" Zebra_DatePicker_Icon_Disabled":"")+'">Pick a date</button>';f=a(eb),K.icon=f,I=f.add(L)}else I=L;I.bind("click",function(a){a.preventDefault(),L.attr("disabled")||("none"!=e.css("display")?K.hide():K.show())}),void 0!=f&&f.insertAfter(b)}if(void 0!=f){f.attr("style",""),K.settings.inside&&f.addClass("Zebra_DatePicker_Icon_Inside");var fb=L.position(),gb=L.outerWidth(!1),hb=L.outerHeight(!1),ib=parseInt(L.css("marginTop"),10)||0,jb=parseInt(L.css("marginRight"),10)||0,kb=f.position(),lb=f.outerWidth(!0),mb=f.outerHeight(!0),nb=parseInt(f.css("marginLeft"),10)||0;K.settings.inside?f.css({marginLeft:(kb.left<=fb.left+gb?fb.left+gb-kb.left:0)-(jb+lb)}):f.css({marginLeft:(kb.left<=fb.left+gb?fb.left+gb-kb.left:0)-jb+nb}),f.css({marginRight:-parseInt(f.css("marginLeft"),10)}),f.css({marginTop:(kb.top>fb.top?fb.top-kb.top:kb.top-fb.top)+ib+(hb-mb)/2})}}if(void 0!=f&&(L.is(":visible")?f.show():f.hide()),!y){var eb='<div class="Zebra_DatePicker"><table class="dp_header"><tr><td class="dp_previous">&#171;</td><td class="dp_caption">&#032;</td><td class="dp_next">&#187;</td></tr></table><table class="dp_daypicker"></table><table class="dp_monthpicker"></table><table class="dp_yearpicker"></table><table class="dp_footer"><tr><td>'+K.settings.lang_clear_date+"</td></tr>"+"</table>"+"</div>";e=a(eb),K.datepicker=e,g=a("table.dp_header",e),h=a("table.dp_daypicker",e),i=a("table.dp_monthpicker",e),j=a("table.dp_yearpicker",e),k=a("table.dp_footer",e),K.settings.always_visible?L.attr("disabled")||(K.settings.always_visible.append(e),K.show()):a("body").append(e),e.delegate("td:not(.dp_disabled, .dp_weekend_disabled, .dp_not_in_month, .dp_blocked, .dp_week_number)","mouseover",function(){a(this).addClass("dp_hover")}).delegate("td:not(.dp_disabled, .dp_weekend_disabled, .dp_not_in_month, .dp_blocked, .dp_week_number)","mouseout",function(){a(this).removeClass("dp_hover")}),O(a("td",g)),a(".dp_previous",g).bind("click",function(){a(this).hasClass("dp_blocked")||("months"==d?s--:"years"==d?s-=12:--r<0&&(r=11,s--),Y())}),a(".dp_caption",g).bind("click",function(){d="days"==d?a.inArray("months",H)>-1?"months":a.inArray("years",H)>-1?"years":"days":"months"==d?a.inArray("years",H)>-1?"years":a.inArray("days",H)>-1?"days":"months":a.inArray("days",H)>-1?"days":a.inArray("months",H)>-1?"months":"years",Y()}),a(".dp_next",g).bind("click",function(){a(this).hasClass("dp_blocked")||("months"==d?s++:"years"==d?s+=12:12==++r&&(r=0,s++),Y())}),h.delegate("td:not(.dp_disabled, .dp_weekend_disabled, .dp_not_in_month, .dp_week_number)","click",function(){K.settings.select_other_months&&null!=(cb=a(this).attr("class").match(/date\_([0-9]{4})(0[1-9]|1[012])(0[1-9]|[12][0-9]|3[01])/))?Z(cb[1],cb[2],cb[3],"days",a(this)):Z(s,r,ab(a(this).html()),"days",a(this))}),i.delegate("td:not(.dp_disabled)","click",function(){var b=a(this).attr("class").match(/dp\_month\_([0-9]+)/);r=ab(b[1]),-1==a.inArray("days",H)?Z(s,r,1,"months",a(this)):(d="days",K.settings.always_visible&&L.val(""),Y())}),j.delegate("td:not(.dp_disabled)","click",function(){s=ab(a(this).html()),-1==a.inArray("months",H)?Z(s,1,1,"years",a(this)):(d="months",K.settings.always_visible&&L.val(""),Y())}),a("td",k).bind("click",function(a){a.preventDefault(),L.val(""),K.settings.always_visible||(t=null,u=null,v=null,r=null,s=null,k.css("display","none")),K.hide(),K.settings.onClear&&"function"==typeof K.settings.onClear&&K.settings.onClear(L)}),K.settings.always_visible||a(document).bind({mousedown:K._mousedown,keyup:K._keyup}),Y()}};K.hide=function(){K.settings.always_visible||(U("hide"),e.css("display","none"))},K.show=function(){d=K.settings.view;var b=N(L.val()||(K.settings.start_date?K.settings.start_date:""));if(b?(u=b.getMonth(),r=b.getMonth(),v=b.getFullYear(),s=b.getFullYear(),t=b.getDate(),V(v,u,t)&&(L.val(""),r=o,s=p)):(r=o,s=p),Y(),K.settings.always_visible)e.css("display","block");else{var c=e.outerWidth(),g=e.outerHeight(),h=(void 0!=f?f.offset().left+f.outerWidth(!0):L.offset().left+L.outerWidth(!0))+K.settings.offset[0],i=(void 0!=f?f.offset().top:L.offset().top)-g+K.settings.offset[1],j=a(window).width(),k=a(window).height(),l=a(window).scrollTop(),m=a(window).scrollLeft();h+c>m+j&&(h=m+j-c),m>h&&(h=m),i+g>l+k&&(i=l+k-g),l>i&&(i=l),e.css({left:h,top:i}),e.fadeIn("explorer"==db.name&&db.version<9?0:150,"linear"),U()}},K.update=function(b){K.original_direction&&(K.original_direction=K.direction),K.settings=a.extend(K.settings,b),M(!0)};var N=function(b){if(b+="",""!=a.trim(b)){for(var c=P(K.settings.format),d=["d","D","j","l","N","S","w","F","m","M","n","Y","y"],e=new Array,f=new Array,g=0;g<d.length;g++)(position=c.indexOf(d[g]))>-1&&e.push({character:d[g],position:position});if(e.sort(function(a,b){return a.position-b.position}),a.each(e,function(a,b){switch(b.character){case"d":f.push("0[1-9]|[12][0-9]|3[01]");break;case"D":f.push("[a-z]{3}");break;case"j":f.push("[1-9]|[12][0-9]|3[01]");break;case"l":f.push("[a-z]+");break;case"N":f.push("[1-7]");break;case"S":f.push("st|nd|rd|th");break;case"w":f.push("[0-6]");break;case"F":f.push("[a-z]+");break;case"m":f.push("0[1-9]|1[012]+");break;case"M":f.push("[a-z]{3}");break;case"n":f.push("[1-9]|1[012]");break;case"Y":f.push("[0-9]{4}");break;case"y":f.push("[0-9]{2}")}}),f.length&&(e.reverse(),a.each(e,function(a,b){c=c.replace(b.character,"("+f[f.length-a-1]+")")}),f=new RegExp("^"+c+"$","ig"),segments=f.exec(b))){var h,i=new Date,j=i.getDate(),k=i.getMonth()+1,l=i.getFullYear(),m=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],n=["January","February","March","April","May","June","July","August","September","October","November","December"],o=!0;if(e.reverse(),a.each(e,function(b,c){if(!o)return!0;switch(c.character){case"m":case"n":k=ab(segments[b+1]);break;case"d":case"j":j=ab(segments[b+1]);break;case"D":case"l":case"F":case"M":h="D"==c.character||"l"==c.character?K.settings.days:K.settings.months,o=!1,a.each(h,function(a,d){if(o)return!0;if(segments[b+1].toLowerCase()==d.substring(0,"D"==c.character||"M"==c.character?3:d.length).toLowerCase()){switch(c.character){case"D":segments[b+1]=m[a].substring(0,3);break;case"l":segments[b+1]=m[a];break;case"F":segments[b+1]=n[a],k=a+1;break;case"M":segments[b+1]=n[a].substring(0,3),k=a+1}o=!0}});break;case"Y":l=ab(segments[b+1]);break;case"y":l="19"+ab(segments[b+1])}}),o){var p=new Date(l,(k||1)-1,j||1);if(p.getFullYear()==l&&p.getDate()==(j||1)&&p.getMonth()==(k||1)-1)return p}}return!1}},O=function(a){"firefox"==db.name?a.css("MozUserSelect","none"):"explorer"==db.name?a.bind("selectstart",function(){return!1}):a.mousedown(function(){return!1})},P=function(a){return a.replace(/([-.,*+?^${}()|[\]\/\\])/g,"\\$1")},Q=function(b){for(var c="",d=b.getDate(),e=b.getDay(),f=K.settings.days[e],g=b.getMonth()+1,h=K.settings.months[g-1],i=b.getFullYear()+"",j=0;j<K.settings.format.length;j++){var k=K.settings.format.charAt(j);switch(k){case"y":i=i.substr(2);case"Y":c+=i;break;case"m":g=_(g,2);case"n":c+=g;break;case"M":h=a.isArray(K.settings.months_abbr)&&void 0!=K.settings.months_abbr[g-1]?K.settings.months_abbr[g-1]:K.settings.months[g-1].substr(0,3);case"F":c+=h;break;case"d":d=_(d,2);case"j":c+=d;break;case"D":f=a.isArray(K.settings.days_abbr)&&void 0!=K.settings.days_abbr[e]?K.settings.days_abbr[e]:K.settings.days[e].substr(0,3);case"l":c+=f;break;case"N":e++;case"w":c+=e;break;case"S":c+=1==d%10&&"11"!=d?"st":2==d%10&&"12"!=d?"nd":3==d%10&&"13"!=d?"rd":"th";break;default:c+=k}}return c},R=function(){var b=new Date(s,r+1,0).getDate(),c=new Date(s,r,1).getDay(),d=new Date(s,r,0).getDate(),e=c-K.settings.first_day_of_week;e=0>e?7+e:e,X(K.settings.months[r]+", "+s);var f="<tr>";K.settings.show_week_number&&(f+="<th>"+K.settings.show_week_number+"</th>");for(var g=0;7>g;g++)f+="<th>"+(a.isArray(K.settings.days_abbr)&&void 0!=K.settings.days_abbr[(K.settings.first_day_of_week+g)%7]?K.settings.days_abbr[(K.settings.first_day_of_week+g)%7]:K.settings.days[(K.settings.first_day_of_week+g)%7].substr(0,2))+"</th>";f+="</tr><tr>";for(var g=0;42>g;g++){g>0&&0==g%7&&(f+="</tr><tr>"),0==g%7&&K.settings.show_week_number&&(f+='<td class="dp_week_number">'+cb(new Date(s,r,g-e+1))+"</td>");var i=g-e+1;if(K.settings.select_other_months&&(e>g||i>b)){var j=new Date(s,r,i),k=j.getFullYear(),o=j.getMonth(),p=j.getDate();j=k+_(o,2)+_(p,2)}if(e>g)f+='<td class="'+(K.settings.select_other_months&&!V(k,o,p)?"dp_not_in_month_selectable date_"+j:"dp_not_in_month")+'">'+(K.settings.select_other_months||K.settings.show_other_months?_(d-e+g+1,K.settings.zero_pad?2:0):"&#032;")+"</td>";else if(i>b)f+='<td class="'+(K.settings.select_other_months&&!V(k,o,p)?"dp_not_in_month_selectable date_"+j:"dp_not_in_month")+'">'+(K.settings.select_other_months||K.settings.show_other_months?_(i-b,K.settings.zero_pad?2:0):"&#032;")+"</td>";else{var q=(K.settings.first_day_of_week+g)%7,w="";V(s,r,i)?(a.inArray(q,K.settings.weekend_days)>-1?w="dp_weekend_disabled":w+=" dp_disabled",r==l&&s==m&&n==i&&(w+=" dp_disabled_current")):(a.inArray(q,K.settings.weekend_days)>-1&&(w="dp_weekend"),r==u&&s==v&&t==i&&(w+=" dp_selected"),r==l&&s==m&&n==i&&(w+=" dp_current")),f+="<td"+(""!=w?' class="'+a.trim(w)+'"':"")+">"+(K.settings.zero_pad?_(i,2):i)+"</td>"}}f+="</tr>",h.html(a(f)),K.settings.always_visible&&(E=a("td:not(.dp_disabled, .dp_weekend_disabled, .dp_not_in_month, .dp_blocked, .dp_week_number)",h)),h.css("display","")},S=function(){X(s);for(var b="<tr>",c=0;12>c;c++){c>0&&0==c%3&&(b+="</tr><tr>");var d="dp_month_"+c;V(s,c)?d+=" dp_disabled":u!==!1&&u==c?d+=" dp_selected":l==c&&m==s&&(d+=" dp_current"),b+='<td class="'+a.trim(d)+'">'+(a.isArray(K.settings.months_abbr)&&void 0!=K.settings.months_abbr[c]?K.settings.months_abbr[c]:K.settings.months[c].substr(0,3))+"</td>"}b+="</tr>",i.html(a(b)),K.settings.always_visible&&(F=a("td:not(.dp_disabled)",i)),i.css("display","")},T=function(){X(s-7+" - "+(s+4));for(var b="<tr>",c=0;12>c;c++){c>0&&0==c%3&&(b+="</tr><tr>");var d="";V(s-7+c)?d+=" dp_disabled":v&&v==s-7+c?d+=" dp_selected":m==s-7+c&&(d+=" dp_current"),b+="<td"+(""!=a.trim(d)?' class="'+a.trim(d)+'"':"")+">"+(s-7+c)+"</td>"}b+="</tr>",j.html(a(b)),K.settings.always_visible&&(G=a("td:not(.dp_disabled)",j)),j.css("display","")},U=function(b){if("explorer"==db.name&&6==db.version){if(!y){var c=ab(e.css("zIndex"))-1;y=jQuery("<iframe>",{src:'javascript:document.write("")',scrolling:"no",frameborder:0,allowtransparency:"true",css:{zIndex:c,position:"absolute",top:-1e3,left:-1e3,width:e.outerWidth(),height:e.outerHeight(),filter:"progid:DXImageTransform.Microsoft.Alpha(opacity=0)",display:"none"}}),a("body").append(y)}switch(b){case"hide":y.css("display","none");break;default:var d=e.offset();y.css({top:d.top,left:d.left,display:"block"})}}},V=function(b,c,d){if(void 0!=b&&!isNaN(b)||void 0!=c&&!isNaN(c)||void 0!=d&&!isNaN(d)){if(a.isArray(K.settings.direction)||0!==ab(K.settings.direction)){var e=ab($(b,"undefined"!=typeof c?_(c,2):"","undefined"!=typeof d?_(d,2):"")),f=(e+"").length;if(8==f&&("undefined"!=typeof z&&e<ab($(p,_(o,2),_(q,2)))||"undefined"!=typeof A&&e>ab($(C,_(D,2),_(B,2)))))return!0;if(6==f&&("undefined"!=typeof z&&e<ab($(p,_(o,2)))||"undefined"!=typeof A&&e>ab($(C,_(D,2)))))return!0;if(4==f&&("undefined"!=typeof z&&p>e||"undefined"!=typeof A&&e>C))return!0}"undefined"!=typeof c&&(c+=1);var g=!1,h=!1;return x&&a.each(x,function(){if(!g){var e=this;if((a.inArray(b,e[2])>-1||a.inArray("*",e[2])>-1)&&("undefined"!=typeof c&&a.inArray(c,e[1])>-1||a.inArray("*",e[1])>-1)&&("undefined"!=typeof d&&a.inArray(d,e[0])>-1||a.inArray("*",e[0])>-1)){if("*"==e[3])return g=!0;var f=new Date(b,c-1,d).getDay();if(a.inArray(f,e[3])>-1)return g=!0}}}),w&&a.each(w,function(){if(!h){var e=this;if((a.inArray(b,e[2])>-1||a.inArray("*",e[2])>-1)&&(h=!0,"undefined"!=typeof c))if(h=!0,a.inArray(c,e[1])>-1||a.inArray("*",e[1])>-1){if("undefined"!=typeof d)if(h=!0,a.inArray(d,e[0])>-1||a.inArray("*",e[0])>-1){if("*"==e[3])return h=!0;var f=new Date(b,c-1,d).getDay();if(a.inArray(f,e[3])>-1)return h=!0;h=!1}else h=!1}else h=!1}}),w&&h?!1:x&&g?!0:!1}return!1},W=function(a){return(a+"").match(/^\-?[0-9]+$/)?!0:!1},X=function(b){if(a(".dp_caption",g).html(b),a.isArray(K.settings.direction)||0!==ab(K.settings.direction)||1==H.length&&"months"==H[0]){var c,e,f=s,h=r;"days"==d?(e=0>h-1?$(f-1,"11"):$(f,_(h-1,2)),c=h+1>11?$(f+1,"00"):$(f,_(h+1,2))):"months"==d?(e=f-1,c=f+1):"years"==d&&(e=f-7,c=f+7),1==H.length&&"months"==H[0]||V(e)?(a(".dp_previous",g).addClass("dp_blocked"),a(".dp_previous",g).removeClass("dp_hover")):a(".dp_previous",g).removeClass("dp_blocked"),1==H.length&&"months"==H[0]||V(c)?(a(".dp_next",g).addClass("dp_blocked"),a(".dp_next",g).removeClass("dp_hover")):a(".dp_next",g).removeClass("dp_blocked")}},Y=function(){if(""==h.text()||"days"==d){if(""==h.text()){K.settings.always_visible||e.css("left",-1e3),e.css({display:"block"}),R();var b=h.outerWidth(),c=h.outerHeight();g.css("width",b),i.css({width:b,height:c}),j.css({width:b,height:c}),k.css("width",b),e.css({display:"none"})}else R();i.css("display","none"),j.css("display","none")}else"months"==d?(S(),h.css("display","none"),j.css("display","none")):"years"==d&&(T(),h.css("display","none"),i.css("display","none"));if(K.settings.onChange&&"function"==typeof K.settings.onChange&&void 0!=d){var f="days"==d?h.find("td:not(.dp_disabled, .dp_weekend_disabled, .dp_not_in_month, .dp_blocked)"):"months"==d?i.find("td:not(.dp_disabled, .dp_weekend_disabled, .dp_not_in_month, .dp_blocked)"):j.find("td:not(.dp_disabled, .dp_weekend_disabled, .dp_not_in_month, .dp_blocked)");f.each(function(){if("days"==d)a(this).data("date",s+"-"+_(r+1,2)+"-"+_(ab(a(this).text()),2));else if("months"==d){var b=a(this).attr("class").match(/dp\_month\_([0-9]+)/);a(this).data("date",s+"-"+_(ab(b[1])+1,2))}else a(this).data("date",ab(a(this).text()))}),K.settings.onChange(d,f,L)}K.settings.always_show_clear||K.settings.always_visible||""!=L.val()?k.css("display",""):k.css("display","none")},Z=function(a,b,c,d,e){var f=new Date(a,b,c,12,0,0),g="days"==d?E:"months"==d?F:G,h=Q(f);L.val(h),K.settings.always_visible&&(u=f.getMonth(),r=f.getMonth(),v=f.getFullYear(),s=f.getFullYear(),t=f.getDate(),g.removeClass("dp_selected"),e.addClass("dp_selected")),K.hide(),bb(f),K.settings.onSelect&&"function"==typeof K.settings.onSelect&&K.settings.onSelect(h,a+"-"+_(b+1,2)+"-"+_(c,2),f,L),L.focus()},$=function(){for(var a="",b=0;b<arguments.length;b++)a+=arguments[b]+"";return a},_=function(a,b){for(a+="";a.length<b;)a="0"+a;return a},ab=function(a){return parseInt(a,10)},bb=function(b){K.settings.pair&&a.each(K.settings.pair,function(){var c=a(this);if(c.data&&c.data("Zebra_DatePicker")){var d=c.data("Zebra_DatePicker");d.update({reference_date:b,direction:0==d.settings.direction?1:d.settings.direction}),d.settings.always_visible&&d.show()}else c.data("zdp_reference_date",b)})},cb=function(a){var b,c,d,e,f,g,h,i,j,k,l=a.getFullYear(),m=a.getMonth()+1,i=a.getDate();return 3>m?(b=l-1,c=(0|b/4)-(0|b/100)+(0|b/400),d=(0|(b-1)/4)-(0|(b-1)/100)+(0|(b-1)/400),e=c-d,f=0,g=i-1+31*(m-1)):(b=l,c=(0|b/4)-(0|b/100)+(0|b/400),d=(0|(b-1)/4)-(0|(b-1)/100)+(0|(b-1)/400),e=c-d,f=e+1,g=i+(0|(153*(m-3)+2)/5)+58+e),h=(b+c)%7,i=(g+h-f)%7,j=g+3-i,k=0>j?53-(0|(h-e)/5):j>364+e?1:(0|j/7)+1};K._keyup=function(a){return("block"==e.css("display")||27==a.which)&&K.hide(),!0},K._mousedown=function(b){if("block"==e.css("display")){if(K.settings.show_icon&&a(b.target).get(0)===f.get(0))return!0;0==a(b.target).parents().filter(".Zebra_DatePicker").length&&K.hide()}return!0};var db={init:function(){this.name=this.searchString(this.dataBrowser)||"",this.version=this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||""},searchString:function(a){for(var b=0;b<a.length;b++){var c=a[b].string,d=a[b].prop;if(this.versionSearchString=a[b].versionSearch||a[b].identity,c){if(-1!=c.indexOf(a[b].subString))return a[b].identity}else if(d)return a[b].identity}},searchVersion:function(a){var b=a.indexOf(this.versionSearchString);if(-1!=b)return parseFloat(a.substring(b+this.versionSearchString.length+1))},dataBrowser:[{string:navigator.userAgent,subString:"Firefox",identity:"firefox"},{string:navigator.userAgent,subString:"MSIE",identity:"explorer",versionSearch:"MSIE"}]};db.init(),M()},a.fn.Zebra_DatePicker=function(b){return this.each(function(){if(void 0!=a(this).data("Zebra_DatePicker")){var c=a(this).data("Zebra_DatePicker");void 0!=c.icon&&c.icon.remove(),c.datepicker.remove(),a(document).unbind("keyup",c._keyup),a(document).unbind("mousedown",c._mousedown)}var c=new a.Zebra_DatePicker(this,b);a(this).data("Zebra_DatePicker",c)})}}(jQuery),define("plugins/misc/zebra_datepicker.src",function(){});var __hasProp={}.hasOwnProperty,__extends=function(a,b){function c(){this.constructor=a}for(var d in b)__hasProp.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};!function(a,b,c){var d;return d=function(d){var e,f,g,h,i;for(f=0,g=b.length,h=d.target,e=void 0,i=[];g>f;)e=b[f],e!==h&&!(e.contains?e.contains(h):e.compareDocumentPosition?16&e.compareDocumentPosition(h):1)&&a.event.trigger(c,d,e),i.push(f++);return i},a.event.special[c]={setup:function(){var c;return c=b.length,c||a.event.add(document,"click",d),a.inArray(this,b)<0?b[c]=this:void 0},teardown:function(){var c;return c=a.inArray(this,b),c>=0&&(b.splice(c,1),!b.length)?jQuery(this).unbind("click",d):void 0}},a.fn[c]=function(a){return a?this.bind(c,a):this.trigger(c)}}(jQuery,[],"outerClick"),function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v;return a.fn._selectRange=function(a,b){return b||(b=a),this.each(function(){var c;return this.setSelectionRange?(this.focus(),this.setSelectionRange(a,b)):this.createTextRange?(c=this.createTextRange(),c.collapse(!0),c.moveEnd("character",b),c.moveStart("character",a),c.select()):void 0})},e=function(){function b(b,d){var e=this;this.members(),void 0===d&&(d=b,b=a(document)),this.scope=b instanceof jQuery?b:a(b),this.debug&&console.group("EDITOR: add Components"),a.map(d,function(a){return e.debug&&console.log("- "+a),c.call(e,a)}),this.debug&&console.groupEnd(),this.on("change:\\",function(a){return e.updateState(a.fullName,a.value,!1,a.replace)}),this.on("editor.removeComponent",function(a){return e.updateState(a,null,!1,!0)}),this.updateElements()}var c,d,e,f,g,h,i;return b.prototype.members=function(){return this._contentTypes={},this._components={},this._storage={},this._events={},this.debug=!1,this.attr={_namespace:"editor-",type:"type",name:"name",scope:"scope",placeholder:"placeholder",options:"options",handledBy:"handled-by",componentId:"component-id"}},b.prototype.getAttr=function(a){return this.attr[a]?this.attr._namespace+this.attr[a]:!1},b.prototype.on=function(b,c){return this._events[b]||(this._events[b]=a.Callbacks("unique")),this._events[b].add(c)},b.prototype.off=function(a,b){return this._events[a]?this._events[a].remove(b):void 0},b.prototype.trigger=function(a,b){return this.debug&&a.indexOf(!0)&&(console.group("EDITOR: trigger "+a),console.log(b),console.groupEnd()),this._events[a]?this._events[a].fire(b):void 0},b.prototype.updateState=function(b,c,d,e){var f,h,i,j,k,l,m,n;if(this.debug&&console.group("EDITOR: update state"),this.debug&&console.log("scope: %s -> %O",b,c),j=!1,e){for(k=b.split("."),h=k.splice(-1)[0],l=this._storage,m=0,n=k.length;n>m&&(f=k[m],l[f]);m++)l=l[f];l[h]&&(l[h]=c,j=!0)}return j||(i={},i[b]=c,this._storage=a.extend(!0,this._storage,g.call(this,i))),this.debug&&console.log(this._storage),this.debug&&console.groupEnd(),d?void 0:(this.debug&&console.log(this._storage),this.debug&&console.log(this.getState()),this.trigger("stateUpdate",this._storage))},b.prototype.getState=function(){return this._storage},b.prototype.addElement=function(b){var c,d;return d=b.data(this.getAttr("type")),c=!1,b.attr(this.getAttr("handledBy"))?(this.debug&&console.log("already handled by the editor!"),c):(-1!==a.inArray(d,Object.keys(this._contentTypes))&&(c=h.call(this,d),b.data(this.getAttr("componentId"),c.id),c.init(b),this.debug&&console.log("added element: %s",c.getDataFullName())),c)},b.prototype.removeElement=function(a){var b,c;return this.debug&&console.group("EDITOR: remove component"),c=a.data(this.getAttr("componentId")),b=this.getComponent(c),b?(f.call(this,b),this.debug&&console.groupEnd(),!0):!1},b.prototype.removeElementByScope=function(a){var b,c,d,e;
c=this.getComponents(),e=!1,this.debug&&console.group("EDITOR: remove component by scope: %s",a);for(d in c)b=c[d],a===b.getDataFullName()&&(f.call(this,b),e=!0);return this.debug&&console.groupEnd(),e},b.prototype.removeElementsByScope=function(b,c){var d,e,g,h,i;null==c&&(c=[]),g=this.getComponents(),i=!1,c.length||(d=!0),this.debug&&console.group("EDITOR: remove components by scope: %s, names: %O",b,c);for(h in g)e=g[h],b===e.getDataScope()&&(d||-1!==a.inArray(e.getDataName(),c))&&(f.call(this,e),i=!0);return this.debug&&console.groupEnd(),i},b.prototype.updateElements=function(){var b,c,d,e,g=this;c=this.getAttr("handledBy"),this.debug&&console.group("EDITOR: update Elements"),a("[data-"+this.getAttr("type")+"]",this.scope).each(function(b,d){var e;return e=a(d),e.attr(c)?void 0:g.addElement(e)}),e=this.getComponents();for(d in e)b=e[d],b.elementExists()||f.call(this,b);return this.debug&&console.groupEnd(),null},b.prototype.destroy=function(){var a,b,c,d,e,g;this.debug&&console.log("going to destroy the editor and remove all"),this.off(),e=this._events;for(d in e)a=e[d],a.disable(),a.empty();g=this.getComponents();for(c in g)b=g[c],f.call(this,b);return!1},c=function(b){var c,e=this;if(!window.editorComponents[b])throw new ReferenceError("The Component '"+b+"' doesn't exists. Maybe you forgot to add it to the global 'window.editorComponents' namespace?");return c=new window.editorComponents[b](this),a.map(c.contentTypes,function(a){return d.call(e,a,b)})},h=function(a){var b,c;return c=a.toLowerCase(),b=this._contentTypes[c],b?e.call(this,b):null},e=function(a){var b;return window.editorComponents[a]?(b=new window.editorComponents[a](this),b.name=a.toLowerCase(),this._components[b.id]=b,b):null},f=function(b){var c,d=this;return c=b.getId(),this.debug&&console.log("EDITOR: destroy component %s",b.getDataFullName()),b.destroy(),this._components[c]=null,a.map(b.contentTypes,function(a){return d._contentTypes[a]?delete d._contentTypes[a]:void 0}),delete this._components[c]},b.prototype.getComponent=function(a){return this._components[a]?this._components[a]:null},b.prototype.getComponents=function(){return this._components},b.prototype.getComponentsByClassName=function(a){var b,c,d,e;c=this.getComponents(),e=[];for(d in c)b=c[d],b.name===a&&e.push(b);return e},b.prototype.getComponentsByType=function(b){var c,d,e,f;d=this.getComponents(),f=[];for(e in d)c=d[e],-1!==a.inArray(b.toLowerCase(),c.contentTypes)&&f.push(c);return f},b.prototype.getComponentByName=function(a){var b,c,d;c=this.getComponents();for(d in c)if(b=c[d],b.getDataFullName()===a)return b;return null},d=function(a,b){var c;return c=a.toLowerCase(),this._contentTypes[c]?console.error("Another Component ("+this._contentTypes[c]+') is already handling the content-type "'+a+'"'):this._contentTypes[c]=b},i=function(b){var c,d;for(c in b)d=b[c],"object"==typeof d&&(d=i(d)),(null===d||void 0===d||a.isEmptyObject(b[c]))&&delete b[c];return b},g=function(a){var b,c,d,e,f,g;d={},g=void 0,f=void 0,e=void 0;for(b in a){for(g=d,f=b.split("."),c=f.pop();f.length;)e=f.shift(),g=g[e]=g[e]||{};g[c]=a[b]}return d},b}(),d=function(){function b(a){if(this.editor=a,this.members(),this.id="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b,c;return b=0|16*Math.random(),c="x"===a?b:8|3&b,c.toString(16)}),"Editable"===this.constructor.name)throw new ReferenceError('"Editable" is an abstract class. Please use one of the subclasses instead.')}var c;return b.prototype.members=function(){return this._prevValue="",this._value="",this._options={},this._dataName="",this._dataFullName="",this.contentTypes=[],this.name=""},b.prototype.init=function(a){var b;return this.element=a,this.element?(this.setDataName(a.data(this.editor.getAttr("name"))),this.updateOptions(a.data(this.editor.getAttr("options")),!0),a.attr(this.editor.getAttr("handledBy"),this.id),this._options.elementClasses&&a.addClass(this._options.elementClasses),this.updateValue(!0),b=this.getValue(),b&&this.isValidValue(b)?this.setValueToContent(b):this.setValueToContent(this.getPlaceholder(),!0)):(console.log("JJEditabel: no element found."),void 0)},c=function(a){return a=-1!==a.indexOf(".")?a:this.name+"."+a},b.prototype.getNamespacedEventName=function(a){var b,c,d,e,f;for(d=a.split(" "),b=[],e=0,f=d.length;f>e;e++)c=d[e],b.push(""+c+"."+this.id);return b.join(" ")},b.prototype.trigger=function(a,b){return null==b&&(b={}),b.senderId=this.id,a=c.call(this,a),this.editor.trigger(a,b)},b.prototype.triggerScopeEvent=function(b,c){var d,e,f,g,h,i,j;null==c&&(c={}),g=this.getDataScope(),a.extend(c,{name:this.getDataName(),scope:g,fullName:this.getDataFullName(),senderId:this.id}),i=g.split("."),i.unshift("\\"),j=[];for(e in i)h=i[e],f=i.slice(0,e).join("."),f&&(f+="."),d=f+h,d=d.replace("\\.",""),j.push(this.editor.trigger(b+":"+d,c));return j},b.prototype.triggerDataEvent=function(a,b){return null==b&&(b={}),b.senderId=this.id,this.editor.trigger(a+":"+this.getDataFullName(),b)},b.prototype.on=function(a,b){return a=c.call(this,a),a=this.getNamespacedEventName(a),this.editor?void 0:this.editor.on(a,b)},b.prototype.off=function(a,b){return a=c.call(this,a),a=this.getNamespacedEventName(a),this.editor?void 0:this.editor.off(a,b)},b.prototype.getElement=function(){return this.element},b.prototype.elementExists=function(){return this.element.closest("body").length>0},b.prototype.getId=function(){return this.id},b.prototype.setValue=function(a,b,c){var d,e;if(b||this._prevValue!==a)return this._prevValue=this._value,this._value=a,b?this.editor.updateState(this.getDataFullName(),this.getValue(),b,c):(d=this.getPrevValue(),e=this.getValue(),this.triggerScopeEvent("change",{value:e,prevValue:d,replace:c}),this.triggerDataEvent("change",{value:e,prevValue:d,replace:c}),"string"==typeof a&&this.render()),!0},b.prototype.getValue=function(){return this._value},b.prototype.getPrevValue=function(){return this._prevValue},b.prototype.updateValue=function(a){return this.setValue(this.getValueFromContent(),a)},b.prototype.getValueFromContent=function(){return null},b.prototype.setValueToContent=function(){},b.prototype.isValidValue=function(a){return a?!0:!1},b.prototype.getPlaceholder=function(){var a;return a=this.element.data(this.editor.getAttr("placeholder")),a?a:this.getDataName()},b.prototype.getValueOrPlaceholder=function(){var a;return a=this.getValue(),this.debug&&console.log("value or placeholder: "+a),a?a:this.getPlaceholder()},b.prototype.setDataName=function(a){var b,c,d,e,f,g=this;if(c=function(a){return a.split(".").slice(-1)[0]},d=function(a){var b;return b=".","\\"===a[0]&&(b="",a=a.slice(1)),-1!==a.lastIndexOf(".")?b+a.slice(0,a.lastIndexOf(".")):""},b=function(){var b,e,f;return f=g.editor.getAttr("scope"),b=function(a){return"\\"===a[0]?a.slice(1):a},e=function(d,g){var h,i;if(h=d.closest("[data-"+f+"]"),h.length)return i=h.data(f),g=i+g,"\\"!==i[0]?g=e(h.parent(),"."+g):b(g);if("\\"===g[0])return b(g);throw new Error("Couldn't find a complete scope for "+c(a)+". Maybe you forgot to add a Backslash at the beginning of your stack? Foo.Bar.FooBar")},e(g.element,d(a))},!a)throw new Error("Please add a data-"+this.editor.getAttr("name")+" attribute");return f="\\"===a[0]?d(a):b(),e=c(a),this._dataScope=f,this._dataName=e},b.prototype.getDataScope=function(){return this._dataScope},b.prototype.getDataFullName=function(){return""+this._dataScope+"."+this._dataName},b.prototype.getDataName=function(){return this._dataName},b.prototype.getOptions=function(){return this._options},b.prototype.updateOptions=function(b,c){return this._options=a.extend(!0,this._options,b),c?void 0:this.onOptionsUpdate()},b.prototype.onOptionsUpdate=function(){},b.prototype.render=function(){return this.element?this.element.html(this.getValueOrPlaceholder()):void 0},b.prototype.destroy=function(){return this.element.removeAttr(this.editor.getAttr("handledBy")),this.trigger("editor.removeComponent",this.getDataFullName()),this.editor.off(this.getNamespacedEventName("editor")),this.editor=null},b}(),f=function(b){function c(a){if(this.editor=a,"PopoverEditable"===this.constructor.name)throw new ReferenceError('"PopoverEditable" is an abstract class. Please use one of the subclasses instead.');c.__super__.constructor.call(this,a)}return __extends(c,b),c.prototype.members=function(){return c.__super__.members.call(this),this._popoverContent="",this.popoverClasses=[],this.closeOnOuterClick=!0,this.repositionOnChangeTimeout=null},c.prototype.init=function(b){var d=this;return b?(this._options.position||(this._options.position={at:"right center",my:"left center",adjust:{x:10,resize:!0,method:"flip shift"}}),void 0===this._options.repositionOnChange&&(this._options.repositionOnChange=!0),c.__super__.init.call(this,b),b.qtip({events:{render:function(){},visible:function(){var b,c;b=a("input, textarea",d.api.tooltip).eq(0);try{b._selectRange(b.val().length)}catch(e){c=e,!1}return d.closeOnOuterClick&&d.api.tooltip.one(d.getNamespacedEventName("outerClick"),function(){return d.close()}),!0},move:function(a){return d.onMove(a),!0}},content:{text:function(){return d.getPopoverContent()},title:""},position:this.getPosition(),show:{event:!1},hide:{event:!1,fixed:!0},prerender:!0,style:{classes:this.getPopOverClasses(),tip:{width:20,height:10}}}),this.api=b.qtip("api"),this.editor.on("editor.closepopovers",function(a){return a&&a.senderId&&a.senderId===d.id?void 0:d.close()}),b.on(this.getNamespacedEventName("click"),function(a){return a.preventDefault(),d.toggle(),!1}),a(window).on(this.getNamespacedEventName("resize"),function(){return d.updateTooltipDimensions()}),a("body").on(this.getNamespacedEventName("toggle.editor-sidebar"),function(a){return"opened"===a.name||"close"===a.name?d.autoReposition():void 0})):(console.log("JJPopoverEditable: no element found."),void 0)},c.prototype.getValueFromContent=function(){var a,b;return a=this.getPlaceholder(),b=this.element.html(),a===b?"":b},c.prototype.setValueToContent=function(a){return this.element.html(a)},c.prototype.onOptionsUpdate=function(){var a,b,c,d,e,f;for(b=this.getPosition(),e=Object.keys(b),f=[],c=0,d=e.length;d>c;c++)a=e[c],f.push(this.element.qtip("option","position."+a,b[a]));return f},c.prototype.getPosition=function(){var b;return b=this._options.position?this._options.position:this.position,b=a.extend(!0,b,{adjust:{screen:!0,resize:!0},viewport:a(window)})},c.prototype.open=function(){return this.element.addClass("active"),this.trigger("editor.closepopovers"),this.api.show()},c.prototype.close=function(){return this.element.removeClass("active"),this.api.tooltip.unbind(this.getNamespacedEventName("outerClick")),this.api.hide()},c.prototype.toggle=function(){return this.api.tooltip&&a(this.api.tooltip).hasClass("qtip-focus")?this.close():this.open()},c.prototype.getPopOverClasses=function(){var a;return a=this.getDataFullName().toLowerCase().replace(".","-"),["editor-popover"].concat([this.name,a],this.popoverClasses).join(" ")},c.prototype.getPopoverContent=function(){var a;return a=this.contentTypes.join(", "),this._popoverContent?this._popoverContent:"<input placeholder='"+a+" Editor'>"},c.prototype.setPopoverContent=function(a){return this._popoverContent=a},c.prototype.autoReposition=function(){var a=this;if(this._options.repositionOnChange)return this.repositionOnChangeTimeout&&clearTimeout(this.repositionOnChangeTimeout),this.repositionOnChangeTimeout=setTimeout(function(){return a.debug&&console.log("JJPopoverEditable: Popover reposition"),a.updateTooltipDimensions(),a.element.qtip("reposition")},100),!0},c.prototype.onMove=function(){},c.prototype.updateTooltipDimensions=function(){},c.prototype.destroy=function(){return this.api&&this.api.tooltip&&this.api.tooltip.unbind(this.getNamespacedEventName("outerClick")),this.element.off(this.getNamespacedEventName("click")),a("body").off(this.getNamespacedEventName("toggle.editor-sidebar")),a(window).on(this.getNamespacedEventName("resize")),c.__super__.destroy.call(this)},c}(d),c=function(a){function b(){return n=b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.members=function(){return b.__super__.members.call(this),this.contentTypes=["inline"]},b.prototype.init=function(a){var c=this;return b.__super__.init.call(this,a),a.attr("contenteditable",!0).on(this.getNamespacedEventName("blur"),function(){return c.updateValue()}).on(this.getNamespacedEventName("click focus"),function(){return c.trigger("editor.closepopovers")})},b.prototype.getValueFromContent=function(){return this.element.text()},b.prototype.setValueToContent=function(a){return this.element.html(a)},b.prototype.destroy=function(){return this.element.removeAttr("contenteditable"),this.element.off(this.getNamespacedEventName("keyup click focus")),b.__super__.destroy.call(this)},b}(d),b=function(b){function c(){return o=c.__super__.constructor.apply(this,arguments)}return __extends(c,b),c.prototype.members=function(){return c.__super__.members.call(this),this.contentTypes=["date"],this.contentFormattedValue=""},c.prototype.init=function(b){var d,e,f=this;return this.$input=a('<input type="text">'),e=a('<div class="datepicker">'),d=a("<div>").append(this.$input).append(e),this._options.position={my:"top right",at:"top left",adjust:{x:-5,y:-18,method:"flip shift"}},c.__super__.init.call(this,b),this.contentFormattedValue=this.getPlaceholder(),this.$input.Zebra_DatePicker({format:this.getContentFormat(),always_visible:e,onChange:function(){return f.api?f.api.reposition():void 0},onClear:function(){return f.contentFormattedValue=f.getPlaceholder(),f.setValue(null),f.render()},onSelect:function(a,b){return f.contentFormattedValue=a,f.setValue(b)}}),this.setPopoverContent(d)},c.prototype.updateValue=function(a){return c.__super__.updateValue.call(this,a),this.element.html(this.getValueOrPlaceholder())},c.prototype.render=function(){return this.element.html(this.contentFormattedValue)},c.prototype.setValueToContent=function(a,b){return this.$input.length&&!b?this.$input.val(a):void 0},c.prototype.getFormat=function(){return this.getOptions().format||"Y-m-d"},c.prototype.getContentFormat=function(){return this.getOptions().contentFormat||this.getFormat()},c.prototype.destroy=function(){return this.$input.off(this.getNamespacedEventName("keyup")),c.__super__.destroy.call(this)},c}(f),g=function(b){function c(){return p=c.__super__.constructor.apply(this,arguments)}return __extends(c,b),c.prototype.members=function(){return c.__super__.members.call(this),this.contentTypes=["markdown"],this.markdown=null,this.markdownChangeTimeout=null,this.previewClass="preview",this.popoverClasses=["markdown"]},c.prototype.init=function(b){var d,e,f,g,h,i=this;return c.__super__.init.call(this,b),b.on(this.getNamespacedEventName("focus"),function(){return i.trigger("editor.closepopovers")}),e=a("<textarea>",{"class":this.previewClass}),h=this.getValue(),e.val(h.raw),d=a("<div>",{"class":this.previewClass}),this.setPopoverContent(e),f=!1,g={placeholder:this.getPlaceholder(),preview:b,contentGetter:"val",onChange:function(a){return f?(i.markdownChangeTimeout&&clearTimeout(i.markdownChangeTimeout),i.autoReposition(),i.markdownChangeTimeout=setTimeout(function(){return i.setValue(a),a.raw?void 0:i.element.html(i.getPlaceholder())},500)):(f=!0,void 0)}},a.extend(g,this._options||{}),this.markdown=new JJMarkdownEditor(e,g)},c.prototype.isValidValue=function(a){return a&&a.raw?!0:!1},c.prototype.getValueFromContent=function(){var a,b;return a=this.getPlaceholder(),b=this.element.text(),a!==b?{raw:b}:{raw:""}},c.prototype.destroy=function(){return this.element.off(this.getNamespacedEventName("focus")),this.markdown.cleanup(),this.markdown=null,c.__super__.destroy.call(this)},c}(f),m=function(b){function c(){return q=c.__super__.constructor.apply(this,arguments)}return __extends(c,b),c.prototype.members=function(){return c.__super__.members.call(this),this.contentTypes=["markdown-split"],this.previewClass="preview split"},c.prototype.init=function(a){return this._options.position={my:"top left",at:"top left",type:"fixed",target:[0,0],adjust:{x:0,y:0,method:"none"}},c.__super__.init.call(this,a)},c.prototype.open=function(){return this.trigger("editor.open-split-markdown"),this.updateTooltipDimensions(),c.__super__.open.call(this)},c.prototype.close=function(){return this.trigger("editor.close-split-markdown"),c.__super__.close.call(this)},c.prototype.updateTooltipDimensions=function(){var b;return b=this.element.offset(),this.api.set("style.height",a(window).height()+top),this.api.set("style.width",b.left-10),!0},c}(g),i=function(b){function c(){return r=c.__super__.constructor.apply(this,arguments)}return __extends(c,b),c.prototype.members=function(){return c.__super__.members.call(this),this.contentTypes=["select"],this.popoverClasses=["selectable"],this.contentSeperator=", ",this._source={}},c.prototype.init=function(b){return this._options.position||(this._options.position={my:"top left",at:"bottom left",adjust:{x:0,y:0,method:"flip shift"}}),this._source=b.data(this.editor.attr._namespace+"source")||{},c.__super__.init.call(this,b),this.$set=a('<div class="selectable-set">'),this.setPopoverContent(this.$set),this.setSource(this._source)},c.prototype.onElementChange=function(){return!0},c.prototype.createPopupContent=function(){var b,c,d,e,f,g,h,i,j=this;this.$set.empty(),i=this.getSource();for(d in i)g=i[d],e=g.id||g.ID,h=g.title||g.Title,f=this.getDataName().toLowerCase()+"-item-"+e,c=a('<label class="selectable-item" for="'+f+'">'+h+"<label>"),b=a('<input type="checkbox" name="'+this.getDataName()+'" value="'+e+'" id="'+f+'">'),-1!==this.getValueIndex(e)&&b.prop("checked",!0),b.on(this.getNamespacedEventName("change"),function(b){var c,d,f,g,h;return h=j.getValue(),c=a(b.target),e=c.val(),isNaN(e)||(e=parseInt(e,10)),f=j.getValueIndex(e),g=c.prop("checked"),d=!1,!1===j.onElementChange(b,c,h,e)?(b.preventDefault(),c.prop("checked",!g),!1):(c.is(":checked")?-1===f&&(h.push(e),d=!0):-1!==f&&(h.splice(f,1),d=!0),d&&j.setValue(h),!0)}),this.$set.append(c.prepend(b));return!0},c.prototype.onOptionsUpdate=function(){return this._options.source&&this.setSource(this._options.source),this._options.contentSeperator?this.contentSeperator=this._options.contentSeperator:void 0},c.prototype.getSeperator=function(){return this.contentSeperator},c.prototype.getSource=function(){return this._source},c.prototype.setSource=function(a,b){return this._source=a,this.cleanupValue(b),this.createPopupContent()},c.prototype.getValue=function(){return c.__super__.getValue.call(this).slice()},c.prototype.getPrevValue=function(){return c.__super__.getPrevValue.call(this).slice()},c.prototype.getValueIndex=function(b){return a.inArray(b,this.getValue())},c.prototype.isValidValue=function(a){return a&&a.length?!0:!1},c.prototype.getValueFromContent=function(){var b,c,d,e,f,g;e=this.element.text().split(this.getSeperator()),f=[],g=this.getSource();for(b in g)c=g[b],d=c.title||c.Title,-1!==a.inArray(d,e)&&f.push(c.id);return f},c.prototype.cleanupValue=function(a){var b,c,d,e,f,g,h,i;h=this.getValue();for(c in h){g=h[c],b=!1,i=this.getSource();for(e in i)f=i[e],d=f.id||f.ID,g===d&&(b=!0);b||h.splice(c,1)}return this.setValue(h,a)},c.prototype.setValue=function(a,b,d){return null==d&&(d=!0),c.__super__.setValue.call(this,a,b,d),this.render()},c.prototype.setValueToContent=function(b){var c,d,e,f,g,h,i;if(h=[],b){i=this.getSource();for(d in i)f=i[d],e=f.id||f.ID,c=!1,-1!==a.inArray(e,b)&&(g=f.title||f.Title,h.push(g),c=!0),this.updatePopoverContent(g,e,c);return this.updateContent(h)}},c.prototype.updatePopoverContent=function(a,b,c){var d;return this.$set?(d=this.$set.find("#"+this.getDataName().toLowerCase()+"-item-"+b),d.prop("checked",c)):void 0},c.prototype.updateContent=function(a){return this.element.html(a.join(this.getSeperator()))},c.prototype.render=function(){var a;return a=this.getValue(),a&&this.isValidValue(a)?this.setValueToContent(a):this.element.html(this.getPlaceholder())},c}(f),l=function(a){function b(){return s=b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.members=function(){return b.__super__.members.call(this),this.contentTypes=["select-person"]},b.prototype.updateContent=function(a){var b;return b=a?" &amp; ":"",this.element.html(b+a.join(this.getSeperator()))},b}(i),k=function(a){function b(){return t=b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.members=function(){return b.__super__.members.call(this),this.contentTypes=["select-list"]},b.prototype.init=function(a){return this._options.position||(this._options.position={my:"top right",at:"top left",adjust:{x:-10,y:-16,method:"flip shift"}}),b.__super__.init.call(this,a)},b.prototype.updateContent=function(a){var b,c,d,e;for(b="",d=0,e=a.length;e>d;d++)c=a[d],b+="<li>"+c+"</li>";return this.element.html(b)},b.prototype.render=function(){var a;return a=this.getValue(),a&&this.isValidValue(a)?this.setValueToContent(a):this.element.html("<li>"+this.getPlaceholder()+"</li>")},b}(i),j=function(a){function b(){return u=b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.members=function(){return b.__super__.members.call(this),this.contentTypes=["select-list-confirm"],this._options={confirm:"Are you sure to do this?"}},b.prototype.init=function(a){var c,d;return d=a.data(this.editor.attr._namespace+"confirm"),d&&(c={confirm:d},this.updateOptions(c,!0)),b.__super__.init.call(this,a)},b.prototype.getConfirm=function(){return this.getOptions().confirm},b.prototype.onElementChange=function(){return confirm(this.getConfirm())},b}(k),h=function(b){function c(){return v=c.__super__.constructor.apply(this,arguments)}return __extends(c,b),c.prototype.members=function(){return c.__super__.members.call(this),this.contentTypes=["modal"],this.inputs=[],this.buttons=[]},c.prototype.init=function(a){return c.__super__.init.call(this,a),this._options={fields:{Foo:{placeholder:"Bar"}},buttons:{Submit:{type:"submit"},Cancel:{type:"cancel"}}},this.setFields(a.data(this.editor.attr._namespace+"fields")),this.setButtons(a.data(this.editor.attr._namespace+"buttons"))},c.prototype.getForm=function(){var b,c,d=this;return c=a("<form>").submit(function(a){return a.preventDefault(),d.submit()}),a.each(this.inputs,function(a,b){return c.append(b)}),b=a('<div class="buttons">'),a.each(this.buttons,function(a,c){return b.append(c)}),c.append(b)},c.prototype.getFields=function(){return this.getOptions().fields},c.prototype.setFields=function(b){var c,d,e,f;if(b&&(this._options.fields=b),this._options.fields){f=this._options.fields;for(e in f)d=f[e],d.type||(d.type="text"),d.placeholder||(d.placeholder=e),c=a('<input type="'+d.type+'"name="'+e+'" placeholder="'+d.placeholder+'"/>'),this.inputs.push(c)}return this.setPopoverContent()},c.prototype.getButtons=function(){return this.getOptions().buttons},c.prototype.setButtons=function(b){var c,d,e,f;if(b&&(this._options.buttons=b),this._options.buttons){f=this._options.buttons;for(e in f)d=f[e],c=a('<button type="'+d.type+'">'+e+"</button>"),"submit"===d.type?this._addSubmitEvent(c):"cancel"===d.type&&this._addCancelEvent(c),this.buttons.push(c)}return this.setPopoverContent()},c.prototype._addSubmitEvent=function(a,b){var c=this;return null==b&&(b="click"),a.on(b,function(a){return a.preventDefault(),c.submit(),!1})},c.prototype.submit=function(){var b;return b={},a.each(this.inputs,function(c,d){var e;return e=a(d),b[e.attr("name")]=e.val()}),this.setValue(b),this.close()},c.prototype._addCancelEvent=function(a){var b=this;return a.on("click",function(a){return a.preventDefault(),b.close(),!1})},c.prototype.close=function(){return c.__super__.close.call(this),a("input, textarea",this.api.tooltip).val("")},c.prototype.getPopoverButtons=function(){return console.log($buttons),$buttons},c.prototype.setPopoverContent=function(a){return a||(a=this.getForm()),c.__super__.setPopoverContent.call(this,a)},c.prototype.setValue=function(a,b){return b?void 0:this.triggerDataEvent("submit",a)},c}(f),window.JJEditor=e,window.editorComponents={},window.editorComponents.JJEditable=d,window.editorComponents.JJPopoverEditable=f,window.editorComponents.InlineEditable=c,window.editorComponents.DateEditable=b,window.editorComponents.MarkdownEditable=g,window.editorComponents.SplitMarkdownEditable=m,window.editorComponents.SelectEditable=i,window.editorComponents.SelectListEditable=k,window.editorComponents.SelectPersonEditable=l,window.editorComponents.SelectListConfirmEditable=j,window.editorComponents.ModalEditable=h}(jQuery),define("plugins/editor/jquery.editor-popover",function(){}),define("modules/UserSidebar",["app","modules/DataRetrieval","modules/RecycleBin","modules/Website","plugins/misc/spin.min","plugins/misc/jquery.list","plugins/editor/jquery.jjdropzone","plugins/editor/jquery.jjmarkdown","plugins/editor/jquery.editor-popover"],function(a,b,c,d,e){var f;return f=a.module(),f.config={},f.config.spinner={lines:13,length:6,width:2,radius:7,corners:1,rotate:0,direction:1,color:"#fff",speed:1,trail:70,shadow:!1,hwaccel:!1,className:"spinner",zIndex:2e9,top:"auto",left:"auto"},f.construct=function(){var a;return a=new f.Views.Main,a.$el.appendTo("#editor-sidebar"),a.render(),a},f.setPendingReq=function(a){var b=this;return this.pendingRequest&&this.pendingRequest.reject(),this.pendingRequest=a,this.pendingRequest.always(function(){return b.pendingRequest=null})},f.Views.Main=Backbone.View.extend({tagName:"div",className:"editor-sidebar",template:"security/editor-sidebar",availableSubViews:{user:"UserSidebar",gallery:"GallerySidebar"},subView:null,events:{"click nav a":"blurAfterClick","click [data-editor-sidebar-content]":"toggleSidebarCheck","click .icon-switch":"switchEditorView","click .icon-publish":"clickPublish"},initialize:function(){return Backbone.Events.on("projectEdited",this.handlePublishActive,this)},cleanup:function(){return Backbone.Events.off("projectEdited",this.handlePublishActive)},blurAfterClick:function(a){return $(a.target).blur()},switchEditorView:function(b){return b.preventDefault(),a.isEditor&&a.ProjectEditor.toggleView(),!1},clickPublish:function(b){var c,d,e;return b.preventDefault(),c=$(b.target),a.isEditor&&(e=a.ProjectEditor.model.get("IsPublished")?!1:!0,d=e?"add":"remove",c.addClass("publishing"),a.ProjectEditor.model.rejectAndSave("IsPublished",e).always(function(){return c.removeClass("publishing")}),c[d+"Class"]("published")),!1},handlePublishActive:function(a){var b;return b=a.get("IsPublished")?"add":"remove",this.$el.find(".icon-publish")[b+"Class"]("published")},toggleSidebarCheck:function(a){var b,c,d;if(a.preventDefault(),b=$(a.target),d=b.data("editor-sidebar-content"),c=this.getSubviewName(d),this.subViewName===c){if(!this.subView.__manager__.hasRendered)return!1;b.toggleClass("active"),this.toggle()}else c&&(b.parents("nav").find(".active").removeClass("active").end().end().addClass("active"),this.setSubview(c,!0),this.open(!0));return!1},toggleEditorClass:function(a){var b;return b=a?"addClass":"removeClass","removeClass"===b&&this.$el.hasClass("is-editor")&&(this.close(),this.setSubview()),this.$el[b]("is-editor")},triggerSubview:function(a){var b,c;return b=Array.prototype.slice.call(arguments),c="on"+a.charAt(0).toUpperCase()+a.slice(1),this.subView&&this.subView[c]?this.subView[c].apply(this.subView,b.slice(1)):void 0},getSubviewName:function(a){return this.availableSubViews[a]?this.availableSubViews[a]:!1},setSubview:function(a,b){return a?(this.subViewName=a,this.subView=new f.Views[a],this.subView.parentView=this,this.startSpinner(),this.setView("#editor-sidebar-container",this.subView),b?this.subView.render():void 0):(this.subView&&this.subView.remove(),this.subView=null,this.subViewName=null)},open:function(a){var b=this;return this.$el.addClass("open"),this.$body.addClass("editor-sidebar-open").trigger({type:"toggle.editor-sidebar",name:"open"}),setTimeout(function(){return b.triggerSubview("opened",a),b.$el.addClass("opened"),b.$body.trigger({type:"toggle.editor-sidebar",name:"opened"})},300)},close:function(){var a=this;return this.triggerSubview("close"),this.$body.removeClass("editor-sidebar-open").trigger({type:"toggle.editor-sidebar",name:"closing"}),this.$el.removeClass("open").find("nav .active").removeClass("active"),setTimeout(function(){return a.$el.removeClass("opened"),a.$body.trigger({type:"toggle.editor-sidebar",name:"close"})},300)},toggle:function(){return this.$el.hasClass("open")?this.close():this.open()},initSpinner:function(){return this.spinner={inst:new e(f.config.spinner),target:$("#editor-sidebar-spinner",this.$el)[0]}},startSpinner:function(){var a;return a=this.spinner,$(a.target).addClass("active"),a.inst.spin(a.target)},stopSpinner:function(){var a;return a=this.spinner,$(a.target).removeClass("active"),a.inst.stop()},afterRender:function(){return this.$body=$("body"),this.initSpinner()}}),f.Views.SidebarContainer=Backbone.View.extend({$sidebarHeader:null,$sidebarContent:null,parentView:null,className:"editor-sidebar-container",columnsPrefix:"columns-",galleryData:{},initSidebar:function(){var a=this;return this.$sidebarHeader=$("> header",this.$el),this.$sidebarContent=$("section.editor-sidebar-content",this.$el),this.setSidebarHeight(),$.addOnWindowResize("editor.sidebar.height",function(){return a.setSidebarHeight(),a._setColumnCount()})},hideSpinner:function(){return this.parentView?this.parentView.stopSpinner():void 0},_cleanup:function(){return this.uploadZone&&this.uploadZone.cleanup(),$.removeOnWindowResize("editor.sidebar.height")},setSidebarHeight:function(){return this.$sidebarContent.css({height:$(window).height()-this.$sidebarHeader.outerHeight()})},_getColumnsCount:function(){return this.$sidebarContent.data("columns")},_setColumnCount:function(){var a,b,c;if(this.$sidebarContent)return c=parseInt(this.$sidebarContent.width(),10),b=this._getColumnsCount(),a=Math.floor(c/75),a?this.$sidebarContent.removeClass(this.columnsPrefix+b).addClass(this.columnsPrefix+a).data("columns",a):void 0},_afterRender:function(){var a=this;return this.hideSpinner(),this.initSidebar(),_.once(function(){return a.$sidebarContent=$(".editor-sidebar-content",a.$el),a.isOpen?a._setColumnCount():void 0})(),this.isOpen&&this._setColumnCount(),this.$sidebarContent.hasClass("scrollbox")?(this.$sidebarContent.list({headerSelector:"header"}),$(".ui-list",this.$sidebarContent).scroll(function(){return a.onContentScroll()})):void 0},onContentScroll:function(){},_onOpened:function(a){var b,c=this;return b=a?0:300,this.isOpen=!0,setTimeout(function(){return c._setColumnCount()},b)},onOpened:function(a){return this._onOpened(a)},_onClose:function(){var a,b=this;return this.isOpen=!1,a=this._getColumnsCount(),setTimeout(function(){return b.$sidebarContent?b.$sidebarContent.removeClass(b.columnsPrefix+a):void 0},300)},onClose:function(){return this._onClose()}}),f.Views.UserSidebar=f.Views.SidebarContainer.extend({tagName:"div",template:"security/editor-sidebar-user",events:{"submit form.user-settings":"changeUserCredentials"},cleanup:function(){return this._cleanup(),this.metaEditor.destroy()},render:function(c,d){var e,g;return null==d&&(d={}),e=this.async(),g=b.forUserGallery("Person").done(function(b){return d.PersonImages=b.images.Person,d.Person=a.CurrentMemberPerson.toJSON(),d.Member=a.CurrentMember,_.each(d.PersonImages,function(a){return d.Person.Image&&a.id===d.Person.Image.ID?d.CurrentImage=a:void 0}),e(c(d))}),f.setPendingReq(g)},initProjectList:function(){var b,c,d,e,g,h=this;for(b=[],g=["Projects","Exhibitions","Excursions","Workshops"],d=0,e=g.length;e>d;d++)c=g[d],b=b.concat(a.CurrentMemberPerson.get(c).toJSON());return b=_.sortBy(b,function(a){return a.Title.toLowerCase()}),_.each(b.reverse(),function(a){var b;return a.EditableByMember?(b=new f.Views.ProjectItem({model:a}),h.insertView(".editor-sidebar-content .project-list",b),b.render()):void 0})},initPersonImageList:function(){var b,c=this;return b=_.sortBy(a.Cache.UserGallery.images.Person,"id"),_.each(b,function(a){return c.insertPersonImage(a)
})},insertPersonImage:function(a){var b,c;return b=this.uploadZone,c=new f.Views.PersonImage({model:a}),this.insertView(".editor-sidebar-content .image-list",c),c.afterRender=function(){return this._afterRender(),b.setAsDraggable(this.$el.find("[data-id]"))},c.render()},initDropzone:function(){var b=this;return this.uploadZone=new JJSingleImageUploadZone("#current-person-image",{url:a.Config.PersonImageUrl,getFromCache:function(b){var c;return c=null,_.each(a.Cache.UserGallery.images.Person,function(a){return a.id===b?c=a:void 0}),console.log(c),[c]},responseHandler:function(c){var d,e,f;return e=c[0],e.UploadedToClass&&(a.updateGalleryCache(c),b.insertPersonImage(e)),console.log(e),!(d=e.id)||(b.uploadZone.$dropzone.html('<img src="'+e.url+'">'),f=a.CurrentMemberPerson.get("Image"),d===f||f&&d===f.id)?void 0:a.CurrentMemberPerson.rejectAndSave("Image",d)}})},onContentScroll:function(){var a;return a=this.metaEditor.getComponentByName("CurrentPerson.Bio"),a.api.reposition()},initMetaEditor:function(){var b=this;return this.metaEditor=new JJEditor($(".meta-info"),["InlineEditable","MarkdownEditable","ModalEditable"]),this.metaEditor.on("stateUpdate",function(b){var c,d,e,f;e=!1,f=b.CurrentPerson;for(c in f)d=f[c],"Bio"===c&&d&&(d=d.raw),null===d&&(d=""),a.CurrentMemberPerson.get(c)!==d&&(e=!0,a.CurrentMemberPerson.set(c,d));return e?a.CurrentMemberPerson.rejectAndSave():void 0}),this.metaEditor.on("submit:CurrentPerson.Website",function(c){var d,e;return c.Title&&c.Link?(d=JJRestApi.Model("Website"),e=new d({Title:c.Title,Link:c.Link}),a.CurrentMemberPerson.get("Websites").add(e),b.addWebsiteView(e,!0),a.CurrentMemberPerson.save()):void 0})},addWebsiteView:function(a,b){var c;return c=new d.Views.ListView({model:a}),this.insertView(".websites",c),b&&c.render(),!0},beforeRender:function(){var b=this;return a.CurrentMemberPerson.get("Websites").each(function(a){return b.addWebsiteView(a)})},afterRender:function(){return this._afterRender(),this.initDropzone(),this.initPersonImageList(),this.initProjectList(),this.initMetaEditor()},changeUserCredentials:function(b){var c,d,e,f=this;return b.preventDefault(),c=$(b.target),d=c.serialize(),e=$.ajax({url:a.Config.ChangeCredentialsUrl,data:d,type:"POST"}),e.done(function(b){var d;return b.email&&(c.find('[name="email"]').val(b.email),f.$el.find(".editor-header .email").text(b.email),a.CurrentMember.Email=b.email),(d=b.msg)?f.showMessageAt(d.text,c.parent(),d.type):void 0}),!1}}),f.Views.GallerySidebar=f.Views.SidebarContainer.extend({tagName:"div",template:"security/editor-sidebar-gallery",isGallery:!0,$sidebarContent:null,initialize:function(){return Backbone.Events.on("DocImageAdded",this.handleUploadedImageData,this)},cleanup:function(){return this._cleanup(),this.$el.parent().off("dragenter"),Backbone.Events.off("DocImageAdded",this.handleUploadedImageData)},initImageList:function(){var b=this;return _.each(a.Cache.UserGallery.images.Projects,function(a){return _.each(a.Images,function(c){return b.insertGalleryImage(a.FilterID,c)})})},insertGalleryImage:function(a,b){var c;return c=new f.Views.GalleryImage({model:b}),this.insertView('[data-filter-id="'+a+'"] .image-list',c),c.render()},initFilter:function(){var a=this;return this.$filter||(this.$filter=$("select.filter",this.$el)),this.$filter.length?this.$filter.on("change",function(b){var c,d;return(d=$(b.target).blur().val())?(c=$("[data-filter-id="+d+"]",a.$sidebarContent),c.length?(a.$sidebarContent.addClass("filtered"),c.addClass("active").siblings().removeClass("active"),c.prev("header").addClass("active")):void 0):a.$sidebarContent.removeClass("filtered").find(".active").removeClass("active")}):void 0},initDropzone:function(){var b=this;return this.uploadZone=new JJSimpleImagesUploadZone("#uploadzone",{url:a.Config.DocImageUrl,additionalData:{projectId:a.ProjectEditor.model.id,projectClass:a.ProjectEditor.model.get("ClassName")},responseHandler:function(c){return a.updateGalleryCache(c),b.handleUploadedImageData(c)}}),this.$el.parent().on("dragenter",function(a){return $("body").hasClass("drag-inline")?void 0:(b.uploadZone.$dropzone.addClass("dragover"),$.fireGlobalDragEvent("dragstart",a.target,"file"))})},handleUploadedImageData:function(b){var c=this;return console.log(b),_.each(b,function(b){return c.insertGalleryImage(b.FilterID,b),a.ProjectEditor.model.get("Images").add(b.id)})},render:function(c,d){var e,g;return null==d&&(d={}),e=this.async(),g=b.forUserGallery("Projects").done(function(b){var f,g,h,i;return i=_.sortBy(b.images.Projects,function(a){return a.Title.toLowerCase()}),f=a.ProjectEditor.model,g=f.get("ClassName")+"-"+f.id,h=0,_.each(i,function(a,b){return a.FilterID===g?h=b:void 0}),h&&i.splice(0,0,i.splice(h,1)[0]),d.Projects=i,e(c(d))}),f.setPendingReq(g)},afterRender:function(){return this._afterRender(),this.initFilter(),this.initDropzone(),this.initImageList()}}),f.Views.ListItem=Backbone.View.extend({tagName:"li",_cleanup:function(){return this.$el.data("recyclable",null),this.$el.off("dragstart dragend")},cleanup:function(){return this._cleanup()},serialize:function(){return this.model},insert:function(a,b){return $(a).prepend(b)},_afterRender:function(){return c.setViewAsRecyclable(this)},afterRender:function(){return this._afterRender()}}),f.Views.GalleryImage=f.Views.ListItem.extend({template:"security/editor-sidebar-gallery-image",className:"DocImage",cleanup:function(){return this.$el.find("[data-md-tag]").trigger("dragend"),this._cleanup()},afterRender:function(){var b,c=this;return this._afterRender(),this.$img=this.$el.find("[data-md-tag]"),b=function(){var a,b;return b=c.$img.data("id"),a=c.$img[0].tagName.toLowerCase(),c.$el.closest(".editor-sidebar-content").find("[data-id="+b+"]").filter(function(){return this.tagName.toLowerCase()===a})},JJMarkdownEditor.setAsDraggable(this.$img),a.ProjectEditor.PreviewImageZone.setAsDraggable(this.$img),this.$img.on("mouseover",function(){var a;return a=b(),a.length?a.addClass("active"):void 0}).on("mouseleave",function(){var a;return a=b(),a.length?a.removeClass("active"):void 0})},liveRemoval:function(){var b=this;return a.ProjectEditor.galleryImageRemoved(this.model.id),_.each(this.__manager__.parent.views,function(a){return _.each(a,function(a){return a.model.id===b.model.id&&a!==b?a.remove():void 0})}),this.remove()}}),f.Views.PersonImage=f.Views.ListItem.extend({template:"security/editor-sidebar-person-image",className:"PersonImage",cleanup:function(){return this.$el.find("[data-id]").trigger("dragend"),this._cleanup()},liveRemoval:function(){var b;return b=a.CurrentMemberPerson.get("Image"),b.id===this.model.id&&$("#current-person-image").empty(),this.remove()}}),f.Views.ProjectItem=f.Views.ListItem.extend({template:"security/editor-sidebar-project-item",cleanup:function(){return this._cleanup(),Backbone.Events.off("projectEdited",this.handleActive)},initialize:function(){return Backbone.Events.on("projectEdited",this.handleActive,this)},afterRender:function(){return this._afterRender(),a.isEditor?this.handleActive(a.ProjectEditor.model):void 0},handleActive:function(a){return this.$el.find("a").removeClass("active"),a.get("ClassName")===this.model.ClassName&&a.id===this.model.ID?this.$el.find("a").addClass("active"):void 0}}),f}),define("modules/Auth",["app","modules/UserSidebar"],function(a,b){var c;return c=a.module(),c.ping={url:JJRestApi.setObjectUrl("User"),interval:2e5},c.loginUrl="api/v2/Auth/login/",c.logoutUrl="api/v2/Auth/logout/",c.canEditUrl="api/v2/Auth/canEdit/",c.Cache={userWidget:null},c.redirectTo=function(b){var c;return c=a.origin+"/"+b+"/",window.location.replace(c)},c.logout=function(){return $.post(c.logoutUrl).pipe(function(a){return a.success?a:$.Deferred().reject(a)}).done(function(){return console.log("cancelling login ping, redirecting..."),a.CurrentMember={},c.cancelLoginPing(),c.redirectTo("login")}).promise()},c.handleUserServerResponse=function(b){return b.Email?(c.kickOffLoginPing(),a.CurrentMember.Email?b.Email!==a.CurrentMember.Email?c.redirectTo("login"):void 0:(a.CurrentMember=b,c.fetchMembersPerson().done(function(){return c.updateUserWidget()}))):a.CurrentMember={}},c.performLoginCheck=function(){return $.getJSON(this.ping.url).done(c.handleUserServerResponse).promise()},c.canEdit=function(a){var b,c,d;b="?";for(d in a)c=a[d],b+=d+"="+c+"&";return $.getJSON(this.canEditUrl+b).pipe(function(a){return a.allowed?a:$.Deferred().reject()}).promise()},c.kickOffLoginPing=function(){var b=this;return this.cancelLoginPing,this.loginPing=window.setTimeout(function(){return b.performLoginCheck().done(function(){return a.CurrentMember.Email?void 0:c.redirectTo("login")})},this.ping.interval)},c.cancelLoginPing=function(){return this.loginPing?(window.clearTimeout(this.loginPing),delete this.loginPing):void 0},c.updateUserWidget=function(){var c;return a.CurrentMember.Email?(c=this.Cache.userWidget=this.Cache.userWidget||b.construct(),c.toggleEditorClass(a.isEditor)):void 0},c.fetchMembersPerson=function(){var b,c,d;return b=new $.Deferred,a.CurrentMemberPerson?(b.resolve(),b.promise()):(d=a.CurrentMember.PersonID,d?(c=a.Collections.Person.get(d),c?c._isFetchedWhenLoggedIn?(a.CurrentMemberPerson=c,b.resolve()):c.fetch({success:function(c){return c._isCompletelyFetched=!0,c._isFetchedWhenLoggedIn=!0,a.CurrentMemberPerson=c,b.resolve()}}):JJRestApi.getFromDomOrApi("Person",{name:"current-member-person",id:d}).done(function(c){var d;return _.isObject(c)?(d=a.handleFetchedModel("Person",c),d._isCompletelyFetched=!0,d._isFetchedWhenLoggedIn=!0,a.CurrentMemberPerson=d,b.resolve()):b.reject()}),b.promise()):(b.reject(),b.promise()))},c.Views.Login=Backbone.View.extend({tagName:"section",idAttribute:"login-form",template:"security/login-form",events:{"submit form":"submitLoginForm"},submitLoginForm:function(a){var b,d,e,f=this;return a.preventDefault(),d=this.$el.find('[name="password"]').val(),b=this.$el.find('[name="email"]').val(),e=this.$el.find('[name="remember"]').is(":checked")===!0?1:0,$.post(c.loginUrl,{pass:d,email:b,remember:e}).done(function(a){return c.handleUserServerResponse(a),f.render()}),!1},serialize:function(){return a.CurrentMember}}),c.Views.Logout=Backbone.View.extend({tagName:"section",idAttribute:"logging-out",template:"security/logging-out",serialize:function(){return a.CurrentMember}}),c}),define("modules/SuperProject",["app"],function(a){var b;return b=a.module(),b.Model=Backbone.JJRelationalModel.extend({idArrayOfRelationToClass:function(a,b){return null==b&&(b=void 0),"Project"===this.get("ClassName")&&"Project"===a?this.get("ChildProjects").getIDArray().concat(this.get("ParentProjects").getIDArray()):this.get("ClassName")===a?[]:(b=b?b:a+"s",this.get(b).getIDArray())},setRelCollByIds:function(a,b){var c,d,e,f,g=this;return f=!1,(e=this.get(a))&&(c=e.model.prototype.storeIdentifier,d=this.idArrayOfRelationToClass(c,a),_.each(b,function(a){return _.indexOf(d,a)<0?(f=!0,e.add(a)):void 0}),_.each(_.difference(d,b),function(b){var c;return f=!0,c=e.get(b),c?e.remove(c):"Projects"===a?(e=g.get("ParentProjects"),e.remove(e.get(b))):void 0})),f},basicListWithoutCurrentMember:function(b){var c;return c=[],_.each(this.get(b).toJSON(),function(b){var d;return d={ID:b.ID,Title:b.FirstName+" "+(b.Surname?b.Surname:"")},d.ID!==a.CurrentMemberPerson.id?c.push(d):void 0}),c},getEditorsKey:function(){return"Project"===this.get("ClassName")?"BlockedEditors":"Editors"},setTempUrlPrefix:function(a){var b,c;return c="404",b=this.get("Persons"),this.get("IsPortfolio")?c="portfolio":a&&b.get(a.id)?c="about/"+a.get("UrlSlug"):b.length>0&&(c="about/"+b.models[0].get("UrlSlug")),this.set("TempUrlPrefix",c)}}),b}),define("modules/Project",["app","modules/SuperProject"],function(a,b){var c;return c=a.module(),JJRestApi.Modules.extend(c,function(a){return JJRestApi.extendModel("Project",b.Model,{foo:"bar"}),JJRestApi.extendCollection("Project",{foo:"bar"}),a.Views.Test=Backbone.View.extend({template:"head",tagName:"div",className:"head"})}),c}),function(a){function b(a){return new RegExp("(^|\\s+)"+a+"(\\s+|$)")}function c(a,b){var c=d(a,b)?f:e;c(a,b)}var d,e,f;"classList"in document.documentElement?(d=function(a,b){return a.classList.contains(b)},e=function(a,b){a.classList.add(b)},f=function(a,b){a.classList.remove(b)}):(d=function(a,c){return b(c).test(a.className)},e=function(a,b){d(a,b)||(a.className=a.className+" "+b)},f=function(a,c){a.className=a.className.replace(b(c)," ")});var g={hasClass:d,addClass:e,removeClass:f,toggleClass:c,has:d,add:e,remove:f,toggle:c};a.classie=g}(window),function(a){var b=document.documentElement,c=function(){};b.addEventListener?c=function(a,b,c){a.addEventListener(b,c,!1)}:b.attachEvent&&(c=function(b,c,d){b[c+d]=d.handleEvent?function(){var b=a.event;b.target=b.target||b.srcElement,d.handleEvent.call(d,b)}:function(){var c=a.event;c.target=c.target||c.srcElement,d.call(b,c)},b.attachEvent("on"+c,b[c+d])});var d=function(){};b.removeEventListener?d=function(a,b,c){a.removeEventListener(b,c,!1)}:b.detachEvent&&(d=function(a,b,c){a.detachEvent("on"+b,a[b+c]);try{delete a[b+c]}catch(d){a[b+c]=void 0}});var e={bind:c,unbind:d};a.eventie=e}(this),function(a){function b(a){"function"==typeof a&&(b.isReady?a():f.push(a))}function c(a){var c="readystatechange"===a.type&&"complete"!==e.readyState;if(!b.isReady&&!c){b.isReady=!0;for(var d=0,g=f.length;g>d;d++){var h=f[d];h()}}}function d(d){return d.bind(e,"DOMContentLoaded",c),d.bind(e,"readystatechange",c),d.bind(a,"load",c),b}var e=a.document,f=[];b.isReady=!1,a.docReady=d(a.eventie)}(this),function(a){function b(){}function c(a,b){if(e)return b.indexOf(a);for(var c=b.length;c--;)if(b[c]===a)return c;return-1}var d=b.prototype,e=Array.prototype.indexOf?!0:!1;d._getEvents=function(){return this._events||(this._events={})},d.getListeners=function(a){var b,c,d=this._getEvents();if("object"==typeof a){b={};for(c in d)d.hasOwnProperty(c)&&a.test(c)&&(b[c]=d[c])}else b=d[a]||(d[a]=[]);return b},d.getListenersAsObject=function(a){var b,c=this.getListeners(a);return c instanceof Array&&(b={},b[a]=c),b||c},d.addListener=function(a,b){var d,e=this.getListenersAsObject(a);for(d in e)e.hasOwnProperty(d)&&-1===c(b,e[d])&&e[d].push(b);return this},d.on=d.addListener,d.defineEvent=function(a){return this.getListeners(a),this},d.defineEvents=function(a){for(var b=0;b<a.length;b+=1)this.defineEvent(a[b]);return this},d.removeListener=function(a,b){var d,e,f=this.getListenersAsObject(a);for(e in f)f.hasOwnProperty(e)&&(d=c(b,f[e]),-1!==d&&f[e].splice(d,1));return this},d.off=d.removeListener,d.addListeners=function(a,b){return this.manipulateListeners(!1,a,b)},d.removeListeners=function(a,b){return this.manipulateListeners(!0,a,b)},d.manipulateListeners=function(a,b,c){var d,e,f=a?this.removeListener:this.addListener,g=a?this.removeListeners:this.addListeners;if("object"!=typeof b||b instanceof RegExp)for(d=c.length;d--;)f.call(this,b,c[d]);else for(d in b)b.hasOwnProperty(d)&&(e=b[d])&&("function"==typeof e?f.call(this,d,e):g.call(this,d,e));return this},d.removeEvent=function(a){var b,c=typeof a,d=this._getEvents();if("string"===c)delete d[a];else if("object"===c)for(b in d)d.hasOwnProperty(b)&&a.test(b)&&delete d[b];else delete this._events;return this},d.emitEvent=function(a,b){var c,d,e,f=this.getListenersAsObject(a);for(d in f)if(f.hasOwnProperty(d))for(c=f[d].length;c--;)e=b?f[d][c].apply(null,b):f[d][c](),e===!0&&this.removeListener(a,f[d][c]);return this},d.trigger=d.emitEvent,d.emit=function(a){var b=Array.prototype.slice.call(arguments,1);return this.emitEvent(a,b)},a.EventEmitter=b}(this),function(a){function b(a){if(a){if("string"==typeof d[a])return a;a=a.charAt(0).toUpperCase()+a.slice(1);for(var b,e=0,f=c.length;f>e;e++)if(b=c[e]+a,"string"==typeof d[b])return b}}var c="Webkit Moz ms Ms O".split(" "),d=document.documentElement.style;a.getStyleProperty=b}(window),function(a){function b(a){var b=parseFloat(a),c=-1===a.indexOf("%")&&!isNaN(b);return c&&b}function c(){for(var a={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},b=0,c=g.length;c>b;b++){var d=g[b];a[d]=0}return a}function d(a){function d(a){if("object"==typeof a&&a.nodeType){var d=f(a);if("none"===d.display)return c();var i={};i.width=a.offsetWidth,i.height=a.offsetHeight;for(var j=i.isBorderBox=!!h&&!!d[h]&&"border-box"===d[h],k=0,l=g.length;l>k;k++){var m=g[k],n=d[m],o=parseFloat(n);i[m]=isNaN(o)?0:o}var p=i.paddingLeft+i.paddingRight,q=i.paddingTop+i.paddingBottom,r=i.marginLeft+i.marginRight,s=i.marginTop+i.marginBottom,t=i.borderLeftWidth+i.borderRightWidth,u=i.borderTopWidth+i.borderBottomWidth,v=j&&e,w=b(d.width);w!==!1&&(i.width=w+(v?0:p+t));var x=b(d.height);return x!==!1&&(i.height=x+(v?0:q+u)),i.innerWidth=i.width-(p+t),i.innerHeight=i.height-(q+u),i.outerWidth=i.width+r,i.outerHeight=i.height+s,i}}var e,h=a("boxSizing");return function(){if(h){var a=document.createElement("div");a.style.width="200px",a.style.padding="1px 2px 3px 4px",a.style.borderStyle="solid",a.style.borderWidth="1px 2px 3px 4px",a.style[h]="border-box";var c=document.body||document.documentElement;c.appendChild(a);var d=f(a);e=200===b(d.width),c.removeChild(a)}}(),d}var e=document.defaultView,f=e&&e.getComputedStyle?function(a){return e.getComputedStyle(a,null)}:function(a){return a.currentStyle},g=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"];a.getSize=d(a.getStyleProperty)}(window),function(a){function b(){}function c(a){function c(b){b.prototype.option||(b.prototype.option=function(b){a.isPlainObject(b)&&(this.options=a.extend(!0,this.options,b))})}function e(b,c){a.fn[b]=function(e){if("string"==typeof e){for(var g=d.call(arguments,1),h=0,i=this.length;i>h;h++){var j=this[h],k=a.data(j,b);if(k)if(a.isFunction(k[e])&&"_"!==e.charAt(0)){var l=k[e].apply(k,g);if(void 0!==l)return l}else f("no such method '"+e+"' for "+b+" instance");else f("cannot call methods on "+b+" prior to initialization; "+"attempted to call '"+e+"'")}return this}return this.each(function(){var d=a.data(this,b);d?(d.option(e),d._init()):(d=new c(this,e),a.data(this,b,d))})}}if(a){var f="undefined"==typeof console?b:function(a){console.error(a)};a.bridget=function(a,b){c(b),e(a,b)}}}var d=Array.prototype.slice;c(a.jQuery)}(window),function(a,b){function c(a,b){return a[h](b)}function d(a){if(!a.parentNode){var b=document.createDocumentFragment();b.appendChild(a)}}function e(a,b){d(a);for(var c=a.parentNode.querySelectorAll(b),e=0,f=c.length;f>e;e++)if(c[e]===a)return!0;return!1}function f(a,b){return d(a),c(a,b)}var g,h=function(){if(b.matchesSelector)return"matchesSelector";for(var a=["webkit","moz","ms","o"],c=0,d=a.length;d>c;c++){var e=a[c],f=e+"MatchesSelector";if(b[f])return f}}();if(h){var i=document.createElement("div"),j=c(i,"div");g=j?c:f}else g=e;window.matchesSelector=g}(this,Element.prototype),function(a){function b(a){for(var c in b.defaults)this[c]=b.defaults[c];for(c in a)this[c]=a[c]}var c=a.Packery=function(){};c.Rect=b,b.defaults={x:0,y:0,width:0,height:0},b.prototype.contains=function(a){var b=a.width||0,c=a.height||0;return this.x<=a.x&&this.y<=a.y&&this.x+this.width>=a.x+b&&this.y+this.height>=a.y+c},b.prototype.overlaps=function(a){var b=this.x+this.width,c=this.y+this.height,d=a.x+a.width,e=a.y+a.height;return this.x<d&&b>a.x&&this.y<e&&c>a.y},b.prototype.getMaximalFreeRects=function(a){if(!this.overlaps(a))return!1;var c,d=[],e=this.x+this.width,f=this.y+this.height,g=a.x+a.width,h=a.y+a.height;return this.y<a.y&&(c=new b({x:this.x,y:this.y,width:this.width,height:a.y-this.y}),d.push(c)),e>g&&(c=new b({x:g,y:this.y,width:e-g,height:this.height}),d.push(c)),f>h&&(c=new b({x:this.x,y:h,width:this.width,height:f-h}),d.push(c)),this.x<a.x&&(c=new b({x:this.x,y:this.y,width:a.x-this.x,height:this.height}),d.push(c)),d},b.prototype.canFit=function(a){return this.width>=a.width&&this.height>=a.height}}(window),function(a){function b(a,b){this.width=a||0,this.height=b||0,this.reset()}var c=a.Packery,d=c.Rect;b.prototype.reset=function(){this.spaces=[],this.newSpaces=[];var a=new d({x:0,y:0,width:this.width,height:this.height});this.spaces.push(a)},b.prototype.pack=function(a){for(var b=0,c=this.spaces.length;c>b;b++){var d=this.spaces[b];if(d.canFit(a)){this.placeInSpace(a,d);break}}},b.prototype.placeInSpace=function(a,b){a.x=b.x,a.y=b.y,this.placed(a)},b.prototype.placed=function(a){for(var c=[],d=0,e=this.spaces.length;e>d;d++){var f=this.spaces[d],g=f.getMaximalFreeRects(a);g?c.push.apply(c,g):c.push(f)}this.spaces=c,b.mergeRects(this.spaces),this.spaces.sort(b.spaceSorterTopLeft)},b.mergeRects=function(a){for(var b=0,c=a.length;c>b;b++){var d=a[b];if(d){var e=a.slice(0);e.splice(b,1);for(var f=0,g=0,h=e.length;h>g;g++){var i=e[g],j=b>g?0:1;d.contains(i)&&(a.splice(g+j-f,1),f++)}}}return a},b.spaceSorterTopLeft=function(a,b){return a.y-b.y||a.x-b.x},b.spaceSorterLeftTop=function(a,b){return a.x-b.x||a.y-b.y},c.Packer=b}(window),function(a){function b(a,b){for(var c in b)a[c]=b[c];return a}function c(a,b){this.element=a,this.packery=b,this.position={x:0,y:0},this.rect=new e,this.placeRect=new e,this.element.style.position="absolute"}var d=a.Packery,e=d.Rect,f=a.getSize,g=a.getStyleProperty,h=a.EventEmitter,i=document.defaultView,j=i&&i.getComputedStyle?function(a){return i.getComputedStyle(a,null)}:function(a){return a.currentStyle},k=g("transition"),l=g("transform"),m=k&&l,n=!!g("perspective"),o={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"otransitionend",transition:"transitionend"}[k],p={WebkitTransform:"-webkit-transform",MozTransform:"-moz-transform",OTransform:"-o-transform",transform:"transform"}[l];b(c.prototype,h.prototype),c.prototype.handleEvent=function(a){var b="on"+a.type;this[b]&&this[b](a)},c.prototype.getSize=function(){this.size=f(this.element)},c.prototype.css=function(a){var b=this.element.style;for(var c in a)b[c]=a[c]},c.prototype.getPosition=function(){var a=j(this.element),b=parseInt(a.left,10),c=parseInt(a.top,10);b=isNaN(b)?0:b,c=isNaN(c)?0:c;var d=this.packery.elementSize;b-=d.paddingLeft,c-=d.paddingTop,this.position.x=b,this.position.y=c};var q=n?function(a,b){return"translate3d( "+a+"px, "+b+"px, 0)"}:function(a,b){return"translate( "+a+"px, "+b+"px)"};c.prototype._transitionTo=function(a,b){this.getPosition();var c=this.position.x,d=this.position.y,e=parseInt(a,10),f=parseInt(b,10),g=e===this.position.x&&f===this.position.y;if(this.setPosition(a,b),g&&!this.isTransitioning)return this.layoutPosition(),void 0;var h=a-c,i=b-d,j={};j[p]=q(h,i),this.transition(j,this.layoutPosition)},c.prototype.goTo=function(a,b){this.setPosition(a,b),this.layoutPosition()},c.prototype.moveTo=m?c.prototype._transitionTo:c.prototype.goTo,c.prototype.setPosition=function(a,b){this.position.x=parseInt(a,10),this.position.y=parseInt(b,10)},c.prototype.layoutPosition=function(){var a=this.packery.elementSize;this.css({left:this.position.x+a.paddingLeft+"px",top:this.position.y+a.paddingTop+"px"}),this.emitEvent("layout",[this])},c.prototype._nonTransition=function(a,b){this.css(a),b&&b.call(this)},c.prototype._transition=function(a,b){this.transitionStyle=a;var c=[];for(var d in a)c.push(d);var e={};e[k+"Property"]=c.join(","),e[k+"Duration"]=this.packery.options.transitionDuration,this.element.addEventListener(o,this,!1),b&&this.on("transitionEnd",function(a){return b.call(a),!0}),this.css(e),this.css(a),this.isTransitioning=!0},c.prototype.transition=c.prototype[k?"_transition":"_nonTransition"],c.prototype.onwebkitTransitionEnd=function(a){this.ontransitionend(a)},c.prototype.onotransitionend=function(a){this.ontransitionend(a)},c.prototype.ontransitionend=function(a){if(a.target===this.element){this.onTransitionEnd&&(this.onTransitionEnd(),delete this.onTransitionEnd),this.removeTransitionStyles();var b={};for(var c in this.transitionStyle)b[c]="";this.css(b),this.element.removeEventListener(o,this,!1),delete this.transitionStyle,this.isTransitioning=!1,this.emitEvent("transitionEnd",[this])}},c.prototype.removeTransitionStyles=function(){var a={};a[k+"Property"]="",a[k+"Duration"]="",this.css(a)},c.prototype.remove=function(){var a={opacity:0};a[p]="scale(0.001)",this.transition(a,this.removeElem)},c.prototype.removeElem=function(){this.element.parentNode.removeChild(this.element),this.emitEvent("remove",[this])},c.prototype.reveal=k?function(){var a={opacity:0};a[p]="scale(0.001)",this.css(a);var b=this.element.offsetHeight,c={opacity:1};c[p]="scale(1)",this.transition(c),b=null}:function(){},c.prototype.destroy=function(){this.css({position:"",left:"",top:""})},c.prototype.dragStart=function(){this.getPosition(),this.removeTransitionStyles(),this.isTransitioning&&l&&(this.element.style[l]="none"),this.getSize(),this.isPlacing=!0,this.needsPositioning=!1,this.positionPlaceRect(this.position.x,this.position.y),this.isTransitioning=!1,this.didDrag=!1},c.prototype.dragMove=function(a,b){this.didDrag=!0;var c=this.packery.elementSize;a-=c.paddingLeft,b-=c.paddingTop,this.positionPlaceRect(a,b)},c.prototype.dragStop=function(){this.getPosition();var a=this.position.x!==this.placeRect.x,b=this.position.y!==this.placeRect.y;this.needsPositioning=a||b,this.didDrag=!1},c.prototype.positionPlaceRect=function(a,b,c){this.placeRect.x=this.getPlaceRectCoord(a,!0),this.placeRect.y=this.getPlaceRectCoord(b,!1,c)},c.prototype.getPlaceRectCoord=function(a,b,c){var d=b?"Width":"Height",e=this.size["outer"+d],f=this.packery[b?"columnWidth":"rowHeight"],g=this.packery.elementSize["inner"+d];b||(g=Math.max(g,this.packery.maxY),this.packery.rowHeight||(g-=this.packery.gutter));var h;if(f){f+=this.packery.gutter,g+=b?this.packery.gutter:0,a=Math.round(a/f);var i=Math[b?"floor":"ceil"](g/f);i-=Math.ceil(e/f),h=i}else h=g-e;return a=c?a:Math.min(a,h),a*=f||1,Math.max(0,a)},c.prototype.copyPlaceRectPosition=function(){this.rect.x=this.placeRect.x,this.rect.y=this.placeRect.y},d.Item=c}(window),function(a){function b(a,b){for(var c in b)a[c]=b[c];return a}function c(a){var b=[];if("number"==typeof a.length)for(var c=0,d=a.length;d>c;c++)b.push(a[c]);else b.push(a);return b}function d(a,c){if(!a||!r(a))return p&&p.error("bad Packery element: "+a),void 0;this.element=a,this.options=b({},this.options),b(this.options,c);var d=++t;this.element.packeryGUID=d,u[d]=this,this._create(),this.options.isInitLayout&&this.layout()}var e=a.Packery,f=e.Rect,g=e.Packer,h=e.Item,i=a.classie,j=a.docReady,k=a.EventEmitter,l=a.eventie,m=a.getSize,n=a.matchesSelector,o=a.document,p=a.console,q=a.jQuery,r="object"==typeof HTMLElement?function(a){return a instanceof HTMLElement}:function(a){return a&&"object"==typeof a&&1===a.nodeType&&"string"==typeof a.nodeName},s=Array.prototype.indexOf?function(a,b){return a.indexOf(b)}:function(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c]===b)return c;return-1},t=0,u={};b(d.prototype,k.prototype),d.prototype.options={containerStyle:{position:"relative"},isInitLayout:!0,isResizeBound:!0,transitionDuration:"0.4s"},d.prototype._create=function(){this.packer=new g,this.reloadItems(),this.stampedElements=[],this.stamp(this.options.stamped);var a=this.options.containerStyle;b(this.element.style,a),this.options.isResizeBound&&this.bindResize();var c=this;this.handleDraggabilly={dragStart:function(a){c.itemDragStart(a.element)},dragMove:function(a){c.itemDragMove(a.element,a.position.x,a.position.y)},dragEnd:function(a){c.itemDragEnd(a.element)}},this.handleUIDraggable={start:function(a){c.itemDragStart(a.currentTarget)},drag:function(a,b){c.itemDragMove(a.currentTarget,b.position.left,b.position.top)},stop:function(a){c.itemDragEnd(a.currentTarget)}}},d.prototype.reloadItems=function(){this.items=this._getItems(this.element.children)},d.prototype._getItems=function(a){for(var b=this._filterFindItemElements(a),c=[],d=0,e=b.length;e>d;d++){var f=b[d],g=new h(f,this);c.push(g)}return c},d.prototype._filterFindItemElements=function(a){a=c(a);var b=this.options.itemSelector;if(!b)return a;for(var d=[],e=0,f=a.length;f>e;e++){var g=a[e];n(g,b)&&d.push(g);for(var h=g.querySelectorAll(b),i=0,j=h.length;j>i;i++)d.push(h[i])}return d},d.prototype.getItemElements=function(){for(var a=[],b=0,c=this.items.length;c>b;b++)a.push(this.items[b].element);return a},d.prototype.layout=function(){this._prelayout();var a=void 0!==this.options.isLayoutInstant?this.options.isLayoutInstant:!this._isLayoutInited;this.layoutItems(this.items,a),this._isLayoutInited=!0},d.prototype._init=d.prototype.layout,d.prototype._prelayout=function(){this.elementSize=m(this.element),this._getMeasurements(),this.packer.width=this.elementSize.innerWidth+this.gutter,this.packer.height=Number.POSITIVE_INFINITY,this.packer.reset(),this.maxY=0,this.placeStampedElements()},d.prototype._getMeasurements=function(){this._getMeasurement("columnWidth","width"),this._getMeasurement("rowHeight","height"),this._getMeasurement("gutter","width")},d.prototype._getMeasurement=function(a,b){var c,d=this.options[a];d?("string"==typeof d?c=this.element.querySelector(d):r(d)&&(c=d),this[a]=c?m(c)[b]:d):this[a]=0},d.prototype.layoutItems=function(a,b){var c=this._getLayoutItems(a);if(c&&c.length){this._itemsOn(c,"layout",function(){this.emitEvent("layoutComplete",[this,c])});for(var d=0,e=c.length;e>d;d++){var f=c[d];this._packItem(f),this._layoutItem(f,b)}}else this.emitEvent("layoutComplete",[this,[]]);var g=this.elementSize,h=this.maxY-this.gutter;g.isBorderBox&&(h+=g.paddingBottom+g.paddingTop+g.borderTopWidth+g.borderBottomWidth),h=Math.max(h,0),this.element.style.height=h+"px"},d.prototype._getLayoutItems=function(a){for(var b=[],c=0,d=a.length;d>c;c++){var e=a[c];e.isIgnored||b.push(e)}return b},d.prototype._packItem=function(a){this._setRectSize(a.element,a.rect),this.packer.pack(a.rect),this._setMaxY(a.rect)},d.prototype._setMaxY=function(a){this.maxY=Math.max(a.y+a.height,this.maxY)},d.prototype._setRectSize=function(a,b){var c=m(a),d=c.outerWidth,e=c.outerHeight,f=this.columnWidth+this.gutter,g=this.rowHeight+this.gutter;d=this.columnWidth?Math.ceil(d/f)*f:d+this.gutter,e=this.rowHeight?Math.ceil(e/g)*g:e+this.gutter,b.width=Math.min(d,this.packer.width),b.height=e},d.prototype._layoutItem=function(a,b){var c=a.rect;b?a.goTo(c.x,c.y):a.moveTo(c.x,c.y)},d.prototype._itemsOn=function(a,b,c){function d(){return e++,e===f&&c.call(g),!0}for(var e=0,f=a.length,g=this,h=0,i=a.length;i>h;h++){var j=a[h];j.on(b,d)}},d.prototype.stamp=function(a){if(a){"string"==typeof a&&(a=this.element.querySelectorAll(a)),a=c(a),this.stampedElements.push.apply(this.stampedElements,a);for(var b=0,d=a.length;d>b;b++){var e=a[b];this.ignore(e)}}},d.prototype.unstamp=function(a){if(a){a=c(a);for(var b=0,d=a.length;d>b;b++){var e=a[b],f=s(this.stampedElements,e);-1!==f&&this.stampedElements.splice(f,1),this.unignore(e)}}},d.prototype.placeStampedElements=function(){if(this.stampedElements&&this.stampedElements.length){this._getBounds();for(var a=0,b=this.stampedElements.length;b>a;a++){var c=this.stampedElements[a];this.placeStamp(c)}}},d.prototype._getBounds=function(){var a=this.element.getBoundingClientRect();this._boundingLeft=a.left+this.elementSize.paddingLeft,this._boundingTop=a.top+this.elementSize.paddingTop},d.prototype.placeStamp=function(a){var b,c=this.getItem(a);b=c&&c.isPlacing?c.placeRect:this._getElementOffsetRect(a),this._setRectSize(a,b),this.packer.placed(b),this._setMaxY(b)},d.prototype._getElementOffsetRect=function(a){var b=a.getBoundingClientRect(),c=new f({x:b.left-this._boundingLeft,y:b.top-this._boundingTop});return c.x-=this.elementSize.borderLeftWidth,c.y-=this.elementSize.borderTopWidth,c},d.prototype.handleEvent=function(a){var b="on"+a.type;this[b]&&this[b](a)},d.prototype.bindResize=function(){this.isResizeBound||(l.bind(a,"resize",this),this.isResizeBound=!0)},d.prototype.unbindResize=function(){l.unbind(a,"resize",this),this.isResizeBound=!1},d.prototype.onresize=function(){function a(){b.resize()}this.resizeTimeout&&clearTimeout(this.resizeTimeout);
var b=this;this.resizeTimeout=setTimeout(a,100)},d.prototype.resize=function(){var a=m(this.element),b=this.elementSize&&a;b&&a.innerWidth===this.elementSize.innerWidth||(this.layout(),delete this.resizeTimeout)},d.prototype.addItems=function(a){var b=this._getItems(a);if(b.length)return this.items.push.apply(this.items,b),b},d.prototype.appended=function(a){var b=this.addItems(a);b.length&&(this.layoutItems(b,!0),this.reveal(b))},d.prototype.prepended=function(a){var b=this._getItems(a);if(b.length){var c=this.items.slice(0);this.items=b.concat(c),this._prelayout(),this.layoutItems(b,!0),this.reveal(b),this.layoutItems(c)}},d.prototype.reveal=function(a){if(a&&a.length)for(var b=0,c=a.length;c>b;b++){var d=a[b];d.reveal()}},d.prototype.getItem=function(a){for(var b=0,c=this.items.length;c>b;b++){var d=this.items[b];if(d.element===a)return d}},d.prototype.getItems=function(a){if(a&&a.length){for(var b=[],c=0,d=a.length;d>c;c++){var e=a[c],f=this.getItem(e);f&&b.push(f)}return b}},d.prototype.remove=function(a){a=c(a);var b=this.getItems(a);this._itemsOn(b,"remove",function(){this.emitEvent("removeComplete",[this,b])});for(var d=0,e=b.length;e>d;d++){var f=b[d];f.remove();var g=s(this.items,f);this.items.splice(g,1)}},d.prototype.ignore=function(a){var b=this.getItem(a);b&&(b.isIgnored=!0)},d.prototype.unignore=function(a){var b=this.getItem(a);b&&delete b.isIgnored},d.prototype.sortItemsByPosition=function(){this.items.sort(function(a,b){return a.position.y-b.position.y||a.position.x-b.position.x})},d.prototype.fit=function(a,b,c){function d(){g++,2===g&&f.emitEvent("fitComplete",[f,e])}var e=this.getItem(a);if(e){this._getMeasurements(),this.stamp(e.element),e.getSize(),e.isPlacing=!0,b=void 0===b?e.rect.x:b,c=void 0===c?e.rect.y:c,e.positionPlaceRect(b,c,!0);var f=this,g=0;e.on("layout",function(){return d(),!0}),this.on("layoutComplete",function(){return d(),!0}),e.moveTo(e.placeRect.x,e.placeRect.y),this.layout(),this.unstamp(e.element),this.sortItemsByPosition(),e.isPlacing=!1,e.copyPlaceRectPosition()}},d.prototype.itemDragStart=function(a){this.stamp(a);var b=this.getItem(a);b&&b.dragStart()},d.prototype.itemDragMove=function(a,b,c){function d(){f.layout(),delete f.dragTimeout}var e=this.getItem(a);e&&e.dragMove(b,c);var f=this;this.clearDragTimeout(),this.dragTimeout=setTimeout(d,40)},d.prototype.clearDragTimeout=function(){this.dragTimeout&&clearTimeout(this.dragTimeout)},d.prototype.itemDragEnd=function(a){function b(){return g++,g!==f?!0:(d&&(i.remove(d.element,"is-positioning-post-drag"),d.isPlacing=!1,d.copyPlaceRectPosition()),h.unstamp(a),h.sortItemsByPosition(),d&&e&&h.emitEvent("dragItemPositioned",[h,d]),!0)}var c,d=this.getItem(a);if(d&&(c=d.didDrag,d.dragStop()),!d||!c&&!d.needsPositioning)return this.unstamp(a),void 0;i.add(d.element,"is-positioning-post-drag");var e=d.needsPositioning,f=e?2:1,g=0,h=this;e?(d.on("layout",b),d.moveTo(d.placeRect.x,d.placeRect.y)):d&&d.copyPlaceRectPosition(),this.clearDragTimeout(),this.on("layoutComplete",b),this.layout()},d.prototype.bindDraggabillyEvents=function(a){a.on("dragStart",this.handleDraggabilly.dragStart),a.on("dragMove",this.handleDraggabilly.dragMove),a.on("dragEnd",this.handleDraggabilly.dragEnd)},d.prototype.bindUIDraggableEvents=function(a){a.on("dragstart",this.handleUIDraggable.start).on("drag",this.handleUIDraggable.drag).on("dragstop",this.handleUIDraggable.stop)},d.prototype.destroy=function(){this.element.style.position="",this.element.style.height="",delete this.element.packeryGUID;for(var a=0,b=this.items.length;b>a;a++){var c=this.items[a];c.destroy()}this.unbindResize()},d.data=function(a){var b=a.packeryGUID;return b&&u[b]},j(function(){for(var a=o.querySelectorAll(".js-packery"),b=0,c=a.length;c>b;b++){var e,f=a[b],g=f.getAttribute("data-packery-options");try{e=g&&JSON.parse(g)}catch(h){p&&p.error("Error parsing data-packery-options on "+f.nodeName.toLowerCase()+(f.id?"#"+f.id:"")+": "+h);continue}var i=new d(f,e);q&&q.data(f,"packery",i)}}),q&&q.bridget&&q.bridget("packery",d),d.Rect=f,d.Packer=g,d.Item=h,a.Packery=d}(window),define("plugins/packery/packery.pkgd",function(){});var __bind=function(a,b){return function(){return a.apply(b,arguments)}};!function(a){var b,c,d;return d=Packery.prototype.layoutItems,Packery.prototype.layoutItems=function(a,b){return this.maxY=0,d.call(this,a,b)},Packery.Item.prototype.removeElem=function(){return a(this.element).addClass("hidden"),!1},b=function(){function b(){this.onResize=__bind(this.onResize,this),console.log("JJPackery"),this.members(),this.init(),this.start()}return b.prototype.members=function(){return this.$window=a(),this.$container=a(),this.$sizing=a(),this.$packeryEl=a(),this.packery=null,this.resizeTimeout=null,this.updateLayout=!0,this.fitInWindow=!0,this.rendered=0,this.onResizeLayout=!1,this.layoutIsComplete=!1,this.started=!1,this.itemDimensions=[],this.itemSelector=".packery-item",this.transitionDuration=".4s",this.factor=.3},b.prototype.randomizeDimensions=function(){var b,c,d;return c=1,d=.5,b=10,a(this.itemSelector,this.$packeryEl).each(function(e,f){var g,h,i,j;return g=a(f),g.hasClass("resizable")?(j=g.width(),i=g.height(),h=Math.min(c,Math.max(d,Math.random()*(c+d))),console.log(h),g.width(Math.floor(j*h/b)*b),g.height(Math.floor(i*h/b)*b)):void 0})},b.prototype.init=function(){return this.$window=a(window),this.$container=a(".packery-wrapper"),this.$sizing=a(".packery-test",this.$container),this.$packeryEl=a(".packery",this.$container),this.fitInWindow?this.$packeryEl.addClass("fit-in-window").css("max-height",this.$window.height()):void 0},b.prototype.calcAndLayout=function(){return this.packery&&this.updateLayout?(console.log("calc and relayout"),this.fitInWindow&&this.calc(),this.packery.layout()):void 0},b.prototype.setToCenter=function(){var a,b;return b=this.$window.height(),a=this.$packeryEl.height(),b>=a?this.$packeryEl.css("top",Math.floor((b-a)/2)):this.$packeryEl.css("top",0)},b.prototype.hiddenLayout=function(){return this.onResizeLayout=!0,this.packery.layout(),this.onResizeLayout=!1},b.prototype.onResize=function(){return this.fitInWindow&&(this.calc(),this.$packeryEl.css("max-height",this.$window.height())),this.layoutIsComplete||(console.log("not layoutIsComplete"),this.layoutIsComplete=!0,this.packery.layout()),this.packery.layout(),this.setToCenter(),this.layoutIsComplete&&!this.started?(console.log("started"),this.started=!0,this.show()):void 0},b.prototype.getCenterPos=function(a){var b,c;return c=a.offset(),b={top:c.top+a.height()/2,left:c.left+a.width()/2}},b.prototype.getLineDistance=function(a,b){var c,d;return c=d=0,c=b.left-a.left,c*=c,d=b.top-a.top,d*=d,Math.sqrt(c+d)},b.prototype.applyRadialGravityEffect=function(){var b,c=this;return b=this.getCenterPos(this.$packeryEl),a.each(this.packery.getItemElements(),function(a,d){return c._applyRadialGravityEffectToElement(d,b)})},b.prototype._applyRadialGravityEffectToElement=function(b,c){var d,e,f,g,h,i,j,k,l;return d=a(b),g=this.getCenterPos(d),j={top:g.top,left:c.left},e=j.top-c.top,f=g.left-j.left,h=this.getLineDistance(c,g)*this.factor/200,l=e/Math.abs(e)*h*this.getLineDistance(c,j),k=f/Math.abs(f)*h*this.getLineDistance(g,j),i={"margin-top":l,"margin-left":k},a("> div",d).css(i),!0},b.prototype.initTooltips=function(){var b=this;return a.each(this.packery.getItemElements(),function(a,c){return b._initTooltip(c)}),!1},b.prototype._initTooltip=function(b){var c,d,e,f,g,h,i,j,k,l,m;return k=!0,l=!0,e={},m=null,h=null,i=function(){return h&&clearTimeout(h),h=setTimeout(function(){return k&&l?(c.add(e.tooltip).off("mouseleave.tooltip"),e.hide()):void 0},200)},c=a(b),d=a("section[role=tooltip-content]",c),j=-20,g=function(b){var c,d;return d=j,c=a(b.tooltip),c.hasClass("qtip-pos-rb")&&(console.log("inverse margin"),d*=-1),d},d.length?(f=this,c.qtip({content:{text:d.html()},show:{delay:500,event:"mouseenter",effect:function(b){return c.addClass("has-tooltip"),a(this).stop(!0,!0).css({"margin-left":g(b)}).show().animate({"margin-left":0,opacity:1},200),b.tooltip&&a(b.tooltip).one("mouseenter.tooltip",function(){return l=!1}),c.add(b.tooltip).one("mouseleave.tooltip",function(b){return a(b.target).closest(".qtip").length?l=!0:k=!0,i()})}},hide:{event:!1,effect:function(b){return a(this).stop(!0,!0).animate({"margin-left":g(b),opacity:0},200,function(){return c.removeClass("has-tooltip"),a(this).hide()})}},position:{at:"right bottom",my:"left bottom",viewport:this.$container,adjust:{method:"flip shift",x:0,y:10}}}),e=c.qtip("api"),a("> div > a",c).on("mouseleave",function(){return k=!0,i()})):void 0},b.prototype.update=function(){return this.packery?this.packery.layout():void 0},b.prototype.destroy=function(){return this.packery?this.packery.destroy():void 0},b.prototype.calc=function(){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t;l=.7,d=.05,n=this.$window.height()*this.$window.width(),j=0,h=0,o=0,c=this.$packeryEl.find(".stamp"),c.each(function(b,c){var d;return d=a(c),o+=d.width()*d.height()}),q=this.packery.getItemElements();for(g in q)i=q[g],b=a(i),h+=b.width()*b.height();if(j=h+o,h/n>l+d){k=this.packery.getItemElements(),s=[];for(g in k)i=k[g],b=a(i),b.width(b.width()*l),s.push(b.height(b.height*l));return s}if(l-d>h/n){f=n/h-d,r=this.packery.items,t=[];for(g in r)i=r[g],e=i.initialDimensions,e&&(b=a(i.element),p=b.width(),m=Math.min(e.width,p*f),t.push(b.width(m)));return t}},b.prototype.saveItemDimensions=function(){var a,b,c;c=this.packery.items;for(a in c)b=c[a],b.initialDimensions={width:b.rect.width,height:b.rect.height};return!1},b.prototype.show=function(){return this.packery.options.transitionDuration=this.transitionDuration,this.saveItemDimensions(),this.setToCenter(),this.initTooltips(),this.applyRadialGravityEffect(),this.$container.addClass("loaded").addClass("has-gravity")},b.prototype.hideElement=function(a){var b;return this.packery&&(b=this.packery.getItem(a),!b.isIgnored)?(this.packery.ignore(a),b.remove(),this.packery.layout()):void 0},b.prototype.showElement=function(b){var c;return this.packery&&(a(b).removeClass("hidden"),c=this.packery.getItem(b),c.isIgnored)?(this.packery.unignore(b),c.reveal(),this.packery.layout()):void 0},b.prototype.start=function(){var a=this;return this.$container.imagesLoaded(function(){return a.$packeryEl.length?(a.randomizeDimensions(),a.packery=new Packery(a.$packeryEl[0],{containerStyle:null,itemSelector:a.itemSelector,gutter:0,stamped:".stamp",transitionDuration:0,isResizeBound:!1,isInitLayout:!1}),a.packery.maxY=a.$window.height(),a.packery.on("layoutComplete",function(){return a.rendered++,1===a.rendered?console.log("hidden trigger"):(console.log("completed"),a.layoutIsComplete=!0),console.log("layout is complete"),!1}),a.$window.on("resize",function(){return a.resizeTimeout&&clearTimeout(a.resizeTimeout),a.resizeTimeout=setTimeout(a.onResize,200)}),a.onResize()):void 0})},b}(),c=function(){return console.error('JJPackeryMan is deprecated! Use "new JJPackeryClass()" instead!'),new b},window.JJPackeryClass=b,window.JJPackeryMan=c}(jQuery),define("plugins/packery/packerytest",function(){}),define("modules/JJPackery",["app","plugins/packery/packerytest"],function(a){var b;return b=a.module(),b.Views.Container=Backbone.View.extend({tagName:"section",className:"packery-wrapper",template:"packery-container",afterRender:function(){return this.packery=new JJPackeryClass,this._afterRender?this._afterRender():void 0}}),b}),define("modules/Portfolio",["app","modules/JJPackery"],function(a,b){var c;return c=a.module(),c.Config={person_group_length:4,group_project_title:"Group project"},c.Views.PackeryContainer=b.Views.Container.extend({cleanup:function(){return Backbone.Events.off("search",this.handleSearch)},initialize:function(){return Backbone.Events.on("search",this.handleSearch,this)},handleSearch:function(a){return this.__manager__.hasRendered?this.triggerSearchOnChildren(a):(this.searchResults=a,this.doSearchAfterRender=!0)},triggerSearchOnChildren:function(a){var b=this;return console.log("search on children"),console.log(a),_.each(this.views[".packery"],function(c){var d,e,f;return f=c.model,a?(d=_.find(a,function(a){return a===c.model}),e=d?"showElement":"hideElement",b.packery[e](c.el)):b.packery.showElement(c.el)})},beforeRender:function(){var a,b,d,e,f;if(console.log("portfolio before render"),b=this.collection){for(f=[],d=0,e=b.length;e>d;d++)a=b[d],f.push(this.insertView(".packery",new c.Views.ListItem({model:a,linkTo:this.options.linkTo})));return f}},_afterRender:function(){return this.doSearchAfterRender?(this.triggerSearchOnChildren(this.searchResults),this.doSearchAfterRender=!1,this.searchResults=null):void 0}}),c.Views.ListItem=Backbone.View.extend({tagName:"article",className:"packery-item resizable",template:"packery-list-item",doShow:function(){return console.log("showing %o",this.model),this.$el.removeClass("hidden")},doHide:function(){return console.log("hiding %o",this.model),this.$el.addClass("hidden")},serialize:function(){var a;return a=this.model?this.model.toJSON():{},a.Persons=_.sortBy(a.Persons,function(a){return a.Surname}),a.LinkTo=this.options.linkTo,a}}),c.Views.Detail=Backbone.View.extend({tagName:"article",className:"portfolio-detail",template:"portfolio-detail",beforeRender:function(){return this._codeEv=$.Event("code:kickoff",{bubbles:!1}),this._afterRenderEv=$.Event("portfoliodetail:rendered")},afterRender:function(){var a;return window.picturefill(),a=$(document),a.trigger(this._codeEv),a.trigger(this._afterRenderEv)},appropriateUrl:function(a,b){null==b&&(b=!1)},serialize:function(){var a,b,d,e,f,g,h,i=this;for(h=["Projects","ChildProjects","ParentProjects","Exhibitions","Workshops","Excursions"],f=0,g=h.length;g>f;f++)d=h[f],a=this.model.get(d),a&&a.each(function(a){return a.setTempUrlPrefix(i.ownedByPerson)});return b=this.model?this.model.toJSON():{},e=["Projects","ChildProjects","ParentProjects"],b.Persons=_.sortBy(b.Persons,function(a){return a.Surname}),parseInt(b.Persons.length)>parseInt(c.Config.person_group_length)&&(b.IsGroup=!0),b.combinedProjects=[],_.each(e,function(a){return _.isArray(b[a])?b.combinedProjects=b.combinedProjects.concat(b[a]):void 0}),console.log(b),b}}),Handlebars.registerHelper("nameSummary",function(a){var b,d,e;return b=c.Config,a.length<=b.person_group_length?(e="",d=a.length,_.each(a,function(a,b){return e+='<a href="/about/'+a.UrlSlug+'/">'+a.FirstName+" "+(a.Surname?a.Surname:"")+"</a>",d-2>b?e+=", ":d-1>b?e+=" &amp; ":void 0}),e):b.group_project_title}),Handlebars.registerHelper("niceDate",function(a,b){var c;return a.DateRangeNice||a.FrontendDate?(c="",a.DateRangeNice?c+=a.DateRangeNice:a.FrontendDate&&(c+=b?a.FrontendDate.split(" ")[1]:a.FrontendDate),c):!1}),Handlebars.registerHelper("teaserMeta",function(){var a,b;return b=Handlebars.helpers.niceDate(this,!0),"Project"===this.ClassName?(a=Handlebars.helpers.nameSummary(this.Persons),""+a+" // "+b):b}),Handlebars.registerHelper("SpaceAndLocation",function(){var a;return a=[],this.Space&&a.push(this.Space),this.Location&&a.push(this.Location),a.join(", "),a?"<p>"+a+"</p>":void 0}),Handlebars.registerHelper("portfoliolist",function(a,b,c){var d,e;return c||(c=b,b=""),d=0,e="<ul>",_.each(a,function(a){return a.IsPublished?(e+='<li><a href="/'+a.TempUrlPrefix+"/"+a.UglyHash+'/">'+a.Title+"</a></li>",d++):void 0}),e+="</ul>",b+=d>1?"s":"",d?"<h4>"+b+"</h4>"+e:""}),Handlebars.registerHelper("personlist",function(a){var b;return b="<ul>",_.each(a,function(a){return b+='<li><a href="/about/'+a.UrlSlug+'/">'+a.FirstName+" "+(a.Surname?a.Surname:"")+"</a></li>"}),b+="</ul>","<h4>Contributors</h4>"+b}),Handlebars.registerHelper("commaSeparatedWebsites",function(a){var b;return b=[],_.each(a,function(a){return b.push('<a href="'+a.Link+'">'+a.Title+"</a>")}),b.join(", ")}),c}),define("modules/Person",["app","modules/JJPackery","modules/Portfolio"],function(a,b,c){var d;return d=a.module(),JJRestApi.Modules.extend("Person",function(){return JJRestApi.extendModel("Person",{getLinkingSlug:function(){return this.get("IsEmployee")?"employee":this.get("IsStudent")?"student":this.get("IsAlumni")?"alumni":""},getFullName:function(){return this.get("FullName")?this.get("FullName"):(this.get("FirstName")?this.get("FirstName"):"")+" "+(this.get("Surname")?this.get("Surname"):"")}}),JJRestApi.extendCollection("Person",{comparator:function(a){return a.get("Surname")}})}),d.Views.PackeryContainer=b.Views.Container.extend({beforeRender:function(){var b,e,f,g,h,i,j,k,l,m,n,o,p;for(console.log("render person page with normal view"),e=[],h=this.model.relations,o=a.Config.ProjectTypes,i=0,l=o.length;l>i;i++)for(f=o[i],j=0,m=h.length;m>j;j++)g=h[j],g.collectionType===f&&(e=e.concat(this.model.get(g.key).models));for(this.insertView(".packery",new d.Views.InfoItem({model:this.model})),p=[],k=0,n=e.length;n>k;k++)b=e[k],b.get("IsPublished")?p.push(this.insertView(".packery",new c.Views.ListItem({model:b,linkTo:"about/"+this.model.get("UrlSlug")}))):p.push(void 0);return p}}),d.Views.InfoItem=Backbone.View.extend({tagName:"article",className:"packery-item person-info",template:"person-info-item",events:{"click a.vcf-download":"downloadVcf"},downloadVcf:function(a){var b,c;return a.preventDefault(),c="BEGIN:VCARD\rVERSION:3.0\rCLASS:PUBLIC\rFN:"+this.model.get("FirstName")+" "+this.model.get("Surname")+"\rN:"+this.model.get("Surname")+";"+this.model.get("FirstName")+" ;;;\r",this.model.get("Email")&&(c+="EMAIL;TYPE=INTERNET:"+this.model.get("Email")+"\r"),this.model.get("Phone")&&(c+="TEL;TYPE=PREF:"+this.model.get("Phone")+"\r"),c+="END:VCARD",b="data:text/vcard,"+encodeURIComponent(c),window.location.href=b,!1},serialize:function(){return this.model?this.model.toJSON():void 0}}),d.Views.Custom=Backbone.View.extend({tagName:"div",className:"custom-templ",initialize:function(a){return a.template?this.template=a.template:void 0},serialize:function(){return this.model?this.model.toJSON():{}},beforeRender:function(){return this._ev=$.Event("template:ready",{bubbles:!1})},afterRender:function(){return $(document).trigger(this._ev)}}),Handlebars.registerHelper("personMeta",function(){var a,b,c;return b="",c=[],a=!1,this.IsStudent&&c.push("Student"),this.IsAlumni&&c.push("Alumni"),this.IsEmployee&&c.push(this.JobTitle||"Employee"),this.IsExternal&&c.push("External"),c.length?(b+=c.join(", "),this.GraduationYear&&(b+=" // ",b+=this.MasterYear?this.MasterYear:this.GraduationYear),b):""}),Handlebars.registerHelper("website",function(){var a,b;return a=this.Link||"#",b=this.Title||a,'<a href="'+a+'">'+b+"</a>"}),d}),define("modules/Excursion",["app","modules/SuperProject"],function(a,b){var c;return c=a.module(),JJRestApi.Modules.extend("Excursion",function(){return JJRestApi.extendModel("Excursion",b.Model,{foo:"bar"}),JJRestApi.extendCollection("Excursion",{foo:"bar"})}),c}),define("modules/Workshop",["app","modules/SuperProject"],function(a,b){var c;return c=a.module(),JJRestApi.Modules.extend("Workshop",function(){return JJRestApi.extendModel("Workshop",b.Model,{foo:"bar"}),JJRestApi.extendCollection("Workshop",{foo:"bar"})}),c}),define("modules/Exhibition",["app","modules/SuperProject"],function(a,b){var c;return c=a.module(),JJRestApi.Modules.extend("Exhibition",function(){return JJRestApi.extendModel("Exhibition",b.Model,{foo:"bar"}),JJRestApi.extendCollection("Exhibition",{foo:"bar"})}),c}),define("modules/CalendarEntry",["app"],function(a){var b;return b=a.module(),JJRestApi.Modules.extend("CalendarEntry",function(){return JJRestApi.extendModel("CalendarEntry",{foo:"bar"}),JJRestApi.extendCollection("CalendarEntry",{foo:"bar"})}),b}),define("modules/PageError",["app"],function(a){var b;return b=a.module(),b.Views.FourOhFour=Backbone.View.extend({template:"404",tagName:"div",className:"page-error",serialize:function(){return{url:this.attributes["data-url"]}}}),b}),define("modules/Calendar",["app"],function(a){var b;return b=a.module(),b.Views.Container=Backbone.View.extend({id:"calendar-container",template:"calendar-container",initialize:function(){return this.upcomingEvents=this.collection.where({IsUpcoming:!0})},serialize:function(){var a;return a={},this.upcomingEvents&&this.upcomingEvents.length&&(a.HasItems=!0),a},beforeRender:function(){var a,c,d,e,f;for(e=this.upcomingEvents,f=[],c=0,d=e.length;d>c;c++)a=e[c],f.push(this.insertView("#calendar-list",new b.Views.ListItem({model:a})));return f}}),b.Views.ListItem=Backbone.View.extend({tagName:"li",className:"calendar-list-item",template:"calendar-list-item",serialize:function(){return this.model?this.model.toJSON():{}}}),b.Views.Detail=Backbone.View.extend({tagName:"article",className:"portfolio-detail",template:"calendar-detail",afterRender:function(){return window.picturefill()},serialize:function(){return this.model?this.model.toJSON():{}}}),b}),define("modules/About",["app","modules/JJPackery"],function(a,b){var c;return c=a.module(),c.Views.PackeryContainer=b.Views.Container.extend({template:"about-packery",initialize:function(a){return this.groupImage=a.groupImage,this.persons=a.persons},beforeRender:function(){var a,b,d,e,f,g,h,i,j,k,l,m,n;if(this.persons){for(k=this.persons.students,e=0,h=k.length;h>e;e++)d=k[e],this.insertView("#student-list",new c.Views.PersonListItem({model:d}));for(l=this.persons.alumnis,f=0,i=l.length;i>f;f++)a=l[f],this.insertView("#alumni-list",new c.Views.PersonListItem({model:a}));for(m=this.persons.employees,n=[],g=0,j=m.length;j>g;g++)b=m[g],n.push(this.insertView(".packery",new c.Views.EmployeeItem({model:b})));return n}},afterRender:function(){return $(document).trigger($.Event("about:rendered")),JJPackeryMan()},serialize:function(){return{GroupImage:this.groupImage}}}),c.Views.PersonListItem=Backbone.View.extend({tagName:"li",template:"person-list-item",serialize:function(){return this.model.toJSON()}}),c.Views.EmployeeItem=Backbone.View.extend({tagName:"section",className:"person packery-item",template:"employee-item",serialize:function(){return this.model.toJSON()}}),c}),define("modules/NewProject",["app"],function(a){var b;return b=a.module(),b.Views.NewProject=Backbone.View.extend({tagName:"div",template:"security/create-project",events:{"submit form.create-project":"createNewProject","click .project-type-list a":"setProjectType"},hideForm:function(){return this.$field.blur(),this.formError(""),this.$form.removeClass("active")},showForm:function(){return this.$submit.text("Create "+this.projectType),this.$field.attr("placeholder",this.projectType+" Title").removeAttr("disabled").val("").focus(),this.formError(""),this.$form.addClass("active")},formError:function(a){return a?this.$error.html(a).addClass("active"):this.$error.removeClass("active")},setProjectType:function(a){var b,c;return b=$(a.target),b.closest("ul").find(".active").not(b).removeClass("active").end().end().end().toggleClass("active"),b.hasClass("active")?(this.$list.addClass("active"),c=$(a.currentTarget).data("type"),c&&(this.projectType=c),this.showForm()):(this.$list.removeClass("active"),this.projectType=null,this.hideForm()),!1},afterRender:function(){var a=this;return this.$list=$("ul.project-type-list"),this.$form=$("form.create-project"),this.$field=$("input",this.$form),this.$error=$(".form-error",this.$form),this.$submit=$("button[type=submit]",this.$form),this.$field.on("keyup",function(){return a.$error.hasClass("active")&&a.$field.val()?a.formError(""):void 0})},createNewProject:function(b){var c,d,e,f,g,h=this;return b.preventDefault(),g=this.$field.val(),c="",g||(c="Please fill in a title!"),this.projectType||(c="Please choose the type of your project!"),c?(this.formError(c),this.$field.focus()):(f=a.CurrentMemberPerson)&&(this.$field.attr("disabled","disabled"),d=JJRestApi.Model(this.projectType),e=new d({Title:g,Persons:f}),e.save(null,{success:function(){return h.$field.removeAttr("disabled"),e._isCompletelyFetched=!0,e._isFetchedWhenLoggedIn=!0,Backbone.history.navigate("/secured/edit/"+e.get("UglyHash")+"/",!0)},error:function(a){var b;return b="<h1>"+a.status+": "+a.statusText+"</h1><p>"+a.responseText+"</p>",h.formError(b),h.$field.removeAttr("disabled")}})),!1}}),b}),define("modules/DocImage",["app"],function(a){var b;return b=a.module(),JJRestApi.Modules.extend("DocImage",function(){return JJRestApi.extendModel("DocImage",{isVisibleForMember:function(){var a,b=this;return a=!1,_.each(["Projects","Workshops","Exhibitions","Excursions"],function(c){return b.get(c).findWhere({EditableByMember:!0})?a=!0:void 0}),a}}),JJRestApi.extendCollection("DocImage",{foo:"bar"})})});var __hasProp={}.hasOwnProperty,__extends=function(a,b){function c(){this.constructor=a}for(var d in b)__hasProp.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};define("modules/NMMarkdownParser",["app","modules/DataRetrieval","modules/DocImage"],function(a,b){var c,d,e,f;return c=function(a){function c(){return e=c.__super__.constructor.apply(this,arguments)}return __extends(c,a),c.prototype.className="DocImage",c.prototype.rule=/\[img\s{1,}(.*?)\]/gi,c.prototype.parseFound=function(a){return parseInt(a)},c.prototype.isVisibleForMember=function(){return _.each},c.prototype.getData=function(a){var c,d=this;return this.data=[],c=new $.Deferred,b.forMultipleDocImages(a).done(function(a){var b;return b=[],_.each(a,function(a){return a.isVisibleForMember()?b.push(a):void 0}),_.each(b,function(a){var b;return b=a.get("Urls")._1200.Url,d.data.push({id:a.id,tag:'<span><img src="'+b+'" /></span>'})}),c.resolve()}),c},c}(CustomMarkdownParser),d=function(a){function b(){return f=b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.rule=/\[embed\s{1,}(.*?)\]/gi,b.prototype.url="/_md_/oembed/",b}(CustomMarkdownParser),window.ImageMarkdownParser=c,window.OEmbedMarkdownParser=d}),define("modules/ProjectEditor",["app","modules/DataRetrieval","modules/Auth","modules/Portfolio","modules/Website","modules/NMMarkdownParser"],function(a,b,c,d,e){var f;return f=a.module(),f.Inst=function(){function b(b){this.model=b,this.containerView=new f.Views.Container({model:this.model}),this.previewView=new f.Views.Preview({model:this.model}),this.mainView=new f.Views.Main({model:this.model}),this.modelJSON=_.extend(this.model.toJSON(),{CurrentMemberPerson:a.CurrentMemberPerson.toJSON()}),Backbone.Events.trigger("projectEdited",this.model),this.model.on("saved",this.modelHasSaved,this)}return b.prototype.kickOffRender=function(){return a.layout.setViewAndRenderMaybe("#project-editor",this.containerView)},b.prototype.getFilterID=function(){return""+this.model.get("ClassName")+"-"+this.model.id},b.prototype.toggleView=function(){return this.containerView.toggleView()},b.prototype.galleryImageRemoved=function(a){var b;return b=this.model.get("PreviewImage"),b&&b.id===a?this.previewView.removePreviewImage():void 0},b.prototype.modelHasSaved=function(){var a,b;return b=this.model.get("Title"),a='[data-editor-name="Title"]',this.previewView.$el.find(a).text(b),this.mainView.$el.find(a).text(b)},b.prototype.cleanup=function(){return this.model.off("saved",this.modelHasChanged)},b}(),f.Views.Container=Backbone.View.extend({tagName:"div",className:"editor-project-container",template:"security/editor-project-container",ACTIVE:"active",beforeRender:function(){return this.setView(".editor-project-main",a.ProjectEditor.mainView),this.setView(".editor-project-preview",a.ProjectEditor.previewView)},toggleView:function(){var a,b,c;c=this.views;for(a in c)b=c[a],b.editor&&b.editor.trigger("editor.closepopovers");return $(".editor-project-main, .editor-project-preview").toggleClass(this.ACTIVE)}}),f.Views.Preview=Backbone.View.extend({tagName:"article",template:"security/editor-project-preview",FILLED:"filled",cleanup:function(){return this.uploadZone.cleanup()},initDropzone:function(){var c=this;return a.ProjectEditor.PreviewImageZone=this.uploadZone=new JJSingleImageUploadZone(".preview-image",{url:a.Config.DocImageUrl,additionalData:{projectId:a.ProjectEditor.model.id,projectClass:a.ProjectEditor.model.get("ClassName")},getFromCache:function(a){return b.forDocImage(a)},responseHandler:function(d){var e,f;return f=function(b,d){var e;return e=b.get("Urls")._320,c.uploadZone.$dropzone.addClass(c.FILLED).html('<img src="'+e.Url+'" />'),_.indexOf(c.model.get("Images").getIDArray(),b.id)<0&&(e=[{FilterID:a.ProjectEditor.getFilterID(),UploadedToClass:"DocImage",id:b.id,url:d}],a.updateGalleryCache(e),Backbone.Events.trigger("DocImageAdded",e)),c.model.get("PreviewImage")!==b?(c.model.set("PreviewImage",b),c.model.get("Images").add(b),c.model.rejectAndSave()):void 0},1==d instanceof Backbone.Model?(e=$("#editor-sidebar").find('li.DocImage img[data-id="'+d.id+'"]'),f(d,e.attr("src"))):b.forDocImage(d[0].id).done(function(a){return f(a,d[0].url)})}}),this},initEditor:function(){var a=this;return this.editor=new JJEditor($(".meta"),["InlineEditable","DateEditable","MarkdownEditable"]),this.editor.on("stateUpdate",function(b){var c,d,e,f;e=!1,f=b.ProjectPreview;for(c in f)d=f[c],"TeaserText"===c&&d&&(d=d.raw),d&&a.model.get(c)!==d&&(e=!0,a.model.set(c,d));return e?a.model.rejectAndSave():void 0}),this},removePreviewImage:function(){return this.uploadZone.$dropzone.removeClass(this.FILLED).empty()},afterRender:function(){return this.initDropzone(),this.initEditor()},serialize:function(){return a.ProjectEditor.modelJSON}}),f.Views.Main=Backbone.View.extend({tagName:"article",template:"security/editor-project-main",initEditor:function(){var b,c=this;return this.editor=new JJEditor(this.$el,["InlineEditable","DateEditable","SplitMarkdownEditable","SelectEditable","SelectPersonEditable","SelectListEditable","SelectListConfirmEditable","ModalEditable"]),b=this.editor.getComponentByName("ProjectMain.Text").markdown,_.extend(b.options,{additionalPOSTData:{projectId:a.ProjectEditor.model.id,projectClass:a.ProjectEditor.model.get("ClassName")},uploadResponseHandler:function(b){return a.updateGalleryCache(b),Backbone.Events.trigger("DocImageAdded",b)}}),this.editor.on("editor.open-split-markdown",function(){return $("#layout").addClass("open-split-markdown")}),this.editor.on("editor.close-split-markdown",function(){return $("#layout").removeClass("open-split-markdown")}),this.editor.on("stateUpdate",function(a){return c.stateUpdate(a)}),this.editor.on("submit:ProjectMain.Website",function(a){var b,d;return a.Title&&a.Link?(b=JJRestApi.Model("Website"),d=new b({Title:a.Title,Link:a.Link}),c.model.get("Websites").add(d),c.addWebsiteView(d,!0),c.model.save()):void 0}),this},stateUpdate:function(c){var d,e,f,g,h,i,j,k,l,m,n,o=this;console.group("STATE UPDATE"),console.log("this: %o",this),console.log("state: ",c.ProjectMain),l=!1,m=!1,n=c.ProjectMain;for(e in n)j=n[e],"Text"===e?(h=j.raw?j.raw:"",h!==this.model.get("Text")&&(l=!0,this.model.set("Text",h)),j.images&&_.each(j.images.ids,function(c){var d;return d=!1,o.model.get("Images").each(function(a){return a.id===c?d=!0:void 0}),d?void 0:b.forDocImage(c).done(function(b){var c,d;return o.model.get("Images").add(b),c=a.getFromGalleryCache("DocImage",b.id),d=[{FilterID:a.ProjectEditor.getFilterID(),UploadedToClass:"DocImage",id:b.id,url:c.url}],a.updateGalleryCache(d),Backbone.Events.trigger("DocImageAdded",d)})})):_.indexOf(["Excursion","Exhibition","Workshop","Project"],e)>=0?(g="Project"===e&&"Project"===this.model.get("ClassName")?"ChildProjects":e+"s",this.model.setRelCollByIds(g,j)&&(l=!0)):"Person"===e?(j.push(a.CurrentMemberPerson.id),this.model.setRelCollByIds("Persons",j)&&(m=!0,l=!0)):"Category"===e?this.model.setRelCollByIds("Categories",j)&&(l=!0):"BlockedEditors"===e||"Editors"===e?(_.difference(j,a.ProjectEditor[e]).length>0||_.difference(a.ProjectEditor[e],j).length>0)&&(a.ProjectEditor[e]=j,i={className:this.model.get("ClassName"),id:this.model.id,editors:j},d=a.ProjectEditor.ChangeEditorsPost,d&&4!==d.readyState&&d.abort(),f=a.ProjectEditor.ChangeEditorsPost=$.post(a.Config.ChangeEditorsUrl,i),f.done(function(b){return _.difference(b,a.ProjectEditor[e]).length>0||_.difference(a.ProjectEditor[e],b).length>0?(console.log("change to confirmed"),a.ProjectEditor[e]=b,m=!0):void 0
})):"Title"===e&&this.model.get("Title")!==j&&(this.model.set("Title",j),l=!0);return console.groupEnd(),l&&(k=this.model.rejectAndSave())?k.done(function(){return m?o.populateEditorsSelectable(o.model.getEditorsKey(),!1):void 0}):void 0},populateSelectEditables:function(){var b,c,d,e,f,g,h,i,j,k,l=this;for(b={Person:function(b){var c,d,e;return d=[],c=a.CurrentMemberPerson.id,_.each(b,function(a){return a.ID!==c?d.push(a):void 0}),e=_.without(l.model.get("Persons").getIDArray(),c),{source:d,values:e}},Category:function(a){return{source:a,values:l.model.get("Categories").getIDArray()}}},i=["Project","Excursion","Exhibition","Workshop"],d=function(a){return b[a]=function(b){var c,d;return c=[],_.each(b,function(b){return l.model.get("ClassName")!==a||l.model.id!==b.ID?c.push(b):void 0}),d=l.model.idArrayOfRelationToClass(a),{source:c,values:d}}},e=0,g=i.length;g>e;e++)c=i[e],d(c);for($.getJSON(a.Config.BasicListUrl).done(function(a){var c,d,e,f,g;for(_.isObject(a)&&(l.basicList=a),c=["select-list","select-person"],d=l.editor.getComponentsByType("select"),f=0,g=c.length;g>f;f++)e=c[f],d=d.concat(l.editor.getComponentsByType(e));return d&&l.basicList?$.each(d,function(a,c){var d,e;return d=c.getDataName(),l.basicList[d]&&(b[d]&&(e=b[d](l.basicList[d])),e)?(c.setSource(e.source,!0),c.setValue(e.values,!0)):void 0}):void 0}),j=["BlockedEditors","Editors"],k=[],f=0,h=j.length;h>f;f++)c=j[f],k.push(function(b){var c;return(c=l.editor.getComponentByName("ProjectMain."+b))?$.getJSON(a.Config.GetEditorsUrl,{className:l.model.get("ClassName"),id:l.model.id}).done(function(c){return _.isArray(c)?(a.ProjectEditor[b]=c,l.populateEditorsSelectable(b)):void 0}):void 0}(c));return k},populateEditorsSelectable:function(b,c){var d,e,f;return null==c&&(c=!0),(f=this.editor.getComponentByName("ProjectMain."+b))?(e=this.model.basicListWithoutCurrentMember("Persons"),d=_.map(e,function(a){return a.ID}),f.setSource(e,c),a.ProjectEditor[b]=_.intersection(a.ProjectEditor[b],d),f.setValue(a.ProjectEditor[b],c)):void 0},addWebsiteView:function(a,b){var c;return c=new e.Views.ListView({model:a}),this.insertView(".websites",c),b&&c.render(),!0},serialize:function(){return a.ProjectEditor.modelJSON},beforeRender:function(){var a=this;return this.model.get("Websites").each(function(b){return a.addWebsiteView(b)})},afterRender:function(){return this.initEditor(),this.populateSelectEditables()}}),f}),define("router",["app","modules/Auth","modules/Project","modules/Person","modules/Excursion","modules/Workshop","modules/Exhibition","modules/CalendarEntry","modules/PageError","modules/Portfolio","modules/Calendar","modules/About","modules/ProjectSearch","modules/DataRetrieval","modules/NewProject","modules/ProjectEditor"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){var q;return q=Backbone.Router.extend({mainDeferred:null,pendingAjax:[],initialize:function(){var a=this;return JJRestApi.Events.bind("dfdAjax",function(b){return a.pendingAjax.push(b)})},rejectAndHandle:function(c){var d,e=this;return a.isEditor=!1,a.ProjectEditor&&(a.ProjectEditor.cleanup(),a.ProjectEditor=null),c=c||{},a.handleLinks(),c.noFadeOut||(a.addLoadingClasses(),a.startSpinner()),d=this.mainDeferred,d&&d.reject(),_.each(this.pendingAjax,function(a){return 4!==a.readyState?a.abort():void 0}),this.pending=[],this.mainDeferred=$.Deferred(),this.mainDeferred.done(function(){return b.updateUserWidget(),e.mainDeferred=null,a.removeLoadingClasses(),a.stopSpinner()})},routes:{"":"index","about/":"showAboutPage","about/:nameSlug/":"showPersonPage","about/:nameSlug/:uglyHash/":"showPersonDetailed","portfolio/":"showPortfolio","portfolio/search/:searchTerm/":"showPortfolio","portfolio/:uglyHash/":"showPortfolioDetailed","calendar/":"showCalendar","calendar/:urlHash/":"showCalendarDetailed","login/":"showLoginForm","logout/":"doLogout","secured/edit/:uglyHash/":"showEditProjectPage","secured/new/":"showCreateProjectPage","*url/":"catchAllRoute"},index:function(){var b,c,d,e,f=this;return d=this.rejectAndHandle(),c=a.Config,a.Cache.WholePortfolio&&(c.Featured.present.flag=!0),e=n.forProjectsOverview(c.Featured),b=n.forCalendar("upcoming"),$.when(e,b).done(function(){return d.resolve()}),d.done(function(){var b,c,d;return c=a.useLayout("index"),a.Cache.Featured||(a.Cache.Featured=f.getProjectTypeModels({IsFeatured:!0,IsPublished:!0})),d=a.Cache.Featured,f.showPackeryViewForModels(d,"portfolio",c),b=new k.Views.Container({collection:a.Collections.CalendarEntry}),c.setViewAndRenderMaybe("#calendar",b)})},showAboutPage:function(){var b,c,d;return c=this.rejectAndHandle(),b=n.forRandomGroupImage(),d=n.forPersonsOverview(),$.when(b,d).done(function(a){return c.resolve(a)}),c.done(function(b){var c,d,e,f;return d=a.useLayout("main",{customClass:"about"}),c=a.Collections.Person,e={students:c.where({IsStudent:!0}),alumnis:c.where({IsAlumni:!0}),employees:c.where({IsEmployee:!0})},f=new l.Views.PackeryContainer({groupImage:b,persons:e}),d.setViewAndRenderMaybe("",f)})},showPersonPage:function(b){var c,e=this;return c=this.rejectAndHandle(),n.forDetailedObject("Person",b).done(function(a){return c.resolve(a)}),c.done(function(b){var c,f,g;return b?(c=a.useLayout("main"),f="",b.get("Templates").each(function(a){return a.get("IsDetail")?void 0:f=a.get("Url")}),g=f?new d.Views.Custom({model:b,template:f}):new d.Views.PackeryContainer({model:b}),c.setViewAndRenderMaybe("",g)):e.fourOhFour()})},showPersonDetailed:function(a,b){return this.showPortfolioDetailed(b,a)},showPortfolio:function(b){var c,d,e,f,g=this;return d=this.rejectAndHandle(),e=n.forCategories(),f=n.forProjectsOverview(a.Config.Portfolio),$.when(e,f).done(function(){return d.resolve()}),b&&console.info("searching for: %s",b),c="portfolio"===a.currentLayoutName?!0:!1,d.done(function(){var d,e,f;return c||(d=a.useLayout("portfolio")),a.Cache.WholePortfolio||(a.Cache.WholePortfolio=g.getProjectTypeModels({IsPortfolio:!0,IsPublished:!0})),e=a.Cache.WholePortfolio,c||(g.showPackeryViewForModels(e,"portfolio",d),d.insertViewAndRenderMaybe("",new m.View({searchTerm:b}))),f=b?n.filterProjectTypesBySearchTerm(b):null,console.log("foobar"),console.log(f),Backbone.Events.trigger("search",f)})},showPortfolioDetailed:function(b,c){var e,f,g=this;return f=this.rejectAndHandle(),e=a.resolveClassTypeByHash(b),e?(n.forDetailedObject(e,b).done(function(a){return f.resolve(a)}),f.done(function(b){var e,f,h,i;return b&&b.get("IsPublished")&&(c||b.get("IsPortfolio"))?(f=a.useLayout("main",{customClass:"detail"}),i="",h=void 0,c&&(h=b.get("Persons").where({UrlSlug:c}),h.length&&h[0].get("Templates").each(function(a){return a.get("IsDetail")?i=a.get("Url"):void 0})),e=i?new d.Views.Custom({model:b,template:i}):new j.Views.Detail({model:b}),h&&(e.ownedByPerson=h[0]),f.setViewAndRenderMaybe("",e)):g.fourOhFour()})):(f.done(function(){return g.fourOhFour()}),f.resolve())},showCalendar:function(){return console.info("show whole calendar")},showCalendarDetailed:function(b){var c,d=this;return c=this.rejectAndHandle(),n.forDetailedObject("CalendarEntry",b).done(function(a){return c.resolve(a)}),c.done(function(b){var c,e;return b?(e=a.useLayout("main",{customClass:"detail"}),c=new k.Views.Detail({model:b}),e.setViewAndRenderMaybe("",c)):d.fourOhFour()})},showLoginForm:function(){var c;return c=this.rejectAndHandle(),console.info("login form. if logged in, redirect to dashboard"),b.performLoginCheck().done(function(){return c.resolve()}),c.done(function(){var c;return c=a.useLayout("main"),c.setViewAndRenderMaybe("",new b.Views.Login)})},doLogout:function(){var c,d;return this.mainDfd&&(this.mainDfd.reject(),this.mainDfd=null),d=a.useLayout("main"),c=$.Deferred(),a.CurrentMember?(d.setViewAndRenderMaybe("",new b.Views.Logout),c=b.logout()):c.resolve()},showCreateProjectPage:function(){var c,d=this;return c=this.rejectAndHandle(),b.performLoginCheck().done(function(){return a.CurrentMember.Email?c.resolve():d.fourOhFour()}),c.done(function(){var b;return b=a.useLayout("main"),b.setViewAndRenderMaybe("",new o.Views.NewProject)})},showEditProjectPage:function(c){var d,e;return e=this.rejectAndHandle(),a.isEditor=!0,d=a.resolveClassTypeByHash(c),b.canEdit({className:d,UglyHash:c}).fail(function(){return Backbone.history.navigate("/login/",!0)}).done(function(){return n.forDetailedObject(d,c,!0).done(function(a){return e.resolve(a)})}),e.fail(function(){return Backbone.history.navigate("/login/",!0)}).done(function(b){var c;return c=a.useLayout("editor"),a.ProjectEditor=new p.Inst(b),a.ProjectEditor.kickOffRender()})},catchAllRoute:function(){return console.log("catch all route")},fourOhFour:function(){return this.rejectAndHandle().resolve().done(function(){var b,c;return c=a.useLayout("main"),b=new i.Views.FourOhFour({attributes:{"data-url":window.location.href}}),c.setViewAndRenderMaybe("",b)})},showPackeryViewForModels:function(a,b,c){var d;return d=new j.Views.PackeryContainer({collection:a,linkTo:b}),c.setViewAndRenderMaybe("#packery-container",d)},getProjectTypeModels:function(b){var c,d,e,f,g;for(d=[],g=a.Config.ProjectTypes,e=0,f=g.length;f>e;e++)c=g[e],d=d.concat(a.Collections[c].where(b));return d}})}),function(a){var b,c,d;return b={},a(window).on("resize",function(){var c,d,e;e=[];for(d in b)c=b[d],c&&a.isFunction(c)?e.push(c()):e.push(void 0);return e}),a.addOnWindowResize=function(c,d){return a.isFunction(d)?b[c]=d:void 0},a.removeOnWindowResize=function(a){return b[a]?delete b[a]:void 0},d=function(b){return b?a.each(b,function(b,c){var d,e,f,g,h,i;return e=a(c.parent),d=a(c.child,e),d.length?(i=e.width(),h=e.height(),g=d.outerWidth(!0),d.length>1?(f=0,d.each(function(){return f+=a(this).outerHeight(!0)})):f=d.height(),"child"===c.resize?d.height(i/g*f):"parent"===c.resize?e.height(f):void 0):void 0}):void 0},c=function(){var b;return b=a("iframe","article.portfolio-detail"),b.length?b.each(function(b,c){var d,e,f,g,h;return d=a(c),f=d.attr("width"),e=d.attr("height"),f&&e?(h=d.width(),g=h/f,d.height(e*g)):void 0}):void 0},a(document).on("portfoliodetail:rendered",c),a.addOnWindowResize("iframe",c),a(document).on("about:rendered",function(){return d([{parent:".group-image",child:"img",resize:"child"},{parent:".statement",child:"p",resize:"parent"}])})}(jQuery),define("plugins/misc/misc",function(){}),require(["app","router","modules/Auth","modules/Project","modules/Person","modules/Excursion","modules/Workshop","modules/Exhibition","modules/CalendarEntry","modules/RecycleBin","plugins/misc/spin.min","plugins/misc/misc"],function(a,b,c,d,e,f,g,h,i,j,k){return Backbone.JJRelational.Config.work_with_store=!0,a.ajaxCount=0,a.Router=new b,a.Layout,a.PageInfos={},a.CategoriesFetched,a.Collections={},a.Cache={},a.Cache.UserGallery={fetched:{Projects:!1,Person:!1},images:{Person:[],Projects:[]}},a.CurrentMember={},a.CurrentMemberPerson=null,a.ProjectEditor=null,a.origin=window.location.origin?window.location.origin:window.location.protocol+"//"+window.location.host,console.log(a),a.Config={ProjectTypes:["Project","Excursion","Workshop","Exhibition"],StoreHooks:["Project","Excursion","Workshop","Exhibition","Person","CalendarEntry","DocImage","Category"],ClassEnc:{0:"Project",1:"Excursion",2:"Exhibition",3:"Workshop"},GalleryUrl:"imagery/gallery/",DocImageUrl:"imagery/images/docimage/",PersonImageUrl:"imagery/images/personimage/",BasicListUrl:"lists/all/",GetEditorsUrl:"api/v2/Editors/getEditors",ChangeEditorsUrl:"api/v2/Editors/changeEditors",ChangeCredentialsUrl:"api/v2/Auth/credentials/",UrlSuffixes:{about_persons:"?search=IsExternal:0"},Featured:{present:{flag:!1,types:[]},domName:function(a){return"featured-"+a.toLowerCase()},urlSuffix:"?"+JJRestApi.objToUrlString({search:{IsFeatured:1},context:"view.portfolio_init"})},Portfolio:{present:{flag:!1,types:[]},domName:function(a){return"portfolio-"+a.toLowerCase()},urlSuffix:"?"+JJRestApi.objToUrlString({search:{IsPortfolio:1},context:"view.portfolio_init"})},Calendar:{upcoming:{flag:!1,url:"api/v2/UpcomingEvents.json"},whole:{flag:!1}},Person:{about_present:!1,name:"about-persons",urlSuffix:"?"+JJRestApi.objToUrlString({search:{IsExternal:0},context:"view.about_init",sort:"Surname"})},Detail:{CalendarEntry:{where:function(a){return{UrlHash:a}},domName:"detailed-calendar-item",urlSuffix:function(a){return"?"+JJRestApi.objToUrlString({search:{UrlHash:a},limit:1})}},Person:{where:function(a){return{UrlSlug:a}},domName:"detailed-person-item",urlSuffix:function(a){return"?"+JJRestApi.objToUrlString({search:{UrlSlug:a},limit:1})}},Project:{where:function(a){return{UglyHash:a}},domName:"detailed-project-item",urlSuffix:function(a){return"?"+JJRestApi.objToUrlString({search:{UglyHash:a},limit:1})}},Excursion:{where:function(a){return{UglyHash:a}},domName:"detailed-excursion-item",urlSuffix:function(a){return"?"+JJRestApi.objToUrlString({search:{UglyHash:a},limit:1})}},Workshop:{where:function(a){return{UglyHash:a}},domName:"detailed-workshop-item",urlSuffix:function(a){return"?"+JJRestApi.objToUrlString({search:{UglyHash:a},limit:1})}},Exhibition:{where:function(a){return{UglyHash:a}},domName:"detailed-exhibition-item",urlSuffix:function(a){return"?"+JJRestApi.objToUrlString({search:{UglyHash:a},limit:1})}}},Spinner:{lines:13,length:6,width:2,radius:7,corners:1,rotate:0,direction:1,color:"#262626",speed:1,trail:70,shadow:!1,hwaccel:!1,className:"spinner",zIndex:2e9,top:"auto",left:"auto"}},a.bindListeners=function(){var b,c,d,e,f;for(f=a.Config.StoreHooks,c=function(b){return Backbone.JJStore.Events.bind("added:"+b,function(c){var d;return d=a.Collections[b],d?d.add(c):void 0})},d=0,e=f.length;e>d;d++)b=f[d],c(b);return!0},a.handleFetchedModels=function(a,b,c){var d,e,f,g,h;for(c=c||{},d=JJRestApi.Model(a),b=_.isArray(b)?b:[b],h=[],f=0,g=b.length;g>f;f++)e=b[f],h.push(new d(e));return h},a.handleFetchedModel=function(a,b,c){var d;return c=c||{},d=JJRestApi.Model(a),new d(b)},a.handleLinks=function(){var a;return a=Backbone.history.fragment,a="/"+a.substring(0,a.indexOf("/")+1),$("#wrapper .badge").find("a").each(function(b,c){var d;return d=$(c),d.removeClass("active"),d.attr("href")===a?d.addClass("active"):void 0})},a.updateGalleryCache=function(a){var b,c=this;return b=function(a,b){return a.push({id:b.id,tag:b.tag,url:b.url})},_.each(a,function(a){var d;return(d=a.UploadedToClass)&&("DocImage"===d&&_.each(c.Cache.UserGallery.images.Projects,function(c){return c.FilterID===a.FilterID?b(c.Images,a):void 0}),"PersonImage"===d)?b(c.Cache.UserGallery.images.Person,a):void 0})},a.removeFromGalleryCache=function(a,b){var c=this;return"PersonImage"===a&&_.each(this.Cache.UserGallery.images.Person,function(a,d){return a.id===b?delete c.Cache.UserGallery.images.Person[d]:void 0}),"DocImage"===a&&_.each(this.Cache.UserGallery.images.Projects,function(a,d){return _.each(a.Images,function(a,e){return a.id===b?delete c.Cache.UserGallery.images.Projects[d].Images[e]:void 0})}),!0},a.getFromGalleryCache=function(a,b){var c,d=this;return c=null,"PersonImage"===a&&_.each(this.Cache.UserGallery.images.Person,function(a,e){return a.id===b?c=d.Cache.UserGallery.images.Person[e]:void 0}),"DocImage"===a&&_.each(this.Cache.UserGallery.images.Projects,function(a,e){return _.each(a.Images,function(a,f){return a.id===b?c=d.Cache.UserGallery.images.Projects[e].Images[f]:void 0})}),c},a.initialLoggedInCheck=function(){return JJRestApi.getFromDomOrApi("current-member",{noAjax:!0}).done(function(a){return c.handleUserServerResponse(a)})},a.setupSpinner=function(){return this.$body=$("body"),this.$main=$("#main"),this.spinner={inst:new k(a.Config.Spinner),target:document.getElementById("spinner-target")}},a.startSpinner=function(){var a;return a=this.spinner,$(a.target).addClass("active"),a.inst.spin(a.target)},a.stopSpinner=function(){var a;return a=this.spinner,$(a.target).removeClass("active"),a.inst.stop()},a.addLoadingClasses=function(){return this.$body.addClass("isLoading"),this.$main.addClass("loading")},a.removeLoadingClasses=function(){return this.$body.removeClass("isLoading"),this.$main.removeClass("loading")},a.resolveClassTypeByHash=function(a){return this.Config.ClassEnc[a.substr(0,1)]},a.wholePortfolioJSON=function(){var a,b,c,d,e;if(c=this.Cache.WholePortfolio,!this.Cache.WholePortfolioJSON){for(b=[],d=0,e=c.length;e>d;d++)a=c[d],b.push(a.toJSON());this.Cache.WholePortfolioJSON=b}return this.Cache.WholePortfolioJSON},a.bindListeners(),Backbone.View.prototype.showMessageAt=function(a,b,c){var d;return d=$('<p class="'+c+'">'+a+"</p>"),d.appendTo(b),setTimeout(function(){return d.fadeOut().remove()},2e3)},Backbone.__pendingSaveReqs=[],Backbone.JJRelationalModel.prototype.rejectAndSave=function(){var a,b,c=this;return Array.prototype.push.call(arguments,null,{success:function(a){return a.trigger("saved")}}),b=this.save.apply(this,arguments),a=!1,_.each(Backbone.__pendingSaveReqs,function(d){return d.cid===c.cid?(a=!0,d.xhr&&4!==d.xhr.readyState&&d.xhr.abort(),d.xhr=b):void 0}),a||Backbone.__pendingSaveReqs.push({cid:this.cid,xhr:b}),b},Handlebars.registerHelper("stringCompare",function(a,b,c){return a===b?c.fn(this):c.inverse(this)}),Handlebars.registerHelper("stringDiff",function(a,b,c){return a!==b?c.fn(this):c.inverse(this)}),Handlebars.registerHelper("console",function(a){return console.log(a),"logging..."}),$(function(){return a.$body=$("body"),jQuery.event.props.push("dataTransfer"),$(document).bind("ajaxSend",function(b,c,d){return"GET"!==d.type?(a.ajaxCount++,a.$body.addClass("requesting")):void 0}),$(document).bind("ajaxComplete",function(b,c,d){return"GET"!==d.type&&(a.ajaxCount--,0===a.ajaxCount)?a.$body.removeClass("requesting"):void 0}),$(document).on("dragenter dragover dragleave drop",function(a){return"dragenter"===a.type||"dragover"===a.type?$.fireGlobalDragEvent("dragstart",a.target,"file"):$.fireGlobalDragEvent(a.type,a.target,"file"),a.preventDefault()}),j.setup(),a.setupSpinner(),JJRestApi.hookSecurityToken(),JJRestApi.bootstrapWithStructure().done(function(){var b;return b=function(b){var c,d,e,f,g;for(g=[],e=0,f=b.length;f>e;e++)d=b[e],c=JJRestApi.Collection(d),g.push(a.Collections[d]=new c);return g},b(a.Config.StoreHooks),a.initialLoggedInCheck(),Backbone.history.start({pushState:!0})})}),$(document).on("click","a:not([data-bypass])",function(a){var b,c;return b=$(this).attr("href"),c=this.protocol+"//",b&&b.slice(0,c.length)!==c&&0!==b.indexOf("javascript:")?(a.preventDefault(),Backbone.history.navigate(b,!0)):void 0})}),define("main",function(){}),require.config({deps:["main"],paths:{libs:"../assets/js/libs",plugins:"../assets/js/plugins",responsiveimage:"../../responsive-image/thirdparty/picturefill",jquery:"../assets/js/libs/jquery.min",underscore:"../assets/js/libs/underscore",backbone:"../assets/js/libs/backbone",handlebars:"../assets/js/libs/handlebars"},shim:{jquery:{exports:"$"},backbone:{deps:["underscore","jquery"],exports:"Backbone"},underscore:{exports:"_"},handlebars:{exports:"Handlebars"},"plugins/tooltip/jquery.qtip":["jquery"],"plugins/packery/packery.pkgd":["jquery"],"plugins/packery/packerytest":["plugins/packery/packery.pkgd","plugins/tooltip/jquery.qtip"],"modules/JJPackery":["plugins/packery/packerytest"],"responsiveimage/picturefill":["responsiveimage/external/matchmedia"],"plugins/misc/spin.min":["jquery"],"plugins/misc/misc":["jquery"],"plugins/misc/jquery.list":["jquery"],"plugins/editor/jquery.jjfileupload":["jquery"],"plugins/editor/jquery.tabby":["jquery"],"plugins/misc/zebra_datepicker.src":["jquery"],"plugins/editor/jquery.editor-sidebar":["plugins/misc/misc"],"plugins/editor/jquery.jjdropzone":["plugins/editor/jquery.jjfileupload"],"plugins/editor/jquery.jjmarkdown":["plugins/editor/jquery.jjdropzone","plugins/editor/jquery.tabby","plugins/editor/jquery.jjfileupload","plugins/editor/marked_jjedit"],"plugins/editor/jquery.editor-popover":["plugins/tooltip/jquery.qtip","plugins/editor/jquery.jjmarkdown","plugins/misc/zebra_datepicker.src"],"plugins/backbone.layoutmanager":["backbone"],"plugins/backbone.JJRelational":["backbone"],"plugins/backbone.JJRestApi":["backbone"],"modules/NMMarkdownParser":["plugins/editor/jquery.jjmarkdown"],"plugins/visualsearch/jquery.ui.autocomplete":["plugins/visualsearch/jquery.ui.widget"],"plugins/visualsearch/jquery.ui.menu":["plugins/visualsearch/jquery.ui.widget"],"plugins/visualsearch/visualsearch":["plugins/backbone.layoutmanager","plugins/visualsearch/jquery.ui.core","plugins/visualsearch/jquery.ui.autocomplete","plugins/visualsearch/jquery.ui.menu"]}}),define("config",function(){}),this.JST=this.JST||{},this.JST["app/templates/404.html"]=Handlebars.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g="",h="function",i=this.escapeExpression;return g+='<div style="margin-top:300px">\n	<h2>Your lucky numbers for today: 4, 0, 4</h2>\n	<p>A billion pages on the web, and you chose: ',(f=c.url)?f=f.call(b,{hash:{},data:e}):(f=b.url,f=typeof f===h?f.apply(b):f),g+=i(f)+".<br/>Try again</p>\n</div>"}),this.JST["app/templates/about-packery.html"]=Handlebars.template(function(a,b,c,d,e){function f(a,b){var d,e,f="";return f+='\n		<section class="packery-item group-image">\n			<div>\n				',e=c["with"].call(a,(d=a.GroupImage,d=null==d||d===!1?d:d.Urls,null==d||d===!1?d:d._768),{hash:{},inverse:l.noop,fn:l.program(2,g,b),data:b}),(e||0===e)&&(f+=e),f+="\n			<div>\n		</section>\n		"}function g(a,b){var d,e="";return e+='\n					<img src="',(d=c.Url)?d=d.call(a,{hash:{},data:b}):(d=a.Url,d=typeof d===j?d.apply(a):d),e+=k(d)+'" width="',(d=c.Width)?d=d.call(a,{hash:{},data:b}):(d=a.Width,d=typeof d===j?d.apply(a):d),e+=k(d)+'" height="',(d=c.Height)?d=d.call(a,{hash:{},data:b}):(d=a.Height,d=typeof d===j?d.apply(a):d),e+=k(d)+'" />\n				'}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var h,i="",j="function",k=this.escapeExpression,l=this;return i+='<!-- section class="packery-wrapper" -->\n<div class="packery-test about">\n	<div class="packery">\n\n		<!-- left top -->\n		<div class="stamp corner left top"></div>\n		<div class="stamp top"></div>\n		<div class="stamp left"></div>\n\n		<!-- top center -->\n		<div class="stamp top center"></div>\n\n		<!-- right top -->\n		<!--<div class="stamp corner right top"></div>\n		<div class="stamp top right"></div>\n		<div class="stamp right"></div>-->\n\n		<!-- left center -->\n		<!--<div class="stamp left center"></div>-->\n\n		<!-- left bottom -->\n		<!--<div class="stamp corner left bottom"></div>\n		<div class="stamp bottom"></div>\n		<div class="stamp left bottom"></div>\n\n		<div class="stamp corner right bottom"></div>\n		<div class="stamp bottom right-left"></div>\n		<div class="stamp right bottom"></div>-->	\n\n		',h=c["if"].call(b,b.GroupImage,{hash:{},inverse:l.noop,fn:l.program(1,f,e),data:e}),(h||0===h)&&(i+=h),i+='\n\n		<section class="statement packery-item">\n			<div>\n				<p>The class <cite>New Media</cite> within the course <cite>Visual Communication</cite> at the <cite>School of Art and Design Kassel</cite> walks a fine line between art, design, provocation and study. The main focus lies on the media consumption of society and its perpetual obsession with technological progress, change and transformation; established processes and methods are permanently questioned and modified.</p>\n				<p>The students in the class <cite>New Media</cite> see themselves as researchers, artists, designers and developers at the same time.</p>\n				<p>Realising and publicly defending a deeply personal idea means also being able to realise the ideas of others. An outstanding developer of own concepts and ideas will have the ability to implement external ideas and concepts as well.</p>\n				<p>There is no need to train service providers for an existing industry, but personalities who by discourse acquired skills which are constantly expanded and established – for oneself and others.</p>\n				<p>By use of the Internet and support of the group these skills are exchanged, discussed and broadened self-educatedly. This provides a topicality and relevance which eludes institutions.</p>\n				<p>To study “New Media” is to be an author. To learn from oneself, to learn seeing, speaking and thinking. To develop a culture of debate. To work on projects together. To mix media and ideas, to fail and learn from it. The aim is to shape a personal position and methodology.</p>\n			</div>\n		</section>\n\n		<section class="students packery-item">\n			<div>\n				<h1>Students</h1>\n				<ul id="student-list"></ul>\n			</div>\n		</section>\n		<section class="alumni packery-item">\n			<div>\n				<h1>Alumni</h1>\n				<ul id="alumni-list"></ul>\n			</div>\n		</section>\n	</div>\n</div>\n\n<!-- /section -->'}),this.JST["app/templates/calendar-container.html"]=Handlebars.template(function(a,b,c,d,e){function f(){return'\n	<h2>Calendar</h2>\n	<ul id="calendar-list">\n\n	</ul>\n'}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var g,h="",i=this;return h+="<!-- div -->\n",g=c["if"].call(b,b.HasItems,{hash:{},inverse:i.noop,fn:i.program(1,f,e),data:e}),(g||0===g)&&(h+=g),h+="\n<!-- /div -->"}),this.JST["app/templates/calendar-detail.html"]=Handlebars.template(function(a,b,c,d,e){function f(a,b){var d,e,f,g="";return g+="\n		<p>",f={hash:{},data:b},d=c.commaSeparatedWebsites||a.commaSeparatedWebsites,e=d?d.call(a,a.Websites,f):o.call(a,"commaSeparatedWebsites",a.Websites,f),(e||0===e)&&(g+=e),g+="</p>\n	"}function g(a,b){var d,e,f,g="";return g+="\n		",f={hash:{},data:b},d=c.portfoliolist||a.portfoliolist,e=d?d.call(a,a.combinedProjects,"Project",f):o.call(a,"portfoliolist",a.combinedProjects,"Project",f),(e||0===e)&&(g+=e),g+="\n	"}function h(a,b){var d,e,f,g="";return g+="\n		",f={hash:{},data:b},d=c.portfoliolist||a.portfoliolist,e=d?d.call(a,a.Exhibitions,"Exhibition",f):o.call(a,"portfoliolist",a.Exhibitions,"Exhibition",f),(e||0===e)&&(g+=e),g+="\n	"}function i(a,b){var d,e,f,g="";return g+="\n		",f={hash:{},data:b},d=c.portfoliolist||a.portfoliolist,e=d?d.call(a,a.Workshops,"Workshop",f):o.call(a,"portfoliolist",a.Workshops,"Workshop",f),(e||0===e)&&(g+=e),g+="\n	"}function j(a,b){var d,e,f,g="";return g+="\n		",f={hash:{},data:b},d=c.portfoliolist||a.portfoliolist,e=d?d.call(a,a.Excursions,"Excursion",f):o.call(a,"portfoliolist",a.Excursions,"Excursion",f),(e||0===e)&&(g+=e),g+="\n	"}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var k,l,m,n="",o=c.helperMissing,p="function",q=this.escapeExpression,r=this;return n+='<!-- article class="portfolio-detail" -->\n<header>\n	<h1>',(k=c.Title)?k=k.call(b,{hash:{},data:e}):(k=b.Title,k=typeof k===p?k.apply(b):k),n+=q(k)+"</h1>\n	<p>",m={hash:{},data:e},n+=q((k=c.niceDate||b.niceDate,k?k.call(b,b,m):o.call(b,"niceDate",b,m)))+"</p>\n	",l=c["if"].call(b,b.Websites,{hash:{},inverse:r.noop,fn:r.program(1,f,e),data:e}),(l||0===l)&&(n+=l),n+="\n</header>\n<section>\n	",(l=c.MarkdownedText)?l=l.call(b,{hash:{},data:e}):(l=b.MarkdownedText,l=typeof l===p?l.apply(b):l),(l||0===l)&&(n+=l),n+="\n</section>\n<aside>\n	",l=c["if"].call(b,b.combinedProjects,{hash:{},inverse:r.noop,fn:r.program(3,g,e),data:e}),(l||0===l)&&(n+=l),n+="\n\n	",l=c["if"].call(b,b.Exhibitions,{hash:{},inverse:r.noop,fn:r.program(5,h,e),data:e}),(l||0===l)&&(n+=l),n+="\n	\n	",l=c["if"].call(b,b.Workshops,{hash:{},inverse:r.noop,fn:r.program(7,i,e),data:e}),(l||0===l)&&(n+=l),n+="\n	\n	",l=c["if"].call(b,b.Excursions,{hash:{},inverse:r.noop,fn:r.program(9,j,e),data:e}),(l||0===l)&&(n+=l),n+="\n</aside>\n<!-- /article -->"}),this.JST["app/templates/calendar-list-item.html"]=Handlebars.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g="",h="function",i=this.escapeExpression;return g+='<!-- li class="upcoming-calendar-list-item" -->\n<a href="/calendar/',(f=c.UrlHash)?f=f.call(b,{hash:{},data:e}):(f=b.UrlHash,f=typeof f===h?f.apply(b):f),g+=i(f)+'/">\n	<time datetime="">',(f=c.DateRangeNice)?f=f.call(b,{hash:{},data:e}):(f=b.DateRangeNice,f=typeof f===h?f.apply(b):f),g+=i(f)+"</time>\n	",(f=c.Title)?f=f.call(b,{hash:{},data:e}):(f=b.Title,f=typeof f===h?f.apply(b):f),g+=i(f)+"\n</a>\n<!-- /li -->"}),this.JST["app/templates/employee-item.html"]=Handlebars.template(function(a,b,c,d,e){function f(a,b){var d,e,f="";return f+="\n			",e=c["with"].call(a,(d=a.Image,d=null==d||d===!1?d:d.Urls,null==d||d===!1?d:d._320),{hash:{},inverse:l.noop,fn:l.programWithDepth(2,g,b,a),data:b}),(e||0===e)&&(f+=e),f+="\n		"}function g(a,b,d){var e,f,g="";return g+='\n				<a href="/about/'+k((e=d.UrlSlug,typeof e===j?e.apply(a):e))+'/"><img src="',(f=c.Url)?f=f.call(a,{hash:{},data:b}):(f=a.Url,f=typeof f===j?f.apply(a):f),g+=k(f)+'" /></a>\n			'}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var h,i="",j="function",k=this.escapeExpression,l=this;return i+='<!-- section class="person gravity-item" -->\n<div>\n	<div class="img">\n		',h=c["if"].call(b,b.Image,{hash:{},inverse:l.noop,fn:l.program(1,f,e),data:e}),(h||0===h)&&(i+=h),i+='\n	</div>\n	<h1><a href="/about/',(h=c.UrlSlug)?h=h.call(b,{hash:{},data:e}):(h=b.UrlSlug,h=typeof h===j?h.apply(b):h),i+=k(h)+'/">',(h=c.FirstName)?h=h.call(b,{hash:{},data:e}):(h=b.FirstName,h=typeof h===j?h.apply(b):h),i+=k(h)+" ",(h=c.Surname)?h=h.call(b,{hash:{},data:e}):(h=b.Surname,h=typeof h===j?h.apply(b):h),i+=k(h)+"</a></h1>\n	<p>",(h=c.JobTitle)?h=h.call(b,{hash:{},data:e}):(h=b.JobTitle,h=typeof h===j?h.apply(b):h),i+=k(h)+"</p>\n</div>\n<!-- /section -->"}),this.JST["app/templates/layouts/editor.html"]=Handlebars.template(function(a,b,c,d,e){return this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{},'<section id="project-editor"></section>'}),this.JST["app/templates/layouts/index.html"]=Handlebars.template(function(a,b,c,d,e){return this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{},'<div id="packery-container"></div>\n<section id="calendar" class="calendar"></section>'}),this.JST["app/templates/layouts/main.html"]=Handlebars.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f="";return f}),this.JST["app/templates/layouts/portfolio.html"]=Handlebars.template(function(a,b,c,d,e){return this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{},'<div id="packery-container"></div>'}),this.JST["app/templates/packery-container.html"]=Handlebars.template(function(a,b,c,d,e){return this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{},'<!-- section class="packery-wrapper" -->\n<div class="packery-test">\n	<div class="packery">\n\n		<!-- left top -->\n		<div class="stamp corner left top"></div>\n		<div class="stamp top"></div>\n		<div class="stamp left"></div>\n\n		<!-- top center -->\n		<div class="stamp top center"></div>\n\n		<!-- right top -->\n		<div class="stamp corner right top"></div>\n		<div class="stamp top right"></div>\n		<div class="stamp right"></div>\n\n		<!-- left center -->\n		<div class="stamp left center"></div>\n\n		<!-- left bottom -->\n		<div class="stamp corner left bottom"></div>\n		<div class="stamp bottom"></div>\n		<div class="stamp left bottom"></div>\n\n		<div class="stamp corner right bottom"></div>\n		<div class="stamp bottom right-left"></div>\n		<div class="stamp right bottom"></div>\n		\n	</div>\n</div>\n<!-- /section -->'}),this.JST["app/templates/packery-list-item.html"]=Handlebars.template(function(a,b,c,d,e){function f(a,b){var d,e,f="";return f+="\n			",e=c["with"].call(a,(d=a.PreviewImage,d=null==d||d===!1?d:d.Urls,null==d||d===!1?d:d._320),{hash:{},inverse:n.noop,fn:n.program(2,g,b),data:b}),(e||0===e)&&(f+=e),f+="\n		"}function g(a,b){var d,e="";return e+='\n				<div><img src="',(d=c.Url)?d=d.call(a,{hash:{},data:b}):(d=a.Url,d=typeof d===l?d.apply(a):d),e+=m(d)+'" width="',(d=c.Width)?d=d.call(a,{hash:{},data:b}):(d=a.Width,d=typeof d===l?d.apply(a):d),e+=m(d)+'" height="',(d=c.Height)?d=d.call(a,{hash:{},data:b}):(d=a.Height,d=typeof d===l?d.apply(a):d),e+=m(d)+'"/></div>\n			'}function h(a,b){var d,e,f="";return f+='\n		<a href="/',(d=c.LinkTo)?d=d.call(a,{hash:{},data:b}):(d=a.LinkTo,d=typeof d===l?d.apply(a):d),f+=m(d)+"/",(d=c.UglyHash)?d=d.call(a,{hash:{},data:b}):(d=a.UglyHash,d=typeof d===l?d.apply(a):d),f+=m(d)+'/">\n			',e=c["with"].call(a,(d=a.PreviewImage,d=null==d||d===!1?d:d.Urls,null==d||d===!1?d:d._320),{hash:{},inverse:n.noop,fn:n.program(5,i,b),data:b}),(e||0===e)&&(f+=e),f+="\n		</a>\n	"
}function i(a,b){var d,e="";return e+='\n				<img src="',(d=c.Url)?d=d.call(a,{hash:{},data:b}):(d=a.Url,d=typeof d===l?d.apply(a):d),e+=m(d)+'" width="',(d=c.Width)?d=d.call(a,{hash:{},data:b}):(d=a.Width,d=typeof d===l?d.apply(a):d),e+=m(d)+'" height="',(d=c.Height)?d=d.call(a,{hash:{},data:b}):(d=a.Height,d=typeof d===l?d.apply(a):d),e+=m(d)+'"/>\n			'}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var j,k="",l="function",m=this.escapeExpression,n=this;return k+='<!-- article class="gravity-item" -->\n<div>\n<!--<a href="/',(j=c.LinkTo)?j=j.call(b,{hash:{},data:e}):(j=b.LinkTo,j=typeof j===l?j.apply(b):j),k+=m(j)+"/",(j=c.UglyHash)?j=j.call(b,{hash:{},data:e}):(j=b.UglyHash,j=typeof j===l?j.apply(b):j),k+=m(j)+'/">\n	<div>\n		<p>',(j=c.Title)?j=j.call(b,{hash:{},data:e}):(j=b.Title,j=typeof j===l?j.apply(b):j),k+=m(j)+"</p>\n		",j=c["if"].call(b,b.PreviewImage,{hash:{},inverse:n.noop,fn:n.program(1,f,e),data:e}),(j||0===j)&&(k+=j),k+="\n	</div>\n</a>-->\n	",j=c["if"].call(b,b.PreviewImage,{hash:{},inverse:n.noop,fn:n.program(4,h,e),data:e}),(j||0===j)&&(k+=j),k+='\n	<section role="tooltip-content">\n		<header>\n			<h1>\n				<a href="/',(j=c.LinkTo)?j=j.call(b,{hash:{},data:e}):(j=b.LinkTo,j=typeof j===l?j.apply(b):j),k+=m(j)+"/",(j=c.UglyHash)?j=j.call(b,{hash:{},data:e}):(j=b.UglyHash,j=typeof j===l?j.apply(b):j),k+=m(j)+'/">',(j=c.Title)?j=j.call(b,{hash:{},data:e}):(j=b.Title,j=typeof j===l?j.apply(b):j),k+=m(j)+"</a>\n			</h1>\n			<p>",(j=c.teaserMeta)?j=j.call(b,{hash:{},data:e}):(j=b.teaserMeta,j=typeof j===l?j.apply(b):j),(j||0===j)&&(k+=j),k+="</p>\n		</header>\n		<p>\n			",(j=c.MarkdownedTeaser)?j=j.call(b,{hash:{},data:e}):(j=b.MarkdownedTeaser,j=typeof j===l?j.apply(b):j),(j||0===j)&&(k+=j),k+='\n		</p>\n		<a href="/',(j=c.LinkTo)?j=j.call(b,{hash:{},data:e}):(j=b.LinkTo,j=typeof j===l?j.apply(b):j),k+=m(j)+"/",(j=c.UglyHash)?j=j.call(b,{hash:{},data:e}):(j=b.UglyHash,j=typeof j===l?j.apply(b):j),k+=m(j)+'/" class="btn">Read More</a>\n	</section>\n<div>\n<!-- /article -->'}),this.JST["app/templates/person-info-item.html"]=Handlebars.template(function(a,b,c,d,e){function f(a,b){var d,e,f="";return f+="\n			",e=c["with"].call(a,(d=a.Image,d=null==d||d===!1?d:d.Urls,null==d||d===!1?d:d._320),{hash:{},inverse:q.noop,fn:q.program(2,g,b),data:b}),(e||0===e)&&(f+=e),f+="\n		"}function g(a,b){var d,e="";return e+='\n				<img src="',(d=c.Url)?d=d.call(a,{hash:{},data:b}):(d=a.Url,d=typeof d===o?d.apply(a):d),e+=p(d)+'" width="',(d=c.Width)?d=d.call(a,{hash:{},data:b}):(d=a.Width,d=typeof d===o?d.apply(a):d),e+=p(d)+'" height="',(d=c.Height)?d=d.call(a,{hash:{},data:b}):(d=a.Height,d=typeof d===o?d.apply(a):d),e+=p(d)+'" alt="">\n			'}function h(a,b){var d,e="";return e+='\n				<p><a href="mailto:',(d=c.Email)?d=d.call(a,{hash:{},data:b}):(d=a.Email,d=typeof d===o?d.apply(a):d),e+=p(d)+'">',(d=c.Email)?d=d.call(a,{hash:{},data:b}):(d=a.Email,d=typeof d===o?d.apply(a):d),e+=p(d)+"</a></p>\n			"}function i(a,b){var d,e="";return e+="\n				<p>",(d=c.Phone)?d=d.call(a,{hash:{},data:b}):(d=a.Phone,d=typeof d===o?d.apply(a):d),e+=p(d)+' <a class="vcf-download" href="#">(Download vcf)</a></p>\n			'}function j(a,b){var d,e="";return e+='\n			<ul class="websites">\n				',d=c.each.call(a,a.Websites,{hash:{},inverse:q.noop,fn:q.program(9,k,b),data:b}),(d||0===d)&&(e+=d),e+="\n			</ul>\n		"}function k(a,b){var d,e="";return e+="\n					<li>",(d=c.website)?d=d.call(a,{hash:{},data:b}):(d=a.website,d=typeof d===o?d.apply(a):d),(d||0===d)&&(e+=d),e+="</li>\n				"}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var l,m,n="",o="function",p=this.escapeExpression,q=this;return n+='<!-- article class="person-info" -->\n<div>\n	<section>\n		',m=c["if"].call(b,(l=b.Image,l=null==l||l===!1?l:l.Urls,null==l||l===!1?l:l._320),{hash:{},inverse:q.noop,fn:q.program(1,f,e),data:e}),(m||0===m)&&(n+=m),n+="\n	</section>\n\n	<section>\n		<header>\n			<p>",(m=c.personMeta)?m=m.call(b,{hash:{},data:e}):(m=b.personMeta,m=typeof m===o?m.apply(b):m),n+=p(m)+"</p>\n			<h1>",(m=c.FirstName)?m=m.call(b,{hash:{},data:e}):(m=b.FirstName,m=typeof m===o?m.apply(b):m),n+=p(m)+" ",(m=c.Surname)?m=m.call(b,{hash:{},data:e}):(m=b.Surname,m=typeof m===o?m.apply(b):m),n+=p(m)+"</h1>\n			",m=c["if"].call(b,b.Email,{hash:{},inverse:q.noop,fn:q.program(4,h,e),data:e}),(m||0===m)&&(n+=m),n+="\n			",m=c["if"].call(b,b.Phone,{hash:{},inverse:q.noop,fn:q.program(6,i,e),data:e}),(m||0===m)&&(n+=m),n+="\n		</header>\n\n		",(m=c.MarkdownedBio)?m=m.call(b,{hash:{},data:e}):(m=b.MarkdownedBio,m=typeof m===o?m.apply(b):m),(m||0===m)&&(n+=m),n+="\n\n		",m=c["if"].call(b,b.Websites,{hash:{},inverse:q.noop,fn:q.program(8,j,e),data:e}),(m||0===m)&&(n+=m),n+="\n	</section>\n</div>\n<!-- /article -->"}),this.JST["app/templates/person-list-item.html"]=Handlebars.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g="",h="function",i=this.escapeExpression;return g+='<!-- li -->\n<a href="/about/',(f=c.UrlSlug)?f=f.call(b,{hash:{},data:e}):(f=b.UrlSlug,f=typeof f===h?f.apply(b):f),g+=i(f)+'/">\n	',(f=c.FirstName)?f=f.call(b,{hash:{},data:e}):(f=b.FirstName,f=typeof f===h?f.apply(b):f),g+=i(f)+" ",(f=c.Surname)?f=f.call(b,{hash:{},data:e}):(f=b.Surname,f=typeof f===h?f.apply(b):f),g+=i(f)+"\n</a>\n<!-- /li -->"}),this.JST["app/templates/portfolio-detail.html"]=Handlebars.template(function(a,b,c,d,e){function f(a,b){var d,e="";return e+="\n		",(d=c.SpaceAndLocation)?d=d.call(a,{hash:{},data:b}):(d=a.SpaceAndLocation,d=typeof d===x?d.apply(a):d),(d||0===d)&&(e+=d),e+="\n	"}function g(a,b){var d,e,f,g="";return g+="\n		<p>",f={hash:{},data:b},d=c.commaSeparatedWebsites||a.commaSeparatedWebsites,e=d?d.call(a,a.Websites,f):y.call(a,"commaSeparatedWebsites",a.Websites,f),(e||0===e)&&(g+=e),g+="</p>\n	"}function h(a,b){var d,e="";return e+="\n		",d=c["if"].call(a,a.Exhibitions,{hash:{},inverse:z.noop,fn:z.program(6,i,b),data:b}),(d||0===d)&&(e+=d),e+="\n		",d=c["if"].call(a,a.Workshops,{hash:{},inverse:z.noop,fn:z.program(8,j,b),data:b}),(d||0===d)&&(e+=d),e+="\n		",d=c["if"].call(a,a.Excursions,{hash:{},inverse:z.noop,fn:z.program(10,k,b),data:b}),(d||0===d)&&(e+=d),e+="\n		",d=c["if"].call(a,a.combinedProjects,{hash:{},inverse:z.noop,fn:z.program(12,l,b),data:b}),(d||0===d)&&(e+=d),e+="\n	"}function i(a,b){var d,e,f;return f={hash:{},data:b},d=c.portfoliolist||a.portfoliolist,e=d?d.call(a,a.Exhibitions,"Exhibition",f):y.call(a,"portfoliolist",a.Exhibitions,"Exhibition",f),e||0===e?e:""}function j(a,b){var d,e,f;return f={hash:{},data:b},d=c.portfoliolist||a.portfoliolist,e=d?d.call(a,a.Workshops,"Workshop",f):y.call(a,"portfoliolist",a.Workshops,"Workshop",f),e||0===e?e:""}function k(a,b){var d,e,f;return f={hash:{},data:b},d=c.portfoliolist||a.portfoliolist,e=d?d.call(a,a.Excursions,"Excursion",f):y.call(a,"portfoliolist",a.Excursions,"Excursion",f),e||0===e?e:""}function l(a,b){var d,e,f;return f={hash:{},data:b},d=c.portfoliolist||a.portfoliolist,e=d?d.call(a,a.combinedProjects,"Project",f):y.call(a,"portfoliolist",a.combinedProjects,"Project",f),e||0===e?e:""}function m(a,b){var d,e="";return e+="\n		",d=c["if"].call(a,a.combinedProjects,{hash:{},inverse:z.noop,fn:z.program(12,l,b),data:b}),(d||0===d)&&(e+=d),e+="\n		",d=c["if"].call(a,a.Workshops,{hash:{},inverse:z.noop,fn:z.program(8,j,b),data:b}),(d||0===d)&&(e+=d),e+="\n		",d=c["if"].call(a,a.Excursions,{hash:{},inverse:z.noop,fn:z.program(10,k,b),data:b}),(d||0===d)&&(e+=d),e+="\n	"}function n(a,b){var d,e="";return e+="\n		",d=c["if"].call(a,a.Exhibitions,{hash:{},inverse:z.noop,fn:z.program(6,i,b),data:b}),(d||0===d)&&(e+=d),e+="\n		",d=c["if"].call(a,a.Workshops,{hash:{},inverse:z.noop,fn:z.program(8,j,b),data:b}),(d||0===d)&&(e+=d),e+="\n		",d=c["if"].call(a,a.combinedProjects,{hash:{},inverse:z.noop,fn:z.program(12,l,b),data:b}),(d||0===d)&&(e+=d),e+="\n	"}function o(a,b){var d,e="";return e+="\n		",d=c["if"].call(a,a.Exhibitions,{hash:{},inverse:z.noop,fn:z.program(6,i,b),data:b}),(d||0===d)&&(e+=d),e+="\n		",d=c["if"].call(a,a.Excursions,{hash:{},inverse:z.noop,fn:z.program(10,k,b),data:b}),(d||0===d)&&(e+=d),e+="\n		",d=c["if"].call(a,a.combinedProjects,{hash:{},inverse:z.noop,fn:z.program(12,l,b),data:b}),(d||0===d)&&(e+=d),e+="\n	"}function p(a,b){var d,e="";return e+="\n		<h4>Categories</h4>\n		<ul>\n		",d=c.each.call(a,a.Categories,{hash:{},inverse:z.noop,fn:z.program(21,q,b),data:b}),(d||0===d)&&(e+=d),e+="\n		</ul>\n	"}function q(a,b){var d,e="";return e+='\n			<li><a href="/portfolio/search/Category:',(d=c.Title)?d=d.call(a,{hash:{},data:b}):(d=a.Title,d=typeof d===x?d.apply(a):d),e+=A(d)+'/">',(d=c.Title)?d=d.call(a,{hash:{},data:b}):(d=a.Title,d=typeof d===x?d.apply(a):d),e+=A(d)+"</a></li>\n		"}function r(a,b){var d,e,f,g="";return g+="\n		",f={hash:{},data:b},d=c.personlist||a.personlist,e=d?d.call(a,a.Persons,f):y.call(a,"personlist",a.Persons,f),(e||0===e)&&(g+=e),g+="\n	"}function s(a,b){var d,e="";return e+="\n<script type=\"text/javascript\">\n	$(document).one('code:kickoff', function (e) {\n		",(d=c.Code)?d=d.call(a,{hash:{},data:b}):(d=a.Code,d=typeof d===x?d.apply(a):d),(d||0===d)&&(e+=d),e+="\n\n		e.stopImmediatePropagation();\n	});\n</script>\n"}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var t,u,v,w="",x="function",y=c.helperMissing,z=this,A=this.escapeExpression;return w+='<!-- article class="portfolio-detail" -->\n<header>\n	<h1>',(t=c.Title)?t=t.call(b,{hash:{},data:e}):(t=b.Title,t=typeof t===x?t.apply(b):t),w+=A(t)+"</h1>\n	<p>\n		",v={hash:{},data:e},t=c.nameSummary||b.nameSummary,u=t?t.call(b,b.Persons,v):y.call(b,"nameSummary",b.Persons,v),(u||0===u)&&(w+=u),w+="\n	</p>\n	<p>",v={hash:{},data:e},w+=A((t=c.niceDate||b.niceDate,t?t.call(b,b,!0,v):y.call(b,"niceDate",b,!0,v)))+"</p>\n	",v={hash:{},inverse:z.noop,fn:z.program(1,f,e),data:e},t=c.stringDiff||b.stringDiff,u=t?t.call(b,"Project",b.ClassName,v):y.call(b,"stringDiff","Project",b.ClassName,v),(u||0===u)&&(w+=u),w+="\n	",u=c["if"].call(b,b.Websites,{hash:{},inverse:z.noop,fn:z.program(3,g,e),data:e}),(u||0===u)&&(w+=u),w+="\n</header>\n<section>\n	",(u=c.MarkdownedText)?u=u.call(b,{hash:{},data:e}):(u=b.MarkdownedText,u=typeof u===x?u.apply(b):u),(u||0===u)&&(w+=u),w+="\n</section>\n<aside>\n	\n	",v={hash:{},inverse:z.noop,fn:z.program(5,h,e),data:e},t=c.stringCompare||b.stringCompare,u=t?t.call(b,"Project",b.ClassName,v):y.call(b,"stringCompare","Project",b.ClassName,v),(u||0===u)&&(w+=u),w+="\n\n	",v={hash:{},inverse:z.noop,fn:z.program(14,m,e),data:e},t=c.stringCompare||b.stringCompare,u=t?t.call(b,"Exhibition",b.ClassName,v):y.call(b,"stringCompare","Exhibition",b.ClassName,v),(u||0===u)&&(w+=u),w+="\n\n	",v={hash:{},inverse:z.noop,fn:z.program(16,n,e),data:e},t=c.stringCompare||b.stringCompare,u=t?t.call(b,"Excursion",b.ClassName,v):y.call(b,"stringCompare","Excursion",b.ClassName,v),(u||0===u)&&(w+=u),w+="\n\n	",v={hash:{},inverse:z.noop,fn:z.program(18,o,e),data:e},t=c.stringCompare||b.stringCompare,u=t?t.call(b,"Workshop",b.ClassName,v):y.call(b,"stringCompare","Workshop",b.ClassName,v),(u||0===u)&&(w+=u),w+="\n\n	<hr/>\n\n	",u=c["if"].call(b,b.Categories,{hash:{},inverse:z.noop,fn:z.program(20,p,e),data:e}),(u||0===u)&&(w+=u),w+="\n\n	",u=c["if"].call(b,b.IsGroup,{hash:{},inverse:z.noop,fn:z.program(23,r,e),data:e}),(u||0===u)&&(w+=u),w+="\n</aside>\n\n<!--",u=c["if"].call(b,b.Code,{hash:{},inverse:z.noop,fn:z.program(25,s,e),data:e}),(u||0===u)&&(w+=u),w+="-->\n\n<!-- /article -->"}),this.JST["app/templates/searchbar.html"]=Handlebars.template(function(a,b,c,d,e){function f(a,b){var d,e="";return e+="\n		<ul>\n			",d=c.each.call(a,a.Categories,{hash:{},inverse:l.noop,fn:l.program(2,g,b),data:b}),(d||0===d)&&(e+=d),e+="\n		</ul>\n	"}function g(a,b){var d,e="";return e+='\n				<li><a href="#" data-title="',(d=c.Title)?d=d.call(a,{hash:{},data:b}):(d=a.Title,d=typeof d===j?d.apply(a):d),e+=k(d)+'" data-id="',(d=c.ID)?d=d.call(a,{hash:{},data:b}):(d=a.ID,d=typeof d===j?d.apply(a):d),e+=k(d)+'">',(d=c.Title)?d=d.call(a,{hash:{},data:b}):(d=a.Title,d=typeof d===j?d.apply(a):d),e+=k(d)+"</a></li>\n			"}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var h,i="",j="function",k=this.escapeExpression,l=this;return i+='<!-- div id="projectsearch" -->\n<section class="category-filter active">\n	',h=c["if"].call(b,b.Categories,{hash:{},inverse:l.noop,fn:l.program(1,f,e),data:e}),(h||0===h)&&(i+=h),i+='\n	<a href="#" data-bypass class="btn">Switch to Search</a>	\n</section>\n<section class="search">\n  <div class="visualsearch"></div>\n  <a href="#" data-bypass class="btn">Switch to Filters</a>\n</section>\n<!-- /div -->'}),this.JST["app/templates/security/create-project.html"]=Handlebars.template(function(a,b,c,d,e){return this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{},'<ul class="project-type-list">\n	<li>\n		<a href="#" data-type="Excursion" class="excursion">Excursion</a>\n	</li>\n\n	<li>\n		<a href="#" data-type="Exhibition" class="exhibition">Exhibition</a>\n	</li>\n\n	<li>\n		<a href="#" data-type="Project" class="project">Project</a>\n	</li>\n\n	<li>\n		<a href="#" data-type="Workshop" class="workshop">Workshop</a>\n	</li>\n</ul>\n\n<form class="create-project">\n	<input type="text" name="title" placeholder="Title" autocomplete="off" />\n	<button class="btn" type="submit">Create</button>\n	<div class="form-error">Foo bar!</div>\n</form>\n'}),this.JST["app/templates/security/editor-project-container.html"]=Handlebars.template(function(a,b,c,d,e){return this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{},'<section class="editor-project-preview overview active">\n</section>\n\n<section class="editor-project-main detail">\n</section>\n'}),this.JST["app/templates/security/editor-project-main.html"]=Handlebars.template(function(a,b,c,d,e){function f(a,b){var d,e="";return e+="\n			",d=c["with"].call(a,a.CurrentMemberPerson,{hash:{},inverse:v.noop,fn:v.program(2,g,b),data:b}),(d||0===d)&&(e+=d),e+="\n		"}function g(a,b){var d,e="";return e+="\n				",(d=c.FirstName)?d=d.call(a,{hash:{},data:b}):(d=a.FirstName,d=typeof d===t?d.apply(a):d),e+=u(d)+" ",(d=c.Surname)?d=d.call(a,{hash:{},data:b}):(d=a.Surname,d=typeof d===t?d.apply(a):d),e+=u(d)+"\n			"}function h(){return"\n		Group project\n	"}function i(a,b){var d,e,f,g="";return g+="\n		",f={hash:{},data:b},d=c.nameSummary||a.nameSummary,e=d?d.call(a,a.Persons,f):w.call(a,"nameSummary",a.Persons,f),(e||0===e)&&(g+=e),g+="\n	"}function j(){return'\n		<h1>Categories</h1>\n		<ul data-editor-type="select-list" data-editor-name="Category" data-editor-placeholder="Add..."></ul>\n	'}function k(){return'\n		<h1>Exhibitions</h1>\n		<ul data-editor-type="select-list" data-editor-name="Exhibition" data-editor-placeholder="Add…"></ul>\n	'}function l(){return'\n		<h1>Workshops</h1>\n		<ul data-editor-type="select-list" data-editor-name="Workshop" data-editor-placeholder="Add…"></ul>\n	'}function m(){return'\n		<h1>Excursions</h1>\n		<ul data-editor-type="select-list" data-editor-name="Excursion" data-editor-placeholder="Add…"></ul>\n	'}function n(){return'\n		<h1>Blocked editors</h1>\n		<ul data-editor-type="select-list-confirm" data-editor-name="BlockedEditors" data-editor-placeholder="Add…" data-editor-confirm="Blocked Editors confirm text"></ul>\n	'}function o(){return'\n		<h1>Additional editors</h1>\n		<ul data-editor-type="select-list" data-editor-name="Editors" data-editor-placeholder="Add…" data-editor-confirm="Editors confirm text"></ul>\n	'}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var p,q,r,s="",t="function",u=this.escapeExpression,v=this,w=c.helperMissing;return s+='<!-- article -->\n<header data-editor-scope="\\ProjectMain">\n	<h1 data-editor-type="inline" data-editor-name="Title" data-editor-placeholder="Title">',(p=c.Title)?p=p.call(b,{hash:{},data:e}):(p=b.Title,p=typeof p===t?p.apply(b):p),s+=u(p)+'</h1>\n	<div class="persons">\n		',p=c["if"].call(b,b.CurrentMemberPerson,{hash:{},inverse:v.noop,fn:v.program(1,f,e),data:e}),(p||0===p)&&(s+=p),s+='\n		<div data-editor-type="select-person" data-editor-name="Person" data-editor-placeholder="Add Collaborators…"></div>\n	</div>\n	\n	<!--<p>\n	',p=c["if"].call(b,b.IsGroup,{hash:{},inverse:v.program(6,i,e),fn:v.program(4,h,e),data:e}),(p||0===p)&&(s+=p),s+='\n	</p>-->\n</header>\n<section data-editor-scope="\\ProjectMain">\n\n	<div data-editor-type="markdown-split" data-editor-name="Text" data-editor-options=\'{"customParsers": {"images": "ImageMarkdownParser", "embed": "OEmbedMarkdownParser"}}\'>',(p=c.Text)?p=p.call(b,{hash:{},data:e}):(p=b.Text,p=typeof p===t?p.apply(b):p),s+=u(p)+'</div>\n\n</section>\n<aside data-editor-scope="\\ProjectMain">\n	<div>\n		<h3>Websites</h3>\n			<ul class="websites">\n			</ul>\n			<button data-editor-type="modal" data-editor-name="Website" data-editor-fields=\'{"Title": {"type": "text"}, "Link": {"type": "text"}}\' class="btn" data-editor-placeholder="Add Website">Add Website</button>\n	</div>\n\n	',r={hash:{},inverse:v.noop,fn:v.program(8,j,e),data:e},p=c.stringCompare||b.stringCompare,q=p?p.call(b,"Project",b.ClassName,r):w.call(b,"stringCompare","Project",b.ClassName,r),(q||0===q)&&(s+=q),s+='\n\n	<h1>Projects</h1>\n	<ul data-editor-type="select-list" data-editor-name="Project" data-editor-placeholder="Add…"></ul>\n\n	',r={hash:{},inverse:v.noop,fn:v.program(10,k,e),data:e},p=c.stringDiff||b.stringDiff,q=p?p.call(b,"Exhibition",b.ClassName,r):w.call(b,"stringDiff","Exhibition",b.ClassName,r),(q||0===q)&&(s+=q),s+="\n\n	",r={hash:{},inverse:v.noop,fn:v.program(12,l,e),data:e},p=c.stringDiff||b.stringDiff,q=p?p.call(b,"Workshop",b.ClassName,r):w.call(b,"stringDiff","Workshop",b.ClassName,r),(q||0===q)&&(s+=q),s+="\n\n	",r={hash:{},inverse:v.noop,fn:v.program(14,m,e),data:e},p=c.stringDiff||b.stringDiff,q=p?p.call(b,"Excursion",b.ClassName,r):w.call(b,"stringDiff","Excursion",b.ClassName,r),(q||0===q)&&(s+=q),s+="\n\n	<hr />\n\n	",r={hash:{},inverse:v.program(18,o,e),fn:v.program(16,n,e),data:e},p=c.stringCompare||b.stringCompare,q=p?p.call(b,"Project",b.ClassName,r):w.call(b,"stringCompare","Project",b.ClassName,r),(q||0===q)&&(s+=q),s+="\n\n</aside>\n\n<!-- /article -->"}),this.JST["app/templates/security/editor-project-preview.html"]=Handlebars.template(function(a,b,c,d,e){function f(){return"filled"}function g(a,b){var d,e,f="";return f+="\n		",e=c["with"].call(a,(d=a.PreviewImage,d=null==d||d===!1?d:d.Urls,null==d||d===!1?d:d._320),{hash:{},inverse:r.noop,fn:r.program(4,h,b),data:b}),(e||0===e)&&(f+=e),f+="\n	"}function h(a,b){var d,e="";return e+='\n			<img src="',(d=c.Url)?d=d.call(a,{hash:{},data:b}):(d=a.Url,d=typeof d===p?d.apply(a):d),e+=q(d)+'" />\n		'}function i(a,b){var d,e,f="";return f+='\n			<p><span data-editor-type="date" data-editor-name="Date" data-editor-options=\'{ "contentFormat": "M Y"}\'>',e={hash:{},data:b},f+=q((d=c.niceDate||a.niceDate,d?d.call(a,a,e):s.call(a,"niceDate",a,e)))+"</span></p>\n		"}function j(a,b){var d,e,f="";return f+='\n			<p>\n				<span data-editor-type="date" data-editor-name="StartDate" data-editor-options=\'{"format": "d. M Y"}\'>',(d=c.StartDate)?d=d.call(a,{hash:{},data:b}):(d=a.StartDate,d=typeof d===p?d.apply(a):d),f+=q(d)+'</span> -\n				<span data-editor-type="date" data-editor-name="EndDate" data-editor-options=\'{"format": "d. M Y"}\'>',(d=c.EndDate)?d=d.call(a,{hash:{},data:b}):(d=a.EndDate,d=typeof d===p?d.apply(a):d),f+=q(d)+'</span>\n			</p>\n			<p class="nice-date">',e={hash:{},data:b},f+=q((d=c.niceDate||a.niceDate,d?d.call(a,a,e):s.call(a,"niceDate",a,e)))+"</p>\n		"}function k(a,b){var d,e="";return e+='\n			<p><span data-editor-type="inline" data-editor-name="Space" data-editor-placeholder="Space">',(d=c.Space)?d=d.call(a,{hash:{},data:b}):(d=a.Space,d=typeof d===p?d.apply(a):d),e+=q(d)+'</span></p>\n			<p><span data-editor-type="inline" data-editor-name="Location" data-editor-placeholder="Location">',(d=c.Location)?d=d.call(a,{hash:{},data:b}):(d=a.Location,d=typeof d===p?d.apply(a):d),e+=q(d)+"</span></p>\n		"}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var l,m,n,o="",p="function",q=this.escapeExpression,r=this,s=c.helperMissing;return o+='<div class="preview-image ',l=c["if"].call(b,b.PreviewImage,{hash:{},inverse:r.noop,fn:r.program(1,f,e),data:e}),(l||0===l)&&(o+=l),o+='">\n	',l=c["if"].call(b,b.PreviewImage,{hash:{},inverse:r.noop,fn:r.program(3,g,e),data:e}),(l||0===l)&&(o+=l),o+='\n</div>\n<div class="meta" data-editor-scope="\\ProjectPreview">\n	<header>\n		<h1 data-editor-type="inline" data-editor-name="Title" data-editor-placeholder="Title">',(l=c.Title)?l=l.call(b,{hash:{},data:e}):(l=b.Title,l=typeof l===p?l.apply(b):l),o+=q(l)+"</h1>\n		",n={hash:{},inverse:r.program(8,j,e),fn:r.program(6,i,e),data:e},l=c.stringCompare||b.stringCompare,m=l?l.call(b,"Project",b.ClassName,n):s.call(b,"stringCompare","Project",b.ClassName,n),(m||0===m)&&(o+=m),o+="\n		",n={hash:{},inverse:r.noop,fn:r.program(10,k,e),data:e},l=c.stringDiff||b.stringDiff,m=l?l.call(b,"Project",b.ClassName,n):s.call(b,"stringDiff","Project",b.ClassName,n),(m||0===m)&&(o+=m),o+='\n	</header>\n	<p data-editor-type="markdown" data-editor-name="TeaserText" data-editor-placeholder="Teaser" data-editor-options=\'{"customParsers": {}, "position": {"my": "right top", "at": "right bottom", "adjust": {"x": 0, "y": 10}}, "repositionOnChange": true, "charlimit": 156}\'>',(m=c.TeaserText)?m=m.call(b,{hash:{},data:e}):(m=b.TeaserText,m=typeof m===p?m.apply(b):m),o+=q(m)+"</p>\n</div>"}),this.JST["app/templates/security/editor-sidebar-gallery-image.html"]=Handlebars.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g="",h="function",i=this.escapeExpression;return g+='<a href="#" data-bypass="" data-md-tag="\\[img ',(f=c.id)?f=f.call(b,{hash:{},data:e}):(f=b.id,f=typeof f===h?f.apply(b):f),g+=i(f)+'\\]" data-id="',(f=c.id)?f=f.call(b,{hash:{},data:e}):(f=b.id,f=typeof f===h?f.apply(b):f),g+=i(f)+'"><img src="',(f=c.url)?f=f.call(b,{hash:{},data:e}):(f=b.url,f=typeof f===h?f.apply(b):f),g+=i(f)+'" alt="" data-id="',(f=c.id)?f=f.call(b,{hash:{},data:e}):(f=b.id,f=typeof f===h?f.apply(b):f),g+=i(f)+'" data-md-tag="\\[img ',(f=c.id)?f=f.call(b,{hash:{},data:e}):(f=b.id,f=typeof f===h?f.apply(b):f),g+=i(f)+'\\]"></a>'}),this.JST["app/templates/security/editor-sidebar-gallery.html"]=Handlebars.template(function(a,b,c,d,e){function f(a,b){var d,e="";return e+='\n		<select class="filter">\n			<option value="">--- Choose Project ---</option>\n			',d=c.each.call(a,a.Projects,{hash:{},inverse:n.noop,fn:n.program(2,g,b),data:b}),(d||0===d)&&(e+=d),e+="\n		</select>\n	"}function g(a,b){var d,e="";return e+='\n				<option value="',(d=c.FilterID)?d=d.call(a,{hash:{},data:b}):(d=a.FilterID,d=typeof d===l?d.apply(a):d),e+=m(d)+'">',(d=c.Title)?d=d.call(a,{hash:{},data:b}):(d=a.Title,d=typeof d===l?d.apply(a):d),e+=m(d)+"</option>\n			"}function h(a,b){var d,e="";return e+="\n		",d=c.each.call(a,a.Projects,{hash:{},inverse:n.noop,fn:n.program(5,i,b),data:b}),(d||0===d)&&(e+=d),e+="\n	"}function i(a,b){var d,e="";return e+="\n			<header>\n				<h2>",(d=c.Title)?d=d.call(a,{hash:{},data:b}):(d=a.Title,d=typeof d===l?d.apply(a):d),e+=m(d)+'</h2>\n			</header>\n			<section data-filter-id="',(d=c.FilterID)?d=d.call(a,{hash:{},data:b}):(d=a.FilterID,d=typeof d===l?d.apply(a):d),e+=m(d)+'">\n				<ul class="image-list"></ul>\n					'+"\n			</section>\n		"}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var j,k="",l="function",m=this.escapeExpression,n=this;return k+='<div id="uploadzone"></div>\n<header class="editor-header">\n	<h1>Images</h1>\n	',j=c["if"].call(b,b.Projects,{hash:{},inverse:n.noop,fn:n.program(1,f,e),data:e}),(j||0===j)&&(k+=j),k+='\n</header>\n<section class="editor-sidebar-content scrollbox">\n	',j=c["if"].call(b,b.Projects,{hash:{},inverse:n.noop,fn:n.program(4,h,e),data:e}),(j||0===j)&&(k+=j),k+="\n</section>"}),this.JST["app/templates/security/editor-sidebar-person-image.html"]=Handlebars.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g="",h="function",i=this.escapeExpression;return g+='<a href="#" data-bypass data-id="',(f=c.id)?f=f.call(b,{hash:{},data:e}):(f=b.id,f=typeof f===h?f.apply(b):f),g+=i(f)+'"><img src="',(f=c.url)?f=f.call(b,{hash:{},data:e}):(f=b.url,f=typeof f===h?f.apply(b):f),g+=i(f)+'" alt=""></a>'}),this.JST["app/templates/security/editor-sidebar-project-item.html"]=Handlebars.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g="",h="function",i=this.escapeExpression;return g+='<a href="/secured/edit/',(f=c.UglyHash)?f=f.call(b,{hash:{},data:e}):(f=b.UglyHash,f=typeof f===h?f.apply(b):f),g+=i(f)+'/">',(f=c.Title)?f=f.call(b,{hash:{},data:e}):(f=b.Title,f=typeof f===h?f.apply(b):f),g+=i(f)+"</a>"}),this.JST["app/templates/security/editor-sidebar-user.html"]=Handlebars.template(function(a,b,c,d,e){function f(a){var b,c="";return c+='<img src="'+m((b=a.CurrentImage,b=null==b||b===!1?b:b.url,typeof b===l?b.apply(a):b))+'">'}function g(a,b){var d,e="";return e+="<h1>",d=c["with"].call(a,a.Person,{hash:{},inverse:n.noop,fn:n.program(4,h,b),data:b}),(d||0===d)&&(e+=d),e+="</h1>"}function h(a,b){var d,e="";return e+='<a href="/about/',(d=c.UrlSlug)?d=d.call(a,{hash:{},data:b}):(d=a.UrlSlug,d=typeof d===l?d.apply(a):d),e+=m(d)+'/">',(d=c.FirstName)?d=d.call(a,{hash:{},data:b}):(d=a.FirstName,d=typeof d===l?d.apply(a):d),e+=m(d)+" ",(d=c.Surname)?d=d.call(a,{hash:{},data:b}):(d=a.Surname,d=typeof d===l?d.apply(a):d),e+=m(d)+"</a>"}function i(a){var b,c="";return c+='<p class="email">'+m((b=a.Member,b=null==b||b===!1?b:b.Email,typeof b===l?b.apply(a):b))+"</p>"}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var j,k="",l="function",m=this.escapeExpression,n=this;return k+='<header class="editor-header hideable">\n	<div class="img" id="current-person-image">\n		',j=c["if"].call(b,b.CurrentImage,{hash:{},inverse:n.noop,fn:n.program(1,f,e),data:e}),(j||0===j)&&(k+=j),k+="\n	</div>\n	<hgroup>\n		",j=c["if"].call(b,b.Person,{hash:{},inverse:n.noop,fn:n.program(3,g,e),data:e}),(j||0===j)&&(k+=j),k+="\n\n		",j=c["if"].call(b,b.Member,{hash:{},inverse:n.noop,fn:n.program(6,i,e),data:e}),(j||0===j)&&(k+=j),k+='\n	</hgroup>\n</header>\n<section class="editor-sidebar-content scrollbox">\n	<header>\n		<h2>Person Images</h2>\n	</header>\n	<section>\n		<ul class="image-list">\n		</ul>\n	</section>\n\n	<header>\n		<h2>Projects</h2>\n	</header>\n	<section>\n		<ul class="project-list">\n		</ul>\n		<div>\n			<a class="btn" href="/secured/new/">Create Project</a>\n		</div>\n	</section>\n\n	<header>\n		<h2>Personal Information</h2>\n	</header>\n	<section class="meta-info" data-editor-scope="\\CurrentPerson">\n		<div id="bio">\n			<h3>Bio</h3>\n			<div data-editor-type="markdown" data-editor-name="Bio" data-editor-placeholder="your shitty life!" data-editor-options=\'{"customParsers":{}, "position":{"my": "right top", "at": "left top", "adjust": {"x": -24, "y": -15}}}\'>'+m((j=b.Person,j=null==j||j===!1?j:j.Bio,typeof j===l?j.apply(b):j))+'</div>\n		</div>\n		<div>\n			<h3>Phone</h3>\n			<p data-editor-type="inline" data-editor-name="Phone">'+m((j=b.Person,j=null==j||j===!1?j:j.Phone,typeof j===l?j.apply(b):j))+'</p>\n		</div>\n		<div>\n			<h3>Email</h3>\n			<p data-editor-type="inline" data-editor-name="Email">'+m((j=b.Person,j=null==j||j===!1?j:j.Email,typeof j===l?j.apply(b):j))+'</p>\n		</div>\n	</section>\n\n	<header>\n		<h2>Websites</h2>\n	</header>\n	<section class="meta-info" data-editor-scope="\\CurrentPerson">\n		<div>\n			<ul class="websites website-list">\n			</ul>\n			<a data-editor-type="modal" data-editor-name="Website" data-editor-fields=\'{"Title": {"type": "text"}, "Link": {"type": "text", "placeholder": "http://"}}\' data-editor-options=\'{"position":{"my": "right top", "at": "left top", "adjust": {"x": -24, "y": -20}}}\' class="btn" href="#" data-bypass data-editor-placeholder="Add Website"></a>\n		</div>\n	</section>\n\n	<header>\n		<h2>Settings</h2>\n	</header>\n	<section>\n		<form class="user-settings">\n			<input name="email" type="email" placeholder="Email" value="'+m((j=b.Member,j=null==j||j===!1?j:j.Email,typeof j===l?j.apply(b):j))+'" required>\n			<input name="password" type="password" placeholder="Password">\n			<input name="passwordconfirmed" type="password" placeholder="Confirm Password">\n\n			<button class="btn" type="submit">Update Settings</button>\n		</form>\n	</section>\n</section>'}),this.JST["app/templates/security/editor-sidebar.html"]=Handlebars.template(function(a,b,c,d,e){return this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{},'<nav>\n	<ul>\n		<li>\n			<a href="#" data-editor-sidebar-content="user" class="icon-user"><span>User</span></a>\n		</li>\n		<li>\n			<a href="/logout/" class="icon-logout"><span>Logout</span></a>\n		</li>\n	</ul>\n	<ul>\n		<li>\n			<a href="#" data-editor-sidebar-content="gallery" class="icon-editor"><span>Editor</span></a>\n		</li>\n		<li>\n			<a href="#" class="icon-switch"><span>Switch view</span></a>\n		</li>\n		<li>\n			<a href="#" class="icon-publish"><span>Publish</span></a>\n		</li>\n	</ul>\n</nav>\n\n<div id="editor-sidebar-spinner"></div>\n<div id="editor-sidebar-container"></div>'}),this.JST["app/templates/security/logging-out.html"]=Handlebars.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g="",h="function",i=this.escapeExpression;return g+='<div style="margin-top: 600px">\n	<p>Logging out <strong>',(f=c.Email)?f=f.call(b,{hash:{},data:e}):(f=b.Email,f=typeof f===h?f.apply(b):f),g+=i(f)+"</strong>...</p>\n</div>"}),this.JST["app/templates/security/login-form.html"]=Handlebars.template(function(a,b,c,d,e){function f(a,b){var d,e="";return e+="\n		<p>You are logged in as <strong>",(d=c.Email)?d=d.call(a,{hash:{},data:b}):(d=a.Email,d=typeof d===j?d.apply(a):d),e+=k(d)+'</strong>. <a href="/logout/">Logout?</a></p>\n	'}function g(){return"\n		<p>You are not logged in.</p>\n	"}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var h,i="",j="function",k=this.escapeExpression,l=this;return i+='<form style="margin-top:400px;">\n	<div><input type="text" name="email" placeholder="Email" /></div>\n	<div><input type="password" name="password" placeholder="Password" /></div>\n	<div><label><input type="checkbox" name="remember" /> Remember me next time</label></div>\n	<button class="doLogin" type="submit">Log in</button>\n	',h=c["if"].call(b,b.Email,{hash:{},inverse:l.program(3,g,e),fn:l.program(1,f,e),data:e}),(h||0===h)&&(i+=h),i+="\n</form>"}),this.JST["app/templates/website-list-item.html"]=Handlebars.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g="",h="function",i=this.escapeExpression;return g+='<!-- li class="website-item" -->\n<a href="',(f=c.Link)?f=f.call(b,{hash:{},data:e}):(f=b.Link,f=typeof f===h?f.apply(b):f),g+=i(f)+'">',(f=c.Title)?f=f.call(b,{hash:{},data:e}):(f=b.Title,f=typeof f===h?f.apply(b):f),g+=i(f)+"</a>\n<!-- /li -->"});