// Generated by CoffeeScript 1.3.1
(function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n=[].slice;e="2.0.0",b="pending",d="resolved",c="rejected",i=function(a,b){return a!=null?a.hasOwnProperty(b):void 0},k=function(a){return i(a,"length")&&i(a,"callee")},h=function(a){return k(a)?h(Array.prototype.slice.call(a)):Array.isArray(a)?a.reduce(function(a,b){return Array.isArray(b)?a.concat(h(b)):(a.push(b),a)},[]):[a]},f=function(a,b){return a<=0?b():function(){if(--a<1)return b.apply(this,arguments)}},l=function(a,b){return function(){var c;return c=[a].concat(Array.prototype.slice.call(arguments,0)),b.apply(this,c)}},g=function(a,b,c){var d,e,f,g,i;g=h(a),i=[];for(e=0,f=g.length;e<f;e++)d=g[e],i.push(d.call.apply(d,[c].concat(n.call(b))));return i},a=function(){var e,f,i,j,k;return k=b,i=[],j=[],f={},this.promise=function(e){var l,m;return e=e||{},e.state=function(){return k},m=function(a,c){return function(){return k===b&&c.push.apply(c,h(arguments)),a()&&g(arguments,f),e}},e.done=m(function(){return k===d},i),e.fail=m(function(){return k===c},j),e.always=function(){var a;return(a=e.done.apply(e,arguments)).fail.apply(a,arguments)},l=function(b,c){var d,f;return d=new a,f=function(a,b,c){return c?a(function(){return b(c.apply(null,h(arguments)))}):a(function(){return b.apply(null,h(arguments))})},f(e.done,d.resolve,b),f(e.fail,d.reject,c),d},e.pipe=l,e.then=l,e},this.promise(this),e=function(a,c,d){return function(){return k===b&&(k=a,f=arguments,g(c,f,d)),this}},this.resolve=e(d,i),this.reject=e(c,j),this.resolveWith=function(){var a,b;return b=arguments[0],a=2<=arguments.length?n.call(arguments,1):[],e(d,i,b).apply(null,a)},this.rejectWith=function(){var a,b;return b=arguments[0],a=2<=arguments.length?n.call(arguments,1):[],e(c,j,b).apply(null,a)},this},m=function(){var b,c,d,e,g,i,j;g=new a,c=h(arguments),c.length===1?c[0].done(function(){return g.resolve.apply(g,arguments)}):(e=[],d=f(c.length,function(){return g.resolve.apply(g,e)}),c.forEach(function(a,b){return a.done(function(){var a;return a=1<=arguments.length?n.call(arguments,0):[],e[b]=a,d()})}));for(i=0,j=c.length;i<j;i++)b=c[i],b.fail(g.reject);return g.promise()},j=function(b){return b.Deferred=function(){return new a},b.ajax=l(b.ajax,function(b,c){var d,e,f,g;return c==null&&(c={}),e=new a,d=function(a,b){return l(a,function(){var a,c;return c=arguments[0],a=2<=arguments.length?n.call(arguments,1):[],c&&c.apply(null,a),b.apply(null,a)})},c.success=d(c.success,e.resolve),c.error=d(c.error,e.reject),g=b(c),f=e.promise(),f.abort=function(){return g.abort()},f}),b.when=m},typeof exports!="undefined"?(exports.Deferred=function(){return new a},exports.when=m,exports.installInto=j):(this.Deferred=function(){return new a},this.Deferred.when=m,this.Deferred.installInto=j)}).call(this);