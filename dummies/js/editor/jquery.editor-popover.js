// Generated by CoffeeScript 1.6.2
"use strict";(function($) {
  var editorTypes, openPopovers;

  editorTypes = ['markdown', 'date'];
  openPopovers = {};
  return $('[contenteditable="true"][data-editor-type]').each(function(i, el) {
    var $el, api, close, elType, getContent, hideOpen, open, toggle;

    hideOpen = function() {
      return $.map(openPopovers, function(api, id) {
        api.hide();
        return delete openPopovers[api._id];
      });
    };
    open = function() {
      hideOpen();
      api.show();
      return openPopovers[api._id] = api;
    };
    close = function() {
      api.hide();
      return delete openPopovers[api._id];
    };
    toggle = function() {
      if (api.tooltip && $(api.tooltip).hasClass('qtip-focus')) {
        return close();
      } else {
        return open();
      }
    };
    getContent = function() {
      return "<h1>" + elType + " Editor</h1>";
    };
    $el = $(el);
    elType = $el.data('editor-type');
    if (-1 === $.inArray(elType, editorTypes)) {
      return;
    }
    $el.qtip({
      content: {
        text: getContent(),
        title: ''
      },
      position: {
        at: 'right center',
        my: 'left center',
        adjust: {
          x: 10,
          resize: true
        }
      },
      show: {
        event: false
      },
      hide: {
        event: false,
        fixed: true
      },
      style: {
        classes: 'editor-popover',
        tip: {
          width: 20,
          height: 10
        }
      }
    });
    api = $el.qtip('api');
    return $el.on('click', function() {
      return toggle();
    });
  });
})(jQuery);
